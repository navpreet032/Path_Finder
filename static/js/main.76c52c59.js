/*! For license information please see main.76c52c59.js.LICENSE.txt */
!function(){var e={191:function(e,t,n){"use strict";var i=n(791);var l="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useState,r=i.useEffect,o=i.useLayoutEffect,g=i.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!l(e,n)}catch(i){return!0}}var I="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=a({inst:{value:n,getSnapshot:t}}),l=i[0].inst,I=i[1];return o((function(){l.value=n,l.getSnapshot=t,s(l)&&I({inst:l})}),[e,n,t]),r((function(){return s(l)&&I({inst:l}),e((function(){s(l)&&I({inst:l})}))}),[e]),g(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:I},276:function(e,t,n){"use strict";e.exports=n(191)},345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,l=e[i];if(!(0<a(l,t)))break e;e[i]=t,e[n]=l,n=i}}function i(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,l=e.length,r=l>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,I=e[s];if(0>a(g,n))s<l&&0>a(I,g)?(e[i]=I,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<l&&0>a(I,n)))break e;e[i]=I,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],I=[],u=1,c=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=i(I);null!==t;){if(null===t.callback)l(I);else{if(!(t.startTime<=e))break;l(I),t.sortIndex=t.expirationTime,n(s,t)}t=i(I)}}function b(e){if(A=!1,f(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(I);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(q),q=-1),d=!0;var a=C;try{for(f(n),c=i(s);null!==c&&(!(c.expirationTime>n)||e&&!W());){var r=c.callback;if("function"===typeof r){c.callback=null,C=c.priorityLevel;var o=r(c.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?c.callback=o:c===i(s)&&l(s),f(n)}else l(s);c=i(s)}if(null!==c)var g=!0;else{var u=i(I);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{c=null,C=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,q=-1,x=5,w=-1;function W(){return!(t.unstable_now()-w<x)}function S(){if(null!==Z){var e=t.unstable_now();w=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof v)G=function(){v(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){q=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,l,a){var r=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?r+a:r:a=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:l,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>r?(e.sortIndex=a,n(I,e),null===i(s)&&e===i(I)&&(A?(p(q),q=-1):A=!0,X(b,a-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},545:function(e,t,n){"use strict";e.exports=n(345)},494:function(e){function t(e,t,n){var i,l,a,r,o;function g(){var s=Date.now()-r;s<t&&s>=0?i=setTimeout(g,t-s):(i=null,n||(o=e.apply(a,l),a=l=null))}null==t&&(t=100);var s=function(){a=this,l=arguments,r=Date.now();var s=n&&!i;return i||(i=setTimeout(g,t)),s&&(o=e.apply(a,l),a=l=null),o};return s.clear=function(){i&&(clearTimeout(i),i=null)},s.flush=function(){i&&(o=e.apply(a,l),a=l=null,clearTimeout(i),i=null)},s}t.debounce=t,e.exports=t},463:function(e,t,n){"use strict";var i=n(791),l=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function g(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(o[e]=t,e=0;e<t.length;e++)r.add(t[e])}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},d={};function h(e,t,n,i,l,a,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=r}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new h(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){A[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}function v(e,t,n,i){var l=A.hasOwnProperty(t)?A[t]:null;(null!==l?0!==l.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,l,i)&&(n=null),i||null===l?function(e){return!!u.call(d,e)||!u.call(C,e)&&(c.test(e)?d[e]=!0:(C[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=null===n?3!==l.type&&"":n:(t=l.attributeName,i=l.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(l=l.type)||4===l&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),A.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var f=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),y=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),V=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var X=Symbol.iterator;function Y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=X&&e[X]||e["@@iterator"])?e:null}var H,K=Object.assign;function F(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var N=!1;function z(e,t){if(!e||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var l=s.stack.split("\n"),a=i.stack.split("\n"),r=l.length-1,o=a.length-1;1<=r&&0<=o&&l[r]!==a[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==a[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==a[o]){var g="\n"+l[r].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=r&&0<=o);break}}}finally{N=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function M(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function L(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case G:return"Fragment";case y:return"Portal";case Z:return"Profiler";case B:return"StrictMode";case W:return"Suspense";case S:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case q:return(e._context.displayName||"Context")+".Provider";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}function _(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function T(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function E(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=E(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function U(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=E(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function D(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function P(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=T(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function O(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function j(e,t){O(e,t);var n=T(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,T(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&D(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&i&&(e[n].defaultSelected=!0)}else{for(n=""+T(n),t=null,l=0;l<e.length;l++){if(e[l].value===n)return e[l].selected=!0,void(i&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:T(n)}}function ae(e,t){var n=T(t.value),i=T(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,Ie,ue=(Ie=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return Ie(e,t)}))}:Ie);function ce(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ce.hasOwnProperty(e)&&Ce[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),l=he(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,l):e[n]=l}}Object.keys(Ce).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ce[t]=Ce[e]}))}));var me=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Ge=null,Be=null;function Ze(e){if(e=vl(e)){if("function"!==typeof ye)throw Error(a(280));var t=e.stateNode;t&&(t=bl(t),ye(e.stateNode,e.type,t))}}function qe(e){Ge?Be?Be.push(e):Be=[e]:Ge=e}function xe(){if(Ge){var e=Ge,t=Be;if(Be=Ge=null,Ze(e),t)for(e=0;e<t.length;e++)Ze(t[e])}}function we(e,t){return e(t)}function We(){}var Se=!1;function Re(e,t,n){if(Se)return e(t,n);Se=!0;try{return we(e,t,n)}finally{Se=!1,(null!==Ge||null!==Be)&&(We(),xe())}}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var i=bl(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var ke=!1;if(I)try{var Xe={};Object.defineProperty(Xe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Xe,Xe),window.removeEventListener("test",Xe,Xe)}catch(Ie){ke=!1}function Ye(e,t,n,i,l,a,r,o,g){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(I){this.onError(I)}}var He=!1,Ke=null,Fe=!1,Ne=null,ze={onError:function(e){He=!0,Ke=e}};function Me(e,t,n,i,l,a,r,o,g){He=!1,Ke=null,Ye.apply(ze,arguments)}function Le(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function _e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Te(e){if(Le(e)!==e)throw Error(a(188))}function Ee(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Le(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var l=n.return;if(null===l)break;var r=l.alternate;if(null===r){if(null!==(i=l.return)){n=i;continue}break}if(l.child===r.child){for(r=l.child;r;){if(r===n)return Te(l),e;if(r===i)return Te(l),t;r=r.sibling}throw Error(a(188))}if(n.return!==i.return)n=l,i=r;else{for(var o=!1,g=l.child;g;){if(g===n){o=!0,n=l,i=r;break}if(g===i){o=!0,i=l,n=r;break}g=g.sibling}if(!o){for(g=r.child;g;){if(g===n){o=!0,n=r,i=l;break}if(g===i){o=!0,i=r,n=l;break}g=g.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ue=l.unstable_scheduleCallback,De=l.unstable_cancelCallback,Qe=l.unstable_shouldYield,Pe=l.unstable_requestPaint,Oe=l.unstable_now,je=l.unstable_getCurrentPriorityLevel,$e=l.unstable_ImmediatePriority,et=l.unstable_UserBlockingPriority,tt=l.unstable_NormalPriority,nt=l.unstable_LowPriority,it=l.unstable_IdlePriority,lt=null,at=null;var rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/gt|0)|0},ot=Math.log,gt=Math.LN2;var st=64,It=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,l=e.suspendedLanes,a=e.pingedLanes,r=268435455&n;if(0!==r){var o=r&~l;0!==o?i=ut(o):0!==(a&=r)&&(i=ut(a))}else 0!==(r=n&~l)?i=ut(r):0!==a&&(i=ut(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&l)&&((l=i&-i)>=(a=t&-t)||16===l&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)l=1<<(n=31-rt(t)),i|=e[n],t&=~l;return i}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=st;return 0===(4194240&(st<<=1))&&(st=64),e}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-rt(n),l=1<<i;l&t|e[i]&t&&(e[i]|=t),n&=~l}}var vt=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,yt,Gt,Bt,Zt,qt=!1,xt=[],wt=null,Wt=null,St=null,Rt=new Map,Vt=new Map,kt=[],Xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yt(e,t){switch(e){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(t.pointerId)}}function Ht(e,t,n,i,l,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[l]},null!==t&&(null!==(t=vl(t))&&yt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==l&&-1===t.indexOf(l)&&t.push(l),e)}function Kt(e){var t=pl(e.target);if(null!==t){var n=Le(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=_e(n)))return e.blockedOn=t,void Zt(e.priority,(function(){Gt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vl(n))&&yt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);fe=i,n.target.dispatchEvent(i),fe=null,t.shift()}return!0}function Nt(e,t,n){Ft(e)&&n.delete(t)}function zt(){qt=!1,null!==wt&&Ft(wt)&&(wt=null),null!==Wt&&Ft(Wt)&&(Wt=null),null!==St&&Ft(St)&&(St=null),Rt.forEach(Nt),Vt.forEach(Nt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,qt||(qt=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,zt)))}function Lt(e){function t(t){return Mt(t,e)}if(0<xt.length){Mt(xt[0],e);for(var n=1;n<xt.length;n++){var i=xt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==wt&&Mt(wt,e),null!==Wt&&Mt(Wt,e),null!==St&&Mt(St,e),Rt.forEach(t),Vt.forEach(t),n=0;n<kt.length;n++)(i=kt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Kt(n),null===n.blockedOn&&kt.shift()}var _t=f.ReactCurrentBatchConfig,Tt=!0;function Et(e,t,n,i){var l=vt,a=_t.transition;_t.transition=null;try{vt=1,Ut(e,t,n,i)}finally{vt=l,_t.transition=a}}function Jt(e,t,n,i){var l=vt,a=_t.transition;_t.transition=null;try{vt=4,Ut(e,t,n,i)}finally{vt=l,_t.transition=a}}function Ut(e,t,n,i){if(Tt){var l=Qt(e,t,n,i);if(null===l)Ti(e,t,i,Dt,n),Yt(e,i);else if(function(e,t,n,i,l){switch(t){case"focusin":return wt=Ht(wt,e,t,n,i,l),!0;case"dragenter":return Wt=Ht(Wt,e,t,n,i,l),!0;case"mouseover":return St=Ht(St,e,t,n,i,l),!0;case"pointerover":var a=l.pointerId;return Rt.set(a,Ht(Rt.get(a)||null,e,t,n,i,l)),!0;case"gotpointercapture":return a=l.pointerId,Vt.set(a,Ht(Vt.get(a)||null,e,t,n,i,l)),!0}return!1}(l,e,t,n,i))i.stopPropagation();else if(Yt(e,i),4&t&&-1<Xt.indexOf(e)){for(;null!==l;){var a=vl(l);if(null!==a&&bt(a),null===(a=Qt(e,t,n,i))&&Ti(e,t,i,Dt,n),a===l)break;l=a}null!==l&&i.stopPropagation()}else Ti(e,t,i,null,n)}}var Dt=null;function Qt(e,t,n,i){if(Dt=null,null!==(e=pl(e=be(i))))if(null===(t=Le(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=_e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dt=e,null}function Pt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Ot=null,jt=null,$t=null;function en(){if($t)return $t;var e,t,n=jt,i=n.length,l="value"in Ot?Ot.value:Ot.textContent,a=l.length;for(e=0;e<i&&n[e]===l[e];e++);var r=i-e;for(t=1;t<=r&&n[i-t]===l[a-t];t++);return $t=l.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function ln(){return!1}function an(e){function t(t,n,i,l,a){for(var r in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=l,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(l):l[r]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?nn:ln,this.isPropagationStopped=ln,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,on,gn,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},In=an(sn),un=K({},sn,{view:0,detail:0}),cn=an(un),Cn=K({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&"mousemove"===e.type?(rn=e.screenX-gn.screenX,on=e.screenY-gn.screenY):on=rn=0,gn=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=an(Cn),hn=an(K({},Cn,{dataTransfer:0})),An=an(K({},un,{relatedTarget:0})),mn=an(K({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=K({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(pn),fn=an(K({},sn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gn[e])&&!!t[e]}function Zn(){return Bn}var qn=K({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=an(qn),wn=an(K({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=an(K({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn})),Sn=an(K({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=K({},Cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vn=an(Rn),kn=[9,13,27,32],Xn=I&&"CompositionEvent"in window,Yn=null;I&&"documentMode"in document&&(Yn=document.documentMode);var Hn=I&&"TextEvent"in window&&!Yn,Kn=I&&(!Xn||Yn&&8<Yn&&11>=Yn),Fn=String.fromCharCode(32),Nn=!1;function zn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_n[e.type]:"textarea"===t}function En(e,t,n,i){qe(i),0<(t=Ji(t,"onChange")).length&&(n=new In("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Jn=null,Un=null;function Dn(e){Fi(e,0)}function Qn(e){if(U(fl(e)))return e}function Pn(e,t){if("change"===e)return t}var On=!1;if(I){var jn;if(I){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}jn=$n}else jn=!1;On=jn&&(!document.documentMode||9<document.documentMode)}function ti(){Jn&&(Jn.detachEvent("onpropertychange",ni),Un=Jn=null)}function ni(e){if("value"===e.propertyName&&Qn(Un)){var t=[];En(t,Un,e,be(e)),Re(Dn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Un=n,(Jn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function li(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Un)}function ai(e,t){if("click"===e)return Qn(t)}function ri(e,t){if("input"===e||"change"===e)return Qn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function gi(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var l=n[i];if(!u.call(t,l)||!oi(e[l],t[l]))return!1}return!0}function si(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ii(e,t){var n,i=si(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=si(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ci(){for(var e=window,t=D();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=D((e=t.contentWindow).document)}return t}function Ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function di(e){var t=ci(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&Ci(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(i.start,l);i=void 0===i.end?a:Math.min(i.end,l),!e.extend&&a>i&&(l=i,i=a,a=l),l=Ii(n,a);var r=Ii(n,i);l&&r&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hi=I&&"documentMode"in document&&11>=document.documentMode,Ai=null,mi=null,pi=null,vi=!1;function fi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==Ai||Ai!==D(i)||("selectionStart"in(i=Ai)&&Ci(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},pi&&gi(pi,i)||(pi=i,0<(i=Ji(mi,"onSelect")).length&&(t=new In("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ai)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},Gi={},Bi={};function Zi(e){if(Gi[e])return Gi[e];if(!yi[e])return e;var t,n=yi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Bi)return Gi[e]=n[t];return e}I&&(Bi=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);var qi=Zi("animationend"),xi=Zi("animationiteration"),wi=Zi("animationstart"),Wi=Zi("transitionend"),Si=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(e,t){Si.set(e,t),g(t,[e])}for(var ki=0;ki<Ri.length;ki++){var Xi=Ri[ki];Vi(Xi.toLowerCase(),"on"+(Xi[0].toUpperCase()+Xi.slice(1)))}Vi(qi,"onAnimationEnd"),Vi(xi,"onAnimationIteration"),Vi(wi,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(Wi,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function Ki(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,l,r,o,g,s){if(Me.apply(this,arguments),He){if(!He)throw Error(a(198));var I=Ke;He=!1,Ke=null,Fe||(Fe=!0,Ne=I)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],l=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var r=i.length-1;0<=r;r--){var o=i[r],g=o.instance,s=o.currentTarget;if(o=o.listener,g!==a&&l.isPropagationStopped())break e;Ki(l,o,s),a=g}else for(r=0;r<i.length;r++){if(g=(o=i[r]).instance,s=o.currentTarget,o=o.listener,g!==a&&l.isPropagationStopped())break e;Ki(l,o,s),a=g}}}if(Fe)throw e=Ne,Fe=!1,Ne=null,e}function Ni(e,t){var n=t[hl];void 0===n&&(n=t[hl]=new Set);var i=e+"__bubble";n.has(i)||(_i(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),_i(n,e,i,t)}var Mi="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[Mi]){e[Mi]=!0,r.forEach((function(t){"selectionchange"!==t&&(Hi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mi]||(t[Mi]=!0,zi("selectionchange",!1,t))}}function _i(e,t,n,i){switch(Pt(t)){case 1:var l=Et;break;case 4:l=Jt;break;default:l=Ut}n=l.bind(null,t,n,e),l=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(l=!0),i?void 0!==l?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):void 0!==l?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ti(e,t,n,i,l){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var r=i.tag;if(3===r||4===r){var o=i.stateNode.containerInfo;if(o===l||8===o.nodeType&&o.parentNode===l)break;if(4===r)for(r=i.return;null!==r;){var g=r.tag;if((3===g||4===g)&&((g=r.stateNode.containerInfo)===l||8===g.nodeType&&g.parentNode===l))return;r=r.return}for(;null!==o;){if(null===(r=pl(o)))return;if(5===(g=r.tag)||6===g){i=a=r;continue e}o=o.parentNode}}i=i.return}Re((function(){var i=a,l=be(n),r=[];e:{var o=Si.get(e);if(void 0!==o){var g=In,s=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":g=xn;break;case"focusin":s="focus",g=An;break;case"focusout":s="blur",g=An;break;case"beforeblur":case"afterblur":g=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Wn;break;case qi:case xi:case wi:g=mn;break;case Wi:g=Sn;break;case"scroll":g=cn;break;case"wheel":g=Vn;break;case"copy":case"cut":case"paste":g=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wn}var I=0!==(4&t),u=!I&&"scroll"===e,c=I?null!==o?o+"Capture":null:o;I=[];for(var C,d=i;null!==d;){var h=(C=d).stateNode;if(5===C.tag&&null!==h&&(C=h,null!==c&&(null!=(h=Ve(d,c))&&I.push(Ei(d,h,C)))),u)break;d=d.return}0<I.length&&(o=new g(o,s,null,n,l),r.push({event:o,listeners:I}))}}if(0===(7&t)){if(g="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===fe||!(s=n.relatedTarget||n.fromElement)||!pl(s)&&!s[dl])&&(g||o)&&(o=l.window===l?l:(o=l.ownerDocument)?o.defaultView||o.parentWindow:window,g?(g=i,null!==(s=(s=n.relatedTarget||n.toElement)?pl(s):null)&&(s!==(u=Le(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(g=null,s=i),g!==s)){if(I=dn,h="onMouseLeave",c="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(I=wn,h="onPointerLeave",c="onPointerEnter",d="pointer"),u=null==g?o:fl(g),C=null==s?o:fl(s),(o=new I(h,d+"leave",g,n,l)).target=u,o.relatedTarget=C,h=null,pl(l)===i&&((I=new I(c,d+"enter",s,n,l)).target=C,I.relatedTarget=u,h=I),u=h,g&&s)e:{for(c=s,d=0,C=I=g;C;C=Ui(C))d++;for(C=0,h=c;h;h=Ui(h))C++;for(;0<d-C;)I=Ui(I),d--;for(;0<C-d;)c=Ui(c),C--;for(;d--;){if(I===c||null!==c&&I===c.alternate)break e;I=Ui(I),c=Ui(c)}I=null}else I=null;null!==g&&Di(r,o,g,I,!1),null!==s&&null!==u&&Di(r,u,s,I,!0)}if("select"===(g=(o=i?fl(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===g&&"file"===o.type)var A=Pn;else if(Tn(o))if(On)A=ri;else{A=li;var m=ii}else(g=o.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(A=ai);switch(A&&(A=A(e,i))?En(r,A,n,l):(m&&m(e,o,i),"focusout"===e&&(m=o._wrapperState)&&m.controlled&&"number"===o.type&&ee(o,"number",o.value)),m=i?fl(i):window,e){case"focusin":(Tn(m)||"true"===m.contentEditable)&&(Ai=m,mi=i,pi=null);break;case"focusout":pi=mi=Ai=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,fi(r,n,l);break;case"selectionchange":if(hi)break;case"keydown":case"keyup":fi(r,n,l)}var p;if(Xn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ln?zn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Kn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ln&&(p=en()):(jt="value"in(Ot=l)?Ot.value:Ot.textContent,Ln=!0)),0<(m=Ji(i,v)).length&&(v=new fn(v,e,null,n,l),r.push({event:v,listeners:m}),p?v.data=p:null!==(p=Mn(n))&&(v.data=p))),(p=Hn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Nn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!Xn&&zn(e,t)?(e=en(),$t=jt=Ot=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ji(i,"onBeforeInput")).length&&(l=new fn("onBeforeInput","beforeinput",null,n,l),r.push({event:l,listeners:i}),l.data=p))}Fi(r,t)}))}function Ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ji(e,t){for(var n=t+"Capture",i=[];null!==e;){var l=e,a=l.stateNode;5===l.tag&&null!==a&&(l=a,null!=(a=Ve(e,n))&&i.unshift(Ei(e,a,l)),null!=(a=Ve(e,t))&&i.push(Ei(e,a,l))),e=e.return}return i}function Ui(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Di(e,t,n,i,l){for(var a=t._reactName,r=[];null!==n&&n!==i;){var o=n,g=o.alternate,s=o.stateNode;if(null!==g&&g===i)break;5===o.tag&&null!==s&&(o=s,l?null!=(g=Ve(n,a))&&r.unshift(Ei(n,g,o)):l||null!=(g=Ve(n,a))&&r.push(Ei(n,g,o))),n=n.return}0!==r.length&&e.push({event:t,listeners:r})}var Qi=/\r\n?/g,Pi=/\u0000|\uFFFD/g;function Oi(e){return("string"===typeof e?e:""+e).replace(Qi,"\n").replace(Pi,"")}function ji(e,t,n){if(t=Oi(t),Oi(e)!==t&&n)throw Error(a(425))}function $i(){}var el=null,tl=null;function nl(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var il="function"===typeof setTimeout?setTimeout:void 0,ll="function"===typeof clearTimeout?clearTimeout:void 0,al="function"===typeof Promise?Promise:void 0,rl="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof al?function(e){return al.resolve(null).then(e).catch(ol)}:il;function ol(e){setTimeout((function(){throw e}))}function gl(e,t){var n=t,i=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&8===l.nodeType)if("/$"===(n=l.data)){if(0===i)return e.removeChild(l),void Lt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=l}while(n);Lt(t)}function sl(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Il(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ul=Math.random().toString(36).slice(2),cl="__reactFiber$"+ul,Cl="__reactProps$"+ul,dl="__reactContainer$"+ul,hl="__reactEvents$"+ul,Al="__reactListeners$"+ul,ml="__reactHandles$"+ul;function pl(e){var t=e[cl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dl]||n[cl]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Il(e);null!==e;){if(n=e[cl])return n;e=Il(e)}return t}n=(e=n).parentNode}return null}function vl(e){return!(e=e[cl]||e[dl])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function fl(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bl(e){return e[Cl]||null}var yl=[],Gl=-1;function Bl(e){return{current:e}}function Zl(e){0>Gl||(e.current=yl[Gl],yl[Gl]=null,Gl--)}function ql(e,t){Gl++,yl[Gl]=e.current,e.current=t}var xl={},wl=Bl(xl),Wl=Bl(!1),Sl=xl;function Rl(e,t){var n=e.type.contextTypes;if(!n)return xl;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in n)a[l]=t[l];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Vl(e){return null!==(e=e.childContextTypes)&&void 0!==e}function kl(){Zl(Wl),Zl(wl)}function Xl(e,t,n){if(wl.current!==xl)throw Error(a(168));ql(wl,t),ql(Wl,n)}function Yl(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var l in i=i.getChildContext())if(!(l in t))throw Error(a(108,_(e)||"Unknown",l));return K({},n,i)}function Hl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xl,Sl=wl.current,ql(wl,e),ql(Wl,Wl.current),!0}function Kl(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Yl(e,t,Sl),i.__reactInternalMemoizedMergedChildContext=e,Zl(Wl),Zl(wl),ql(wl,e)):Zl(Wl),ql(Wl,n)}var Fl=null,Nl=!1,zl=!1;function Ml(e){null===Fl?Fl=[e]:Fl.push(e)}function Ll(){if(!zl&&null!==Fl){zl=!0;var e=0,t=vt;try{var n=Fl;for(vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fl=null,Nl=!1}catch(l){throw null!==Fl&&(Fl=Fl.slice(e+1)),Ue($e,Ll),l}finally{vt=t,zl=!1}}return null}var _l=[],Tl=0,El=null,Jl=0,Ul=[],Dl=0,Ql=null,Pl=1,Ol="";function jl(e,t){_l[Tl++]=Jl,_l[Tl++]=El,El=e,Jl=t}function $l(e,t,n){Ul[Dl++]=Pl,Ul[Dl++]=Ol,Ul[Dl++]=Ql,Ql=e;var i=Pl;e=Ol;var l=32-rt(i)-1;i&=~(1<<l),n+=1;var a=32-rt(t)+l;if(30<a){var r=l-l%5;a=(i&(1<<r)-1).toString(32),i>>=r,l-=r,Pl=1<<32-rt(t)+l|n<<l|i,Ol=a+e}else Pl=1<<a|n<<l|i,Ol=e}function ea(e){null!==e.return&&(jl(e,1),$l(e,1,0))}function ta(e){for(;e===El;)El=_l[--Tl],_l[Tl]=null,Jl=_l[--Tl],_l[Tl]=null;for(;e===Ql;)Ql=Ul[--Dl],Ul[Dl]=null,Ol=Ul[--Dl],Ul[Dl]=null,Pl=Ul[--Dl],Ul[Dl]=null}var na=null,ia=null,la=!1,aa=null;function ra(e,t){var n=Rs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ia=sl(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ia=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ql?{id:Pl,overflow:Ol}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ia=null,!0);default:return!1}}function ga(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function sa(e){if(la){var t=ia;if(t){var n=t;if(!oa(e,t)){if(ga(e))throw Error(a(418));t=sl(n.nextSibling);var i=na;t&&oa(e,t)?ra(i,n):(e.flags=-4097&e.flags|2,la=!1,na=e)}}else{if(ga(e))throw Error(a(418));e.flags=-4097&e.flags|2,la=!1,na=e}}}function Ia(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!la)return Ia(e),la=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nl(e.type,e.memoizedProps)),t&&(t=ia)){if(ga(e))throw ca(),Error(a(418));for(;t;)ra(e,t),t=sl(t.nextSibling)}if(Ia(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ia=sl(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ia=null}}else ia=na?sl(e.stateNode.nextSibling):null;return!0}function ca(){for(var e=ia;e;)e=sl(e.nextSibling)}function Ca(){ia=na=null,la=!1}function da(e){null===aa?aa=[e]:aa.push(e)}var ha=f.ReactCurrentBatchConfig;function Aa(e,t){if(e&&e.defaultProps){for(var n in t=K({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Bl(null),pa=null,va=null,fa=null;function ba(){fa=va=pa=null}function ya(e){var t=ma.current;Zl(ma),e._currentValue=t}function Ga(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ba(e,t){pa=e,fa=va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(fo=!0),e.firstContext=null)}function Za(e){var t=e._currentValue;if(fa!==e)if(e={context:e,memoizedValue:t,next:null},null===va){if(null===pa)throw Error(a(308));va=e,pa.dependencies={lanes:0,firstContext:e}}else va=va.next=e;return t}var qa=null;function xa(e){null===qa?qa=[e]:qa.push(e)}function wa(e,t,n,i){var l=t.interleaved;return null===l?(n.next=n,xa(t)):(n.next=l.next,l.next=n),t.interleaved=n,Wa(e,i)}function Wa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Sa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&wg)){var l=i.pending;return null===l?t.next=t:(t.next=l.next,l.next=t),i.pending=t,Wa(e,n)}return null===(l=i.interleaved)?(t.next=t,xa(i)):(t.next=l.next,l.next=t),i.interleaved=t,Wa(e,n)}function Ya(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}function Ha(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var l=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?l=a=r:a=a.next=r,n=n.next}while(null!==n);null===a?l=a=t:a=a.next=t}else l=a=t;return n={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ka(e,t,n,i){var l=e.updateQueue;Sa=!1;var a=l.firstBaseUpdate,r=l.lastBaseUpdate,o=l.shared.pending;if(null!==o){l.shared.pending=null;var g=o,s=g.next;g.next=null,null===r?a=s:r.next=s,r=g;var I=e.alternate;null!==I&&((o=(I=I.updateQueue).lastBaseUpdate)!==r&&(null===o?I.firstBaseUpdate=s:o.next=s,I.lastBaseUpdate=g))}if(null!==a){var u=l.baseState;for(r=0,I=s=g=null,o=a;;){var c=o.lane,C=o.eventTime;if((i&c)===c){null!==I&&(I=I.next={eventTime:C,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,h=o;switch(c=t,C=n,h.tag){case 1:if("function"===typeof(d=h.payload)){u=d.call(C,u,c);break e}u=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(c="function"===typeof(d=h.payload)?d.call(C,u,c):d)||void 0===c)break e;u=K({},u,c);break e;case 2:Sa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(c=l.effects)?l.effects=[o]:c.push(o))}else C={eventTime:C,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===I?(s=I=C,g=u):I=I.next=C,r|=c;if(null===(o=o.next)){if(null===(o=l.shared.pending))break;o=(c=o).next,c.next=null,l.lastBaseUpdate=c,l.shared.pending=null}}if(null===I&&(g=u),l.baseState=g,l.firstBaseUpdate=s,l.lastBaseUpdate=I,null!==(t=l.shared.interleaved)){l=t;do{r|=l.lane,l=l.next}while(l!==t)}else null===a&&(l.shared.lanes=0);Hg|=r,e.lanes=r,e.memoizedState=u}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],l=i.callback;if(null!==l){if(i.callback=null,i=n,"function"!==typeof l)throw Error(a(191,l));l.call(i)}}}var Na=(new i.Component).refs;function za(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:K({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ma={isMounted:function(e){return!!(e=e._reactInternals)&&Le(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=es(),l=ts(e),a=ka(i,l);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Xa(e,a,l))&&(ns(t,e,l,i),Ya(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=es(),l=ts(e),a=ka(i,l);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Xa(e,a,l))&&(ns(t,e,l,i),Ya(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=es(),i=ts(e),l=ka(n,i);l.tag=2,void 0!==t&&null!==t&&(l.callback=t),null!==(t=Xa(e,l,i))&&(ns(t,e,i,n),Ya(t,e,i))}};function La(e,t,n,i,l,a,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,r):!t.prototype||!t.prototype.isPureReactComponent||(!gi(n,i)||!gi(l,a))}function _a(e,t,n){var i=!1,l=xl,a=t.contextType;return"object"===typeof a&&null!==a?a=Za(a):(l=Vl(t)?Sl:wl.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rl(e,l):xl),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ma,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ta(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ma.enqueueReplaceState(t,t.state,null)}function Ea(e,t,n,i){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=Na,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?l.context=Za(a):(a=Vl(t)?Sl:wl.current,l.context=Rl(e,a)),l.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),l.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(t=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&Ma.enqueueReplaceState(l,l.state,null),Ka(e,n,l,i),l.state=e.memoizedState),"function"===typeof l.componentDidMount&&(e.flags|=4194308)}function Ja(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var l=i,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=l.refs;t===Na&&(t=l.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ua(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Da(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function l(e,t){return(e=ks(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function g(e,t,n,i){return null===t||6!==t.tag?((t=Ks(n,e.mode,i)).return=e,t):((t=l(t,n)).return=e,t)}function s(e,t,n,i){var a=n.type;return a===G?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===V&&Da(a)===t.type)?((i=l(t,n.props)).ref=Ja(e,t,n),i.return=e,i):((i=Xs(n.type,n.key,n.props,null,e.mode,i)).ref=Ja(e,t,n),i.return=e,i)}function I(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fs(n,e.mode,i)).return=e,t):((t=l(t,n.children||[])).return=e,t)}function u(e,t,n,i,a){return null===t||7!==t.tag?((t=Ys(n,e.mode,i,a)).return=e,t):((t=l(t,n)).return=e,t)}function c(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ks(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Xs(t.type,t.key,t.props,null,e.mode,n)).ref=Ja(e,null,t),n.return=e,n;case y:return(t=Fs(t,e.mode,n)).return=e,t;case V:return c(e,(0,t._init)(t._payload),n)}if(te(t)||Y(t))return(t=Ys(t,e.mode,n,null)).return=e,t;Ua(e,t)}return null}function C(e,t,n,i){var l=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==l?null:g(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===l?s(e,t,n,i):null;case y:return n.key===l?I(e,t,n,i):null;case V:return C(e,t,(l=n._init)(n._payload),i)}if(te(n)||Y(n))return null!==l?null:u(e,t,n,i,null);Ua(e,n)}return null}function d(e,t,n,i,l){if("string"===typeof i&&""!==i||"number"===typeof i)return g(t,e=e.get(n)||null,""+i,l);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return s(t,e=e.get(null===i.key?n:i.key)||null,i,l);case y:return I(t,e=e.get(null===i.key?n:i.key)||null,i,l);case V:return d(e,t,n,(0,i._init)(i._payload),l)}if(te(i)||Y(i))return u(t,e=e.get(n)||null,i,l,null);Ua(t,i)}return null}function h(l,a,o,g){for(var s=null,I=null,u=a,h=a=0,A=null;null!==u&&h<o.length;h++){u.index>h?(A=u,u=null):A=u.sibling;var m=C(l,u,o[h],g);if(null===m){null===u&&(u=A);break}e&&u&&null===m.alternate&&t(l,u),a=r(m,a,h),null===I?s=m:I.sibling=m,I=m,u=A}if(h===o.length)return n(l,u),la&&jl(l,h),s;if(null===u){for(;h<o.length;h++)null!==(u=c(l,o[h],g))&&(a=r(u,a,h),null===I?s=u:I.sibling=u,I=u);return la&&jl(l,h),s}for(u=i(l,u);h<o.length;h++)null!==(A=d(u,l,h,o[h],g))&&(e&&null!==A.alternate&&u.delete(null===A.key?h:A.key),a=r(A,a,h),null===I?s=A:I.sibling=A,I=A);return e&&u.forEach((function(e){return t(l,e)})),la&&jl(l,h),s}function A(l,o,g,s){var I=Y(g);if("function"!==typeof I)throw Error(a(150));if(null==(g=I.call(g)))throw Error(a(151));for(var u=I=null,h=o,A=o=0,m=null,p=g.next();null!==h&&!p.done;A++,p=g.next()){h.index>A?(m=h,h=null):m=h.sibling;var v=C(l,h,p.value,s);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(l,h),o=r(v,o,A),null===u?I=v:u.sibling=v,u=v,h=m}if(p.done)return n(l,h),la&&jl(l,A),I;if(null===h){for(;!p.done;A++,p=g.next())null!==(p=c(l,p.value,s))&&(o=r(p,o,A),null===u?I=p:u.sibling=p,u=p);return la&&jl(l,A),I}for(h=i(l,h);!p.done;A++,p=g.next())null!==(p=d(h,l,A,p.value,s))&&(e&&null!==p.alternate&&h.delete(null===p.key?A:p.key),o=r(p,o,A),null===u?I=p:u.sibling=p,u=p);return e&&h.forEach((function(e){return t(l,e)})),la&&jl(l,A),I}return function e(i,a,r,g){if("object"===typeof r&&null!==r&&r.type===G&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case b:e:{for(var s=r.key,I=a;null!==I;){if(I.key===s){if((s=r.type)===G){if(7===I.tag){n(i,I.sibling),(a=l(I,r.props.children)).return=i,i=a;break e}}else if(I.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===V&&Da(s)===I.type){n(i,I.sibling),(a=l(I,r.props)).ref=Ja(i,I,r),a.return=i,i=a;break e}n(i,I);break}t(i,I),I=I.sibling}r.type===G?((a=Ys(r.props.children,i.mode,g,r.key)).return=i,i=a):((g=Xs(r.type,r.key,r.props,null,i.mode,g)).ref=Ja(i,a,r),g.return=i,i=g)}return o(i);case y:e:{for(I=r.key;null!==a;){if(a.key===I){if(4===a.tag&&a.stateNode.containerInfo===r.containerInfo&&a.stateNode.implementation===r.implementation){n(i,a.sibling),(a=l(a,r.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Fs(r,i.mode,g)).return=i,i=a}return o(i);case V:return e(i,a,(I=r._init)(r._payload),g)}if(te(r))return h(i,a,r,g);if(Y(r))return A(i,a,r,g);Ua(i,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==a&&6===a.tag?(n(i,a.sibling),(a=l(a,r)).return=i,i=a):(n(i,a),(a=Ks(r,i.mode,g)).return=i,i=a),o(i)):n(i,a)}}var Pa=Qa(!0),Oa=Qa(!1),ja={},$a=Bl(ja),er=Bl(ja),tr=Bl(ja);function nr(e){if(e===ja)throw Error(a(174));return e}function ir(e,t){switch(ql(tr,t),ql(er,e),ql($a,ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ge(null,"");break;default:t=ge(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Zl($a),ql($a,t)}function lr(){Zl($a),Zl(er),Zl(tr)}function ar(e){nr(tr.current);var t=nr($a.current),n=ge(t,e.type);t!==n&&(ql(er,e),ql($a,n))}function rr(e){er.current===e&&(Zl($a),Zl(er))}var or=Bl(0);function gr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sr=[];function Ir(){for(var e=0;e<sr.length;e++)sr[e]._workInProgressVersionPrimary=null;sr.length=0}var ur=f.ReactCurrentDispatcher,cr=f.ReactCurrentBatchConfig,Cr=0,dr=null,hr=null,Ar=null,mr=!1,pr=!1,vr=0,fr=0;function br(){throw Error(a(321))}function yr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function Gr(e,t,n,i,l,r){if(Cr=r,dr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ur.current=null===e||null===e.memoizedState?ro:oo,e=n(i,l),pr){r=0;do{if(pr=!1,vr=0,25<=r)throw Error(a(301));r+=1,Ar=hr=null,t.updateQueue=null,ur.current=go,e=n(i,l)}while(pr)}if(ur.current=ao,t=null!==hr&&null!==hr.next,Cr=0,Ar=hr=dr=null,mr=!1,t)throw Error(a(300));return e}function Br(){var e=0!==vr;return vr=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ar?dr.memoizedState=Ar=e:Ar=Ar.next=e,Ar}function qr(){if(null===hr){var e=dr.alternate;e=null!==e?e.memoizedState:null}else e=hr.next;var t=null===Ar?dr.memoizedState:Ar.next;if(null!==t)Ar=t,hr=e;else{if(null===e)throw Error(a(310));e={memoizedState:(hr=e).memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},null===Ar?dr.memoizedState=Ar=e:Ar=Ar.next=e}return Ar}function xr(e,t){return"function"===typeof t?t(e):t}function wr(e){var t=qr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=hr,l=i.baseQueue,r=n.pending;if(null!==r){if(null!==l){var o=l.next;l.next=r.next,r.next=o}i.baseQueue=l=r,n.pending=null}if(null!==l){r=l.next,i=i.baseState;var g=o=null,s=null,I=r;do{var u=I.lane;if((Cr&u)===u)null!==s&&(s=s.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),i=I.hasEagerState?I.eagerState:e(i,I.action);else{var c={lane:u,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};null===s?(g=s=c,o=i):s=s.next=c,dr.lanes|=u,Hg|=u}I=I.next}while(null!==I&&I!==r);null===s?o=i:s.next=g,oi(i,t.memoizedState)||(fo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){l=e;do{r=l.lane,dr.lanes|=r,Hg|=r,l=l.next}while(l!==e)}else null===l&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wr(e){var t=qr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,l=n.pending,r=t.memoizedState;if(null!==l){n.pending=null;var o=l=l.next;do{r=e(r,o.action),o=o.next}while(o!==l);oi(r,t.memoizedState)||(fo=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Sr(){}function Rr(e,t){var n=dr,i=qr(),l=t(),r=!oi(i.memoizedState,l);if(r&&(i.memoizedState=l,fo=!0),i=i.queue,_r(Xr.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||null!==Ar&&1&Ar.memoizedState.tag){if(n.flags|=2048,Fr(9,kr.bind(null,n,i,l,t),void 0,null),null===Wg)throw Error(a(349));0!==(30&Cr)||Vr(n,t,l)}return l}function Vr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=dr.updateQueue)?(t={lastEffect:null,stores:null},dr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function kr(e,t,n,i){t.value=n,t.getSnapshot=i,Yr(t)&&Hr(e)}function Xr(e,t,n){return n((function(){Yr(t)&&Hr(e)}))}function Yr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Hr(e){var t=Wa(e,1);null!==t&&ns(t,e,1,-1)}function Kr(e){var t=Zr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,dr,e),[t.memoizedState,e]}function Fr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=dr.updateQueue)?(t={lastEffect:null,stores:null},dr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Nr(){return qr().memoizedState}function zr(e,t,n,i){var l=Zr();dr.flags|=e,l.memoizedState=Fr(1|t,n,void 0,void 0===i?null:i)}function Mr(e,t,n,i){var l=qr();i=void 0===i?null:i;var a=void 0;if(null!==hr){var r=hr.memoizedState;if(a=r.destroy,null!==i&&yr(i,r.deps))return void(l.memoizedState=Fr(t,n,a,i))}dr.flags|=e,l.memoizedState=Fr(1|t,n,a,i)}function Lr(e,t){return zr(8390656,8,e,t)}function _r(e,t){return Mr(2048,8,e,t)}function Tr(e,t){return Mr(4,2,e,t)}function Er(e,t){return Mr(4,4,e,t)}function Jr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ur(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mr(4,4,Jr.bind(null,t,e),n)}function Dr(){}function Qr(e,t){var n=qr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Pr(e,t){var n=qr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yr(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Or(e,t,n){return 0===(21&Cr)?(e.baseState&&(e.baseState=!1,fo=!0),e.memoizedState=n):(oi(n,t)||(n=ht(),dr.lanes|=n,Hg|=n,e.baseState=!0),t)}function jr(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var i=cr.transition;cr.transition={};try{e(!1),t()}finally{vt=n,cr.transition=i}}function $r(){return qr().memoizedState}function eo(e,t,n){var i=ts(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))io(t,n);else if(null!==(n=wa(e,t,n,i))){ns(n,e,i,es()),lo(n,t,i)}}function to(e,t,n){var i=ts(e),l={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))io(t,l);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=a(r,n);if(l.hasEagerState=!0,l.eagerState=o,oi(o,r)){var g=t.interleaved;return null===g?(l.next=l,xa(t)):(l.next=g.next,g.next=l),void(t.interleaved=l)}}catch(s){}null!==(n=wa(e,t,l,i))&&(ns(n,e,i,l=es()),lo(n,t,i))}}function no(e){var t=e.alternate;return e===dr||null!==t&&t===dr}function io(e,t){pr=mr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}var ao={readContext:Za,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},ro={readContext:Za,useCallback:function(e,t){return Zr().memoizedState=[e,void 0===t?null:t],e},useContext:Za,useEffect:Lr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zr(4194308,4,Jr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zr(4194308,4,e,t)},useInsertionEffect:function(e,t){return zr(4,2,e,t)},useMemo:function(e,t){var n=Zr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Zr();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=eo.bind(null,dr,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Zr().memoizedState=e},useState:Kr,useDebugValue:Dr,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=Kr(!1),t=e[0];return e=jr.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=dr,l=Zr();if(la){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Wg)throw Error(a(349));0!==(30&Cr)||Vr(i,t,n)}l.memoizedState=n;var r={value:n,getSnapshot:t};return l.queue=r,Lr(Xr.bind(null,i,r,e),[e]),i.flags|=2048,Fr(9,kr.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Zr(),t=Wg.identifierPrefix;if(la){var n=Ol;t=":"+t+"R"+(n=(Pl&~(1<<32-rt(Pl)-1)).toString(32)+n),0<(n=vr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Za,useCallback:Qr,useContext:Za,useEffect:_r,useImperativeHandle:Ur,useInsertionEffect:Tr,useLayoutEffect:Er,useMemo:Pr,useReducer:wr,useRef:Nr,useState:function(){return wr(xr)},useDebugValue:Dr,useDeferredValue:function(e){return Or(qr(),hr.memoizedState,e)},useTransition:function(){return[wr(xr)[0],qr().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Rr,useId:$r,unstable_isNewReconciler:!1},go={readContext:Za,useCallback:Qr,useContext:Za,useEffect:_r,useImperativeHandle:Ur,useInsertionEffect:Tr,useLayoutEffect:Er,useMemo:Pr,useReducer:Wr,useRef:Nr,useState:function(){return Wr(xr)},useDebugValue:Dr,useDeferredValue:function(e){var t=qr();return null===hr?t.memoizedState=e:Or(t,hr.memoizedState,e)},useTransition:function(){return[Wr(xr)[0],qr().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Rr,useId:$r,unstable_isNewReconciler:!1};function so(e,t){try{var n="",i=t;do{n+=M(i),i=i.return}while(i);var l=n}catch(a){l="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:l,digest:null}}function Io(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var co="function"===typeof WeakMap?WeakMap:Map;function Co(e,t,n){(n=ka(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Tg||(Tg=!0,Eg=i),uo(0,t)},n}function ho(e,t,n){(n=ka(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var l=t.value;n.payload=function(){return i(l)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===Jg?Jg=new Set([this]):Jg.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ao(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new co;var l=new Set;i.set(t,l)}else void 0===(l=i.get(t))&&(l=new Set,i.set(t,l));l.has(n)||(l.add(n),e=Zs.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function po(e,t,n,i,l){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ka(-1,1)).tag=2,Xa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var vo=f.ReactCurrentOwner,fo=!1;function bo(e,t,n,i){t.child=null===e?Oa(t,null,n,i):Pa(t,e.child,n,i)}function yo(e,t,n,i,l){n=n.render;var a=t.ref;return Ba(t,l),i=Gr(e,t,n,i,a,l),n=Br(),null===e||fo?(la&&n&&ea(t),t.flags|=1,bo(e,t,i,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,To(e,t,l))}function Go(e,t,n,i,l){if(null===e){var a=n.type;return"function"!==typeof a||Vs(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Xs(n.type,null,i,t,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Bo(e,t,a,i,l))}if(a=e.child,0===(e.lanes&l)){var r=a.memoizedProps;if((n=null!==(n=n.compare)?n:gi)(r,i)&&e.ref===t.ref)return To(e,t,l)}return t.flags|=1,(e=ks(a,i)).ref=t.ref,e.return=t,t.child=e}function Bo(e,t,n,i,l){if(null!==e){var a=e.memoizedProps;if(gi(a,i)&&e.ref===t.ref){if(fo=!1,t.pendingProps=i=a,0===(e.lanes&l))return t.lanes=e.lanes,To(e,t,l);0!==(131072&e.flags)&&(fo=!0)}}return xo(e,t,n,i,l)}function Zo(e,t,n){var i=t.pendingProps,l=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ql(kg,Vg),Vg|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ql(kg,Vg),Vg|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,ql(kg,Vg),Vg|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,ql(kg,Vg),Vg|=i;return bo(e,t,l,n),t.child}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xo(e,t,n,i,l){var a=Vl(n)?Sl:wl.current;return a=Rl(t,a),Ba(t,l),n=Gr(e,t,n,i,a,l),i=Br(),null===e||fo?(la&&i&&ea(t),t.flags|=1,bo(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,To(e,t,l))}function wo(e,t,n,i,l){if(Vl(n)){var a=!0;Hl(t)}else a=!1;if(Ba(t,l),null===t.stateNode)_o(e,t),_a(t,n,i),Ea(t,n,i,l),i=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var g=r.context,s=n.contextType;"object"===typeof s&&null!==s?s=Za(s):s=Rl(t,s=Vl(n)?Sl:wl.current);var I=n.getDerivedStateFromProps,u="function"===typeof I||"function"===typeof r.getSnapshotBeforeUpdate;u||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==i||g!==s)&&Ta(t,r,i,s),Sa=!1;var c=t.memoizedState;r.state=c,Ka(t,i,r,l),g=t.memoizedState,o!==i||c!==g||Wl.current||Sa?("function"===typeof I&&(za(t,n,I,i),g=t.memoizedState),(o=Sa||La(t,n,o,i,c,g,s))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),r.props=i,r.state=g,r.context=s,i=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Va(e,t),o=t.memoizedProps,s=t.type===t.elementType?o:Aa(t.type,o),r.props=s,u=t.pendingProps,c=r.context,"object"===typeof(g=n.contextType)&&null!==g?g=Za(g):g=Rl(t,g=Vl(n)?Sl:wl.current);var C=n.getDerivedStateFromProps;(I="function"===typeof C||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==u||c!==g)&&Ta(t,r,i,g),Sa=!1,c=t.memoizedState,r.state=c,Ka(t,i,r,l);var d=t.memoizedState;o!==u||c!==d||Wl.current||Sa?("function"===typeof C&&(za(t,n,C,i),d=t.memoizedState),(s=Sa||La(t,n,s,i,c,d,g)||!1)?(I||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,d,g),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,d,g)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),r.props=i,r.state=d,r.context=g,i=s):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),i=!1)}return Wo(e,t,n,i,a,l)}function Wo(e,t,n,i,l,a){qo(e,t);var r=0!==(128&t.flags);if(!i&&!r)return l&&Kl(t,n,!1),To(e,t,a);i=t.stateNode,vo.current=t;var o=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&r?(t.child=Pa(t,e.child,null,a),t.child=Pa(t,null,o,a)):bo(e,t,o,a),t.memoizedState=i.state,l&&Kl(t,n,!0),t.child}function So(e){var t=e.stateNode;t.pendingContext?Xl(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Xl(0,t.context,!1),ir(e,t.containerInfo)}function Ro(e,t,n,i,l){return Ca(),da(l),t.flags|=256,bo(e,t,n,i),t.child}var Vo,ko,Xo,Yo={dehydrated:null,treeContext:null,retryLane:0};function Ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ko(e,t,n){var i,l=t.pendingProps,r=or.current,o=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&r)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),ql(or,1&r),null===e)return sa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,o?(l=t.mode,o=t.child,g={mode:"hidden",children:g},0===(1&l)&&null!==o?(o.childLanes=0,o.pendingProps=g):o=Hs(g,l,0,null),e=Ys(e,l,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ho(n),t.memoizedState=Yo,e):Fo(t,g));if(null!==(r=e.memoizedState)&&null!==(i=r.dehydrated))return function(e,t,n,i,l,r,o){if(n)return 256&t.flags?(t.flags&=-257,No(e,t,o,i=Io(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=i.fallback,l=t.mode,i=Hs({mode:"visible",children:i.children},l,0,null),(r=Ys(r,l,o,null)).flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,0!==(1&t.mode)&&Pa(t,e.child,null,o),t.child.memoizedState=Ho(o),t.memoizedState=Yo,r);if(0===(1&t.mode))return No(e,t,o,null);if("$!"===l.data){if(i=l.nextSibling&&l.nextSibling.dataset)var g=i.dgst;return i=g,No(e,t,o,i=Io(r=Error(a(419)),i,void 0))}if(g=0!==(o&e.childLanes),fo||g){if(null!==(i=Wg)){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(l=0!==(l&(i.suspendedLanes|o))?0:l)&&l!==r.retryLane&&(r.retryLane=l,Wa(e,l),ns(i,e,l,-1))}return hs(),No(e,t,o,i=Io(Error(a(421))))}return"$?"===l.data?(t.flags|=128,t.child=e.child,t=xs.bind(null,e),l._reactRetry=t,null):(e=r.treeContext,ia=sl(l.nextSibling),na=t,la=!0,aa=null,null!==e&&(Ul[Dl++]=Pl,Ul[Dl++]=Ol,Ul[Dl++]=Ql,Pl=e.id,Ol=e.overflow,Ql=t),(t=Fo(t,i.children)).flags|=4096,t)}(e,t,g,l,i,r,n);if(o){o=l.fallback,g=t.mode,i=(r=e.child).sibling;var s={mode:"hidden",children:l.children};return 0===(1&g)&&t.child!==r?((l=t.child).childLanes=0,l.pendingProps=s,t.deletions=null):(l=ks(r,s)).subtreeFlags=14680064&r.subtreeFlags,null!==i?o=ks(i,o):(o=Ys(o,g,n,null)).flags|=2,o.return=t,l.return=t,l.sibling=o,t.child=l,l=o,o=t.child,g=null===(g=e.child.memoizedState)?Ho(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},o.memoizedState=g,o.childLanes=e.childLanes&~n,t.memoizedState=Yo,l}return e=(o=e.child).sibling,l=ks(o,{mode:"visible",children:l.children}),0===(1&t.mode)&&(l.lanes=n),l.return=t,l.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=l,t.memoizedState=null,l}function Fo(e,t){return(t=Hs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function No(e,t,n,i){return null!==i&&da(i),Pa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ga(e.return,t,n)}function Mo(e,t,n,i,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=l)}function Lo(e,t,n){var i=t.pendingProps,l=i.revealOrder,a=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=or.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ql(or,i),0===(1&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)null!==(e=n.alternate)&&null===gr(e)&&(l=n),n=n.sibling;null===(n=l)?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Mo(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(null!==(e=l.alternate)&&null===gr(e)){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Mo(t,!0,n,null,a);break;case"together":Mo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function To(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Hg|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ks(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ks(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Eo(e,t){if(!la)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var l=e.child;null!==l;)n|=l.lanes|l.childLanes,i|=14680064&l.subtreeFlags,i|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Uo(e,t,n){var i=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:case 17:return Vl(t.type)&&kl(),Jo(t),null;case 3:return i=t.stateNode,lr(),Zl(Wl),Zl(wl),Ir(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(rs(aa),aa=null))),Jo(t),null;case 5:rr(t);var l=nr(tr.current);if(n=t.type,null!==e&&null!=t.stateNode)ko(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Jo(t),null}if(e=nr($a.current),ua(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[cl]=t,i[Cl]=r,e=0!==(1&t.mode),n){case"dialog":Ni("cancel",i),Ni("close",i);break;case"iframe":case"object":case"embed":Ni("load",i);break;case"video":case"audio":for(l=0;l<Yi.length;l++)Ni(Yi[l],i);break;case"source":Ni("error",i);break;case"img":case"image":case"link":Ni("error",i),Ni("load",i);break;case"details":Ni("toggle",i);break;case"input":P(i,r),Ni("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Ni("invalid",i);break;case"textarea":le(i,r),Ni("invalid",i)}for(var g in pe(n,r),l=null,r)if(r.hasOwnProperty(g)){var s=r[g];"children"===g?"string"===typeof s?i.textContent!==s&&(!0!==r.suppressHydrationWarning&&ji(i.textContent,s,e),l=["children",s]):"number"===typeof s&&i.textContent!==""+s&&(!0!==r.suppressHydrationWarning&&ji(i.textContent,s,e),l=["children",""+s]):o.hasOwnProperty(g)&&null!=s&&"onScroll"===g&&Ni("scroll",i)}switch(n){case"input":J(i),$(i,r,!0);break;case"textarea":J(i),re(i);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(i.onclick=$i)}i=l,t.updateQueue=i,null!==i&&(t.flags|=4)}else{g=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=g.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=g.createElement(n,{is:i.is}):(e=g.createElement(n),"select"===n&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,n),e[cl]=t,e[Cl]=i,Vo(e,t),t.stateNode=e;e:{switch(g=ve(n,i),n){case"dialog":Ni("cancel",e),Ni("close",e),l=i;break;case"iframe":case"object":case"embed":Ni("load",e),l=i;break;case"video":case"audio":for(l=0;l<Yi.length;l++)Ni(Yi[l],e);l=i;break;case"source":Ni("error",e),l=i;break;case"img":case"image":case"link":Ni("error",e),Ni("load",e),l=i;break;case"details":Ni("toggle",e),l=i;break;case"input":P(e,i),l=Q(e,i),Ni("invalid",e);break;case"option":default:l=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},l=K({},i,{value:void 0}),Ni("invalid",e);break;case"textarea":le(e,i),l=ie(e,i),Ni("invalid",e)}for(r in pe(n,l),s=l)if(s.hasOwnProperty(r)){var I=s[r];"style"===r?Ae(e,I):"dangerouslySetInnerHTML"===r?null!=(I=I?I.__html:void 0)&&ue(e,I):"children"===r?"string"===typeof I?("textarea"!==n||""!==I)&&ce(e,I):"number"===typeof I&&ce(e,""+I):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(o.hasOwnProperty(r)?null!=I&&"onScroll"===r&&Ni("scroll",e):null!=I&&v(e,r,I,g))}switch(n){case"input":J(e),$(e,i,!1);break;case"textarea":J(e),re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+T(i.value));break;case"select":e.multiple=!!i.multiple,null!=(r=i.value)?ne(e,!!i.multiple,r,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=nr(tr.current),nr($a.current),ua(t)){if(i=t.stateNode,n=t.memoizedProps,i[cl]=t,(r=i.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ji(i.nodeValue,n,0!==(1&e.mode))}r&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[cl]=t,t.stateNode=i}return Jo(t),null;case 13:if(Zl(or),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(la&&null!==ia&&0!==(1&t.mode)&&0===(128&t.flags))ca(),Ca(),t.flags|=98560,r=!1;else if(r=ua(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[cl]=t}else Ca(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jo(t),r=!1}else null!==aa&&(rs(aa),aa=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&or.current)?0===Xg&&(Xg=3):hs())),null!==t.updateQueue&&(t.flags|=4),Jo(t),null);case 4:return lr(),null===e&&Li(t.stateNode.containerInfo),Jo(t),null;case 10:return ya(t.type._context),Jo(t),null;case 19:if(Zl(or),null===(r=t.memoizedState))return Jo(t),null;if(i=0!==(128&t.flags),null===(g=r.rendering))if(i)Eo(r,!1);else{if(0!==Xg||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(g=gr(e))){for(t.flags|=128,Eo(r,!1),null!==(i=g.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(r=n).flags&=14680066,null===(g=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=g.childLanes,r.lanes=g.lanes,r.child=g.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=g.memoizedProps,r.memoizedState=g.memoizedState,r.updateQueue=g.updateQueue,r.type=g.type,e=g.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ql(or,1&or.current|2),t.child}e=e.sibling}null!==r.tail&&Oe()>Lg&&(t.flags|=128,i=!0,Eo(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=gr(g))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Eo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!g.alternate&&!la)return Jo(t),null}else 2*Oe()-r.renderingStartTime>Lg&&1073741824!==n&&(t.flags|=128,i=!0,Eo(r,!1),t.lanes=4194304);r.isBackwards?(g.sibling=t.child,t.child=g):(null!==(n=r.last)?n.sibling=g:t.child=g,r.last=g)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Oe(),t.sibling=null,n=or.current,ql(or,i?1&n|2:1&n),t):(Jo(t),null);case 22:case 23:return us(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Vg)&&(Jo(t),6&t.subtreeFlags&&(t.flags|=8192)):Jo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Do(e,t){switch(ta(t),t.tag){case 1:return Vl(t.type)&&kl(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return lr(),Zl(Wl),Zl(wl),Ir(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return rr(t),null;case 13:if(Zl(or),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ca()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Zl(or),null;case 4:return lr(),null;case 10:return ya(t.type._context),null;case 22:case 23:return us(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ko=function(e,t,n,i){var l=e.memoizedProps;if(l!==i){e=t.stateNode,nr($a.current);var a,r=null;switch(n){case"input":l=Q(e,l),i=Q(e,i),r=[];break;case"select":l=K({},l,{value:void 0}),i=K({},i,{value:void 0}),r=[];break;case"textarea":l=ie(e,l),i=ie(e,i),r=[];break;default:"function"!==typeof l.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(I in pe(n,i),n=null,l)if(!i.hasOwnProperty(I)&&l.hasOwnProperty(I)&&null!=l[I])if("style"===I){var g=l[I];for(a in g)g.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==I&&"children"!==I&&"suppressContentEditableWarning"!==I&&"suppressHydrationWarning"!==I&&"autoFocus"!==I&&(o.hasOwnProperty(I)?r||(r=[]):(r=r||[]).push(I,null));for(I in i){var s=i[I];if(g=null!=l?l[I]:void 0,i.hasOwnProperty(I)&&s!==g&&(null!=s||null!=g))if("style"===I)if(g){for(a in g)!g.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&g[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(r||(r=[]),r.push(I,n)),n=s;else"dangerouslySetInnerHTML"===I?(s=s?s.__html:void 0,g=g?g.__html:void 0,null!=s&&g!==s&&(r=r||[]).push(I,s)):"children"===I?"string"!==typeof s&&"number"!==typeof s||(r=r||[]).push(I,""+s):"suppressContentEditableWarning"!==I&&"suppressHydrationWarning"!==I&&(o.hasOwnProperty(I)?(null!=s&&"onScroll"===I&&Ni("scroll",e),r||g===s||(r=[])):(r=r||[]).push(I,s))}n&&(r=r||[]).push("style",n);var I=r;(t.updateQueue=I)&&(t.flags|=4)}},Xo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qo=!1,Po=!1,Oo="function"===typeof WeakSet?WeakSet:Set,jo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Bs(e,t,i)}else n.current=null}function eg(e,t,n){try{n()}catch(i){Bs(e,t,i)}}var tg=!1;function ng(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var l=i=i.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,void 0!==a&&eg(t,n,a)}l=l.next}while(l!==i)}}function ig(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function lg(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ag(e){var t=e.alternate;null!==t&&(e.alternate=null,ag(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[cl],delete t[Cl],delete t[hl],delete t[Al],delete t[ml])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rg(e){return 5===e.tag||3===e.tag||4===e.tag}function og(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gg(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(gg(e,t,n),e=e.sibling;null!==e;)gg(e,t,n),e=e.sibling}function sg(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(sg(e,t,n),e=e.sibling;null!==e;)sg(e,t,n),e=e.sibling}var Ig=null,ug=!1;function cg(e,t,n){for(n=n.child;null!==n;)Cg(e,t,n),n=n.sibling}function Cg(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(lt,n)}catch(o){}switch(n.tag){case 5:Po||$o(n,t);case 6:var i=Ig,l=ug;Ig=null,cg(e,t,n),ug=l,null!==(Ig=i)&&(ug?(e=Ig,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Ig.removeChild(n.stateNode));break;case 18:null!==Ig&&(ug?(e=Ig,n=n.stateNode,8===e.nodeType?gl(e.parentNode,n):1===e.nodeType&&gl(e,n),Lt(e)):gl(Ig,n.stateNode));break;case 4:i=Ig,l=ug,Ig=n.stateNode.containerInfo,ug=!0,cg(e,t,n),Ig=i,ug=l;break;case 0:case 11:case 14:case 15:if(!Po&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){l=i=i.next;do{var a=l,r=a.destroy;a=a.tag,void 0!==r&&(0!==(2&a)||0!==(4&a))&&eg(n,t,r),l=l.next}while(l!==i)}cg(e,t,n);break;case 1:if(!Po&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Bs(n,t,o)}cg(e,t,n);break;case 21:cg(e,t,n);break;case 22:1&n.mode?(Po=(i=Po)||null!==n.memoizedState,cg(e,t,n),Po=i):cg(e,t,n);break;default:cg(e,t,n)}}function dg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Oo),t.forEach((function(t){var i=ws.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function hg(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var l=n[i];try{var r=e,o=t,g=o;e:for(;null!==g;){switch(g.tag){case 5:Ig=g.stateNode,ug=!1;break e;case 3:case 4:Ig=g.stateNode.containerInfo,ug=!0;break e}g=g.return}if(null===Ig)throw Error(a(160));Cg(r,o,l),Ig=null,ug=!1;var s=l.alternate;null!==s&&(s.return=null),l.return=null}catch(I){Bs(l,t,I)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Ag(t,e),t=t.sibling}function Ag(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hg(t,e),mg(e),4&i){try{ng(3,e,e.return),ig(3,e)}catch(A){Bs(e,e.return,A)}try{ng(5,e,e.return)}catch(A){Bs(e,e.return,A)}}break;case 1:hg(t,e),mg(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(hg(t,e),mg(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var l=e.stateNode;try{ce(l,"")}catch(A){Bs(e,e.return,A)}}if(4&i&&null!=(l=e.stateNode)){var r=e.memoizedProps,o=null!==n?n.memoizedProps:r,g=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===g&&"radio"===r.type&&null!=r.name&&O(l,r),ve(g,o);var I=ve(g,r);for(o=0;o<s.length;o+=2){var u=s[o],c=s[o+1];"style"===u?Ae(l,c):"dangerouslySetInnerHTML"===u?ue(l,c):"children"===u?ce(l,c):v(l,u,c,I)}switch(g){case"input":j(l,r);break;case"textarea":ae(l,r);break;case"select":var C=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!r.multiple;var d=r.value;null!=d?ne(l,!!r.multiple,d,!1):C!==!!r.multiple&&(null!=r.defaultValue?ne(l,!!r.multiple,r.defaultValue,!0):ne(l,!!r.multiple,r.multiple?[]:"",!1))}l[Cl]=r}catch(A){Bs(e,e.return,A)}}break;case 6:if(hg(t,e),mg(e),4&i){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,r=e.memoizedProps;try{l.nodeValue=r}catch(A){Bs(e,e.return,A)}}break;case 3:if(hg(t,e),mg(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Lt(t.containerInfo)}catch(A){Bs(e,e.return,A)}break;case 4:default:hg(t,e),mg(e);break;case 13:hg(t,e),mg(e),8192&(l=e.child).flags&&(r=null!==l.memoizedState,l.stateNode.isHidden=r,!r||null!==l.alternate&&null!==l.alternate.memoizedState||(Mg=Oe())),4&i&&dg(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Po=(I=Po)||u,hg(t,e),Po=I):hg(t,e),mg(e),8192&i){if(I=null!==e.memoizedState,(e.stateNode.isHidden=I)&&!u&&0!==(1&e.mode))for(jo=e,u=e.child;null!==u;){for(c=jo=u;null!==jo;){switch(d=(C=jo).child,C.tag){case 0:case 11:case 14:case 15:ng(4,C,C.return);break;case 1:$o(C,C.return);var h=C.stateNode;if("function"===typeof h.componentWillUnmount){i=C,n=C.return;try{t=i,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(A){Bs(i,n,A)}}break;case 5:$o(C,C.return);break;case 22:if(null!==C.memoizedState){bg(c);continue}}null!==d?(d.return=C,jo=d):bg(c)}u=u.sibling}e:for(u=null,c=e;;){if(5===c.tag){if(null===u){u=c;try{l=c.stateNode,I?"function"===typeof(r=l.style).setProperty?r.setProperty("display","none","important"):r.display="none":(g=c.stateNode,o=void 0!==(s=c.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,g.style.display=he("display",o))}catch(A){Bs(e,e.return,A)}}}else if(6===c.tag){if(null===u)try{c.stateNode.nodeValue=I?"":c.memoizedProps}catch(A){Bs(e,e.return,A)}}else if((22!==c.tag&&23!==c.tag||null===c.memoizedState||c===e)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;null===c.sibling;){if(null===c.return||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:hg(t,e),mg(e),4&i&&dg(e);case 21:}}function mg(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rg(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var l=i.stateNode;32&i.flags&&(ce(l,""),i.flags&=-33),sg(e,og(e),l);break;case 3:case 4:var r=i.stateNode.containerInfo;gg(e,og(e),r);break;default:throw Error(a(161))}}catch(o){Bs(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function pg(e,t,n){jo=e,vg(e,t,n)}function vg(e,t,n){for(var i=0!==(1&e.mode);null!==jo;){var l=jo,a=l.child;if(22===l.tag&&i){var r=null!==l.memoizedState||Qo;if(!r){var o=l.alternate,g=null!==o&&null!==o.memoizedState||Po;o=Qo;var s=Po;if(Qo=r,(Po=g)&&!s)for(jo=l;null!==jo;)g=(r=jo).child,22===r.tag&&null!==r.memoizedState?yg(l):null!==g?(g.return=r,jo=g):yg(l);for(;null!==a;)jo=a,vg(a,t,n),a=a.sibling;jo=l,Qo=o,Po=s}fg(e)}else 0!==(8772&l.subtreeFlags)&&null!==a?(a.return=l,jo=a):fg(e)}}function fg(e){for(;null!==jo;){var t=jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Po||ig(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Po)if(null===n)i.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Aa(t.type,n.memoizedProps);i.componentDidUpdate(l,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Fa(t,r,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,o,n)}break;case 5:var g=t.stateNode;if(null===n&&4&t.flags){n=g;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var I=t.alternate;if(null!==I){var u=I.memoizedState;if(null!==u){var c=u.dehydrated;null!==c&&Lt(c)}}}break;default:throw Error(a(163))}Po||512&t.flags&&lg(t)}catch(C){Bs(t,t.return,C)}}if(t===e){jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,jo=n;break}jo=t.return}}function bg(e){for(;null!==jo;){var t=jo;if(t===e){jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,jo=n;break}jo=t.return}}function yg(e){for(;null!==jo;){var t=jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ig(4,t)}catch(g){Bs(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var l=t.return;try{i.componentDidMount()}catch(g){Bs(t,l,g)}}var a=t.return;try{lg(t)}catch(g){Bs(t,a,g)}break;case 5:var r=t.return;try{lg(t)}catch(g){Bs(t,r,g)}}}catch(g){Bs(t,t.return,g)}if(t===e){jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,jo=o;break}jo=t.return}}var Gg,Bg=Math.ceil,Zg=f.ReactCurrentDispatcher,qg=f.ReactCurrentOwner,xg=f.ReactCurrentBatchConfig,wg=0,Wg=null,Sg=null,Rg=0,Vg=0,kg=Bl(0),Xg=0,Yg=null,Hg=0,Kg=0,Fg=0,Ng=null,zg=null,Mg=0,Lg=1/0,_g=null,Tg=!1,Eg=null,Jg=null,Ug=!1,Dg=null,Qg=0,Pg=0,Og=null,jg=-1,$g=0;function es(){return 0!==(6&wg)?Oe():-1!==jg?jg:jg=Oe()}function ts(e){return 0===(1&e.mode)?1:0!==(2&wg)&&0!==Rg?Rg&-Rg:null!==ha.transition?(0===$g&&($g=ht()),$g):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Pt(e.type)}function ns(e,t,n,i){if(50<Pg)throw Pg=0,Og=null,Error(a(185));mt(e,n,i),0!==(2&wg)&&e===Wg||(e===Wg&&(0===(2&wg)&&(Kg|=n),4===Xg&&os(e,Rg)),is(e,i),1===n&&0===wg&&0===(1&t.mode)&&(Lg=Oe()+500,Nl&&Ll()))}function is(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var r=31-rt(a),o=1<<r,g=l[r];-1===g?0!==(o&n)&&0===(o&i)||(l[r]=Ct(o,t)):g<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var i=ct(e,e===Wg?Rg:0);if(0===i)null!==n&&De(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&De(n),1===t)0===e.tag?function(e){Nl=!0,Ml(e)}(gs.bind(null,e)):Ml(gs.bind(null,e)),rl((function(){0===(6&wg)&&Ll()})),n=null;else{switch(ft(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ws(n,ls.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ls(e,t){if(jg=-1,$g=0,0!==(6&wg))throw Error(a(327));var n=e.callbackNode;if(ys()&&e.callbackNode!==n)return null;var i=ct(e,e===Wg?Rg:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=As(e,i);else{t=i;var l=wg;wg|=2;var r=ds();for(Wg===e&&Rg===t||(_g=null,Lg=Oe()+500,cs(e,t));;)try{ps();break}catch(g){Cs(e,g)}ba(),Zg.current=r,wg=l,null!==Sg?t=0:(Wg=null,Rg=0,t=Xg)}if(0!==t){if(2===t&&(0!==(l=dt(e))&&(i=l,t=as(e,l))),1===t)throw n=Yg,cs(e,0),os(e,i),is(e,Oe()),n;if(6===t)os(e,i);else{if(l=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var l=n[i],a=l.getSnapshot;l=l.value;try{if(!oi(a(),l))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(l)&&(2===(t=As(e,i))&&(0!==(r=dt(e))&&(i=r,t=as(e,r))),1===t))throw n=Yg,cs(e,0),os(e,i),is(e,Oe()),n;switch(e.finishedWork=l,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:bs(e,zg,_g);break;case 3:if(os(e,i),(130023424&i)===i&&10<(t=Mg+500-Oe())){if(0!==ct(e,0))break;if(((l=e.suspendedLanes)&i)!==i){es(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=il(bs.bind(null,e,zg,_g),t);break}bs(e,zg,_g);break;case 4:if(os(e,i),(4194240&i)===i)break;for(t=e.eventTimes,l=-1;0<i;){var o=31-rt(i);r=1<<o,(o=t[o])>l&&(l=o),i&=~r}if(i=l,10<(i=(120>(i=Oe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Bg(i/1960))-i)){e.timeoutHandle=il(bs.bind(null,e,zg,_g),i);break}bs(e,zg,_g);break;default:throw Error(a(329))}}}return is(e,Oe()),e.callbackNode===n?ls.bind(null,e):null}function as(e,t){var n=Ng;return e.current.memoizedState.isDehydrated&&(cs(e,t).flags|=256),2!==(e=As(e,t))&&(t=zg,zg=n,null!==t&&rs(t)),e}function rs(e){null===zg?zg=e:zg.push.apply(zg,e)}function os(e,t){for(t&=~Fg,t&=~Kg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),i=1<<n;e[n]=-1,t&=~i}}function gs(e){if(0!==(6&wg))throw Error(a(327));ys();var t=ct(e,0);if(0===(1&t))return is(e,Oe()),null;var n=As(e,t);if(0!==e.tag&&2===n){var i=dt(e);0!==i&&(t=i,n=as(e,i))}if(1===n)throw n=Yg,cs(e,0),os(e,t),is(e,Oe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bs(e,zg,_g),is(e,Oe()),null}function ss(e,t){var n=wg;wg|=1;try{return e(t)}finally{0===(wg=n)&&(Lg=Oe()+500,Nl&&Ll())}}function Is(e){null!==Dg&&0===Dg.tag&&0===(6&wg)&&ys();var t=wg;wg|=1;var n=xg.transition,i=vt;try{if(xg.transition=null,vt=1,e)return e()}finally{vt=i,xg.transition=n,0===(6&(wg=t))&&Ll()}}function us(){Vg=kg.current,Zl(kg)}function cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ll(n)),null!==Sg)for(n=Sg.return;null!==n;){var i=n;switch(ta(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&kl();break;case 3:lr(),Zl(Wl),Zl(wl),Ir();break;case 5:rr(i);break;case 4:lr();break;case 13:case 19:Zl(or);break;case 10:ya(i.type._context);break;case 22:case 23:us()}n=n.return}if(Wg=e,Sg=e=ks(e.current,null),Rg=Vg=t,Xg=0,Yg=null,Fg=Kg=Hg=0,zg=Ng=null,null!==qa){for(t=0;t<qa.length;t++)if(null!==(i=(n=qa[t]).interleaved)){n.interleaved=null;var l=i.next,a=n.pending;if(null!==a){var r=a.next;a.next=l,i.next=r}n.pending=i}qa=null}return e}function Cs(e,t){for(;;){var n=Sg;try{if(ba(),ur.current=ao,mr){for(var i=dr.memoizedState;null!==i;){var l=i.queue;null!==l&&(l.pending=null),i=i.next}mr=!1}if(Cr=0,Ar=hr=dr=null,pr=!1,vr=0,qg.current=null,null===n||null===n.return){Xg=1,Yg=t,Sg=null;break}e:{var r=e,o=n.return,g=n,s=t;if(t=Rg,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var I=s,u=g,c=u.tag;if(0===(1&u.mode)&&(0===c||11===c||15===c)){var C=u.alternate;C?(u.updateQueue=C.updateQueue,u.memoizedState=C.memoizedState,u.lanes=C.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=mo(o);if(null!==d){d.flags&=-257,po(d,o,g,0,t),1&d.mode&&Ao(r,I,t),s=I;var h=(t=d).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){Ao(r,I,t),hs();break e}s=Error(a(426))}else if(la&&1&g.mode){var m=mo(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),po(m,o,g,0,t),da(so(s,g));break e}}r=s=so(s,g),4!==Xg&&(Xg=2),null===Ng?Ng=[r]:Ng.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,Ha(r,Co(0,s,t));break e;case 1:g=s;var p=r.type,v=r.stateNode;if(0===(128&r.flags)&&("function"===typeof p.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Jg||!Jg.has(v)))){r.flags|=65536,t&=-t,r.lanes|=t,Ha(r,ho(r,g,t));break e}}r=r.return}while(null!==r)}fs(n)}catch(f){t=f,Sg===n&&null!==n&&(Sg=n=n.return);continue}break}}function ds(){var e=Zg.current;return Zg.current=ao,null===e?ao:e}function hs(){0!==Xg&&3!==Xg&&2!==Xg||(Xg=4),null===Wg||0===(268435455&Hg)&&0===(268435455&Kg)||os(Wg,Rg)}function As(e,t){var n=wg;wg|=2;var i=ds();for(Wg===e&&Rg===t||(_g=null,cs(e,t));;)try{ms();break}catch(l){Cs(e,l)}if(ba(),wg=n,Zg.current=i,null!==Sg)throw Error(a(261));return Wg=null,Rg=0,Xg}function ms(){for(;null!==Sg;)vs(Sg)}function ps(){for(;null!==Sg&&!Qe();)vs(Sg)}function vs(e){var t=Gg(e.alternate,e,Vg);e.memoizedProps=e.pendingProps,null===t?fs(e):Sg=t,qg.current=null}function fs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Uo(n,t,Vg)))return void(Sg=n)}else{if(null!==(n=Do(n,t)))return n.flags&=32767,void(Sg=n);if(null===e)return Xg=6,void(Sg=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Sg=t);Sg=t=e}while(null!==t);0===Xg&&(Xg=5)}function bs(e,t,n){var i=vt,l=xg.transition;try{xg.transition=null,vt=1,function(e,t,n,i){do{ys()}while(null!==Dg);if(0!==(6&wg))throw Error(a(327));n=e.finishedWork;var l=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-rt(n),a=1<<l;t[l]=0,i[l]=-1,e[l]=-1,n&=~a}}(e,r),e===Wg&&(Sg=Wg=null,Rg=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ug||(Ug=!0,Ws(tt,(function(){return ys(),null}))),r=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||r){r=xg.transition,xg.transition=null;var o=vt;vt=1;var g=wg;wg|=4,qg.current=null,function(e,t){if(el=Tt,Ci(e=ci())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var l=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(b){n=null;break e}var o=0,g=-1,s=-1,I=0,u=0,c=e,C=null;t:for(;;){for(var d;c!==n||0!==l&&3!==c.nodeType||(g=o+l),c!==r||0!==i&&3!==c.nodeType||(s=o+i),3===c.nodeType&&(o+=c.nodeValue.length),null!==(d=c.firstChild);)C=c,c=d;for(;;){if(c===e)break t;if(C===n&&++I===l&&(g=o),C===r&&++u===i&&(s=o),null!==(d=c.nextSibling))break;C=(c=C).parentNode}c=d}n=-1===g||-1===s?null:{start:g,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(tl={focusedElem:e,selectionRange:n},Tt=!1,jo=t;null!==jo;)if(e=(t=jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,jo=e;else for(;null!==jo;){t=jo;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var A=h.memoizedProps,m=h.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?A:Aa(t.type,A),m);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var f=t.stateNode.containerInfo;1===f.nodeType?f.textContent="":9===f.nodeType&&f.documentElement&&f.removeChild(f.documentElement);break;default:throw Error(a(163))}}catch(b){Bs(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,jo=e;break}jo=t.return}h=tg,tg=!1}(e,n),Ag(n,e),di(tl),Tt=!!el,tl=el=null,e.current=n,pg(n,e,l),Pe(),wg=g,vt=o,xg.transition=r}else e.current=n;if(Ug&&(Ug=!1,Dg=e,Qg=l),0===(r=e.pendingLanes)&&(Jg=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(lt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),is(e,Oe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((l=t[n]).value,{componentStack:l.stack,digest:l.digest});if(Tg)throw Tg=!1,e=Eg,Eg=null,e;0!==(1&Qg)&&0!==e.tag&&ys(),0!==(1&(r=e.pendingLanes))?e===Og?Pg++:(Pg=0,Og=e):Pg=0,Ll()}(e,t,n,i)}finally{xg.transition=l,vt=i}return null}function ys(){if(null!==Dg){var e=ft(Qg),t=xg.transition,n=vt;try{if(xg.transition=null,vt=16>e?16:e,null===Dg)var i=!1;else{if(e=Dg,Dg=null,Qg=0,0!==(6&wg))throw Error(a(331));var l=wg;for(wg|=4,jo=e.current;null!==jo;){var r=jo,o=r.child;if(0!==(16&jo.flags)){var g=r.deletions;if(null!==g){for(var s=0;s<g.length;s++){var I=g[s];for(jo=I;null!==jo;){var u=jo;switch(u.tag){case 0:case 11:case 15:ng(8,u,r)}var c=u.child;if(null!==c)c.return=u,jo=c;else for(;null!==jo;){var C=(u=jo).sibling,d=u.return;if(ag(u),u===I){jo=null;break}if(null!==C){C.return=d,jo=C;break}jo=d}}}var h=r.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var m=A.sibling;A.sibling=null,A=m}while(null!==A)}}jo=r}}if(0!==(2064&r.subtreeFlags)&&null!==o)o.return=r,jo=o;else e:for(;null!==jo;){if(0!==(2048&(r=jo).flags))switch(r.tag){case 0:case 11:case 15:ng(9,r,r.return)}var p=r.sibling;if(null!==p){p.return=r.return,jo=p;break e}jo=r.return}}var v=e.current;for(jo=v;null!==jo;){var f=(o=jo).child;if(0!==(2064&o.subtreeFlags)&&null!==f)f.return=o,jo=f;else e:for(o=v;null!==jo;){if(0!==(2048&(g=jo).flags))try{switch(g.tag){case 0:case 11:case 15:ig(9,g)}}catch(y){Bs(g,g.return,y)}if(g===o){jo=null;break e}var b=g.sibling;if(null!==b){b.return=g.return,jo=b;break e}jo=g.return}}if(wg=l,Ll(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(lt,e)}catch(y){}i=!0}return i}finally{vt=n,xg.transition=t}}return!1}function Gs(e,t,n){e=Xa(e,t=Co(0,t=so(n,t),1),1),t=es(),null!==e&&(mt(e,1,t),is(e,t))}function Bs(e,t,n){if(3===e.tag)Gs(e,e,n);else for(;null!==t;){if(3===t.tag){Gs(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jg||!Jg.has(i))){t=Xa(t,e=ho(t,e=so(n,e),1),1),e=es(),null!==t&&(mt(t,1,e),is(t,e));break}}t=t.return}}function Zs(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=es(),e.pingedLanes|=e.suspendedLanes&n,Wg===e&&(Rg&n)===n&&(4===Xg||3===Xg&&(130023424&Rg)===Rg&&500>Oe()-Mg?cs(e,0):Fg|=n),is(e,t)}function qs(e,t){0===t&&(0===(1&e.mode)?t=1:(t=It,0===(130023424&(It<<=1))&&(It=4194304)));var n=es();null!==(e=Wa(e,t))&&(mt(e,t,n),is(e,n))}function xs(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qs(e,n)}function ws(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,l=e.memoizedState;null!==l&&(n=l.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),qs(e,n)}function Ws(e,t){return Ue(e,t)}function Ss(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e,t,n,i){return new Ss(e,t,n,i)}function Vs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ks(e,t){var n=e.alternate;return null===n?((n=Rs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xs(e,t,n,i,l,r){var o=2;if(i=e,"function"===typeof e)Vs(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case G:return Ys(n.children,l,r,t);case B:o=8,l|=8;break;case Z:return(e=Rs(12,n,t,2|l)).elementType=Z,e.lanes=r,e;case W:return(e=Rs(13,n,t,l)).elementType=W,e.lanes=r,e;case S:return(e=Rs(19,n,t,l)).elementType=S,e.lanes=r,e;case k:return Hs(n,l,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case q:o=10;break e;case x:o=9;break e;case w:o=11;break e;case R:o=14;break e;case V:o=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rs(o,n,t,l)).elementType=e,t.type=i,t.lanes=r,t}function Ys(e,t,n,i){return(e=Rs(7,e,i,t)).lanes=n,e}function Hs(e,t,n,i){return(e=Rs(22,e,i,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Ks(e,t,n){return(e=Rs(6,e,null,t)).lanes=n,e}function Fs(e,t,n){return(t=Rs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ns(e,t,n,i,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=i,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function zs(e,t,n,i,l,a,r,o,g){return e=new Ns(e,t,n,o,g),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Ms(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Ls(e){if(!e)return xl;e:{if(Le(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Vl(n))return Yl(e,n,t)}return t}function _s(e,t,n,i,l,a,r,o,g){return(e=zs(n,i,!0,e,0,a,0,o,g)).context=Ls(null),n=e.current,(a=ka(i=es(),l=ts(n))).callback=void 0!==t&&null!==t?t:null,Xa(n,a,l),e.current.lanes=l,mt(e,l,i),is(e,i),e}function Ts(e,t,n,i){var l=t.current,a=es(),r=ts(l);return n=Ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=ka(a,r)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Xa(l,t,r))&&(ns(e,l,r,a),Ya(e,l,r)),r}function Es(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Js(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Us(e,t){Js(e,t),(e=e.alternate)&&Js(e,t)}Gg=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Wl.current)fo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return fo=!1,function(e,t,n){switch(t.tag){case 3:So(t),Ca();break;case 5:ar(t);break;case 1:Vl(t.type)&&Hl(t);break;case 4:ir(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,l=t.memoizedProps.value;ql(ma,i._currentValue),i._currentValue=l;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(ql(or,1&or.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ko(e,t,n):(ql(or,1&or.current),null!==(e=To(e,t,n))?e.sibling:null);ql(or,1&or.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Lo(e,t,n);t.flags|=128}if(null!==(l=t.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),ql(or,or.current),i)break;return null;case 22:case 23:return t.lanes=0,Zo(e,t,n)}return To(e,t,n)}(e,t,n);fo=0!==(131072&e.flags)}else fo=!1,la&&0!==(1048576&t.flags)&&$l(t,Jl,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;_o(e,t),e=t.pendingProps;var l=Rl(t,wl.current);Ba(t,n),l=Gr(null,t,i,e,l,n);var r=Br();return t.flags|=1,"object"===typeof l&&null!==l&&"function"===typeof l.render&&void 0===l.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vl(i)?(r=!0,Hl(t)):r=!1,t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,Ra(t),l.updater=Ma,t.stateNode=l,l._reactInternals=t,Ea(t,i,e,n),t=Wo(null,t,i,!0,r,n)):(t.tag=0,la&&r&&ea(t),bo(null,t,l,n),t=t.child),t;case 16:i=t.elementType;e:{switch(_o(e,t),e=t.pendingProps,i=(l=i._init)(i._payload),t.type=i,l=t.tag=function(e){if("function"===typeof e)return Vs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===w)return 11;if(e===R)return 14}return 2}(i),e=Aa(i,e),l){case 0:t=xo(null,t,i,e,n);break e;case 1:t=wo(null,t,i,e,n);break e;case 11:t=yo(null,t,i,e,n);break e;case 14:t=Go(null,t,i,Aa(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,l=t.pendingProps,xo(e,t,i,l=t.elementType===i?l:Aa(i,l),n);case 1:return i=t.type,l=t.pendingProps,wo(e,t,i,l=t.elementType===i?l:Aa(i,l),n);case 3:e:{if(So(t),null===e)throw Error(a(387));i=t.pendingProps,l=(r=t.memoizedState).element,Va(e,t),Ka(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ro(e,t,i,n,l=so(Error(a(423)),t));break e}if(i!==l){t=Ro(e,t,i,n,l=so(Error(a(424)),t));break e}for(ia=sl(t.stateNode.containerInfo.firstChild),na=t,la=!0,aa=null,n=Oa(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ca(),i===l){t=To(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return ar(t),null===e&&sa(t),i=t.type,l=t.pendingProps,r=null!==e?e.memoizedProps:null,o=l.children,nl(i,l)?o=null:null!==r&&nl(i,r)&&(t.flags|=32),qo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&sa(t),null;case 13:return Ko(e,t,n);case 4:return ir(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Pa(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,l=t.pendingProps,yo(e,t,i,l=t.elementType===i?l:Aa(i,l),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,l=t.pendingProps,r=t.memoizedProps,o=l.value,ql(ma,i._currentValue),i._currentValue=o,null!==r)if(oi(r.value,o)){if(r.children===l.children&&!Wl.current){t=To(e,t,n);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var g=r.dependencies;if(null!==g){o=r.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===r.tag){(s=ka(-1,n&-n)).tag=2;var I=r.updateQueue;if(null!==I){var u=(I=I.shared).pending;null===u?s.next=s:(s.next=u.next,u.next=s),I.pending=s}}r.lanes|=n,null!==(s=r.alternate)&&(s.lanes|=n),Ga(r.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===r.tag)o=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(g=o.alternate)&&(g.lanes|=n),Ga(o,n,t),o=r.sibling}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}bo(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,i=t.pendingProps.children,Ba(t,n),i=i(l=Za(l)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return l=Aa(i=t.type,t.pendingProps),Go(e,t,i,l=Aa(i.type,l),n);case 15:return Bo(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:Aa(i,l),_o(e,t),t.tag=1,Vl(i)?(e=!0,Hl(t)):e=!1,Ba(t,n),_a(t,i,l),Ea(t,i,l,n),Wo(null,t,i,!0,e,n);case 19:return Lo(e,t,n);case 22:return Zo(e,t,n)}throw Error(a(156,t.tag))};var Ds="function"===typeof reportError?reportError:function(e){console.error(e)};function Qs(e){this._internalRoot=e}function Ps(e){this._internalRoot=e}function Os(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function js(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $s(){}function eI(e,t,n,i,l){var a=n._reactRootContainer;if(a){var r=a;if("function"===typeof l){var o=l;l=function(){var e=Es(r);o.call(e)}}Ts(t,r,e,l)}else r=function(e,t,n,i,l){if(l){if("function"===typeof i){var a=i;i=function(){var e=Es(r);a.call(e)}}var r=_s(t,i,e,0,null,!1,0,"",$s);return e._reactRootContainer=r,e[dl]=r.current,Li(8===e.nodeType?e.parentNode:e),Is(),r}for(;l=e.lastChild;)e.removeChild(l);if("function"===typeof i){var o=i;i=function(){var e=Es(g);o.call(e)}}var g=zs(e,0,!1,null,0,!1,0,"",$s);return e._reactRootContainer=g,e[dl]=g.current,Li(8===e.nodeType?e.parentNode:e),Is((function(){Ts(t,g,n,i)})),g}(n,t,e,l,i);return Es(r)}Ps.prototype.render=Qs.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Ts(e,t,null,null)},Ps.prototype.unmount=Qs.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Is((function(){Ts(null,e,null,null)})),t[dl]=null}},Ps.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Kt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(pt(t,1|n),is(t,Oe()),0===(6&wg)&&(Lg=Oe()+500,Ll()))}break;case 13:Is((function(){var t=Wa(e,1);if(null!==t){var n=es();ns(t,e,1,n)}})),Us(e,1)}},yt=function(e){if(13===e.tag){var t=Wa(e,134217728);if(null!==t)ns(t,e,134217728,es());Us(e,134217728)}},Gt=function(e){if(13===e.tag){var t=ts(e),n=Wa(e,t);if(null!==n)ns(n,e,t,es());Us(e,t)}},Bt=function(){return vt},Zt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},ye=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var l=bl(i);if(!l)throw Error(a(90));U(i),j(i,l)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},we=ss,We=Is;var tI={usingClientEntryPoint:!1,Events:[vl,fl,bl,qe,xe,ss]},nI={findFiberByHostInstance:pl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iI={bundleType:nI.bundleType,version:nI.version,rendererPackageName:nI.rendererPackageName,rendererConfig:nI.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ee(e))?null:e.stateNode},findFiberByHostInstance:nI.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lI=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lI.isDisabled&&lI.supportsFiber)try{lt=lI.inject(iI),at=lI}catch(Ie){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tI,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Os(t))throw Error(a(200));return Ms(e,t,null,n)},t.createRoot=function(e,t){if(!Os(e))throw Error(a(299));var n=!1,i="",l=Ds;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=zs(e,1,!1,null,0,n,0,i,l),e[dl]=t.current,Li(8===e.nodeType?e.parentNode:e),new Qs(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ee(t))?null:e.stateNode},t.flushSync=function(e){return Is(e)},t.hydrate=function(e,t,n){if(!js(t))throw Error(a(200));return eI(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Os(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,l=!1,r="",o=Ds;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(l=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=_s(t,null,e,1,null!=n?n:null,l,0,r,o),e[dl]=t.current,Li(e),i)for(e=0;e<i.length;e++)l=(l=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Ps(t)},t.render=function(e,t,n){if(!js(t))throw Error(a(200));return eI(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!js(e))throw Error(a(40));return!!e._reactRootContainer&&(Is((function(){eI(null,null,e,!1,(function(){e._reactRootContainer=null,e[dl]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!js(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eI(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var i=n(164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},721:function(e,t,n){e.exports=function(e){var t={},i=n(791),l=n(100),a=Object.assign;function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),s=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var f=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case s:return"Portal";case c:return"Profiler";case u:return"StrictMode";case A:return"Suspense";case m:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case d:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case h:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case p:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case v:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function q(e){if(Z(e)!==e)throw Error(r(188))}function x(e){var t=e.alternate;if(!t){if(null===(t=Z(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var l=n.return;if(null===l)break;var a=l.alternate;if(null===a){if(null!==(i=l.return)){n=i;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return q(l),e;if(a===i)return q(l),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=l,i=a;else{for(var o=!1,g=l.child;g;){if(g===n){o=!0,n=l,i=a;break}if(g===i){o=!0,i=l,n=a;break}g=g.sibling}if(!o){for(g=a.child;g;){if(g===n){o=!0,n=a,i=l;break}if(g===i){o=!0,i=a,n=l;break}g=g.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function w(e){return null!==(e=x(e))?W(e):null}function W(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=W(e);if(null!==t)return t;e=e.sibling}return null}function S(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=S(e);if(null!==t)return t}e=e.sibling}return null}var R,V=Array.isArray,k=e.getPublicInstance,X=e.getRootHostContext,Y=e.getChildHostContext,H=e.prepareForCommit,K=e.resetAfterCommit,F=e.createInstance,N=e.appendInitialChild,z=e.finalizeInitialChildren,M=e.prepareUpdate,L=e.shouldSetTextContent,_=e.createTextInstance,T=e.scheduleTimeout,E=e.cancelTimeout,J=e.noTimeout,U=e.isPrimaryRenderer,D=e.supportsMutation,Q=e.supportsPersistence,P=e.supportsHydration,O=e.getInstanceFromNode,j=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,le=e.findFiberRoot,ae=e.getBoundingRect,re=e.getTextContent,oe=e.isHiddenSubtree,ge=e.matchAccessibilityRole,se=e.setFocusIfFocusable,Ie=e.setupIntersectionObserver,ue=e.appendChild,ce=e.appendChildToContainer,Ce=e.commitTextUpdate,de=e.commitMount,he=e.commitUpdate,Ae=e.insertBefore,me=e.insertInContainerBefore,pe=e.removeChild,ve=e.removeChildFromContainer,fe=e.resetTextContent,be=e.hideInstance,ye=e.hideTextInstance,Ge=e.unhideInstance,Be=e.unhideTextInstance,Ze=e.clearContainer,qe=e.cloneInstance,xe=e.createContainerChildSet,we=e.appendChildToContainerChildSet,We=e.finalizeContainerChildren,Se=e.replaceContainerChildren,Re=e.cloneHiddenInstance,Ve=e.cloneHiddenTextInstance,ke=e.canHydrateInstance,Xe=e.canHydrateTextInstance,Ye=e.canHydrateSuspenseInstance,He=e.isSuspenseInstancePending,Ke=e.isSuspenseInstanceFallback,Fe=e.registerSuspenseInstanceRetry,Ne=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Me=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,_e=e.hydrateInstance,Te=e.hydrateTextInstance,Ee=e.hydrateSuspenseInstance,Je=e.getNextHydratableInstanceAfterSuspenseInstance,Ue=e.commitHydratedContainer,De=e.commitHydratedSuspenseInstance,Qe=e.clearSuspenseBoundary,Pe=e.clearSuspenseBoundaryFromContainer,Oe=e.shouldDeleteUnhydratedTailInstances,je=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var l=s.stack.split("\n"),a=i.stack.split("\n"),r=l.length-1,o=a.length-1;1<=r&&0<=o&&l[r]!==a[o];)o--;for(;1<=r&&0<=o;r--,o--)if(l[r]!==a[o]){if(1!==r||1!==o)do{if(r--,0>--o||l[r]!==a[o]){var g="\n"+l[r].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=r&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,lt=[],at=-1;function rt(e){return{current:e}}function ot(e){0>at||(e.current=lt[at],lt[at]=null,at--)}function gt(e,t){at++,lt[at]=e.current,e.current=t}var st={},It=rt(st),ut=rt(!1),ct=st;function Ct(e,t){var n=e.type.contextTypes;if(!n)return st;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in n)a[l]=t[l];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function dt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ht(){ot(ut),ot(It)}function At(e,t,n){if(It.current!==st)throw Error(r(168));gt(It,t),gt(ut,n)}function mt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var l in i=i.getChildContext())if(!(l in t))throw Error(r(108,B(e)||"Unknown",l));return a({},n,i)}function pt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||st,ct=It.current,gt(It,e),gt(ut,ut.current),!0}function vt(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=mt(e,t,ct),i.__reactInternalMemoizedMergedChildContext=e,ot(ut),ot(It),gt(It,e)):ot(ut),gt(ut,n)}var ft=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/yt|0)|0},bt=Math.log,yt=Math.LN2;var Gt=64,Bt=4194304;function Zt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,l=e.suspendedLanes,a=e.pingedLanes,r=268435455&n;if(0!==r){var o=r&~l;0!==o?i=Zt(o):0!==(a&=r)&&(i=Zt(a))}else 0!==(r=n&~l)?i=Zt(r):0!==a&&(i=Zt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&l)&&((l=i&-i)>=(a=t&-t)||16===l&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)l=1<<(n=31-ft(t)),i|=e[n],t&=~l;return i}function xt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function wt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function St(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ft(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ft(n),l=1<<i;l&t|e[i]&t&&(e[i]|=t),n&=~l}}var Vt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Xt=l.unstable_scheduleCallback,Yt=l.unstable_cancelCallback,Ht=l.unstable_shouldYield,Kt=l.unstable_requestPaint,Ft=l.unstable_now,Nt=l.unstable_ImmediatePriority,zt=l.unstable_UserBlockingPriority,Mt=l.unstable_NormalPriority,Lt=l.unstable_IdlePriority,_t=null,Tt=null;var Et="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Jt=null,Ut=!1,Dt=!1;function Qt(e){null===Jt?Jt=[e]:Jt.push(e)}function Pt(){if(!Dt&&null!==Jt){Dt=!0;var e=0,t=Vt;try{var n=Jt;for(Vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Jt=null,Ut=!1}catch(l){throw null!==Jt&&(Jt=Jt.slice(e+1)),Xt(Nt,Pt),l}finally{Vt=t,Dt=!1}}return null}var Ot=o.ReactCurrentBatchConfig;function jt(e,t){if(Et(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var l=n[i];if(!it.call(t,l)||!Et(e[l],t[l]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=rt(null),nn=null,ln=null,an=null;function rn(){an=ln=nn=null}function on(e,t,n){U?(gt(tn,t._currentValue),t._currentValue=n):(gt(tn,t._currentValue2),t._currentValue2=n)}function gn(e){var t=tn.current;ot(tn),U?e._currentValue=t:e._currentValue2=t}function sn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function In(e,t){nn=e,an=ln=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Hl=!0),e.firstContext=null)}function un(e){var t=U?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===ln){if(null===nn)throw Error(r(308));ln=e,nn.dependencies={lanes:0,firstContext:e}}else ln=ln.next=e;return t}var cn=null,Cn=!1;function dn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Da&&0!==(1&e.mode)&&0===(2&Ua)?(null===(e=n.interleaved)?(t.next=t,null===cn?cn=[n]:cn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function pn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function vn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var l=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?l=a=r:a=a.next=r,n=n.next}while(null!==n);null===a?l=a=t:a=a.next=t}else l=a=t;return n={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fn(e,t,n,i){var l=e.updateQueue;Cn=!1;var r=l.firstBaseUpdate,o=l.lastBaseUpdate,g=l.shared.pending;if(null!==g){l.shared.pending=null;var s=g,I=s.next;s.next=null,null===o?r=I:o.next=I,o=s;var u=e.alternate;null!==u&&((g=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===g?u.firstBaseUpdate=I:g.next=I,u.lastBaseUpdate=s))}if(null!==r){var c=l.baseState;for(o=0,u=I=s=null,g=r;;){var C=g.lane,d=g.eventTime;if((i&C)===C){null!==u&&(u=u.next={eventTime:d,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var h=e,A=g;switch(C=t,d=n,A.tag){case 1:if("function"===typeof(h=A.payload)){c=h.call(d,c,C);break e}c=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(C="function"===typeof(h=A.payload)?h.call(d,c,C):h)||void 0===C)break e;c=a({},c,C);break e;case 2:Cn=!0}}null!==g.callback&&0!==g.lane&&(e.flags|=64,null===(C=l.effects)?l.effects=[g]:C.push(g))}else d={eventTime:d,lane:C,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===u?(I=u=d,s=c):u=u.next=d,o|=C;if(null===(g=g.next)){if(null===(g=l.shared.pending))break;g=(C=g).next,C.next=null,l.lastBaseUpdate=C,l.shared.pending=null}}if(null===u&&(s=c),l.baseState=s,l.firstBaseUpdate=I,l.lastBaseUpdate=u,null!==(t=l.shared.interleaved)){l=t;do{o|=l.lane,l=l.next}while(l!==t)}else null===r&&(l.shared.lanes=0);tr|=o,e.lanes=o,e.memoizedState=c}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],l=i.callback;if(null!==l){if(i.callback=null,i=n,"function"!==typeof l)throw Error(r(191,l));l.call(i)}}}var yn=(new i.Component).refs;function Gn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bn={isMounted:function(e){return!!(e=e._reactInternals)&&Z(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=fr(),l=br(e),a=An(i,l);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),mn(e,a),null!==(t=yr(e,l,i))&&pn(t,e,l)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=fr(),l=br(e),a=An(i,l);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),mn(e,a),null!==(t=yr(e,l,i))&&pn(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fr(),i=br(e),l=An(n,i);l.tag=2,void 0!==t&&null!==t&&(l.callback=t),mn(e,l),null!==(t=yr(e,i,n))&&pn(t,e,i)}};function Zn(e,t,n,i,l,a,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,r):!t.prototype||!t.prototype.isPureReactComponent||(!jt(n,i)||!jt(l,a))}function qn(e,t,n){var i=!1,l=st,a=t.contextType;return"object"===typeof a&&null!==a?a=un(a):(l=dt(t)?ct:It.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ct(e,l):st),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function xn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Bn.enqueueReplaceState(t,t.state,null)}function wn(e,t,n,i){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=yn,dn(e);var a=t.contextType;"object"===typeof a&&null!==a?l.context=un(a):(a=dt(t)?ct:It.current,l.context=Ct(e,a)),l.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Gn(e,t,a,n),l.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(t=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&Bn.enqueueReplaceState(l,l.state,null),fn(e,n,l,i),l.state=e.memoizedState),"function"===typeof l.componentDidMount&&(e.flags|=4194308)}var Wn=[],Sn=0,Rn=null,Vn=0,kn=[],Xn=0,Yn=null,Hn=1,Kn="";function Fn(e,t){Wn[Sn++]=Vn,Wn[Sn++]=Rn,Rn=e,Vn=t}function Nn(e,t,n){kn[Xn++]=Hn,kn[Xn++]=Kn,kn[Xn++]=Yn,Yn=e;var i=Hn;e=Kn;var l=32-ft(i)-1;i&=~(1<<l),n+=1;var a=32-ft(t)+l;if(30<a){var r=l-l%5;a=(i&(1<<r)-1).toString(32),i>>=r,l-=r,Hn=1<<32-ft(t)+l|n<<l|i,Kn=a+e}else Hn=1<<a|n<<l|i,Kn=e}function zn(e){null!==e.return&&(Fn(e,1),Nn(e,1,0))}function Mn(e){for(;e===Rn;)Rn=Wn[--Sn],Wn[Sn]=null,Vn=Wn[--Sn],Wn[Sn]=null;for(;e===Yn;)Yn=kn[--Xn],kn[Xn]=null,Kn=kn[--Xn],kn[Xn]=null,Hn=kn[--Xn],kn[Xn]=null}var Ln=null,_n=null,Tn=!1,En=!1,Jn=null;function Un(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Dn(e,t){switch(e.tag){case 5:return null!==(t=ke(t,e.type,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=ze(t),!0);case 6:return null!==(t=Xe(t,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=null,!0);case 13:if(null!==(t=Ye(t))){var n=null!==Yn?{id:Hn,overflow:Kn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Or(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ln=e,_n=null,!0}return!1;default:return!1}}function Qn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Pn(e){if(Tn){var t=_n;if(t){var n=t;if(!Dn(e,t)){if(Qn(e))throw Error(r(418));t=Ne(n);var i=Ln;t&&Dn(e,t)?Un(i,n):(e.flags=-4097&e.flags|2,Tn=!1,Ln=e)}}else{if(Qn(e))throw Error(r(418));e.flags=-4097&e.flags|2,Tn=!1,Ln=e}}}function On(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ln=e}function jn(e){if(!P||e!==Ln)return!1;if(!Tn)return On(e),Tn=!0,!1;if(3!==e.tag&&(5!==e.tag||Oe(e.type)&&!L(e.type,e.memoizedProps))){var t=_n;if(t){if(Qn(e)){for(e=_n;e;)e=Ne(e);throw Error(r(418))}for(;t;)Un(e,t),t=Ne(t)}}if(On(e),13===e.tag){if(!P)throw Error(r(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));_n=Je(e)}else _n=Ln?Ne(e.stateNode):null;return!0}function $n(){P&&(_n=Ln=null,En=Tn=!1)}function ei(e){null===Jn?Jn=[e]:Jn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var l=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=l.refs;t===yn&&(t=l.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function li(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function l(e,t){return(e=$r(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=l(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===I?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===v&&ii(a)===t.type)?((i=l(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function C(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=lo(n,e.mode,i)).return=e,t):((t=l(t,n.children||[])).return=e,t)}function d(e,t,n,i,a){return null===t||7!==t.tag?((t=to(n,e.mode,i,a)).return=e,t):((t=l(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case s:return(t=lo(t,e.mode,n)).return=e,t;case v:return h(e,(0,t._init)(t._payload),n)}if(V(t)||y(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function A(e,t,n,i){var l=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==l?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===l?c(e,t,n,i):null;case s:return n.key===l?C(e,t,n,i):null;case v:return A(e,t,(l=n._init)(n._payload),i)}if(V(n)||y(n))return null!==l?null:d(e,t,n,i,null);ni(e,n)}return null}function m(e,t,n,i,l){if("string"===typeof i&&""!==i||"number"===typeof i)return u(t,e=e.get(n)||null,""+i,l);if("object"===typeof i&&null!==i){switch(i.$$typeof){case g:return c(t,e=e.get(null===i.key?n:i.key)||null,i,l);case s:return C(t,e=e.get(null===i.key?n:i.key)||null,i,l);case v:return m(e,t,n,(0,i._init)(i._payload),l)}if(V(i)||y(i))return d(t,e=e.get(n)||null,i,l,null);ni(t,i)}return null}function p(l,r,o,g){for(var s=null,I=null,u=r,c=r=0,C=null;null!==u&&c<o.length;c++){u.index>c?(C=u,u=null):C=u.sibling;var d=A(l,u,o[c],g);if(null===d){null===u&&(u=C);break}e&&u&&null===d.alternate&&t(l,u),r=a(d,r,c),null===I?s=d:I.sibling=d,I=d,u=C}if(c===o.length)return n(l,u),Tn&&Fn(l,c),s;if(null===u){for(;c<o.length;c++)null!==(u=h(l,o[c],g))&&(r=a(u,r,c),null===I?s=u:I.sibling=u,I=u);return Tn&&Fn(l,c),s}for(u=i(l,u);c<o.length;c++)null!==(C=m(u,l,c,o[c],g))&&(e&&null!==C.alternate&&u.delete(null===C.key?c:C.key),r=a(C,r,c),null===I?s=C:I.sibling=C,I=C);return e&&u.forEach((function(e){return t(l,e)})),Tn&&Fn(l,c),s}function f(l,o,g,s){var I=y(g);if("function"!==typeof I)throw Error(r(150));if(null==(g=I.call(g)))throw Error(r(151));for(var u=I=null,c=o,C=o=0,d=null,p=g.next();null!==c&&!p.done;C++,p=g.next()){c.index>C?(d=c,c=null):d=c.sibling;var v=A(l,c,p.value,s);if(null===v){null===c&&(c=d);break}e&&c&&null===v.alternate&&t(l,c),o=a(v,o,C),null===u?I=v:u.sibling=v,u=v,c=d}if(p.done)return n(l,c),Tn&&Fn(l,C),I;if(null===c){for(;!p.done;C++,p=g.next())null!==(p=h(l,p.value,s))&&(o=a(p,o,C),null===u?I=p:u.sibling=p,u=p);return Tn&&Fn(l,C),I}for(c=i(l,c);!p.done;C++,p=g.next())null!==(p=m(c,l,C,p.value,s))&&(e&&null!==p.alternate&&c.delete(null===p.key?C:p.key),o=a(p,o,C),null===u?I=p:u.sibling=p,u=p);return e&&c.forEach((function(e){return t(l,e)})),Tn&&Fn(l,C),I}return function e(i,a,r,u){if("object"===typeof r&&null!==r&&r.type===I&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case g:e:{for(var c=r.key,C=a;null!==C;){if(C.key===c){if((c=r.type)===I){if(7===C.tag){n(i,C.sibling),(a=l(C,r.props.children)).return=i,i=a;break e}}else if(C.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===v&&ii(c)===C.type){n(i,C.sibling),(a=l(C,r.props)).ref=ti(i,C,r),a.return=i,i=a;break e}n(i,C);break}t(i,C),C=C.sibling}r.type===I?((a=to(r.props.children,i.mode,u,r.key)).return=i,i=a):((u=eo(r.type,r.key,r.props,null,i.mode,u)).ref=ti(i,a,r),u.return=i,i=u)}return o(i);case s:e:{for(C=r.key;null!==a;){if(a.key===C){if(4===a.tag&&a.stateNode.containerInfo===r.containerInfo&&a.stateNode.implementation===r.implementation){n(i,a.sibling),(a=l(a,r.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=lo(r,i.mode,u)).return=i,i=a}return o(i);case v:return e(i,a,(C=r._init)(r._payload),u)}if(V(r))return p(i,a,r,u);if(y(r))return f(i,a,r,u);ni(i,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==a&&6===a.tag?(n(i,a.sibling),(a=l(a,r)).return=i,i=a):(n(i,a),(a=io(r,i.mode,u)).return=i,i=a),o(i)):n(i,a)}}var ai=li(!0),ri=li(!1),oi={},gi=rt(oi),si=rt(oi),Ii=rt(oi);function ui(e){if(e===oi)throw Error(r(174));return e}function ci(e,t){gt(Ii,t),gt(si,e),gt(gi,oi),e=X(t),ot(gi),gt(gi,e)}function Ci(){ot(gi),ot(si),ot(Ii)}function di(e){var t=ui(Ii.current),n=ui(gi.current);n!==(t=Y(n,e.type,t))&&(gt(si,e),gt(gi,t))}function hi(e){si.current===e&&(ot(gi),ot(si))}var Ai=rt(0);function mi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||He(n)||Ke(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pi=[];function vi(){for(var e=0;e<pi.length;e++){var t=pi[e];U?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}pi.length=0}var fi=o.ReactCurrentDispatcher,bi=o.ReactCurrentBatchConfig,yi=0,Gi=null,Bi=null,Zi=null,qi=!1,xi=!1,wi=0,Wi=0;function Si(){throw Error(r(321))}function Ri(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function Vi(e,t,n,i,l,a){if(yi=a,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?dl:hl,e=n(i,l),xi){a=0;do{if(xi=!1,wi=0,25<=a)throw Error(r(301));a+=1,Zi=Bi=null,t.updateQueue=null,fi.current=Al,e=n(i,l)}while(xi)}if(fi.current=Cl,t=null!==Bi&&null!==Bi.next,yi=0,Zi=Bi=Gi=null,qi=!1,t)throw Error(r(300));return e}function ki(){var e=0!==wi;return wi=0,e}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e,Zi}function Yi(){if(null===Bi){var e=Gi.alternate;e=null!==e?e.memoizedState:null}else e=Bi.next;var t=null===Zi?Gi.memoizedState:Zi.next;if(null!==t)Zi=t,Bi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(Bi=e).memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e}return Zi}function Hi(e,t){return"function"===typeof t?t(e):t}function Ki(e){var t=Yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=Bi,l=i.baseQueue,a=n.pending;if(null!==a){if(null!==l){var o=l.next;l.next=a.next,a.next=o}i.baseQueue=l=a,n.pending=null}if(null!==l){a=l.next,i=i.baseState;var g=o=null,s=null,I=a;do{var u=I.lane;if((yi&u)===u)null!==s&&(s=s.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),i=I.hasEagerState?I.eagerState:e(i,I.action);else{var c={lane:u,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};null===s?(g=s=c,o=i):s=s.next=c,Gi.lanes|=u,tr|=u}I=I.next}while(null!==I&&I!==a);null===s?o=i:s.next=g,Et(i,t.memoizedState)||(Hl=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){l=e;do{a=l.lane,Gi.lanes|=a,tr|=a,l=l.next}while(l!==e)}else null===l&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fi(e){var t=Yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,l=n.pending,a=t.memoizedState;if(null!==l){n.pending=null;var o=l=l.next;do{a=e(a,o.action),o=o.next}while(o!==l);Et(a,t.memoizedState)||(Hl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ni(){}function zi(e,t){var n=Gi,i=Yi(),l=t(),a=!Et(i.memoizedState,l);if(a&&(i.memoizedState=l,Hl=!0),i=i.queue,Oi(_i.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==Zi&&1&Zi.memoizedState.tag){if(n.flags|=2048,Ji(9,Li.bind(null,n,i,l,t),void 0,null),null===Da)throw Error(r(349));0!==(30&yi)||Mi(n,t,l)}return l}function Mi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Li(e,t,n,i){t.value=n,t.getSnapshot=i,Ti(t)&&yr(e,1,-1)}function _i(e,t,n){return n((function(){Ti(t)&&yr(e,1,-1)}))}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch(i){return!0}}function Ei(e){var t=Xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=gl.bind(null,Gi,e),[t.memoizedState,e]}function Ji(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ui(){return Yi().memoizedState}function Di(e,t,n,i){var l=Xi();Gi.flags|=e,l.memoizedState=Ji(1|t,n,void 0,void 0===i?null:i)}function Qi(e,t,n,i){var l=Yi();i=void 0===i?null:i;var a=void 0;if(null!==Bi){var r=Bi.memoizedState;if(a=r.destroy,null!==i&&Ri(i,r.deps))return void(l.memoizedState=Ji(t,n,a,i))}Gi.flags|=e,l.memoizedState=Ji(1|t,n,a,i)}function Pi(e,t){return Di(8390656,8,e,t)}function Oi(e,t){return Qi(2048,8,e,t)}function ji(e,t){return Qi(4,2,e,t)}function $i(e,t){return Qi(4,4,e,t)}function el(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tl(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Qi(4,4,el.bind(null,t,e),n)}function nl(){}function il(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ll(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function al(e,t){var n=Vt;Vt=0!==n&&4>n?n:4,e(!0);var i=bi.transition;bi.transition={};try{e(!1),t()}finally{Vt=n,bi.transition=i}}function rl(){return Yi().memoizedState}function ol(e,t,n){var i=br(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sl(e)?Il(t,n):(ul(e,t,n),null!==(e=yr(e,i,n=fr()))&&cl(e,t,i))}function gl(e,t,n){var i=br(e),l={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sl(e))Il(t,l);else{ul(e,t,l);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=a(r,n);if(l.hasEagerState=!0,l.eagerState=o,Et(o,r))return}catch(g){}null!==(e=yr(e,i,n=fr()))&&cl(e,t,i)}}function sl(e){var t=e.alternate;return e===Gi||null!==t&&t===Gi}function Il(e,t){xi=qi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ul(e,t,n){null!==Da&&0!==(1&e.mode)&&0===(2&Ua)?(null===(e=t.interleaved)?(n.next=n,null===cn?cn=[t]:cn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function cl(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var Cl={readContext:un,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},dl={readContext:un,useCallback:function(e,t){return Xi().memoizedState=[e,void 0===t?null:t],e},useContext:un,useEffect:Pi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,el.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=Xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Xi();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ol.bind(null,Gi,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Xi().memoizedState=e},useState:Ei,useDebugValue:nl,useDeferredValue:function(e){var t=Ei(e),n=t[0],i=t[1];return Pi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){var e=Ei(!1),t=e[0];return e=al.bind(null,e[1]),Xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Gi,l=Xi();if(Tn){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Da)throw Error(r(349));0!==(30&yi)||Mi(i,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,Pi(_i.bind(null,i,a,e),[e]),i.flags|=2048,Ji(9,Li.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Xi(),t=Da.identifierPrefix;if(Tn){var n=Kn;t=":"+t+"R"+(n=(Hn&~(1<<32-ft(Hn)-1)).toString(32)+n),0<(n=wi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Wi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hl={readContext:un,useCallback:il,useContext:un,useEffect:Oi,useImperativeHandle:tl,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:ll,useReducer:Ki,useRef:Ui,useState:function(){return Ki(Hi)},useDebugValue:nl,useDeferredValue:function(e){var t=Ki(Hi),n=t[0],i=t[1];return Oi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Ki(Hi)[0],Yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:zi,useId:rl,unstable_isNewReconciler:!1},Al={readContext:un,useCallback:il,useContext:un,useEffect:Oi,useImperativeHandle:tl,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:ll,useReducer:Fi,useRef:Ui,useState:function(){return Fi(Hi)},useDebugValue:nl,useDeferredValue:function(e){var t=Fi(Hi),n=t[0],i=t[1];return Oi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Fi(Hi)[0],Yi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:zi,useId:rl,unstable_isNewReconciler:!1};function ml(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var l=n}catch(a){l="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:l}}function pl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var vl,fl,bl,yl,Gl="function"===typeof WeakMap?WeakMap:Map;function Bl(e,t,n){(n=An(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ir||(Ir=!0,ur=i),pl(0,t)},n}function Zl(e,t,n){(n=An(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var l=t.value;n.payload=function(){return i(l)},n.callback=function(){pl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){pl(0,t),"function"!==typeof i&&(null===cr?cr=new Set([this]):cr.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ql(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Gl;var l=new Set;i.set(t,l)}else void 0===(l=i.get(t))&&(l=new Set,i.set(t,l));l.has(n)||(l.add(n),e=Er.bind(null,e,t,n),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wl(e,t,n,i,l){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=An(-1,1)).tag=2,mn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}function Wl(e){e.flags|=4}function Sl(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(D)vl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)N(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},fl=function(){},bl=function(e,t,n,i,l){if((e=e.memoizedProps)!==i){var a=t.stateNode,r=ui(gi.current);n=M(a,n,e,i,l,r),(t.updateQueue=n)&&Wl(t)}},yl=function(e,t,n,i){n!==i&&Wl(t)};else if(Q){vl=function(e,t,n,i){for(var l=t.child;null!==l;){if(5===l.tag){var a=l.stateNode;n&&i&&(a=Re(a,l.type,l.memoizedProps,l)),N(e,a)}else if(6===l.tag)a=l.stateNode,n&&i&&(a=Ve(a,l.memoizedProps,l)),N(e,a);else if(4!==l.tag)if(22===l.tag&&null!==l.memoizedState)null!==(a=l.child)&&(a.return=l),vl(e,l,!0,!0);else if(null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break;for(;null===l.sibling;){if(null===l.return||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};var Rl=function e(t,n,i,l){for(var a=n.child;null!==a;){if(5===a.tag){var r=a.stateNode;i&&l&&(r=Re(r,a.type,a.memoizedProps,a)),we(t,r)}else if(6===a.tag)r=a.stateNode,i&&l&&(r=Ve(r,a.memoizedProps,a)),we(t,r);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(r=a.child)&&(r.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};fl=function(e,t){var n=t.stateNode;if(!Sl(e,t)){e=n.containerInfo;var i=xe(e);Rl(i,t,!1,!1),n.pendingChildren=i,Wl(t),We(e,i)}},bl=function(e,t,n,i,l){var a=e.stateNode,r=e.memoizedProps;if((e=Sl(e,t))&&r===i)t.stateNode=a;else{var o=t.stateNode,g=ui(gi.current),s=null;r!==i&&(s=M(o,n,r,i,l,g)),e&&null===s?t.stateNode=a:(a=qe(a,s,n,r,i,t,e,o),z(a,n,i,l,g)&&Wl(t),t.stateNode=a,e?Wl(t):vl(a,t,!1,!1))}},yl=function(e,t,n,i){n!==i?(e=ui(Ii.current),n=ui(gi.current),t.stateNode=_(i,e,n,t),Wl(t)):t.stateNode=e.stateNode}}else fl=function(){},bl=function(){},yl=function(){};function Vl(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var l=e.child;null!==l;)n|=l.lanes|l.childLanes,i|=14680064&l.subtreeFlags,i|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xl(e,t,n){var i=t.pendingProps;switch(Mn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kl(t),null;case 1:case 17:return dt(t.type)&&ht(),kl(t),null;case 3:return i=t.stateNode,Ci(),ot(ut),ot(It),vi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(jn(t)?Wl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jn&&(xr(Jn),Jn=null))),fl(e,t),kl(t),null;case 5:hi(t),n=ui(Ii.current);var l=t.type;if(null!==e&&null!=t.stateNode)bl(e,t,l,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return kl(t),null}if(e=ui(gi.current),jn(t)){if(!P)throw Error(r(175));e=_e(t.stateNode,t.type,t.memoizedProps,n,e,t,!En),t.updateQueue=e,null!==e&&Wl(t)}else{var a=F(l,i,n,e,t);vl(a,t,!1,!1),t.stateNode=a,z(a,l,i,n,e)&&Wl(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return kl(t),null;case 6:if(e&&null!=t.stateNode)yl(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(e=ui(Ii.current),n=ui(gi.current),jn(t)){if(!P)throw Error(r(176));if(e=t.stateNode,i=t.memoizedProps,(n=Te(e,i,t,!En))&&null!==(l=Ln))switch(a=0!==(1&l.mode),l.tag){case 3:je(l.stateNode.containerInfo,e,i,a);break;case 5:$e(l.type,l.memoizedProps,l.stateNode,e,i,a)}n&&Wl(t)}else t.stateNode=_(i,e,n,t)}return kl(t),null;case 13:if(ot(Ai),i=t.memoizedState,Tn&&null!==_n&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=_n;e;)e=Ne(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=jn(t),null===e){if(!i)throw Error(r(318));if(!P)throw Error(r(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(317));Ee(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return kl(t),null}return null!==Jn&&(xr(Jn),Jn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?jn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ai.current)?0===$a&&($a=3):Yr())),null!==t.updateQueue&&(t.flags|=4),kl(t),null);case 4:return Ci(),fl(e,t),null===e&&j(t.stateNode.containerInfo),kl(t),null;case 10:return gn(t.type._context),kl(t),null;case 19:if(ot(Ai),null===(l=t.memoizedState))return kl(t),null;if(i=0!==(128&t.flags),null===(a=l.rendering))if(i)Vl(l,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=mi(e))){for(t.flags|=128,Vl(l,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)l=e,(n=i).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,l=a.dependencies,n.dependencies=null===l?null:{lanes:l.lanes,firstContext:l.firstContext}),i=i.sibling;return gt(Ai,1&Ai.current|2),t.child}e=e.sibling}null!==l.tail&&Ft()>or&&(t.flags|=128,i=!0,Vl(l,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=mi(a))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Vl(l,!0),null===l.tail&&"hidden"===l.tailMode&&!a.alternate&&!Tn)return kl(t),null}else 2*Ft()-l.renderingStartTime>or&&1073741824!==n&&(t.flags|=128,i=!0,Vl(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=l.last)?e.sibling=a:t.child=a,l.last=a)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ft(),t.sibling=null,e=Ai.current,gt(Ai,i?1&e|2:1&e),t):(kl(t),null);case 22:case 23:return Rr(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Oa)&&(kl(t),D&&6&t.subtreeFlags&&(t.flags|=8192)):kl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}var Yl=o.ReactCurrentOwner,Hl=!1;function Kl(e,t,n,i){t.child=null===e?ri(t,null,n,i):ai(t,e.child,n,i)}function Fl(e,t,n,i,l){n=n.render;var a=t.ref;return In(t,l),i=Vi(e,t,n,i,a,l),n=ki(),null===e||Hl?(Tn&&n&&zn(t),t.flags|=1,Kl(e,t,i,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,la(e,t,l))}function Nl(e,t,n,i,l){if(null===e){var a=n.type;return"function"!==typeof a||jr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zl(e,t,a,i,l))}if(a=e.child,0===(e.lanes&l)){var r=a.memoizedProps;if((n=null!==(n=n.compare)?n:jt)(r,i)&&e.ref===t.ref)return la(e,t,l)}return t.flags|=1,(e=$r(a,i)).ref=t.ref,e.return=t,t.child=e}function zl(e,t,n,i,l){if(null!==e&&jt(e.memoizedProps,i)&&e.ref===t.ref){if(Hl=!1,0===(e.lanes&l))return t.lanes=e.lanes,la(e,t,l);0!==(131072&e.flags)&&(Hl=!0)}return _l(e,t,n,i,l)}function Ml(e,t,n){var i=t.pendingProps,l=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},gt(ja,Oa),Oa|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,gt(ja,Oa),Oa|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==a?a.baseLanes:n,gt(ja,Oa),Oa|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,gt(ja,Oa),Oa|=i;return Kl(e,t,l,n),t.child}function Ll(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _l(e,t,n,i,l){var a=dt(n)?ct:It.current;return a=Ct(t,a),In(t,l),n=Vi(e,t,n,i,a,l),i=ki(),null===e||Hl?(Tn&&i&&zn(t),t.flags|=1,Kl(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,la(e,t,l))}function Tl(e,t,n,i,l){if(dt(n)){var a=!0;pt(t)}else a=!1;if(In(t,l),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),qn(t,n,i),wn(t,n,i,l),i=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var g=r.context,s=n.contextType;"object"===typeof s&&null!==s?s=un(s):s=Ct(t,s=dt(n)?ct:It.current);var I=n.getDerivedStateFromProps,u="function"===typeof I||"function"===typeof r.getSnapshotBeforeUpdate;u||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==i||g!==s)&&xn(t,r,i,s),Cn=!1;var c=t.memoizedState;r.state=c,fn(t,i,r,l),g=t.memoizedState,o!==i||c!==g||ut.current||Cn?("function"===typeof I&&(Gn(t,n,I,i),g=t.memoizedState),(o=Cn||Zn(t,n,o,i,c,g,s))?(u||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),r.props=i,r.state=g,r.context=s,i=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,hn(e,t),o=t.memoizedProps,s=t.type===t.elementType?o:en(t.type,o),r.props=s,u=t.pendingProps,c=r.context,"object"===typeof(g=n.contextType)&&null!==g?g=un(g):g=Ct(t,g=dt(n)?ct:It.current);var C=n.getDerivedStateFromProps;(I="function"===typeof C||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==u||c!==g)&&xn(t,r,i,g),Cn=!1,c=t.memoizedState,r.state=c,fn(t,i,r,l);var d=t.memoizedState;o!==u||c!==d||ut.current||Cn?("function"===typeof C&&(Gn(t,n,C,i),d=t.memoizedState),(s=Cn||Zn(t,n,s,i,c,d,g)||!1)?(I||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,d,g),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,d,g)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),r.props=i,r.state=d,r.context=g,i=s):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),i=!1)}return El(e,t,n,i,a,l)}function El(e,t,n,i,l,a){Ll(e,t);var r=0!==(128&t.flags);if(!i&&!r)return l&&vt(t,n,!1),la(e,t,a);i=t.stateNode,Yl.current=t;var o=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&r?(t.child=ai(t,e.child,null,a),t.child=ai(t,null,o,a)):Kl(e,t,o,a),t.memoizedState=i.state,l&&vt(t,n,!0),t.child}function Jl(e){var t=e.stateNode;t.pendingContext?At(0,t.pendingContext,t.pendingContext!==t.context):t.context&&At(0,t.context,!1),ci(e,t.containerInfo)}function Ul(e,t,n,i,l){return $n(),ei(l),t.flags|=256,Kl(e,t,n,i),t.child}var Dl={dehydrated:null,treeContext:null,retryLane:0};function Ql(e){return{baseLanes:e,cachePool:null}}function Pl(e,t,n){var i,l=t.pendingProps,a=Ai.current,o=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),gt(Ai,1&a),null===e)return Pn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Ke(e)?t.lanes=8:t.lanes=1073741824,null):(a=l.children,e=l.fallback,o?(l=t.mode,o=t.child,a={mode:"hidden",children:a},0===(1&l)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=no(a,l,0,null),e=to(e,l,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ql(n),t.memoizedState=Dl,e):Ol(t,a));if(null!==(a=e.memoizedState)){if(null!==(i=a.dehydrated)){if(g)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(r(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=l.fallback,a=t.mode,l=no({mode:"visible",children:l.children},a,0,null),(o=to(o,a,n,null)).flags|=2,l.return=t,o.return=t,l.sibling=o,t.child=l,0!==(1&t.mode)&&ai(t,e.child,null,n),t.child.memoizedState=Ql(n),t.memoizedState=Dl,o);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Ke(i))t=ea(e,t,n,Error(r(419)));else if(l=0!==(n&e.childLanes),Hl||l){if(null!==(l=Da)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(l=0!==(o&(l.suspendedLanes|n))?0:o)&&l!==a.retryLane&&(a.retryLane=l,yr(e,l,-1))}Yr(),t=ea(e,t,n,Error(r(421)))}else He(i)?(t.flags|=128,t.child=e.child,t=Ur.bind(null,e),Fe(i,t),t=null):(n=a.treeContext,P&&(_n=Le(i),Ln=t,Tn=!0,Jn=null,En=!1,null!==n&&(kn[Xn++]=Hn,kn[Xn++]=Kn,kn[Xn++]=Yn,Hn=n.id,Kn=n.overflow,Yn=t)),(t=Ol(t,t.pendingProps.children)).flags|=4096);return t}return o?(l=$l(e,t,l.children,l.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Ql(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Dl,l):(n=jl(e,t,l.children,n),t.memoizedState=null,n)}return o?(l=$l(e,t,l.children,l.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?Ql(n):{baseLanes:a.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Dl,l):(n=jl(e,t,l.children,n),t.memoizedState=null,n)}function Ol(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,n,i){var l=e.child;return e=l.sibling,n=$r(l,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $l(e,t,n,i,l){var a=t.mode,r=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$r(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==r?i=$r(r,i):(i=to(i,a,l,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function ea(e,t,n,i){return null!==i&&ei(i),ai(t,e.child,null,n),(e=Ol(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),sn(e.return,t,n)}function na(e,t,n,i,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=l)}function ia(e,t,n){var i=t.pendingProps,l=i.revealOrder,a=i.tail;if(Kl(e,t,i.children,n),0!==(2&(i=Ai.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(gt(Ai,i),0===(1&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)null!==(e=n.alternate)&&null===mi(e)&&(l=n),n=n.sibling;null===(n=l)?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),na(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(null!==(e=l.alternate)&&null===mi(e)){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function la(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),tr|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=$r(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$r(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Mn(t),t.tag){case 1:return dt(t.type)&&ht(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ci(),ot(ut),ot(It),vi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return hi(t),null;case 13:if(ot(Ai),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(Ai),null;case 4:return Ci(),null;case 10:return gn(t.type._context),null;case 22:case 23:return Rr(),null;default:return null}}var ra=!1,oa=!1,ga="function"===typeof WeakSet?WeakSet:Set,sa=null;function Ia(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tr(e,t,i)}else n.current=null}function ua(e,t,n){try{n()}catch(i){Tr(e,t,i)}}var ca=!1;function Ca(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var l=i=i.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,void 0!==a&&ua(t,n,a)}l=l.next}while(l!==i)}}function da(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ha(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=k(n);else e=n;"function"===typeof t?t(e):t.current=e}}function Aa(e,t,n){if(Tt&&"function"===typeof Tt.onCommitFiberUnmount)try{Tt.onCommitFiberUnmount(_t,t)}catch(r){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var l=i,a=l.destroy;l=l.tag,void 0!==a&&(0!==(2&l)||0!==(4&l))&&ua(t,n,a),i=i.next}while(i!==e)}break;case 1:if(Ia(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(r){Tr(t,n,r)}break;case 5:Ia(t,n);break;case 4:D?Ba(e,t,n):Q&&Q&&(t=t.stateNode.containerInfo,n=xe(t),Se(t,n))}}function ma(e,t,n){for(var i=t;;)if(Aa(e,i,n),null===i.child||D&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function pa(e){var t=e.alternate;null!==t&&(e.alternate=null,pa(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function fa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||va(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ba(e){if(D){e:{for(var t=e.return;null!==t;){if(va(t))break e;t=t.return}throw Error(r(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(fe(t),n.flags&=-33),Ga(e,n=fa(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ya(e,n=fa(e),t);break;default:throw Error(r(161))}}}function ya(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?me(n,e,t):ce(n,e);else if(4!==i&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function Ga(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?Ae(n,e,t):ue(n,e);else if(4!==i&&null!==(e=e.child))for(Ga(e,t,n),e=e.sibling;null!==e;)Ga(e,t,n),e=e.sibling}function Ba(e,t,n){for(var i,l,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(r(160));switch(i=o.stateNode,o.tag){case 5:l=!1;break e;case 3:case 4:i=i.containerInfo,l=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag)ma(e,a,n),l?ve(i,a.stateNode):pe(i,a.stateNode);else if(18===a.tag)l?Pe(i,a.stateNode):Qe(i,a.stateNode);else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,l=!0,a.child.return=a,a=a.child;continue}}else if(Aa(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function Za(e,t){if(D){switch(t.tag){case 0:case 11:case 14:case 15:return Ca(3,t,t.return),da(3,t),void Ca(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var l=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&he(n,a,l,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(r(162));return n=t.memoizedProps,void Ce(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(P&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo));case 13:case 19:return void qa(t)}throw Error(r(163))}switch(t.tag){case 0:case 11:case 14:case 15:return Ca(3,t,t.return),da(3,t),void Ca(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void qa(t);case 3:P&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo)}e:if(Q){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Se(t.containerInfo,t.pendingChildren);break e}throw Error(r(163))}}function qa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ga),t.forEach((function(t){var i=Dr.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function xa(e,t,n){sa=e,wa(e,t,n)}function wa(e,t,n){for(var i=0!==(1&e.mode);null!==sa;){var l=sa,a=l.child;if(22===l.tag&&i){var r=null!==l.memoizedState||ra;if(!r){var o=l.alternate,g=null!==o&&null!==o.memoizedState||oa;o=ra;var s=oa;if(ra=r,(oa=g)&&!s)for(sa=l;null!==sa;)g=(r=sa).child,22===r.tag&&null!==r.memoizedState?Ra(l):null!==g?(g.return=r,sa=g):Ra(l);for(;null!==a;)sa=a,wa(a,t,n),a=a.sibling;sa=l,ra=o,oa=s}Wa(e)}else 0!==(8772&l.subtreeFlags)&&null!==a?(a.return=l,sa=a):Wa(e)}}function Wa(e){for(;null!==sa;){var t=sa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:oa||da(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!oa)if(null===n)i.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(l,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&bn(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=k(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,o,n)}break;case 5:var g=t.stateNode;null===n&&4&t.flags&&de(g,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(P&&null===t.memoizedState){var s=t.alternate;if(null!==s){var I=s.memoizedState;if(null!==I){var u=I.dehydrated;null!==u&&De(u)}}}break;default:throw Error(r(163))}oa||512&t.flags&&ha(t)}catch(c){Tr(t,t.return,c)}}if(t===e){sa=null;break}if(null!==(n=t.sibling)){n.return=t.return,sa=n;break}sa=t.return}}function Sa(e){for(;null!==sa;){var t=sa;if(t===e){sa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,sa=n;break}sa=t.return}}function Ra(e){for(;null!==sa;){var t=sa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{da(4,t)}catch(g){Tr(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var l=t.return;try{i.componentDidMount()}catch(g){Tr(t,l,g)}}var a=t.return;try{ha(t)}catch(g){Tr(t,a,g)}break;case 5:var r=t.return;try{ha(t)}catch(g){Tr(t,r,g)}}}catch(g){Tr(t,t.return,g)}if(t===e){sa=null;break}var o=t.sibling;if(null!==o){o.return=t.return,sa=o;break}sa=t.return}}var Va=0,ka=1,Xa=2,Ya=3,Ha=4;if("function"===typeof Symbol&&Symbol.for){var Ka=Symbol.for;Va=Ka("selector.component"),ka=Ka("selector.has_pseudo_class"),Xa=Ka("selector.role"),Ya=Ka("selector.test_id"),Ha=Ka("selector.text")}function Fa(e){var t=O(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(r(364));return t}if(null===(e=le(e)))throw Error(r(362));return e.stateNode.current}function Na(e,t){switch(t.$$typeof){case Va:if(e.type===t.value)return!0;break;case ka:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],l=e[n++],a=t[l];if(5!==i.tag||!oe(i)){for(;null!=a&&Na(i,a);)a=t[++l];if(l===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,l),i=i.sibling}}t=!1}return t;case Xa:if(5===e.tag&&ge(e.stateNode,t.value))return!0;break;case Ha:if((5===e.tag||6===e.tag)&&(null!==(e=re(e))&&0<=e.indexOf(t.value)))return!0;break;case Ya:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function za(e){switch(e.$$typeof){case Va:return"<"+(G(e.value)||"Unknown")+">";case ka:return":has("+(za(e)||"")+")";case Xa:return'[role="'+e.value+'"]';case Ha:return'"'+e.value+'"';case Ya:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function Ma(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var l=e[i++],a=e[i++],r=t[a];if(5!==l.tag||!oe(l)){for(;null!=r&&Na(l,r);)r=t[++a];if(a===t.length)n.push(l);else for(l=l.child;null!==l;)e.push(l,a),l=l.sibling}}return n}function La(e,t){if(!ie)throw Error(r(363));e=Ma(e=Fa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var _a=Math.ceil,Ta=o.ReactCurrentDispatcher,Ea=o.ReactCurrentOwner,Ja=o.ReactCurrentBatchConfig,Ua=0,Da=null,Qa=null,Pa=0,Oa=0,ja=rt(0),$a=0,er=null,tr=0,nr=0,ir=0,lr=null,ar=null,rr=0,or=1/0;function gr(){or=Ft()+500}var sr,Ir=!1,ur=null,cr=null,Cr=!1,dr=null,hr=0,Ar=0,mr=null,pr=-1,vr=0;function fr(){return 0!==(6&Ua)?Ft():-1!==pr?pr:pr=Ft()}function br(e){return 0===(1&e.mode)?1:0!==(2&Ua)&&0!==Pa?Pa&-Pa:null!==Ot.transition?(0===vr&&(e=Gt,0===(4194240&(Gt<<=1))&&(Gt=64),vr=e),vr):0!==(e=Vt)?e:$()}function yr(e,t,n){if(50<Ar)throw Ar=0,mr=null,Error(r(185));var i=Gr(e,t);return null===i?null:(St(i,t,n),0!==(2&Ua)&&i===Da||(i===Da&&(0===(2&Ua)&&(nr|=t),4===$a&&wr(i,Pa)),Br(i,n),1===t&&0===Ua&&0===(1&e.mode)&&(gr(),Ut&&Pt())),i)}function Gr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Br(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var r=31-ft(a),o=1<<r,g=l[r];-1===g?0!==(o&n)&&0===(o&i)||(l[r]=xt(o,t)):g<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var i=qt(e,e===Da?Pa:0);if(0===i)null!==n&&Yt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Yt(n),1===t)0===e.tag?function(e){Ut=!0,Qt(e)}(Wr.bind(null,e)):Qt(Wr.bind(null,e)),te?ne((function(){0===Ua&&Pt()})):Xt(Nt,Pt),n=null;else{switch(kt(i)){case 1:n=Nt;break;case 4:n=zt;break;case 16:default:n=Mt;break;case 536870912:n=Lt}n=Qr(n,Zr.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zr(e,t){if(pr=-1,vr=0,0!==(6&Ua))throw Error(r(327));var n=e.callbackNode;if(Lr()&&e.callbackNode!==n)return null;var i=qt(e,e===Da?Pa:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Hr(e,i);else{t=i;var l=Ua;Ua|=2;var a=Xr();for(Da===e&&Pa===t||(gr(),Vr(e,t));;)try{Fr();break}catch(g){kr(e,g)}rn(),Ta.current=a,Ua=l,null!==Qa?t=0:(Da=null,Pa=0,t=$a)}if(0!==t){if(2===t&&(0!==(l=wt(e))&&(i=l,t=qr(e,l))),1===t)throw n=er,Vr(e,0),wr(e,i),Br(e,Ft()),n;if(6===t)wr(e,i);else{if(l=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var l=n[i],a=l.getSnapshot;l=l.value;try{if(!Et(a(),l))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(l)&&(2===(t=Hr(e,i))&&(0!==(a=wt(e))&&(i=a,t=qr(e,a))),1===t))throw n=er,Vr(e,0),wr(e,i),Br(e,Ft()),n;switch(e.finishedWork=l,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:Mr(e,ar);break;case 3:if(wr(e,i),(130023424&i)===i&&10<(t=rr+500-Ft())){if(0!==qt(e,0))break;if(((l=e.suspendedLanes)&i)!==i){fr(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=T(Mr.bind(null,e,ar),t);break}Mr(e,ar);break;case 4:if(wr(e,i),(4194240&i)===i)break;for(t=e.eventTimes,l=-1;0<i;){var o=31-ft(i);a=1<<o,(o=t[o])>l&&(l=o),i&=~a}if(i=l,10<(i=(120>(i=Ft()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_a(i/1960))-i)){e.timeoutHandle=T(Mr.bind(null,e,ar),i);break}Mr(e,ar);break;default:throw Error(r(329))}}}return Br(e,Ft()),e.callbackNode===n?Zr.bind(null,e):null}function qr(e,t){var n=lr;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),2!==(e=Hr(e,t))&&(t=ar,ar=n,null!==t&&xr(t)),e}function xr(e){null===ar?ar=e:ar.push.apply(ar,e)}function wr(e,t){for(t&=~ir,t&=~nr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ft(t),i=1<<n;e[n]=-1,t&=~i}}function Wr(e){if(0!==(6&Ua))throw Error(r(327));Lr();var t=qt(e,0);if(0===(1&t))return Br(e,Ft()),null;var n=Hr(e,t);if(0!==e.tag&&2===n){var i=wt(e);0!==i&&(t=i,n=qr(e,i))}if(1===n)throw n=er,Vr(e,0),wr(e,t),Br(e,Ft()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,ar),Br(e,Ft()),null}function Sr(e){null!==dr&&0===dr.tag&&0===(6&Ua)&&Lr();var t=Ua;Ua|=1;var n=Ja.transition,i=Vt;try{if(Ja.transition=null,Vt=1,e)return e()}finally{Vt=i,Ja.transition=n,0===(6&(Ua=t))&&Pt()}}function Rr(){Oa=ja.current,ot(ja)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==J&&(e.timeoutHandle=J,E(n)),null!==Qa)for(n=Qa.return;null!==n;){var i=n;switch(Mn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&ht();break;case 3:Ci(),ot(ut),ot(It),vi();break;case 5:hi(i);break;case 4:Ci();break;case 13:case 19:ot(Ai);break;case 10:gn(i.type._context);break;case 22:case 23:Rr()}n=n.return}if(Da=e,Qa=e=$r(e.current,null),Pa=Oa=t,$a=0,er=null,ir=nr=tr=0,ar=lr=null,null!==cn){for(t=0;t<cn.length;t++)if(null!==(i=(n=cn[t]).interleaved)){n.interleaved=null;var l=i.next,a=n.pending;if(null!==a){var r=a.next;a.next=l,i.next=r}n.pending=i}cn=null}return e}function kr(e,t){for(;;){var n=Qa;try{if(rn(),fi.current=Cl,qi){for(var i=Gi.memoizedState;null!==i;){var l=i.queue;null!==l&&(l.pending=null),i=i.next}qi=!1}if(yi=0,Zi=Bi=Gi=null,xi=!1,wi=0,Ea.current=null,null===n||null===n.return){$a=1,er=t,Qa=null;break}e:{var a=e,o=n.return,g=n,s=t;if(t=Pa,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var I=s,u=g,c=u.tag;if(0===(1&u.mode)&&(0===c||11===c||15===c)){var C=u.alternate;C?(u.updateQueue=C.updateQueue,u.memoizedState=C.memoizedState,u.lanes=C.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=xl(o);if(null!==d){d.flags&=-257,wl(d,o,g,0,t),1&d.mode&&ql(a,I,t),s=I;var h=(t=d).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){ql(a,I,t),Yr();break e}s=Error(r(426))}else if(Tn&&1&g.mode){var m=xl(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),wl(m,o,g,0,t),ei(s);break e}}a=s,4!==$a&&($a=2),null===lr?lr=[a]:lr.push(a),s=ml(s,g),g=o;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t,vn(g,Bl(0,s,t));break e;case 1:a=s;var p=g.type,v=g.stateNode;if(0===(128&g.flags)&&("function"===typeof p.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===cr||!cr.has(v)))){g.flags|=65536,t&=-t,g.lanes|=t,vn(g,Zl(g,a,t));break e}}g=g.return}while(null!==g)}zr(n)}catch(f){t=f,Qa===n&&null!==n&&(Qa=n=n.return);continue}break}}function Xr(){var e=Ta.current;return Ta.current=Cl,null===e?Cl:e}function Yr(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Da||0===(268435455&tr)&&0===(268435455&nr)||wr(Da,Pa)}function Hr(e,t){var n=Ua;Ua|=2;var i=Xr();for(Da===e&&Pa===t||Vr(e,t);;)try{Kr();break}catch(l){kr(e,l)}if(rn(),Ua=n,Ta.current=i,null!==Qa)throw Error(r(261));return Da=null,Pa=0,$a}function Kr(){for(;null!==Qa;)Nr(Qa)}function Fr(){for(;null!==Qa&&!Ht();)Nr(Qa)}function Nr(e){var t=sr(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,null===t?zr(e):Qa=t,Ea.current=null}function zr(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xl(n,t,Oa)))return void(Qa=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Qa=n);if(null===e)return $a=6,void(Qa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Qa=t);Qa=t=e}while(null!==t);0===$a&&($a=5)}function Mr(e,t){var n=Vt,i=Ja.transition;try{Ja.transition=null,Vt=1,function(e,t,n){do{Lr()}while(null!==dr);if(0!==(6&Ua))throw Error(r(327));var i=e.finishedWork,l=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-ft(n),a=1<<l;t[l]=0,i[l]=-1,e[l]=-1,n&=~a}}(e,a),e===Da&&(Qa=Da=null,Pa=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Cr||(Cr=!0,Qr(Mt,(function(){return Lr(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Ja.transition,Ja.transition=null;var o=Vt;Vt=1;var g=Ua;Ua|=4,Ea.current=null,function(e,t){for(H(e.containerInfo),sa=t;null!==sa;)if(t=(e=sa).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,sa=t;else for(;null!==sa;){e=sa;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,l=n.memoizedState,a=e.stateNode,o=a.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),l);a.__reactInternalSnapshotBeforeUpdate=o}break;case 3:D&&Ze(e.stateNode.containerInfo);break;default:throw Error(r(163))}}catch(g){Tr(e,e.return,g)}if(null!==(t=e.sibling)){t.return=e.return,sa=t;break}sa=e.return}n=ca,ca=!1}(e,i),function(e,t){for(sa=t;null!==sa;){var n=(t=sa).deletions;if(null!==n)for(var i=0;i<n.length;i++){var l=n[i];try{var a=e;D?Ba(a,l,t):ma(a,l,t);var r=l.alternate;null!==r&&(r.return=null),l.return=null}catch(b){Tr(l,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,sa=n;else for(;null!==sa;){t=sa;try{var o=t.flags;if(32&o&&D&&fe(t.stateNode),512&o){var g=t.alternate;if(null!==g){var s=g.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var I=t.alternate;null!==I&&null!==I.memoizedState||(rr=Ft())}break;case 22:var u=null!==t.memoizedState,c=t.alternate,C=null!==c&&null!==c.memoizedState;if(n=t,D)e:if(i=n,l=u,a=null,D)for(var d=i;;){if(5===d.tag){if(null===a){a=d;var h=d.stateNode;l?be(h):Ge(d.stateNode,d.memoizedProps)}}else if(6===d.tag){if(null===a){var A=d.stateNode;l?ye(A):Be(A,d.memoizedProps)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===i)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===i)break;for(;null===d.sibling;){if(null===d.return||d.return===i)break e;a===d&&(a=null),d=d.return}a===d&&(a=null),d.sibling.return=d.return,d=d.sibling}if(u&&!C&&0!==(1&n.mode)){sa=n;for(var m=n.child;null!==m;){for(n=sa=m;null!==sa;){var p=(i=sa).child;switch(i.tag){case 0:case 11:case 14:case 15:Ca(4,i,i.return);break;case 1:Ia(i,i.return);var v=i.stateNode;if("function"===typeof v.componentWillUnmount){var f=i.return;try{v.props=i.memoizedProps,v.state=i.memoizedState,v.componentWillUnmount()}catch(b){Tr(i,f,b)}}break;case 5:Ia(i,i.return);break;case 22:if(null!==i.memoizedState){Sa(n);continue}}null!==p?(p.return=i,sa=p):Sa(n)}m=m.sibling}}}switch(4102&o){case 2:ba(t),t.flags&=-3;break;case 6:ba(t),t.flags&=-3,Za(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Za(t.alternate,t);break;case 4:Za(t.alternate,t)}}catch(b){Tr(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,sa=n;break}sa=t.return}}}(e,i),K(e.containerInfo),e.current=i,xa(i,e,l),Kt(),Ua=g,Vt=o,Ja.transition=a}else e.current=i;if(Cr&&(Cr=!1,dr=e,hr=l),0===(a=e.pendingLanes)&&(cr=null),function(e){if(Tt&&"function"===typeof Tt.onCommitFiberRoot)try{Tt.onCommitFiberRoot(_t,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Br(e,Ft()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(Ir)throw Ir=!1,e=ur,ur=null,e;0!==(1&hr)&&0!==e.tag&&Lr(),0!==(1&(a=e.pendingLanes))?e===mr?Ar++:(Ar=0,mr=e):Ar=0,Pt()}(e,t,n)}finally{Ja.transition=i,Vt=n}return null}function Lr(){if(null!==dr){var e=kt(hr),t=Ja.transition,n=Vt;try{if(Ja.transition=null,Vt=16>e?16:e,null===dr)var i=!1;else{if(e=dr,dr=null,hr=0,0!==(6&Ua))throw Error(r(331));var l=Ua;for(Ua|=4,sa=e.current;null!==sa;){var a=sa,o=a.child;if(0!==(16&sa.flags)){var g=a.deletions;if(null!==g){for(var s=0;s<g.length;s++){var I=g[s];for(sa=I;null!==sa;){var u=sa;switch(u.tag){case 0:case 11:case 15:Ca(8,u,a)}var c=u.child;if(null!==c)c.return=u,sa=c;else for(;null!==sa;){var C=(u=sa).sibling,d=u.return;if(pa(u),u===I){sa=null;break}if(null!==C){C.return=d,sa=C;break}sa=d}}}var h=a.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var m=A.sibling;A.sibling=null,A=m}while(null!==A)}}sa=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,sa=o;else e:for(;null!==sa;){if(0!==(2048&(a=sa).flags))switch(a.tag){case 0:case 11:case 15:Ca(9,a,a.return)}var p=a.sibling;if(null!==p){p.return=a.return,sa=p;break e}sa=a.return}}var v=e.current;for(sa=v;null!==sa;){var f=(o=sa).child;if(0!==(2064&o.subtreeFlags)&&null!==f)f.return=o,sa=f;else e:for(o=v;null!==sa;){if(0!==(2048&(g=sa).flags))try{switch(g.tag){case 0:case 11:case 15:da(9,g)}}catch(y){Tr(g,g.return,y)}if(g===o){sa=null;break e}var b=g.sibling;if(null!==b){b.return=g.return,sa=b;break e}sa=g.return}}if(Ua=l,Pt(),Tt&&"function"===typeof Tt.onPostCommitFiberRoot)try{Tt.onPostCommitFiberRoot(_t,e)}catch(y){}i=!0}return i}finally{Vt=n,Ja.transition=t}}return!1}function _r(e,t,n){mn(e,t=Bl(0,t=ml(n,t),1)),t=fr(),null!==(e=Gr(e,1))&&(St(e,1,t),Br(e,t))}function Tr(e,t,n){if(3===e.tag)_r(e,e,n);else for(;null!==t;){if(3===t.tag){_r(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===cr||!cr.has(i))){mn(t,e=Zl(t,e=ml(n,e),1)),e=fr(),null!==(t=Gr(t,1))&&(St(t,1,e),Br(t,e));break}}t=t.return}}function Er(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=fr(),e.pingedLanes|=e.suspendedLanes&n,Da===e&&(Pa&n)===n&&(4===$a||3===$a&&(130023424&Pa)===Pa&&500>Ft()-rr?Vr(e,0):ir|=n),Br(e,t)}function Jr(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Bt,0===(130023424&(Bt<<=1))&&(Bt=4194304)));var n=fr();null!==(e=Gr(e,t))&&(St(e,t,n),Br(e,n))}function Ur(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Jr(e,n)}function Dr(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,l=e.memoizedState;null!==l&&(n=l.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Jr(e,n)}function Qr(e,t){return Xt(e,t)}function Pr(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,i){return new Pr(e,t,n,i)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $r(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,l,a){var o=2;if(i=e,"function"===typeof e)jr(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case I:return to(n.children,l,a,t);case u:o=8,l|=8;break;case c:return(e=Or(12,n,t,2|l)).elementType=c,e.lanes=a,e;case A:return(e=Or(13,n,t,l)).elementType=A,e.lanes=a,e;case m:return(e=Or(19,n,t,l)).elementType=m,e.lanes=a,e;case f:return no(n,l,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case d:o=9;break e;case h:o=11;break e;case p:o=14;break e;case v:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Or(o,n,t,l)).elementType=e,t.type=i,t.lanes=a,t}function to(e,t,n,i){return(e=Or(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Or(22,e,i,t)).elementType=f,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function lo(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ao(e,t,n,i,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=J,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.identifierPrefix=i,this.onRecoverableError=l,P&&(this.mutableSourceEagerHydrationData=null)}function ro(e,t,n,i,l,a,r,o,g){return e=new ao(e,t,n,o,g),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Or(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},dn(a),e}function oo(e){if(!e)return st;e:{if(Z(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(dt(n))return mt(e,n,t)}return t}function go(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=w(t))?null:e.stateNode}function so(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Io(e,t){so(e,t),(e=e.alternate)&&so(e,t)}function uo(e){return null===(e=w(e))?null:e.stateNode}function co(){return null}return sr=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ut.current)Hl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Hl=!1,function(e,t,n){switch(t.tag){case 3:Jl(t),$n();break;case 5:di(t);break;case 1:dt(t.type)&&pt(t);break;case 4:ci(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(gt(Ai,1&Ai.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Pl(e,t,n):(gt(Ai,1&Ai.current),null!==(e=la(e,t,n))?e.sibling:null);gt(Ai,1&Ai.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return ia(e,t,n);t.flags|=128}var l=t.memoizedState;if(null!==l&&(l.rendering=null,l.tail=null,l.lastEffect=null),gt(Ai,Ai.current),i)break;return null;case 22:case 23:return t.lanes=0,Ml(e,t,n)}return la(e,t,n)}(e,t,n);Hl=0!==(131072&e.flags)}else Hl=!1,Tn&&0!==(1048576&t.flags)&&Nn(t,Vn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=Ct(t,It.current);In(t,n),l=Vi(null,t,i,e,l,n);var a=ki();return t.flags|=1,"object"===typeof l&&null!==l&&"function"===typeof l.render&&void 0===l.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(i)?(a=!0,pt(t)):a=!1,t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,dn(t),l.updater=Bn,t.stateNode=l,l._reactInternals=t,wn(t,i,e,n),t=El(null,t,i,!0,a,n)):(t.tag=0,Tn&&a&&zn(t),Kl(null,t,l,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(l=i._init)(i._payload),t.type=i,l=t.tag=function(e){if("function"===typeof e)return jr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===h)return 11;if(e===p)return 14}return 2}(i),e=en(i,e),l){case 0:t=_l(null,t,i,e,n);break e;case 1:t=Tl(null,t,i,e,n);break e;case 11:t=Fl(null,t,i,e,n);break e;case 14:t=Nl(null,t,i,en(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,l=t.pendingProps,_l(e,t,i,l=t.elementType===i?l:en(i,l),n);case 1:return i=t.type,l=t.pendingProps,Tl(e,t,i,l=t.elementType===i?l:en(i,l),n);case 3:e:{if(Jl(t),null===e)throw Error(r(387));i=t.pendingProps,l=(a=t.memoizedState).element,hn(e,t),fn(t,i,null,n);var o=t.memoizedState;if(i=o.element,P&&a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ul(e,t,i,n,l=Error(r(423)));break e}if(i!==l){t=Ul(e,t,i,n,l=Error(r(424)));break e}for(P&&(_n=Me(t.stateNode.containerInfo),Ln=t,Tn=!0,Jn=null,En=!1),n=ri(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===l){t=la(e,t,n);break e}Kl(e,t,i,n)}t=t.child}return t;case 5:return di(t),null===e&&Pn(t),i=t.type,l=t.pendingProps,a=null!==e?e.memoizedProps:null,o=l.children,L(i,l)?o=null:null!==a&&L(i,a)&&(t.flags|=32),Ll(e,t),Kl(e,t,o,n),t.child;case 6:return null===e&&Pn(t),null;case 13:return Pl(e,t,n);case 4:return ci(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ai(t,null,i,n):Kl(e,t,i,n),t.child;case 11:return i=t.type,l=t.pendingProps,Fl(e,t,i,l=t.elementType===i?l:en(i,l),n);case 7:return Kl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Kl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,l=t.pendingProps,a=t.memoizedProps,on(0,i,o=l.value),null!==a)if(Et(a.value,o)){if(a.children===l.children&&!ut.current){t=la(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var g=a.dependencies;if(null!==g){o=a.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===a.tag){(s=An(-1,n&-n)).tag=2;var I=a.updateQueue;if(null!==I){var u=(I=I.shared).pending;null===u?s.next=s:(s.next=u.next,u.next=s),I.pending=s}}a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),sn(a.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(g=o.alternate)&&(g.lanes|=n),sn(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Kl(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,i=t.pendingProps.children,In(t,n),i=i(l=un(l)),t.flags|=1,Kl(e,t,i,n),t.child;case 14:return l=en(i=t.type,t.pendingProps),Nl(e,t,i,l=en(i.type,l),n);case 15:return zl(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:en(i,l),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,dt(i)?(e=!0,pt(t)):e=!1,In(t,n),qn(t,i,l),wn(t,i,l,n),El(null,t,i,!0,e,n);case 19:return ia(e,t,n);case 22:return Ml(e,t,n)}throw Error(r(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(yr(e,134217728,fr()),Io(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=fr(),n=br(e);yr(e,n,t),Io(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zt(t.pendingLanes);0!==n&&(Rt(t,1|n),Br(t,Ft()),0===(6&Ua)&&(gr(),Pt()))}break;case 13:var i=fr();Sr((function(){return yr(e,1,i)})),Io(e,1)}},t.batchedUpdates=function(e,t){var n=Ua;Ua|=1;try{return e(t)}finally{0===(Ua=n)&&(gr(),Ut&&Pt())}},t.createComponentSelector=function(e){return{$$typeof:Va,value:e}},t.createContainer=function(e,t,n,i,l,a,r){return ro(e,t,!1,null,0,i,0,a,r)},t.createHasPseudoClassSelector=function(e){return{$$typeof:ka,value:e}},t.createHydrationContainer=function(e,t,n,i,l,a,r,o,g){return(e=ro(n,i,!0,e,0,a,0,o,g)).context=oo(null),n=e.current,(a=An(i=fr(),l=br(n))).callback=void 0!==t&&null!==t?t:null,mn(n,a),e.current.lanes=l,St(e,l,i),Br(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Xa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Ya,value:e}},t.createTextSelector=function(e){return{$$typeof:Ha,value:e}},t.deferredUpdates=function(e){var t=Vt,n=Ja.transition;try{return Ja.transition=null,Vt=16,e()}finally{Vt=t,Ja.transition=n}},t.discreteUpdates=function(e,t,n,i,l){var a=Vt,r=Ja.transition;try{return Ja.transition=null,Vt=1,e(t,n,i,l)}finally{Vt=a,Ja.transition=r,0===Ua&&gr()}},t.findAllNodes=La,t.findBoundingRects=function(e,t){if(!ie)throw Error(r(363));t=La(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,l=i+n.width,a=n.y,o=a+n.height,g=t-1;0<=g;g--)if(t!==g){var s=e[g],I=s.x,u=I+s.width,c=s.y,C=c+s.height;if(i>=I&&a>=c&&l<=u&&o<=C){e.splice(t,1);break}if(!(i!==I||n.width!==s.width||C<a||c>o)){c>a&&(s.height+=c-a,s.y=a),C<o&&(s.height=o-c),e.splice(t,1);break}if(!(a!==c||n.height!==s.height||u<i||I>l)){I>i&&(s.width+=I-i,s.x=i),u<l&&(s.width=l-I),e.splice(t,1);break}}return e},t.findHostInstance=go,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=x(e))?S(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return go(e)},t.flushControlled=function(e){var t=Ua;Ua|=1;var n=Ja.transition,i=Vt;try{Ja.transition=null,Vt=1,e()}finally{Vt=i,Ja.transition=n,0===(Ua=t)&&(gr(),Pt())}},t.flushPassiveEffects=Lr,t.flushSync=Sr,t.focusWithin=function(e,t){if(!ie)throw Error(r(363));for(t=Ma(e=Fa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&se(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Vt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(r(363));var n=0,i=[];e=[Fa(e),0];for(var l=0;l<e.length;){var a=e[l++],o=e[l++],g=t[o];if((5!==a.tag||!oe(a))&&(Na(a,g)&&(i.push(za(g)),++o>n&&(n=o)),o<t.length))for(a=a.child;null!==a;)e.push(a,o),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(za(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?k(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:uo,findFiberByHostInstance:e.findFiberByHostInstance||co,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{_t=t.inject(e),Tt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(r(363));e=La(e,t);var l=Ie(e,n,i).disconnect;return{disconnect:function(){l()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Vt;try{return Vt=e,t()}finally{Vt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var l=t.current,a=fr(),r=br(l);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=An(a,r)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),mn(l,t),null!==(e=yr(l,r,a))&&pn(e,l,r),r},t}},585:function(e,t,n){"use strict";e.exports=n(976)},258:function(e,t,n){"use strict";e.exports=n(721)},783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,l=e[i];if(!(0<a(l,t)))break e;e[i]=t,e[n]=l,n=i}}function i(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,l=e.length,r=l>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,I=e[s];if(0>a(g,n))s<l&&0>a(I,g)?(e[i]=I,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<l&&0>a(I,n)))break e;e[i]=I,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],I=[],u=1,c=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=i(I);null!==t;){if(null===t.callback)l(I);else{if(!(t.startTime<=e))break;l(I),t.sortIndex=t.expirationTime,n(s,t)}t=i(I)}}function b(e){if(A=!1,f(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(I);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(q),q=-1),d=!0;var a=C;try{for(f(n),c=i(s);null!==c&&(!(c.expirationTime>n)||e&&!W());){var r=c.callback;if("function"===typeof r){c.callback=null,C=c.priorityLevel;var o=r(c.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?c.callback=o:c===i(s)&&l(s),f(n)}else l(s);c=i(s)}if(null!==c)var g=!0;else{var u=i(I);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{c=null,C=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,q=-1,x=5,w=-1;function W(){return!(t.unstable_now()-w<x)}function S(){if(null!==Z){var e=t.unstable_now();w=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof v)G=function(){v(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){q=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,l,a){var r=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?r+a:r:a=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:l,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>r?(e.sortIndex=a,n(I,e),null===i(s)&&e===i(I)&&(A?(p(q),q=-1):A=!0,X(b,a-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},100:function(e,t,n){"use strict";e.exports=n(783)},374:function(e,t,n){"use strict";var i=n(791),l=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var i,a={},s=null,I=null;for(i in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(I=t.ref),t)r.call(t,i)&&!g.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:l,type:e,key:s,ref:I,props:a,_owner:o.current}}t.Fragment=a,t.jsx=s,t.jsxs=s},117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),C=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,A={};function m(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||d}function p(){}function v(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},p.prototype=m.prototype;var f=v.prototype=new p;f.constructor=v,h(f,m.prototype),f.isPureReactComponent=!0;var b=Array.isArray,y=Object.prototype.hasOwnProperty,G={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,i){var l,a={},r=null,o=null;if(null!=t)for(l in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(r=""+t.key),t)y.call(t,l)&&!B.hasOwnProperty(l)&&(a[l]=t[l]);var g=arguments.length-2;if(1===g)a.children=i;else if(1<g){for(var s=Array(g),I=0;I<g;I++)s[I]=arguments[I+2];a.children=s}if(e&&e.defaultProps)for(l in g=e.defaultProps)void 0===a[l]&&(a[l]=g[l]);return{$$typeof:n,type:e,key:r,ref:o,props:a,_owner:G.current}}function q(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function w(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function W(e,t,l,a,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var g=!1;if(null===e)g=!0;else switch(o){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case n:case i:g=!0}}if(g)return r=r(g=e),e=""===a?"."+w(g,0):a,b(r)?(l="",null!=e&&(l=e.replace(x,"$&/")+"/"),W(r,t,l,"",(function(e){return e}))):null!=r&&(q(r)&&(r=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,l+(!r.key||g&&g.key===r.key?"":(""+r.key).replace(x,"$&/")+"/")+e)),t.push(r)),1;if(g=0,a=""===a?".":a+":",b(e))for(var s=0;s<e.length;s++){var I=a+w(o=e[s],s);g+=W(o,t,l,I,r)}else if(I=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}(e),"function"===typeof I)for(e=I.call(e),s=0;!(o=e.next()).done;)g+=W(o=o.value,t,l,I=a+w(o,s++),r);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function S(e,t,n){if(null==e)return e;var i=[],l=0;return W(e,i,"","",(function(e){return t.call(n,e,l++)})),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var V={current:null},k={transition:null},X={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:k,ReactCurrentOwner:G};t.Children={map:S,forEach:function(e,t,n){S(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!q(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=l,t.Profiler=r,t.PureComponent=v,t.StrictMode=a,t.Suspense=I,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=h({},e.props),a=e.key,r=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,o=G.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(s in t)y.call(t,s)&&!B.hasOwnProperty(s)&&(l[s]=void 0===t[s]&&void 0!==g?g[s]:t[s])}var s=arguments.length-2;if(1===s)l.children=i;else if(1<s){g=Array(s);for(var I=0;I<s;I++)g[I]=arguments[I+2];l.children=g}return{$$typeof:n,type:e.type,key:a,ref:r,props:l,_owner:o}},t.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=Z,t.createFactory=function(e){var t=Z.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=q,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return V.current.useCallback(e,t)},t.useContext=function(e){return V.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return V.current.useDeferredValue(e)},t.useEffect=function(e,t){return V.current.useEffect(e,t)},t.useId=function(){return V.current.useId()},t.useImperativeHandle=function(e,t,n){return V.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return V.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return V.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return V.current.useMemo(e,t)},t.useReducer=function(e,t,n){return V.current.useReducer(e,t,n)},t.useRef=function(e){return V.current.useRef(e)},t.useState=function(e){return V.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return V.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return V.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,l=e[i];if(!(0<a(l,t)))break e;e[i]=t,e[n]=l,n=i}}function i(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,l=e.length,r=l>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,I=e[s];if(0>a(g,n))s<l&&0>a(I,g)?(e[i]=I,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<l&&0>a(I,n)))break e;e[i]=I,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],I=[],u=1,c=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=i(I);null!==t;){if(null===t.callback)l(I);else{if(!(t.startTime<=e))break;l(I),t.sortIndex=t.expirationTime,n(s,t)}t=i(I)}}function b(e){if(A=!1,f(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(I);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(q),q=-1),d=!0;var a=C;try{for(f(n),c=i(s);null!==c&&(!(c.expirationTime>n)||e&&!W());){var r=c.callback;if("function"===typeof r){c.callback=null,C=c.priorityLevel;var o=r(c.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?c.callback=o:c===i(s)&&l(s),f(n)}else l(s);c=i(s)}if(null!==c)var g=!0;else{var u=i(I);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{c=null,C=a,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,q=-1,x=5,w=-1;function W(){return!(t.unstable_now()-w<x)}function S(){if(null!==Z){var e=t.unstable_now();w=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof v)G=function(){v(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){q=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,l,a){var r=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?r+a:r:a=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:l,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>r?(e.sortIndex=a,n(I,e),null===i(s)&&e===i(I)&&(A?(p(q),q=-1):A=!0,X(b,a-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(i){var l=t[i];if(void 0!==l)return l.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".2036a371.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="pathfinder:";n.l=function(i,l,a,r){if(e[i])e[i].push(l);else{var o,g;if(void 0!==a)for(var s=document.getElementsByTagName("script"),I=0;I<s.length;I++){var u=s[I];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(g=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=i),e[i]=[l];var c=function(t,n){o.onerror=o.onload=null,clearTimeout(C);var l=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),l&&l.forEach((function(e){return e(n)})),t)return t(n)},C=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),g&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/navpreet032/Path_Finder/",function(){var e={179:0};n.f.j=function(t,i){var l=n.o(e,t)?e[t]:void 0;if(0!==l)if(l)i.push(l[2]);else{var a=new Promise((function(n,i){l=e[t]=[n,i]}));i.push(l[2]=a);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(l=e[t])&&(e[t]=void 0),l)){var a=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,l[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var l,a,r=i[0],o=i[1],g=i[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(l in o)n.o(o,l)&&(n.m[l]=o[l]);if(g)g(n)}for(t&&t(i);s<r.length;s++)a=r[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkpathfinder=self.webpackChunkpathfinder||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return ke},AddEquation:function(){return ne},AddOperation:function(){return we},AdditiveAnimationBlendMode:function(){return rn},AdditiveBlending:function(){return j},AlphaFormat:function(){return ut},AlwaysDepth:function(){return ve},AlwaysStencilFunc:function(){return Xn},AmbientLight:function(){return vc},AmbientLightProbe:function(){return Yc},AnimationClip:function(){return _u},AnimationLoader:function(){return ju},AnimationMixer:function(){return cC},AnimationObjectGroup:function(){return sC},AnimationUtils:function(){return Su},ArcCurve:function(){return js},ArrayCamera:function(){return Sg},ArrowHelper:function(){return td},Audio:function(){return Uc},AudioAnalyser:function(){return $c},AudioContext:function(){return Vc},AudioListener:function(){return Jc},AudioLoader:function(){return kc},AxesHelper:function(){return nd},BackSide:function(){return J},BasicDepthPacking:function(){return cn},BasicShadowMap:function(){return M},Bone:function(){return ms},BooleanKeyframeTrack:function(){return Hu},Box2:function(){return yC},Box3:function(){return zi},Box3Helper:function(){return jC},BoxBufferGeometry:function(){return za},BoxGeometry:function(){return za},BoxHelper:function(){return OC},BufferAttribute:function(){return na},BufferGeometry:function(){return fa},BufferGeometryLoader:function(){return qc},ByteType:function(){return tt},Cache:function(){return Ju},Camera:function(){return Ea},CameraHelper:function(){return JC},CanvasTexture:function(){return Qs},CapsuleBufferGeometry:function(){return vI},CapsuleGeometry:function(){return vI},CatmullRomCurve3:function(){return lI},CineonToneMapping:function(){return Ve},CircleBufferGeometry:function(){return fI},CircleGeometry:function(){return fI},ClampToEdgeWrapping:function(){return Le},Clock:function(){return zc},Color:function(){return Gi},ColorKeyframeTrack:function(){return Ku},ColorManagement:function(){return hi},CompressedTexture:function(){return Ds},CompressedTextureLoader:function(){return $u},ConeBufferGeometry:function(){return yI},ConeGeometry:function(){return yI},CubeCamera:function(){return Da},CubeReflectionMapping:function(){return He},CubeRefractionMapping:function(){return Ke},CubeTexture:function(){return Qa},CubeTextureLoader:function(){return tc},CubeUVReflectionMapping:function(){return ze},CubicBezierCurve:function(){return gI},CubicBezierCurve3:function(){return sI},CubicInterpolant:function(){return Vu},CullFaceBack:function(){return F},CullFaceFront:function(){return N},CullFaceFrontBack:function(){return z},CullFaceNone:function(){return K},Curve:function(){return Ps},CurvePath:function(){return AI},CustomBlending:function(){return te},CustomToneMapping:function(){return Xe},CylinderBufferGeometry:function(){return bI},CylinderGeometry:function(){return bI},Cylindrical:function(){return fC},Data3DTexture:function(){return ki},DataArrayTexture:function(){return Ri},DataTexture:function(){return ps},DataTexture2DArray:function(){return fd},DataTexture3D:function(){return bd},DataTextureLoader:function(){return nc},DataUtils:function(){return Cd},DecrementStencilOp:function(){return Gn},DecrementWrapStencilOp:function(){return Zn},DefaultLoadingManager:function(){return Du},DepthFormat:function(){return At},DepthStencilFormat:function(){return mt},DepthTexture:function(){return Xg},DirectionalLight:function(){return pc},DirectionalLightHelper:function(){return _C},DiscreteInterpolant:function(){return Xu},DodecahedronBufferGeometry:function(){return BI},DodecahedronGeometry:function(){return BI},DoubleSide:function(){return U},DstAlphaFactor:function(){return Ce},DstColorFactor:function(){return he},DynamicCopyUsage:function(){return Ln},DynamicDrawUsage:function(){return Hn},DynamicReadUsage:function(){return Nn},EdgesGeometry:function(){return WI},EllipseCurve:function(){return Os},EqualDepth:function(){return ye},EqualStencilFunc:function(){return Wn},EquirectangularReflectionMapping:function(){return Fe},EquirectangularRefractionMapping:function(){return Ne},Euler:function(){return Bl},EventDispatcher:function(){return Un},ExtrudeBufferGeometry:function(){return ru},ExtrudeGeometry:function(){return ru},FileLoader:function(){return Ou},FlatShading:function(){return D},Float16BufferAttribute:function(){return Ia},Float32BufferAttribute:function(){return ua},Float64BufferAttribute:function(){return ca},FloatType:function(){return rt},Fog:function(){return Lg},FogExp2:function(){return Mg},Font:function(){return md},FontLoader:function(){return Ad},FramebufferTexture:function(){return Us},FrontSide:function(){return E},Frustum:function(){return ir},GLBufferAttribute:function(){return hC},GLSL1:function(){return Tn},GLSL3:function(){return En},GreaterDepth:function(){return Be},GreaterEqualDepth:function(){return Ge},GreaterEqualStencilFunc:function(){return kn},GreaterStencilFunc:function(){return Rn},GridHelper:function(){return FC},Group:function(){return Rg},HalfFloatType:function(){return ot},HemisphereLight:function(){return ac},HemisphereLightHelper:function(){return KC},HemisphereLightProbe:function(){return Xc},IcosahedronBufferGeometry:function(){return gu},IcosahedronGeometry:function(){return gu},ImageBitmapLoader:function(){return Rc},ImageLoader:function(){return ec},ImageUtils:function(){return Bi},ImmediateRenderObject:function(){return pd},IncrementStencilOp:function(){return yn},IncrementWrapStencilOp:function(){return Bn},InstancedBufferAttribute:function(){return ys},InstancedBufferGeometry:function(){return Zc},InstancedInterleavedBuffer:function(){return dC},InstancedMesh:function(){return xs},Int16BufferAttribute:function(){return ra},Int32BufferAttribute:function(){return ga},Int8BufferAttribute:function(){return ia},IntType:function(){return lt},InterleavedBuffer:function(){return Tg},InterleavedBufferAttribute:function(){return Jg},Interpolant:function(){return Ru},InterpolateDiscrete:function(){return jt},InterpolateLinear:function(){return $t},InterpolateSmooth:function(){return en},InvertStencilOp:function(){return qn},KeepStencilOp:function(){return fn},KeyframeTrack:function(){return Yu},LOD:function(){return Is},LatheBufferGeometry:function(){return pI},LatheGeometry:function(){return pI},Layers:function(){return Zl},LessDepth:function(){return fe},LessEqualDepth:function(){return be},LessEqualStencilFunc:function(){return Sn},LessStencilFunc:function(){return wn},Light:function(){return lc},LightProbe:function(){return yc},Line:function(){return Xs},Line3:function(){return ZC},LineBasicMaterial:function(){return ws},LineCurve:function(){return II},LineCurve3:function(){return uI},LineDashedMaterial:function(){return Wu},LineLoop:function(){return Fs},LineSegments:function(){return Ks},LinearEncoding:function(){return In},LinearFilter:function(){return Qe},LinearInterpolant:function(){return ku},LinearMipMapLinearFilter:function(){return $e},LinearMipMapNearestFilter:function(){return Oe},LinearMipmapLinearFilter:function(){return je},LinearMipmapNearestFilter:function(){return Pe},LinearSRGBColorSpace:function(){return pn},LinearToneMapping:function(){return Se},Loader:function(){return Qu},LoaderUtils:function(){return Bc},LoadingManager:function(){return Uu},LoopOnce:function(){return Qt},LoopPingPong:function(){return Ot},LoopRepeat:function(){return Pt},LuminanceAlphaFormat:function(){return ht},LuminanceFormat:function(){return dt},MOUSE:function(){return Y},Material:function(){return jl},MaterialLoader:function(){return Gc},MathUtils:function(){return ai},Matrix3:function(){return oi},Matrix4:function(){return dl},MaxEquation:function(){return re},Mesh:function(){return Fa},MeshBasicMaterial:function(){return $l},MeshDepthMaterial:function(){return Bg},MeshDistanceMaterial:function(){return Zg},MeshLambertMaterial:function(){return xu},MeshMatcapMaterial:function(){return wu},MeshNormalMaterial:function(){return qu},MeshPhongMaterial:function(){return Bu},MeshPhysicalMaterial:function(){return Gu},MeshStandardMaterial:function(){return yu},MeshToonMaterial:function(){return Zu},MinEquation:function(){return ae},MirroredRepeatWrapping:function(){return _e},MixOperation:function(){return xe},MultiplyBlending:function(){return ee},MultiplyOperation:function(){return qe},NearestFilter:function(){return Te},NearestMipMapLinearFilter:function(){return De},NearestMipMapNearestFilter:function(){return Je},NearestMipmapLinearFilter:function(){return Ue},NearestMipmapNearestFilter:function(){return Ee},NeverDepth:function(){return pe},NeverStencilFunc:function(){return xn},NoBlending:function(){return P},NoColorSpace:function(){return An},NoToneMapping:function(){return We},NormalAnimationBlendMode:function(){return an},NormalBlending:function(){return O},NotEqualDepth:function(){return Ze},NotEqualStencilFunc:function(){return Vn},NumberKeyframeTrack:function(){return Fu},Object3D:function(){return Nl},ObjectLoader:function(){return xc},ObjectSpaceNormalMap:function(){return hn},OctahedronBufferGeometry:function(){return su},OctahedronGeometry:function(){return su},OneFactor:function(){return ge},OneMinusDstAlphaFactor:function(){return de},OneMinusDstColorFactor:function(){return Ae},OneMinusSrcAlphaFactor:function(){return ce},OneMinusSrcColorFactor:function(){return Ie},OrthographicCamera:function(){return Ar},PCFShadowMap:function(){return L},PCFSoftShadowMap:function(){return _},PMREMGenerator:function(){return Zr},ParametricGeometry:function(){return dd},Path:function(){return mI},PerspectiveCamera:function(){return Ja},Plane:function(){return er},PlaneBufferGeometry:function(){return rr},PlaneGeometry:function(){return rr},PlaneHelper:function(){return $C},PointLight:function(){return Ac},PointLightHelper:function(){return kC},Points:function(){return Ts},PointsMaterial:function(){return Ns},PolarGridHelper:function(){return NC},PolyhedronBufferGeometry:function(){return GI},PolyhedronGeometry:function(){return GI},PositionalAudio:function(){return jc},PropertyBinding:function(){return gC},PropertyMixer:function(){return eC},QuadraticBezierCurve:function(){return cI},QuadraticBezierCurve3:function(){return CI},Quaternion:function(){return Hi},QuaternionKeyframeTrack:function(){return zu},QuaternionLinearInterpolant:function(){return Nu},REVISION:function(){return X},RGBADepthPacking:function(){return Cn},RGBAFormat:function(){return Ct},RGBAIntegerFormat:function(){return yt},RGBA_ASTC_10x10_Format:function(){return Et},RGBA_ASTC_10x5_Format:function(){return Lt},RGBA_ASTC_10x6_Format:function(){return _t},RGBA_ASTC_10x8_Format:function(){return Tt},RGBA_ASTC_12x10_Format:function(){return Jt},RGBA_ASTC_12x12_Format:function(){return Ut},RGBA_ASTC_4x4_Format:function(){return Xt},RGBA_ASTC_5x4_Format:function(){return Yt},RGBA_ASTC_5x5_Format:function(){return Ht},RGBA_ASTC_6x5_Format:function(){return Kt},RGBA_ASTC_6x6_Format:function(){return Ft},RGBA_ASTC_8x5_Format:function(){return Nt},RGBA_ASTC_8x6_Format:function(){return zt},RGBA_ASTC_8x8_Format:function(){return Mt},RGBA_BPTC_Format:function(){return Dt},RGBA_ETC2_EAC_Format:function(){return kt},RGBA_PVRTC_2BPPV1_Format:function(){return St},RGBA_PVRTC_4BPPV1_Format:function(){return Wt},RGBA_S3TC_DXT1_Format:function(){return Bt},RGBA_S3TC_DXT3_Format:function(){return Zt},RGBA_S3TC_DXT5_Format:function(){return qt},RGBFormat:function(){return ct},RGB_ETC1_Format:function(){return Rt},RGB_ETC2_Format:function(){return Vt},RGB_PVRTC_2BPPV1_Format:function(){return wt},RGB_PVRTC_4BPPV1_Format:function(){return xt},RGB_S3TC_DXT1_Format:function(){return Gt},RGFormat:function(){return ft},RGIntegerFormat:function(){return bt},RawShaderMaterial:function(){return bu},Ray:function(){return Cl},Raycaster:function(){return AC},RectAreaLight:function(){return fc},RedFormat:function(){return pt},RedIntegerFormat:function(){return vt},ReinhardToneMapping:function(){return Re},RepeatWrapping:function(){return Me},ReplaceStencilOp:function(){return bn},ReverseSubtractEquation:function(){return le},RingBufferGeometry:function(){return Iu},RingGeometry:function(){return Iu},SRGBColorSpace:function(){return mn},Scene:function(){return _g},ShaderChunk:function(){return or},ShaderLib:function(){return sr},ShaderMaterial:function(){return Ta},ShadowMaterial:function(){return fu},Shape:function(){return SI},ShapeBufferGeometry:function(){return uu},ShapeGeometry:function(){return uu},ShapePath:function(){return id},ShapeUtils:function(){return iu},ShortType:function(){return nt},Skeleton:function(){return bs},SkeletonHelper:function(){return RC},SkinnedMesh:function(){return As},SmoothShading:function(){return Q},Source:function(){return Zi},Sphere:function(){return al},SphereBufferGeometry:function(){return cu},SphereGeometry:function(){return cu},Spherical:function(){return vC},SphericalHarmonics3:function(){return bc},SplineCurve:function(){return dI},SpotLight:function(){return uc},SpotLightHelper:function(){return xC},Sprite:function(){return rs},SpriteMaterial:function(){return Ug},SrcAlphaFactor:function(){return ue},SrcAlphaSaturateFactor:function(){return me},SrcColorFactor:function(){return se},StaticCopyUsage:function(){return Mn},StaticDrawUsage:function(){return Yn},StaticReadUsage:function(){return Fn},StereoCamera:function(){return Nc},StreamCopyUsage:function(){return _n},StreamDrawUsage:function(){return Kn},StreamReadUsage:function(){return zn},StringKeyframeTrack:function(){return Mu},SubtractEquation:function(){return ie},SubtractiveBlending:function(){return $},TOUCH:function(){return H},TangentSpaceNormalMap:function(){return dn},TetrahedronBufferGeometry:function(){return Cu},TetrahedronGeometry:function(){return Cu},TextGeometry:function(){return hd},Texture:function(){return wi},TextureLoader:function(){return ic},TorusBufferGeometry:function(){return du},TorusGeometry:function(){return du},TorusKnotBufferGeometry:function(){return hu},TorusKnotGeometry:function(){return hu},Triangle:function(){return Pl},TriangleFanDrawMode:function(){return sn},TriangleStripDrawMode:function(){return gn},TrianglesDrawMode:function(){return on},TubeBufferGeometry:function(){return Au},TubeGeometry:function(){return Au},UVMapping:function(){return Ye},Uint16BufferAttribute:function(){return oa},Uint32BufferAttribute:function(){return sa},Uint8BufferAttribute:function(){return la},Uint8ClampedBufferAttribute:function(){return aa},Uniform:function(){return CC},UniformsLib:function(){return gr},UniformsUtils:function(){return _a},UnsignedByteType:function(){return et},UnsignedInt248Type:function(){return It},UnsignedIntType:function(){return at},UnsignedShort4444Type:function(){return gt},UnsignedShort5551Type:function(){return st},UnsignedShortType:function(){return it},VSMShadowMap:function(){return T},Vector2:function(){return ri},Vector3:function(){return Ki},Vector4:function(){return Wi},VectorKeyframeTrack:function(){return Lu},VideoTexture:function(){return Js},WebGL1Renderer:function(){return Ng},WebGL3DRenderTarget:function(){return Xi},WebGLArrayRenderTarget:function(){return Vi},WebGLCubeRenderTarget:function(){return Pa},WebGLMultipleRenderTargets:function(){return Yi},WebGLMultisampleRenderTarget:function(){return vd},WebGLRenderTarget:function(){return Si},WebGLRenderer:function(){return Fg},WebGLUtils:function(){return Wg},WireframeGeometry:function(){return mu},WrapAroundEnding:function(){return ln},ZeroCurvatureEnding:function(){return tn},ZeroFactor:function(){return oe},ZeroSlopeEnding:function(){return nn},ZeroStencilOp:function(){return vn},_SRGBAFormat:function(){return Jn},sRGBEncoding:function(){return un}});var t,i=n(791),l=n(250);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return g(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,l,a=[],r=!0,o=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(g){o=!0,l=g}finally{try{r||null==n.return||n.return()}finally{if(o)throw l}}return a}}(e,t)||I(e,t)||u()}function C(e,t){if(null==e)return{};var n,i,l=function(e,t){if(null==e)return{};var n,i,l={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw a}}}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch($p){return!1}}function m(e,t,n){return m=A()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var l=new(Function.bind.apply(e,i));return n&&h(l,n.prototype),l},m.apply(null,arguments)}function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v(e){return function(e){if(Array.isArray(e))return s(e)}(e)||p(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===Z(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function w(e){var t=A();return function(){var n,i=B(e);if(t){var l=B(this).constructor;n=Reflect.construct(i,arguments,l)}else n=i.apply(this,arguments);return x(this,n)}}function W(e,t,n,i,l,a,r){try{var o=e[a](r),g=o.value}catch(s){return void n(s)}o.done?t(g):Promise.resolve(g).then(i,l)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(i,l){var a=e.apply(t,n);function r(e){W(a,i,l,r,o,"next",e)}function o(e){W(a,i,l,r,o,"throw",e)}r(void 0)}))}}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function V(){return V="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=R(e,t);if(i){var l=Object.getOwnPropertyDescriptor(i,t);return l.get?l.get.call(arguments.length<3?e:n):l.value}},V.apply(this,arguments)}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(x){o=function(e,t,n){return e[t]=n}}function g(e,t,n,i){var l=t&&t.prototype instanceof u?t:u,a=Object.create(l.prototype),r=new G(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(l,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===l)throw a;return q()}for(n.method=l,n.arg=a;;){var r=n.delegate;if(r){var o=f(r,n);if(o){if(o===I)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var g=s(e,t,n);if("normal"===g.type){if(i=n.done?"completed":"suspendedYield",g.arg===I)continue;return{value:g.arg,done:n.done}}"throw"===g.type&&(i="completed",n.method="throw",n.arg=g.arg)}}}(e,n,r),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(x){return{type:"throw",arg:x}}}e.wrap=g;var I={};function u(){}function c(){}function C(){}var d={};o(d,l,(function(){return this}));var h=Object.getPrototypeOf,A=h&&h(h(B([])));A&&A!==t&&n.call(A,l)&&(d=A);var m=C.prototype=u.prototype=Object.create(d);function p(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function i(l,a,r,o){var g=s(e[l],e,a);if("throw"!==g.type){var I=g.arg,u=I.value;return u&&"object"==Z(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,r,o)}),(function(e){i("throw",e,r,o)})):t.resolve(u).then((function(e){I.value=e,r(I)}),(function(e){return i("throw",e,r,o)}))}o(g.arg)}var l;this._invoke=function(e,n){function a(){return new t((function(t,l){i(e,n,t,l)}))}return l=l?l.then(a,a):a()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=s(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,I;var l=i.arg;return l?l.done?(t[e.resultName]=l.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,I):l:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function G(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function B(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:q}}function q(){return{value:void 0,done:!0}}return c.prototype=C,o(m,"constructor",C),o(C,"constructor",c),c.displayName=o(C,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===c||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,o(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},p(v.prototype),o(v.prototype,a,(function(){return this})),e.AsyncIterator=v,e.async=function(t,n,i,l,a){void 0===a&&(a=Promise);var r=new v(g(t,n,i,l),a);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},p(m),o(m,r,"Generator"),o(m,l,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=B,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return r.type="throw",r.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var l=this.tryEntries.length-1;l>=0;--l){var a=this.tryEntries[l],r=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),g=n.call(a,"finallyLoc");if(o&&g){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var l=this.tryEntries[i];if(l.tryLoc<=this.prev&&n.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var a=l;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,I):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),y(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var l=i.arg;y(n)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),I}},e}var X="142",Y={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},H={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K=0,F=1,N=2,z=3,M=0,L=1,_=2,T=3,E=0,J=1,U=2,D=1,Q=2,P=0,O=1,j=2,$=3,ee=4,te=5,ne=100,ie=101,le=102,ae=103,re=104,oe=200,ge=201,se=202,Ie=203,ue=204,ce=205,Ce=206,de=207,he=208,Ae=209,me=210,pe=0,ve=1,fe=2,be=3,ye=4,Ge=5,Be=6,Ze=7,qe=0,xe=1,we=2,We=0,Se=1,Re=2,Ve=3,ke=4,Xe=5,Ye=300,He=301,Ke=302,Fe=303,Ne=304,ze=306,Me=1e3,Le=1001,_e=1002,Te=1003,Ee=1004,Je=1004,Ue=1005,De=1005,Qe=1006,Pe=1007,Oe=1007,je=1008,$e=1008,et=1009,tt=1010,nt=1011,it=1012,lt=1013,at=1014,rt=1015,ot=1016,gt=1017,st=1018,It=1020,ut=1021,ct=1022,Ct=1023,dt=1024,ht=1025,At=1026,mt=1027,pt=1028,vt=1029,ft=1030,bt=1031,yt=1033,Gt=33776,Bt=33777,Zt=33778,qt=33779,xt=35840,wt=35841,Wt=35842,St=35843,Rt=36196,Vt=37492,kt=37496,Xt=37808,Yt=37809,Ht=37810,Kt=37811,Ft=37812,Nt=37813,zt=37814,Mt=37815,Lt=37816,_t=37817,Tt=37818,Et=37819,Jt=37820,Ut=37821,Dt=36492,Qt=2200,Pt=2201,Ot=2202,jt=2300,$t=2301,en=2302,tn=2400,nn=2401,ln=2402,an=2500,rn=2501,on=0,gn=1,sn=2,In=3e3,un=3001,cn=3200,Cn=3201,dn=0,hn=1,An="",mn="srgb",pn="srgb-linear",vn=0,fn=7680,bn=7681,yn=7682,Gn=7683,Bn=34055,Zn=34056,qn=5386,xn=512,wn=513,Wn=514,Sn=515,Rn=516,Vn=517,kn=518,Xn=519,Yn=35044,Hn=35048,Kn=35040,Fn=35045,Nn=35049,zn=35041,Mn=35046,Ln=35050,_n=35042,Tn="100",En="300 es",Jn=1035,Un=function(){function e(){f(this,e)}return y(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,l=n.length;i<l;i++)n[i].call(this,e);e.target=null}}}}]),e}(),Dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qn=1234567,Pn=Math.PI/180,On=180/Math.PI;function jn(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Dn[255&e]+Dn[e>>8&255]+Dn[e>>16&255]+Dn[e>>24&255]+"-"+Dn[255&t]+Dn[t>>8&255]+"-"+Dn[t>>16&15|64]+Dn[t>>24&255]+"-"+Dn[63&n|128]+Dn[n>>8&255]+"-"+Dn[n>>16&255]+Dn[n>>24&255]+Dn[255&i]+Dn[i>>8&255]+Dn[i>>16&255]+Dn[i>>24&255]).toLowerCase()}function $n(e,t,n){return Math.max(t,Math.min(n,e))}function ei(e,t){return(e%t+t)%t}function ti(e,t,n){return(1-n)*e+n*t}function ni(e){return 0===(e&e-1)&&0!==e}function ii(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function li(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var ai=Object.freeze({__proto__:null,DEG2RAD:Pn,RAD2DEG:On,generateUUID:jn,clamp:$n,euclideanModulo:ei,mapLinear:function(e,t,n,i,l){return i+(e-t)*(l-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ti,damp:function(e,t,n,i){return ti(e,t,1-Math.exp(-n*i))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(ei(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Qn=e);var t=Qn+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Pn},radToDeg:function(e){return e*On},isPowerOfTwo:ni,ceilPowerOfTwo:ii,floorPowerOfTwo:li,setQuaternionFromProperEuler:function(e,t,n,i,l){var a=Math.cos,r=Math.sin,o=a(n/2),g=r(n/2),s=a((t+i)/2),I=r((t+i)/2),u=a((t-i)/2),c=r((t-i)/2),C=a((i-t)/2),d=r((i-t)/2);switch(l){case"XYX":e.set(o*I,g*u,g*c,o*s);break;case"YZY":e.set(g*c,o*I,g*u,o*s);break;case"ZXZ":e.set(g*u,g*c,o*I,o*s);break;case"XZX":e.set(o*I,g*d,g*C,o*s);break;case"YXY":e.set(g*C,o*I,g*d,o*s);break;case"ZYZ":e.set(g*d,g*C,o*I,o*s);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),ri=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return y(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),l=this.x-e.x,a=this.y-e.y;return this.x=l*n-a*i+e.x,this.y=l*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),oi=function(){function e(){f(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return y(e,[{key:"set",value:function(e,t,n,i,l,a,r,o,g){var s=this.elements;return s[0]=e,s[1]=i,s[2]=r,s[3]=t,s[4]=l,s[5]=o,s[6]=n,s[7]=a,s[8]=g,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,l=this.elements,a=n[0],r=n[3],o=n[6],g=n[1],s=n[4],I=n[7],u=n[2],c=n[5],C=n[8],d=i[0],h=i[3],A=i[6],m=i[1],p=i[4],v=i[7],f=i[2],b=i[5],y=i[8];return l[0]=a*d+r*m+o*f,l[3]=a*h+r*p+o*b,l[6]=a*A+r*v+o*y,l[1]=g*d+s*m+I*f,l[4]=g*h+s*p+I*b,l[7]=g*A+s*v+I*y,l[2]=u*d+c*m+C*f,l[5]=u*h+c*p+C*b,l[8]=u*A+c*v+C*y,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],l=e[3],a=e[4],r=e[5],o=e[6],g=e[7],s=e[8];return t*a*s-t*r*g-n*l*s+n*r*o+i*l*g-i*a*o}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],l=e[3],a=e[4],r=e[5],o=e[6],g=e[7],s=e[8],I=s*a-r*g,u=r*o-s*l,c=g*l-a*o,C=t*I+n*u+i*c;if(0===C)return this.set(0,0,0,0,0,0,0,0,0);var d=1/C;return e[0]=I*d,e[1]=(i*g-s*n)*d,e[2]=(r*n-i*a)*d,e[3]=u*d,e[4]=(s*t-i*o)*d,e[5]=(i*l-r*t)*d,e[6]=c*d,e[7]=(n*o-g*t)*d,e[8]=(a*t-n*l)*d,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,l,a,r){var o=Math.cos(l),g=Math.sin(l);return this.set(n*o,n*g,-n*(o*a+g*r)+a+e,-i*g,i*o,-i*(-g*a+o*r)+r+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,l=i[0],a=i[3],r=i[6],o=i[1],g=i[4],s=i[7];return i[0]=t*l+n*o,i[3]=t*a+n*g,i[6]=t*r+n*s,i[1]=-n*l+t*o,i[4]=-n*a+t*g,i[7]=-n*r+t*s,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function gi(e){for(var t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var si={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ii(e,t){return new si[e](t)}function ui(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ci(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ci(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var di=(a(t={},mn,a({},pn,ci)),a(t,pn,a({},mn,Ci)),t),hi={legacyMode:!0,get workingColorSpace(){return pn},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(di[t]&&void 0!==di[t][n]){var i=di[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Ai={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mi={r:0,g:0,b:0},pi={h:0,s:0,l:0},vi={h:0,s:0,l:0};function fi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function bi(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var yi,Gi=function(e){function t(e,n,i){return f(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return y(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,hi.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pn;return this.r=e,this.g=t,this.b=n,hi.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pn;if(e=ei(e,1),t=$n(t,0,1),n=$n(n,0,1),0===t)this.r=this.g=this.b=n;else{var l=n<=.5?n*(1+t):n+t-n*t,a=2*n-l;this.r=fi(a,l,e+1/3),this.g=fi(a,l,e),this.b=fi(a,l,e-1/3)}return hi.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var l,a=t[1],r=t[2];switch(a){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,hi.toWorkingColorSpace(this,n),i(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,hi.toWorkingColorSpace(this,n),i(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){var o=parseFloat(l[1])/360,g=parseInt(l[2],10)/100,s=parseInt(l[3],10)/100;return i(l[4]),this.setHSL(o,g,s,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var I=t[1],u=I.length;if(3===u)return this.r=parseInt(I.charAt(0)+I.charAt(0),16)/255,this.g=parseInt(I.charAt(1)+I.charAt(1),16)/255,this.b=parseInt(I.charAt(2)+I.charAt(2),16)/255,hi.toWorkingColorSpace(this,n),this;if(6===u)return this.r=parseInt(I.charAt(0)+I.charAt(1),16)/255,this.g=parseInt(I.charAt(2)+I.charAt(3),16)/255,this.b=parseInt(I.charAt(4)+I.charAt(5),16)/255,hi.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn,n=Ai[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ci(e.r),this.g=ci(e.g),this.b=ci(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Ci(e.r),this.g=Ci(e.g),this.b=Ci(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn;return hi.fromWorkingColorSpace(bi(this,mi),e),$n(255*mi.r,0,255)<<16^$n(255*mi.g,0,255)<<8^$n(255*mi.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;hi.fromWorkingColorSpace(bi(this,mi),t);var n,i,l=mi.r,a=mi.g,r=mi.b,o=Math.max(l,a,r),g=Math.min(l,a,r),s=(g+o)/2;if(g===o)n=0,i=0;else{var I=o-g;switch(i=s<=.5?I/(o+g):I/(2-o-g),o){case l:n=(a-r)/I+(a<r?6:0);break;case a:n=(r-l)/I+2;break;case r:n=(l-a)/I+4}n/=6}return e.h=n,e.s=i,e.l=s,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn;return hi.fromWorkingColorSpace(bi(this,mi),t),e.r=mi.r,e.g=mi.g,e.b=mi.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn;return hi.fromWorkingColorSpace(bi(this,mi),e),e!==mn?"color(".concat(e," ").concat(mi.r," ").concat(mi.g," ").concat(mi.b,")"):"rgb(".concat(255*mi.r|0,",").concat(255*mi.g|0,",").concat(255*mi.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(pi),pi.h+=e,pi.s+=t,pi.l+=n,this.setHSL(pi.h,pi.s,pi.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(pi),e.getHSL(vi);var n=ti(pi.h,vi.h,t),i=ti(pi.s,vi.s,t),l=ti(pi.l,vi.l,t);return this.setHSL(n,i,l),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();Gi.NAMES=Ai;var Bi=function(){function e(){f(this,e)}return y(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===yi&&(yi=ui("canvas")),yi.width=e.width,yi.height=e.height;var n=yi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=yi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=ui("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),l=i.data,a=0;a<l.length;a++)l[a]=255*ci(l[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var r=e.data.slice(0),o=0;o<r.length;o++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[o]=Math.floor(255*ci(r[o]/255)):r[o]=ci(r[o]);return{data:r,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),Zi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;f(this,e),this.isSource=!0,this.uuid=jn(),this.data=t,this.version=0}return y(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var l;if(Array.isArray(i)){l=[];for(var a=0,r=i.length;a<r;a++)i[a].isDataTexture?l.push(qi(i[a].image)):l.push(qi(i[a]))}else l=qi(i);n.url=l}return t||(e.images[this.uuid]=n),n}}]),e}();function qi(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Bi.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var xi=0,wi=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qe,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:je,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ct,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:et,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:In;return f(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(q(e),"id",{value:xi++}),e.uuid=jn(),e.name="",e.source=new Zi(i),e.mipmaps=[],e.mapping=l,e.wrapS=a,e.wrapT=r,e.magFilter=o,e.minFilter=g,e.anisotropy=u,e.format=s,e.internalFormat=null,e.type=I,e.offset=new ri(0,0),e.repeat=new ri(1,1),e.center=new ri(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new oi,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=c,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return y(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Ye)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Me:e.x=e.x-Math.floor(e.x);break;case Le:e.x=e.x<0?0:1;break;case _e:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Me:e.y=e.y-Math.floor(e.y);break;case Le:e.y=e.y<0?0:1;break;case _e:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Un);wi.DEFAULT_IMAGE=null,wi.DEFAULT_MAPPING=Ye;var Wi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=l}return y(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,l=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*l,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*l,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*l,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*l,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,l,a=.01,r=.1,o=e.elements,g=o[0],s=o[4],I=o[8],u=o[1],c=o[5],C=o[9],d=o[2],h=o[6],A=o[10];if(Math.abs(s-u)<a&&Math.abs(I-d)<a&&Math.abs(C-h)<a){if(Math.abs(s+u)<r&&Math.abs(I+d)<r&&Math.abs(C+h)<r&&Math.abs(g+c+A-3)<r)return this.set(1,0,0,0),this;t=Math.PI;var m=(g+1)/2,p=(c+1)/2,v=(A+1)/2,f=(s+u)/4,b=(I+d)/4,y=(C+h)/4;return m>p&&m>v?m<a?(n=0,i=.707106781,l=.707106781):(i=f/(n=Math.sqrt(m)),l=b/n):p>v?p<a?(n=.707106781,i=0,l=.707106781):(n=f/(i=Math.sqrt(p)),l=y/i):v<a?(n=.707106781,i=.707106781,l=0):(n=b/(l=Math.sqrt(v)),i=y/l),this.set(n,i,l,t),this}var G=Math.sqrt((h-C)*(h-C)+(I-d)*(I-d)+(u-s)*(u-s));return Math.abs(G)<.001&&(G=1),this.x=(h-C)/G,this.y=(I-d)/G,this.z=(u-s)/G,this.w=Math.acos((g+c+A-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),Si=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,n),(l=t.call(this)).isWebGLRenderTarget=!0,l.width=e,l.height=i,l.depth=1,l.scissor=new Wi(0,0,e,i),l.scissorTest=!1,l.viewport=new Wi(0,0,e,i);var r={width:e,height:i,depth:1};return l.texture=new wi(r,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),l.texture.isRenderTargetTexture=!0,l.texture.flipY=!1,l.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,l.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,l.texture.minFilter=void 0!==a.minFilter?a.minFilter:Qe,l.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,l.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,l.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,l.samples=void 0!==a.samples?a.samples:0,l}return y(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new Zi(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Un),Ri=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return f(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:i,width:l,height:a,depth:r},e.magFilter=Te,e.minFilter=Te,e.wrapR=Le,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return y(n)}(wi),Vi=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,e,i)).isWebGLArrayRenderTarget=!0,a.depth=l,a.texture=new Ri(null,e,i,l),a.texture.isRenderTargetTexture=!0,a}return y(n)}(Si),ki=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return f(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:i,width:l,height:a,depth:r},e.magFilter=Te,e.minFilter=Te,e.wrapR=Le,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return y(n)}(wi),Xi=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,e,i)).isWebGL3DRenderTarget=!0,a.depth=l,a.texture=new ki(null,e,i,l),a.texture.isRenderTargetTexture=!0,a}return y(n)}(Si),Yi=function(e){G(n,e);var t=w(n);function n(e,i,l){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f(this,n),(a=t.call(this,e,i,r)).isWebGLMultipleRenderTargets=!0;var o=a.texture;a.texture=[];for(var g=0;g<l;g++)a.texture[g]=o.clone(),a.texture[g].isRenderTargetTexture=!0;return a}return y(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,l=this.texture.length;i<l;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(Si),Hi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=l}return y(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,l=e._z,a=e._order,r=Math.cos,o=Math.sin,g=r(n/2),s=r(i/2),I=r(l/2),u=o(n/2),c=o(i/2),C=o(l/2);switch(a){case"XYZ":this._x=u*s*I+g*c*C,this._y=g*c*I-u*s*C,this._z=g*s*C+u*c*I,this._w=g*s*I-u*c*C;break;case"YXZ":this._x=u*s*I+g*c*C,this._y=g*c*I-u*s*C,this._z=g*s*C-u*c*I,this._w=g*s*I+u*c*C;break;case"ZXY":this._x=u*s*I-g*c*C,this._y=g*c*I+u*s*C,this._z=g*s*C+u*c*I,this._w=g*s*I-u*c*C;break;case"ZYX":this._x=u*s*I-g*c*C,this._y=g*c*I+u*s*C,this._z=g*s*C-u*c*I,this._w=g*s*I+u*c*C;break;case"YZX":this._x=u*s*I+g*c*C,this._y=g*c*I+u*s*C,this._z=g*s*C-u*c*I,this._w=g*s*I-u*c*C;break;case"XZY":this._x=u*s*I-g*c*C,this._y=g*c*I-u*s*C,this._z=g*s*C+u*c*I,this._w=g*s*I+u*c*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],l=t[8],a=t[1],r=t[5],o=t[9],g=t[2],s=t[6],I=t[10],u=n+r+I;if(u>0){var c=.5/Math.sqrt(u+1);this._w=.25/c,this._x=(s-o)*c,this._y=(l-g)*c,this._z=(a-i)*c}else if(n>r&&n>I){var C=2*Math.sqrt(1+n-r-I);this._w=(s-o)/C,this._x=.25*C,this._y=(i+a)/C,this._z=(l+g)/C}else if(r>I){var d=2*Math.sqrt(1+r-n-I);this._w=(l-g)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(o+s)/d}else{var h=2*Math.sqrt(1+I-n-r);this._w=(a-i)/h,this._x=(l+g)/h,this._y=(o+s)/h,this._z=.25*h}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs($n(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,l=e._z,a=e._w,r=t._x,o=t._y,g=t._z,s=t._w;return this._x=n*s+a*r+i*g-l*o,this._y=i*s+a*o+l*r-n*g,this._z=l*s+a*g+n*o-i*r,this._w=a*s-n*r-i*o-l*g,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,l=this._z,a=this._w,r=a*e._w+n*e._x+i*e._y+l*e._z;if(r<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,r=-r):this.copy(e),r>=1)return this._w=a,this._x=n,this._y=i,this._z=l,this;var o=1-r*r;if(o<=Number.EPSILON){var g=1-t;return this._w=g*a+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*l+t*this._z,this.normalize(),this._onChangeCallback(),this}var s=Math.sqrt(o),I=Math.atan2(s,r),u=Math.sin((1-t)*I)/s,c=Math.sin(t*I)/s;return this._w=a*u+this._w*c,this._x=n*u+this._x*c,this._y=i*u+this._y*c,this._z=l*u+this._z*c,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(l),n*Math.cos(l),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerp",value:function(e,t,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,i)}},{key:"slerpFlat",value:function(e,t,n,i,l,a,r){var o=n[i+0],g=n[i+1],s=n[i+2],I=n[i+3],u=l[a+0],c=l[a+1],C=l[a+2],d=l[a+3];if(0===r)return e[t+0]=o,e[t+1]=g,e[t+2]=s,void(e[t+3]=I);if(1===r)return e[t+0]=u,e[t+1]=c,e[t+2]=C,void(e[t+3]=d);if(I!==d||o!==u||g!==c||s!==C){var h=1-r,A=o*u+g*c+s*C+I*d,m=A>=0?1:-1,p=1-A*A;if(p>Number.EPSILON){var v=Math.sqrt(p),f=Math.atan2(v,A*m);h=Math.sin(h*f)/v,r=Math.sin(r*f)/v}var b=r*m;if(o=o*h+u*b,g=g*h+c*b,s=s*h+C*b,I=I*h+d*b,h===1-r){var y=1/Math.sqrt(o*o+g*g+s*s+I*I);o*=y,g*=y,s*=y,I*=y}}e[t]=o,e[t+1]=g,e[t+2]=s,e[t+3]=I}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,l,a){var r=n[i],o=n[i+1],g=n[i+2],s=n[i+3],I=l[a],u=l[a+1],c=l[a+2],C=l[a+3];return e[t]=r*C+s*I+o*c-g*u,e[t+1]=o*C+s*u+g*I-r*c,e[t+2]=g*C+s*c+r*u-o*I,e[t+3]=s*C-r*I-o*u-g*c,e}}]),t}(),Ki=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}return y(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ni.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Ni.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.elements;return this.x=l[0]*t+l[3]*n+l[6]*i,this.y=l[1]*t+l[4]*n+l[7]*i,this.z=l[2]*t+l[5]*n+l[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.elements,a=1/(l[3]*t+l[7]*n+l[11]*i+l[15]);return this.x=(l[0]*t+l[4]*n+l[8]*i+l[12])*a,this.y=(l[1]*t+l[5]*n+l[9]*i+l[13])*a,this.z=(l[2]*t+l[6]*n+l[10]*i+l[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.x,a=e.y,r=e.z,o=e.w,g=o*t+a*i-r*n,s=o*n+r*t-l*i,I=o*i+l*n-a*t,u=-l*t-a*n-r*i;return this.x=g*o+u*-l+s*-r-I*-a,this.y=s*o+u*-a+I*-l-g*-r,this.z=I*o+u*-r+g*-a-s*-l,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*i,this.y=l[1]*t+l[5]*n+l[9]*i,this.z=l[2]*t+l[6]*n+l[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,l=e.z,a=t.x,r=t.y,o=t.z;return this.x=i*o-l*r,this.y=l*a-n*o,this.z=n*r-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Fi.copy(this).projectOnVector(e),this.sub(Fi)}},{key:"reflect",value:function(e){return this.sub(Fi.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos($n(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Fi=new Ki,Ni=new Hi,zi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki(-1/0,-1/0,-1/0);f(this,e),this.isBox3=!0,this.min=t,this.max=n}return y(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,l=-1/0,a=-1/0,r=-1/0,o=0,g=e.length;o<g;o+=3){var s=e[o],I=e[o+1],u=e[o+2];s<t&&(t=s),I<n&&(n=I),u<i&&(i=u),s>l&&(l=s),I>a&&(a=I),u>r&&(r=u)}return this.min.set(t,n,i),this.max.set(l,a,r),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,l=-1/0,a=-1/0,r=-1/0,o=0,g=e.count;o<g;o++){var s=e.getX(o),I=e.getY(o),u=e.getZ(o);s<t&&(t=s),I<n&&(n=I),u<i&&(i=u),s>l&&(l=s),I>a&&(a=I),u>r&&(r=u)}return this.min.set(t,n,i),this.max.set(l,a,r),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Li.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,l=0,a=i.count;l<a;l++)Li.fromBufferAttribute(i,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Li);else null===n.boundingBox&&n.computeBoundingBox(),_i.copy(n.boundingBox),_i.applyMatrix4(e.matrixWorld),this.union(_i);for(var r=e.children,o=0,g=r.length;o<g;o++)this.expandByObject(r[o],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Li),Li.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Pi),Oi.subVectors(this.max,Pi),Ti.subVectors(e.a,Pi),Ei.subVectors(e.b,Pi),Ji.subVectors(e.c,Pi),Ui.subVectors(Ei,Ti),Di.subVectors(Ji,Ei),Qi.subVectors(Ti,Ji);var t=[0,-Ui.z,Ui.y,0,-Di.z,Di.y,0,-Qi.z,Qi.y,Ui.z,0,-Ui.x,Di.z,0,-Di.x,Qi.z,0,-Qi.x,-Ui.y,Ui.x,0,-Di.y,Di.x,0,-Qi.y,Qi.x,0];return!!el(t,Ti,Ei,Ji,Oi)&&(!!el(t=[1,0,0,0,1,0,0,0,1],Ti,Ei,Ji,Oi)&&(ji.crossVectors(Ui,Di),el(t=[ji.x,ji.y,ji.z],Ti,Ei,Ji,Oi)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Li.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Li).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Mi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Mi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Mi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Mi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Mi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Mi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Mi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Mi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Mi)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Mi=[new Ki,new Ki,new Ki,new Ki,new Ki,new Ki,new Ki,new Ki],Li=new Ki,_i=new zi,Ti=new Ki,Ei=new Ki,Ji=new Ki,Ui=new Ki,Di=new Ki,Qi=new Ki,Pi=new Ki,Oi=new Ki,ji=new Ki,$i=new Ki;function el(e,t,n,i,l){for(var a=0,r=e.length-3;a<=r;a+=3){$i.fromArray(e,a);var o=l.x*Math.abs($i.x)+l.y*Math.abs($i.y)+l.z*Math.abs($i.z),g=t.dot($i),s=n.dot($i),I=i.dot($i);if(Math.max(-Math.max(g,s,I),Math.min(g,s,I))>o)return!1}return!0}var tl=new zi,nl=new Ki,il=new Ki,ll=new Ki,al=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,e),this.center=t,this.radius=n}return y(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):tl.setFromPoints(e).getCenter(n);for(var i=0,l=0,a=e.length;l<a;l++)i=Math.max(i,n.distanceToSquared(e[l]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){ll.subVectors(e,this.center);var t=ll.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.add(ll.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?il.set(0,0,1).multiplyScalar(e.radius):il.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(nl.copy(e.center).add(il)),this.expandByPoint(nl.copy(e.center).sub(il)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),rl=new Ki,ol=new Ki,gl=new Ki,sl=new Ki,Il=new Ki,ul=new Ki,cl=new Ki,Cl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki(0,0,-1);f(this,e),this.origin=t,this.direction=n}return y(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,rl)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=rl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rl.copy(this.direction).multiplyScalar(t).add(this.origin),rl.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){ol.copy(e).add(t).multiplyScalar(.5),gl.copy(t).sub(e).normalize(),sl.copy(this.origin).sub(ol);var l,a,r,o,g=.5*e.distanceTo(t),s=-this.direction.dot(gl),I=sl.dot(this.direction),u=-sl.dot(gl),c=sl.lengthSq(),C=Math.abs(1-s*s);if(C>0)if(a=s*I-u,o=g*C,(l=s*u-I)>=0)if(a>=-o)if(a<=o){var d=1/C;r=(l*=d)*(l+s*(a*=d)+2*I)+a*(s*l+a+2*u)+c}else a=g,r=-(l=Math.max(0,-(s*a+I)))*l+a*(a+2*u)+c;else a=-g,r=-(l=Math.max(0,-(s*a+I)))*l+a*(a+2*u)+c;else a<=-o?r=-(l=Math.max(0,-(-s*g+I)))*l+(a=l>0?-g:Math.min(Math.max(-g,-u),g))*(a+2*u)+c:a<=o?(l=0,r=(a=Math.min(Math.max(-g,-u),g))*(a+2*u)+c):r=-(l=Math.max(0,-(s*g+I)))*l+(a=l>0?g:Math.min(Math.max(-g,-u),g))*(a+2*u)+c;else a=s>0?-g:g,r=-(l=Math.max(0,-(s*a+I)))*l+a*(a+2*u)+c;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),i&&i.copy(gl).multiplyScalar(a).add(ol),r}},{key:"intersectSphere",value:function(e,t){rl.subVectors(e.center,this.origin);var n=rl.dot(this.direction),i=rl.dot(rl)-n*n,l=e.radius*e.radius;if(i>l)return null;var a=Math.sqrt(l-i),r=n-a,o=n+a;return r<0&&o<0?null:r<0?this.at(o,t):this.at(r,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,i,l,a,r,o,g=1/this.direction.x,s=1/this.direction.y,I=1/this.direction.z,u=this.origin;return g>=0?(n=(e.min.x-u.x)*g,i=(e.max.x-u.x)*g):(n=(e.max.x-u.x)*g,i=(e.min.x-u.x)*g),s>=0?(l=(e.min.y-u.y)*s,a=(e.max.y-u.y)*s):(l=(e.max.y-u.y)*s,a=(e.min.y-u.y)*s),n>a||l>i?null:((l>n||n!==n)&&(n=l),(a<i||i!==i)&&(i=a),I>=0?(r=(e.min.z-u.z)*I,o=(e.max.z-u.z)*I):(r=(e.max.z-u.z)*I,o=(e.min.z-u.z)*I),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,rl)}},{key:"intersectTriangle",value:function(e,t,n,i,l){Il.subVectors(t,e),ul.subVectors(n,e),cl.crossVectors(Il,ul);var a,r=this.direction.dot(cl);if(r>0){if(i)return null;a=1}else{if(!(r<0))return null;a=-1,r=-r}sl.subVectors(this.origin,e);var o=a*this.direction.dot(ul.crossVectors(sl,ul));if(o<0)return null;var g=a*this.direction.dot(Il.cross(sl));if(g<0)return null;if(o+g>r)return null;var s=-a*sl.dot(cl);return s<0?null:this.at(s/r,l)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),dl=function(){function e(){f(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return y(e,[{key:"set",value:function(e,t,n,i,l,a,r,o,g,s,I,u,c,C,d,h){var A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=l,A[5]=a,A[9]=r,A[13]=o,A[2]=g,A[6]=s,A[10]=I,A[14]=u,A[3]=c,A[7]=C,A[11]=d,A[15]=h,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/hl.setFromMatrixColumn(e,0).length(),l=1/hl.setFromMatrixColumn(e,1).length(),a=1/hl.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*l,t[5]=n[5]*l,t[6]=n[6]*l,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,l=e.z,a=Math.cos(n),r=Math.sin(n),o=Math.cos(i),g=Math.sin(i),s=Math.cos(l),I=Math.sin(l);if("XYZ"===e.order){var u=a*s,c=a*I,C=r*s,d=r*I;t[0]=o*s,t[4]=-o*I,t[8]=g,t[1]=c+C*g,t[5]=u-d*g,t[9]=-r*o,t[2]=d-u*g,t[6]=C+c*g,t[10]=a*o}else if("YXZ"===e.order){var h=o*s,A=o*I,m=g*s,p=g*I;t[0]=h+p*r,t[4]=m*r-A,t[8]=a*g,t[1]=a*I,t[5]=a*s,t[9]=-r,t[2]=A*r-m,t[6]=p+h*r,t[10]=a*o}else if("ZXY"===e.order){var v=o*s,f=o*I,b=g*s,y=g*I;t[0]=v-y*r,t[4]=-a*I,t[8]=b+f*r,t[1]=f+b*r,t[5]=a*s,t[9]=y-v*r,t[2]=-a*g,t[6]=r,t[10]=a*o}else if("ZYX"===e.order){var G=a*s,B=a*I,Z=r*s,q=r*I;t[0]=o*s,t[4]=Z*g-B,t[8]=G*g+q,t[1]=o*I,t[5]=q*g+G,t[9]=B*g-Z,t[2]=-g,t[6]=r*o,t[10]=a*o}else if("YZX"===e.order){var x=a*o,w=a*g,W=r*o,S=r*g;t[0]=o*s,t[4]=S-x*I,t[8]=W*I+w,t[1]=I,t[5]=a*s,t[9]=-r*s,t[2]=-g*s,t[6]=w*I+W,t[10]=x-S*I}else if("XZY"===e.order){var R=a*o,V=a*g,k=r*o,X=r*g;t[0]=o*s,t[4]=-I,t[8]=g*s,t[1]=R*I+X,t[5]=a*s,t[9]=V*I-k,t[2]=k*I-V,t[6]=r*s,t[10]=X*I+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ml,e,pl)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return bl.subVectors(e,t),0===bl.lengthSq()&&(bl.z=1),bl.normalize(),vl.crossVectors(n,bl),0===vl.lengthSq()&&(1===Math.abs(n.z)?bl.x+=1e-4:bl.z+=1e-4,bl.normalize(),vl.crossVectors(n,bl)),vl.normalize(),fl.crossVectors(bl,vl),i[0]=vl.x,i[4]=fl.x,i[8]=bl.x,i[1]=vl.y,i[5]=fl.y,i[9]=bl.y,i[2]=vl.z,i[6]=fl.z,i[10]=bl.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,l=this.elements,a=n[0],r=n[4],o=n[8],g=n[12],s=n[1],I=n[5],u=n[9],c=n[13],C=n[2],d=n[6],h=n[10],A=n[14],m=n[3],p=n[7],v=n[11],f=n[15],b=i[0],y=i[4],G=i[8],B=i[12],Z=i[1],q=i[5],x=i[9],w=i[13],W=i[2],S=i[6],R=i[10],V=i[14],k=i[3],X=i[7],Y=i[11],H=i[15];return l[0]=a*b+r*Z+o*W+g*k,l[4]=a*y+r*q+o*S+g*X,l[8]=a*G+r*x+o*R+g*Y,l[12]=a*B+r*w+o*V+g*H,l[1]=s*b+I*Z+u*W+c*k,l[5]=s*y+I*q+u*S+c*X,l[9]=s*G+I*x+u*R+c*Y,l[13]=s*B+I*w+u*V+c*H,l[2]=C*b+d*Z+h*W+A*k,l[6]=C*y+d*q+h*S+A*X,l[10]=C*G+d*x+h*R+A*Y,l[14]=C*B+d*w+h*V+A*H,l[3]=m*b+p*Z+v*W+f*k,l[7]=m*y+p*q+v*S+f*X,l[11]=m*G+p*x+v*R+f*Y,l[15]=m*B+p*w+v*V+f*H,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],l=e[12],a=e[1],r=e[5],o=e[9],g=e[13],s=e[2],I=e[6],u=e[10],c=e[14];return e[3]*(+l*o*I-i*g*I-l*r*u+n*g*u+i*r*c-n*o*c)+e[7]*(+t*o*c-t*g*u+l*a*u-i*a*c+i*g*s-l*o*s)+e[11]*(+t*g*I-t*r*c-l*a*I+n*a*c+l*r*s-n*g*s)+e[15]*(-i*r*s-t*o*I+t*r*u+i*a*I-n*a*u+n*o*s)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],l=e[3],a=e[4],r=e[5],o=e[6],g=e[7],s=e[8],I=e[9],u=e[10],c=e[11],C=e[12],d=e[13],h=e[14],A=e[15],m=I*h*g-d*u*g+d*o*c-r*h*c-I*o*A+r*u*A,p=C*u*g-s*h*g-C*o*c+a*h*c+s*o*A-a*u*A,v=s*d*g-C*I*g+C*r*c-a*d*c-s*r*A+a*I*A,f=C*I*o-s*d*o-C*r*u+a*d*u+s*r*h-a*I*h,b=t*m+n*p+i*v+l*f;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var y=1/b;return e[0]=m*y,e[1]=(d*u*l-I*h*l-d*i*c+n*h*c+I*i*A-n*u*A)*y,e[2]=(r*h*l-d*o*l+d*i*g-n*h*g-r*i*A+n*o*A)*y,e[3]=(I*o*l-r*u*l-I*i*g+n*u*g+r*i*c-n*o*c)*y,e[4]=p*y,e[5]=(s*h*l-C*u*l+C*i*c-t*h*c-s*i*A+t*u*A)*y,e[6]=(C*o*l-a*h*l-C*i*g+t*h*g+a*i*A-t*o*A)*y,e[7]=(a*u*l-s*o*l+s*i*g-t*u*g-a*i*c+t*o*c)*y,e[8]=v*y,e[9]=(C*I*l-s*d*l-C*n*c+t*d*c+s*n*A-t*I*A)*y,e[10]=(a*d*l-C*r*l+C*n*g-t*d*g-a*n*A+t*r*A)*y,e[11]=(s*r*l-a*I*l-s*n*g+t*I*g+a*n*c-t*r*c)*y,e[12]=f*y,e[13]=(s*d*i-C*I*i+C*n*u-t*d*u-s*n*h+t*I*h)*y,e[14]=(C*r*i-a*d*i-C*n*o+t*d*o+a*n*h-t*r*h)*y,e[15]=(a*I*i-s*r*i+s*n*o-t*I*o-a*n*u+t*r*u)*y,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,l=e.z;return t[0]*=n,t[4]*=i,t[8]*=l,t[1]*=n,t[5]*=i,t[9]*=l,t[2]*=n,t[6]*=i,t[10]*=l,t[3]*=n,t[7]*=i,t[11]*=l,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),l=1-n,a=e.x,r=e.y,o=e.z,g=l*a,s=l*r;return this.set(g*a+n,g*r-i*o,g*o+i*r,0,g*r+i*o,s*r+n,s*o-i*a,0,g*o-i*r,s*o+i*a,l*o*o+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,l,a){return this.set(1,n,l,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,l=t._x,a=t._y,r=t._z,o=t._w,g=l+l,s=a+a,I=r+r,u=l*g,c=l*s,C=l*I,d=a*s,h=a*I,A=r*I,m=o*g,p=o*s,v=o*I,f=n.x,b=n.y,y=n.z;return i[0]=(1-(d+A))*f,i[1]=(c+v)*f,i[2]=(C-p)*f,i[3]=0,i[4]=(c-v)*b,i[5]=(1-(u+A))*b,i[6]=(h+m)*b,i[7]=0,i[8]=(C+p)*y,i[9]=(h-m)*y,i[10]=(1-(u+d))*y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,l=hl.set(i[0],i[1],i[2]).length(),a=hl.set(i[4],i[5],i[6]).length(),r=hl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(l=-l),e.x=i[12],e.y=i[13],e.z=i[14],Al.copy(this);var o=1/l,g=1/a,s=1/r;return Al.elements[0]*=o,Al.elements[1]*=o,Al.elements[2]*=o,Al.elements[4]*=g,Al.elements[5]*=g,Al.elements[6]*=g,Al.elements[8]*=s,Al.elements[9]*=s,Al.elements[10]*=s,t.setFromRotationMatrix(Al),n.x=l,n.y=a,n.z=r,this}},{key:"makePerspective",value:function(e,t,n,i,l,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var r=this.elements,o=2*l/(t-e),g=2*l/(n-i),s=(t+e)/(t-e),I=(n+i)/(n-i),u=-(a+l)/(a-l),c=-2*a*l/(a-l);return r[0]=o,r[4]=0,r[8]=s,r[12]=0,r[1]=0,r[5]=g,r[9]=I,r[13]=0,r[2]=0,r[6]=0,r[10]=u,r[14]=c,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,l,a){var r=this.elements,o=1/(t-e),g=1/(n-i),s=1/(a-l),I=(t+e)*o,u=(n+i)*g,c=(a+l)*s;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-I,r[1]=0,r[5]=2*g,r[9]=0,r[13]=-u,r[2]=0,r[6]=0,r[10]=-2*s,r[14]=-c,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),hl=new Ki,Al=new dl,ml=new Ki(0,0,0),pl=new Ki(1,1,1),vl=new Ki,fl=new Ki,bl=new Ki,yl=new dl,Gl=new Hi,Bl=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;f(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=l}return y(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,l=i[0],a=i[4],r=i[8],o=i[1],g=i[5],s=i[9],I=i[2],u=i[6],c=i[10];switch(t){case"XYZ":this._y=Math.asin($n(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-s,c),this._z=Math.atan2(-a,l)):(this._x=Math.atan2(u,g),this._z=0);break;case"YXZ":this._x=Math.asin(-$n(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(r,c),this._z=Math.atan2(o,g)):(this._y=Math.atan2(-I,l),this._z=0);break;case"ZXY":this._x=Math.asin($n(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-I,c),this._z=Math.atan2(-a,g)):(this._y=0,this._z=Math.atan2(o,l));break;case"ZYX":this._y=Math.asin(-$n(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(u,c),this._z=Math.atan2(o,l)):(this._x=0,this._z=Math.atan2(-a,g));break;case"YZX":this._z=Math.asin($n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-s,g),this._y=Math.atan2(-I,l)):(this._x=0,this._y=Math.atan2(r,c));break;case"XZY":this._z=Math.asin(-$n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,g),this._y=Math.atan2(r,l)):(this._x=Math.atan2(-s,c),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return yl.makeRotationFromQuaternion(e),this.setFromRotationMatrix(yl,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Gl.setFromEuler(this),this.setFromQuaternion(Gl,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();Bl.DefaultOrder="XYZ",Bl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Zl=function(){function e(){f(this,e),this.mask=1}return y(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),ql=0,xl=new Ki,wl=new Hi,Wl=new dl,Sl=new Ki,Rl=new Ki,Vl=new Ki,kl=new Hi,Xl=new Ki(1,0,0),Yl=new Ki(0,1,0),Hl=new Ki(0,0,1),Kl={type:"added"},Fl={type:"removed"},Nl=function(e){G(n,e);var t=w(n);function n(){var e;f(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(q(e),"id",{value:ql++}),e.uuid=jn(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new Ki,l=new Bl,a=new Hi,r=new Ki(1,1,1);return l._onChange((function(){a.setFromEuler(l,!1)})),a._onChange((function(){l.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(q(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dl},normalMatrix:{value:new oi}}),e.matrix=new dl,e.matrixWorld=new dl,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new Zl,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return y(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return wl.setFromAxisAngle(e,t),this.quaternion.multiply(wl),this}},{key:"rotateOnWorldAxis",value:function(e,t){return wl.setFromAxisAngle(e,t),this.quaternion.premultiply(wl),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Xl,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Yl,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Hl,e)}},{key:"translateOnAxis",value:function(e,t){return xl.copy(e).applyQuaternion(this.quaternion),this.position.add(xl.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Xl,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Yl,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Hl,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(Wl.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Sl.copy(e):Sl.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Rl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wl.lookAt(Rl,Sl,this.up):Wl.lookAt(Sl,Rl,this.up),this.quaternion.setFromRotationMatrix(Wl),i&&(Wl.extractRotation(i.matrixWorld),wl.setFromRotationMatrix(Wl),this.quaternion.premultiply(wl.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Kl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Fl)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Fl)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Wl.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Wl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wl),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var l=this.children[n].getObjectByProperty(e,t);if(void 0!==l)return l}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rl,e,Vl),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rl,kl,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,l=0,a=i.length;l<a;l++)i[l].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function l(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=l(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var r=a.shapes;if(Array.isArray(r))for(var o=0,g=r.length;o<g;o++){var s=r[o];l(e.shapes,s)}else l(e.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(l(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var I=[],u=0,c=this.material.length;u<c;u++)I.push(l(e.materials,this.material[u]));i.material=I}else i.material=l(e.materials,this.material);if(this.children.length>0){i.children=[];for(var C=0;C<this.children.length;C++)i.children.push(this.children[C].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var d=0;d<this.animations.length;d++){var h=this.animations[d];i.animations.push(l(e.animations,h))}}if(t){var A=B(e.geometries),m=B(e.materials),p=B(e.textures),v=B(e.images),f=B(e.shapes),b=B(e.skeletons),y=B(e.animations),G=B(e.nodes);A.length>0&&(n.geometries=A),m.length>0&&(n.materials=m),p.length>0&&(n.textures=p),v.length>0&&(n.images=v),f.length>0&&(n.shapes=f),b.length>0&&(n.skeletons=b),y.length>0&&(n.animations=y),G.length>0&&(n.nodes=G)}return n.object=i,n;function B(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(Un);Nl.DefaultUp=new Ki(0,1,0),Nl.DefaultMatrixAutoUpdate=!0;var zl=new Ki,Ml=new Ki,Ll=new Ki,_l=new Ki,Tl=new Ki,El=new Ki,Jl=new Ki,Ul=new Ki,Dl=new Ki,Ql=new Ki,Pl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ki;f(this,e),this.a=t,this.b=n,this.c=i}return y(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return zl.subVectors(this.c,this.b),Ml.subVectors(this.a,this.b),.5*zl.cross(Ml).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,l,a){return e.getUV(t,this.a,this.b,this.c,n,i,l,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,l=this.a,a=this.b,r=this.c;Tl.subVectors(a,l),El.subVectors(r,l),Ul.subVectors(e,l);var o=Tl.dot(Ul),g=El.dot(Ul);if(o<=0&&g<=0)return t.copy(l);Dl.subVectors(e,a);var s=Tl.dot(Dl),I=El.dot(Dl);if(s>=0&&I<=s)return t.copy(a);var u=o*I-s*g;if(u<=0&&o>=0&&s<=0)return n=o/(o-s),t.copy(l).addScaledVector(Tl,n);Ql.subVectors(e,r);var c=Tl.dot(Ql),C=El.dot(Ql);if(C>=0&&c<=C)return t.copy(r);var d=c*g-o*C;if(d<=0&&g>=0&&C<=0)return i=g/(g-C),t.copy(l).addScaledVector(El,i);var h=s*C-c*I;if(h<=0&&I-s>=0&&c-C>=0)return Jl.subVectors(r,a),i=(I-s)/(I-s+(c-C)),t.copy(a).addScaledVector(Jl,i);var A=1/(h+d+u);return n=d*A,i=u*A,t.copy(l).addScaledVector(Tl,n).addScaledVector(El,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),zl.subVectors(e,t),i.cross(zl);var l=i.lengthSq();return l>0?i.multiplyScalar(1/Math.sqrt(l)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,l){zl.subVectors(i,t),Ml.subVectors(n,t),Ll.subVectors(e,t);var a=zl.dot(zl),r=zl.dot(Ml),o=zl.dot(Ll),g=Ml.dot(Ml),s=Ml.dot(Ll),I=a*g-r*r;if(0===I)return l.set(-2,-1,-1);var u=1/I,c=(g*o-r*s)*u,C=(a*s-r*o)*u;return l.set(1-c-C,C,c)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,_l),_l.x>=0&&_l.y>=0&&_l.x+_l.y<=1}},{key:"getUV",value:function(e,t,n,i,l,a,r,o){return this.getBarycoord(e,t,n,i,_l),o.set(0,0),o.addScaledVector(l,_l.x),o.addScaledVector(a,_l.y),o.addScaledVector(r,_l.z),o}},{key:"isFrontFacing",value:function(e,t,n,i){return zl.subVectors(n,t),Ml.subVectors(e,t),zl.cross(Ml).dot(i)<0}}]),e}(),Ol=0,jl=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(q(e),"id",{value:Ol++}),e.uuid=jn(),e.name="",e.type="Material",e.blending=O,e.side=E,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=ue,e.blendDst=ce,e.blendEquation=ne,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=be,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Xn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=fn,e.stencilZFail=fn,e.stencilZPass=fn,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return y(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===D;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==O&&(n.blending=this.blending),this.side!==E&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var l=i(e.textures),a=i(e.images);l.length>0&&(n.textures=l),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var l=0;l!==i;++l)n[l]=t[l].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Un),$l=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new Gi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=qe,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(jl),ea=new Ki,ta=new ri,na=function(){function e(t,n,i){if(f(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=Yn,this.updateRange={offset:0,count:-1},this.version=0}return y(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,l=this.itemSize;i<l;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,i=0,l=e.length;i<l;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Gi),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,i=0,l=e.length;i<l;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new ri),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,i=0,l=e.length;i<l;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Ki),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,i=0,l=e.length;i<l;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Wi),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix3(e),this.setXY(t,ta.x,ta.y);else if(3===this.itemSize)for(var i=0,l=this.count;i<l;i++)ea.fromBufferAttribute(this,i),ea.applyMatrix3(e),this.setXYZ(i,ea.x,ea.y,ea.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)ea.fromBufferAttribute(this,t),ea.applyMatrix4(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)ea.fromBufferAttribute(this,t),ea.applyNormalMatrix(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)ea.fromBufferAttribute(this,t),ea.transformDirection(e),this.setXYZ(t,ea.x,ea.y,ea.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,l){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=l,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Yn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}(),ia=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Int8Array(e),i,l)}return y(n)}(na),la=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Uint8Array(e),i,l)}return y(n)}(na),aa=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Uint8ClampedArray(e),i,l)}return y(n)}(na),ra=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Int16Array(e),i,l)}return y(n)}(na),oa=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Uint16Array(e),i,l)}return y(n)}(na),ga=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Int32Array(e),i,l)}return y(n)}(na),sa=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Uint32Array(e),i,l)}return y(n)}(na),Ia=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,new Uint16Array(e),i,l)).isFloat16BufferAttribute=!0,a}return y(n)}(na),ua=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Float32Array(e),i,l)}return y(n)}(na),ca=function(e){G(n,e);var t=w(n);function n(e,i,l){return f(this,n),t.call(this,new Float64Array(e),i,l)}return y(n)}(na),Ca=0,da=new dl,ha=new Nl,Aa=new Ki,ma=new zi,pa=new zi,va=new Ki,fa=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(q(e),"id",{value:Ca++}),e.uuid=jn(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return y(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(gi(e)?sa:oa)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new oi).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var l=this.attributes.tangent;return void 0!==l&&(l.transformDirection(e),l.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return da.makeRotationFromQuaternion(e),this.applyMatrix4(da),this}},{key:"rotateX",value:function(e){return da.makeRotationX(e),this.applyMatrix4(da),this}},{key:"rotateY",value:function(e){return da.makeRotationY(e),this.applyMatrix4(da),this}},{key:"rotateZ",value:function(e){return da.makeRotationZ(e),this.applyMatrix4(da),this}},{key:"translate",value:function(e,t,n){return da.makeTranslation(e,t,n),this.applyMatrix4(da),this}},{key:"scale",value:function(e,t,n){return da.makeScale(e,t,n),this.applyMatrix4(da),this}},{key:"lookAt",value:function(e){return ha.lookAt(e),ha.updateMatrix(),this.applyMatrix4(ha.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Aa).negate(),this.translate(Aa.x,Aa.y,Aa.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var l=e[n];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new ua(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new zi);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ki(-1/0,-1/0,-1/0),new Ki(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var l=t[n];ma.setFromBufferAttribute(l),this.morphTargetsRelative?(va.addVectors(this.boundingBox.min,ma.min),this.boundingBox.expandByPoint(va),va.addVectors(this.boundingBox.max,ma.max),this.boundingBox.expandByPoint(va)):(this.boundingBox.expandByPoint(ma.min),this.boundingBox.expandByPoint(ma.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new al);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ki,1/0);if(e){var n=this.boundingSphere.center;if(ma.setFromBufferAttribute(e),t)for(var i=0,l=t.length;i<l;i++){var a=t[i];pa.setFromBufferAttribute(a),this.morphTargetsRelative?(va.addVectors(ma.min,pa.min),ma.expandByPoint(va),va.addVectors(ma.max,pa.max),ma.expandByPoint(va)):(ma.expandByPoint(pa.min),ma.expandByPoint(pa.max))}ma.getCenter(n);for(var r=0,o=0,g=e.count;o<g;o++)va.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(va));if(t)for(var s=0,I=t.length;s<I;s++)for(var u=t[s],c=this.morphTargetsRelative,C=0,d=u.count;C<d;C++)va.fromBufferAttribute(u,C),c&&(Aa.fromBufferAttribute(e,C),va.add(Aa)),r=Math.max(r,n.distanceToSquared(va));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,l=t.normal.array,a=t.uv.array,r=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new na(new Float32Array(4*r),4));for(var o=this.getAttribute("tangent").array,g=[],s=[],I=0;I<r;I++)g[I]=new Ki,s[I]=new Ki;var u=new Ki,c=new Ki,C=new Ki,d=new ri,h=new ri,A=new ri,m=new Ki,p=new Ki,v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(var f=0,b=v.length;f<b;++f)for(var y=v[f],G=y.start,B=G,Z=G+y.count;B<Z;B+=3)H(n[B+0],n[B+1],n[B+2]);for(var q=new Ki,x=new Ki,w=new Ki,W=new Ki,S=0,R=v.length;S<R;++S)for(var V=v[S],k=V.start,X=k,Y=k+V.count;X<Y;X+=3)K(n[X+0]),K(n[X+1]),K(n[X+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function H(e,t,n){u.fromArray(i,3*e),c.fromArray(i,3*t),C.fromArray(i,3*n),d.fromArray(a,2*e),h.fromArray(a,2*t),A.fromArray(a,2*n),c.sub(u),C.sub(u),h.sub(d),A.sub(d);var l=1/(h.x*A.y-A.x*h.y);isFinite(l)&&(m.copy(c).multiplyScalar(A.y).addScaledVector(C,-h.y).multiplyScalar(l),p.copy(C).multiplyScalar(h.x).addScaledVector(c,-A.x).multiplyScalar(l),g[e].add(m),g[t].add(m),g[n].add(m),s[e].add(p),s[t].add(p),s[n].add(p))}function K(e){w.fromArray(l,3*e),W.copy(w);var t=g[e];q.copy(t),q.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(W,t);var n=x.dot(s[e])<0?-1:1;o[4*e]=q.x,o[4*e+1]=q.y,o[4*e+2]=q.z,o[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new na(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,l=n.count;i<l;i++)n.setXYZ(i,0,0,0);var a=new Ki,r=new Ki,o=new Ki,g=new Ki,s=new Ki,I=new Ki,u=new Ki,c=new Ki;if(e)for(var C=0,d=e.count;C<d;C+=3){var h=e.getX(C+0),A=e.getX(C+1),m=e.getX(C+2);a.fromBufferAttribute(t,h),r.fromBufferAttribute(t,A),o.fromBufferAttribute(t,m),u.subVectors(o,r),c.subVectors(a,r),u.cross(c),g.fromBufferAttribute(n,h),s.fromBufferAttribute(n,A),I.fromBufferAttribute(n,m),g.add(u),s.add(u),I.add(u),n.setXYZ(h,g.x,g.y,g.z),n.setXYZ(A,s.x,s.y,s.z),n.setXYZ(m,I.x,I.y,I.z)}else for(var p=0,v=t.count;p<v;p+=3)a.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,r),c.subVectors(a,r),u.cross(c),n.setXYZ(p+0,u.x,u.y,u.z),n.setXYZ(p+1,u.x,u.y,u.z),n.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var l=n[i].array,a=e.attributes[i],r=a.array,o=a.itemSize*t,g=Math.min(r.length,l.length-o),s=0,I=o;s<g;s++,I++)l[I]=r[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)va.fromBufferAttribute(e,t),va.normalize(),e.setXYZ(t,va.x,va.y,va.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,l=e.normalized,a=new n.constructor(t.length*i),r=0,o=0,g=0,s=t.length;g<s;g++){r=e.isInterleavedBufferAttribute?t[g]*e.data.stride+e.offset:t[g]*i;for(var I=0;I<i;I++)a[o++]=n[r++]}return new na(a,i,l)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,l=this.attributes;for(var a in l){var r=e(l[a],i);t.setAttribute(a,r)}var o=this.morphAttributes;for(var g in o){for(var s=[],I=o[g],u=0,c=I.length;u<c;u++){var C=e(I[u],i);s.push(C)}t.morphAttributes[g]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,h=0,A=d.length;h<A;h++){var m=d[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var l=this.attributes;for(var a in l){var r=l[a];e.data.attributes[a]=r.toJSON(e.data)}var o={},g=!1;for(var s in this.morphAttributes){for(var I=this.morphAttributes[s],u=[],c=0,C=I.length;c<C;c++){var d=I[c];u.push(d.toJSON(e.data))}u.length>0&&(o[s]=u,g=!0)}g&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));var A=this.boundingSphere;return null!==A&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var l in i){var a=i[l];this.setAttribute(l,a.clone(t))}var r=e.morphAttributes;for(var o in r){for(var g=[],s=r[o],I=0,u=s.length;I<u;I++)g.push(s[I].clone(t));this.morphAttributes[o]=g}this.morphTargetsRelative=e.morphTargetsRelative;for(var c=e.groups,C=0,d=c.length;C<d;C++){var h=c[C];this.addGroup(h.start,h.count,h.materialIndex)}var A=e.boundingBox;null!==A&&(this.boundingBox=A.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Un),ba=new dl,ya=new Cl,Ga=new al,Ba=new Ki,Za=new Ki,qa=new Ki,xa=new Ki,wa=new Ki,Wa=new Ki,Sa=new Ki,Ra=new Ki,Va=new Ki,ka=new ri,Xa=new ri,Ya=new ri,Ha=new Ki,Ka=new Ki,Fa=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fa,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $l;return f(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=i,e.material=l,e.updateMorphTargets(),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,l=n.length;i<l;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,l=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ga.copy(n.boundingSphere),Ga.applyMatrix4(l),!1!==e.ray.intersectsSphere(Ga)&&(ba.copy(l).invert(),ya.copy(e.ray).applyMatrix4(ba),null===n.boundingBox||!1!==ya.intersectsBox(n.boundingBox)))){var a,r=n.index,o=n.attributes.position,g=n.morphAttributes.position,s=n.morphTargetsRelative,I=n.attributes.uv,u=n.attributes.uv2,c=n.groups,C=n.drawRange;if(null!==r)if(Array.isArray(i))for(var d=0,h=c.length;d<h;d++)for(var A=c[d],m=i[A.materialIndex],p=Math.max(A.start,C.start),v=Math.min(r.count,Math.min(A.start+A.count,C.start+C.count));p<v;p+=3){var f=r.getX(p),b=r.getX(p+1),y=r.getX(p+2);(a=Na(this,m,e,ya,o,g,s,I,u,f,b,y))&&(a.faceIndex=Math.floor(p/3),a.face.materialIndex=A.materialIndex,t.push(a))}else for(var G=Math.max(0,C.start),B=Math.min(r.count,C.start+C.count);G<B;G+=3){var Z=r.getX(G),q=r.getX(G+1),x=r.getX(G+2);(a=Na(this,i,e,ya,o,g,s,I,u,Z,q,x))&&(a.faceIndex=Math.floor(G/3),t.push(a))}else if(void 0!==o)if(Array.isArray(i))for(var w=0,W=c.length;w<W;w++)for(var S=c[w],R=i[S.materialIndex],V=Math.max(S.start,C.start),k=Math.min(o.count,Math.min(S.start+S.count,C.start+C.count));V<k;V+=3){(a=Na(this,R,e,ya,o,g,s,I,u,V,V+1,V+2))&&(a.faceIndex=Math.floor(V/3),a.face.materialIndex=S.materialIndex,t.push(a))}else for(var X=Math.max(0,C.start),Y=Math.min(o.count,C.start+C.count);X<Y;X+=3){(a=Na(this,i,e,ya,o,g,s,I,u,X,X+1,X+2))&&(a.faceIndex=Math.floor(X/3),t.push(a))}}}}]),n}(Nl);function Na(e,t,n,i,l,a,r,o,g,s,I,u){Ba.fromBufferAttribute(l,s),Za.fromBufferAttribute(l,I),qa.fromBufferAttribute(l,u);var c=e.morphTargetInfluences;if(a&&c){Sa.set(0,0,0),Ra.set(0,0,0),Va.set(0,0,0);for(var C=0,d=a.length;C<d;C++){var h=c[C],A=a[C];0!==h&&(xa.fromBufferAttribute(A,s),wa.fromBufferAttribute(A,I),Wa.fromBufferAttribute(A,u),r?(Sa.addScaledVector(xa,h),Ra.addScaledVector(wa,h),Va.addScaledVector(Wa,h)):(Sa.addScaledVector(xa.sub(Ba),h),Ra.addScaledVector(wa.sub(Za),h),Va.addScaledVector(Wa.sub(qa),h)))}Ba.add(Sa),Za.add(Ra),qa.add(Va)}e.isSkinnedMesh&&(e.boneTransform(s,Ba),e.boneTransform(I,Za),e.boneTransform(u,qa));var m=function(e,t,n,i,l,a,r,o){if(null===(t.side===J?i.intersectTriangle(r,a,l,!0,o):i.intersectTriangle(l,a,r,t.side!==U,o)))return null;Ka.copy(o),Ka.applyMatrix4(e.matrixWorld);var g=n.ray.origin.distanceTo(Ka);return g<n.near||g>n.far?null:{distance:g,point:Ka.clone(),object:e}}(e,t,n,i,Ba,Za,qa,Ha);if(m){o&&(ka.fromBufferAttribute(o,s),Xa.fromBufferAttribute(o,I),Ya.fromBufferAttribute(o,u),m.uv=Pl.getUV(Ha,Ba,Za,qa,ka,Xa,Ya,new ri)),g&&(ka.fromBufferAttribute(g,s),Xa.fromBufferAttribute(g,I),Ya.fromBufferAttribute(g,u),m.uv2=Pl.getUV(Ha,Ba,Za,qa,ka,Xa,Ya,new ri));var p={a:s,b:I,c:u,normal:new Ki,materialIndex:0};Pl.getNormal(Ba,Za,qa,p.normal),m.face=p}return m}var za=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;f(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:l,depth:a,widthSegments:r,heightSegments:o,depthSegments:g};var s=q(e);r=Math.floor(r),o=Math.floor(o),g=Math.floor(g);var I=[],u=[],c=[],C=[],d=0,h=0;function A(e,t,n,i,l,a,r,o,g,A,m){for(var p=a/g,v=r/A,f=a/2,b=r/2,y=o/2,G=g+1,B=A+1,Z=0,q=0,x=new Ki,w=0;w<B;w++)for(var W=w*v-b,S=0;S<G;S++){var R=S*p-f;x[e]=R*i,x[t]=W*l,x[n]=y,u.push(x.x,x.y,x.z),x[e]=0,x[t]=0,x[n]=o>0?1:-1,c.push(x.x,x.y,x.z),C.push(S/g),C.push(1-w/A),Z+=1}for(var V=0;V<A;V++)for(var k=0;k<g;k++){var X=d+k+G*V,Y=d+k+G*(V+1),H=d+(k+1)+G*(V+1),K=d+(k+1)+G*V;I.push(X,Y,K),I.push(Y,H,K),q+=6}s.addGroup(h,q,m),h+=q,d+=Z}return A("z","y","x",-1,-1,a,l,i,g,o,0),A("z","y","x",1,-1,a,l,-i,g,o,1),A("x","z","y",1,1,i,a,l,r,g,2),A("x","z","y",1,-1,i,a,-l,r,g,3),A("x","y","z",1,-1,i,l,a,r,o,4),A("x","y","z",-1,-1,i,l,-a,r,o,5),e.setIndex(I),e.setAttribute("position",new ua(u,3)),e.setAttribute("normal",new ua(c,3)),e.setAttribute("uv",new ua(C,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(fa);function Ma(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var l=e[n][i];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?t[n][i]=l.clone():Array.isArray(l)?t[n][i]=l.slice():t[n][i]=l}return t}function La(e){for(var t={},n=0;n<e.length;n++){var i=Ma(e[n]);for(var l in i)t[l]=i[l]}return t}var _a={clone:Ma,merge:La},Ta=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),i.setValues(e)),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ma(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var l=this.uniforms[i].value;l&&l.isTexture?t.uniforms[i]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[i]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[i]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[i]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[i]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[i]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[i]={type:"m4",value:l.toArray()}:t.uniforms[i]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var r in this.extensions)!0===this.extensions[r]&&(a[r]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(jl),Ea=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new dl,e.projectionMatrix=new dl,e.projectionMatrixInverse=new dl,e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){V(B(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){V(B(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Nl),Ja=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return f(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=r,e.focus=10,e.aspect=l,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*On*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Pn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*On*Math.atan(Math.tan(.5*Pn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,l,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=l,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Pn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,l=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var r=a.fullWidth,o=a.fullHeight;l+=a.offsetX*i/r,t-=a.offsetY*n/o,i*=a.width/r,n*=a.height/o}var g=this.filmOffset;0!==g&&(l+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Ea),Ua=90,Da=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;if(f(this,n),(a=t.call(this)).type="CubeCamera",!0!==l.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),x(a);a.renderTarget=l;var r=new Ja(Ua,1,e,i);r.layers=a.layers,r.up.set(0,-1,0),r.lookAt(new Ki(1,0,0)),a.add(r);var o=new Ja(Ua,1,e,i);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Ki(-1,0,0)),a.add(o);var g=new Ja(Ua,1,e,i);g.layers=a.layers,g.up.set(0,0,1),g.lookAt(new Ki(0,1,0)),a.add(g);var s=new Ja(Ua,1,e,i);s.layers=a.layers,s.up.set(0,0,-1),s.lookAt(new Ki(0,-1,0)),a.add(s);var I=new Ja(Ua,1,e,i);I.layers=a.layers,I.up.set(0,-1,0),I.lookAt(new Ki(0,0,1)),a.add(I);var u=new Ja(Ua,1,e,i);return u.layers=a.layers,u.up.set(0,-1,0),u.lookAt(new Ki(0,0,-1)),a.add(u),a}return y(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=c(this.children,6),l=i[0],a=i[1],r=i[2],o=i[3],g=i[4],s=i[5],I=e.getRenderTarget(),u=e.toneMapping,C=e.xr.enabled;e.toneMapping=We,e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,l),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,r),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,g),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,s),e.setRenderTarget(I),e.toneMapping=u,e.xr.enabled=C,n.texture.needsPMREMUpdate=!0}}]),n}(Nl),Qa=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o,g,s,I,u){var c;return f(this,n),e=void 0!==e?e:[],i=void 0!==i?i:He,(c=t.call(this,e,i,l,a,r,o,g,s,I,u)).isCubeTexture=!0,c.flipY=!1,c}return y(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(wi),Pa=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,n),(i=t.call(this,e,e,l)).isWebGLCubeRenderTarget=!0;var a={width:e,height:e,depth:1},r=[a,a,a,a,a,a];return i.texture=new Qa(r,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,i.texture.minFilter=void 0!==l.minFilter?l.minFilter:Qe,i}return y(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",l="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new za(5,5,5),r=new Ta({name:"CubemapFromEquirect",uniforms:Ma(n),vertexShader:i,fragmentShader:l,side:J,blending:P});r.uniforms.tEquirect.value=t;var o=new Fa(a,r),g=t.minFilter;return t.minFilter===je&&(t.minFilter=Qe),new Da(1,10,this).update(e,o),t.minFilter=g,o.geometry.dispose(),o.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var l=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(l)}}]),n}(Si),Oa=new Ki,ja=new Ki,$a=new oi,er=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return y(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=Oa.subVectors(n,t).cross(ja.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Oa),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var l=-(e.start.dot(this.normal)+this.constant)/i;return l<0||l>1?null:t.copy(n).multiplyScalar(l).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||$a.getNormalMatrix(e),i=this.coplanarPoint(Oa).applyMatrix4(e),l=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(l),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),tr=new al,nr=new Ki,ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new er,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new er,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new er,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new er,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new er,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new er;f(this,e),this.planes=[t,n,i,l,a,r]}return y(e,[{key:"set",value:function(e,t,n,i,l,a){var r=this.planes;return r[0].copy(e),r[1].copy(t),r[2].copy(n),r[3].copy(i),r[4].copy(l),r[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=n[5],s=n[6],I=n[7],u=n[8],c=n[9],C=n[10],d=n[11],h=n[12],A=n[13],m=n[14],p=n[15];return t[0].setComponents(r-i,I-o,d-u,p-h).normalize(),t[1].setComponents(r+i,I+o,d+u,p+h).normalize(),t[2].setComponents(r+l,I+g,d+c,p+A).normalize(),t[3].setComponents(r-l,I-g,d-c,p-A).normalize(),t[4].setComponents(r-a,I-s,d-C,p-m).normalize(),t[5].setComponents(r+a,I+s,d+C,p+m).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),tr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tr)}},{key:"intersectsSprite",value:function(e){return tr.center.set(0,0,0),tr.radius=.7071067811865476,tr.applyMatrix4(e.matrixWorld),this.intersectsSphere(tr)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,l=0;l<6;l++){if(t[l].distanceToPoint(n)<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(nr.x=i.normal.x>0?e.max.x:e.min.x,nr.y=i.normal.y>0?e.max.y:e.min.y,nr.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(nr)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function lr(){var e=null,t=!1,n=null,i=null;function l(t,a){n(t,a),i=e.requestAnimationFrame(l)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(l),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ar(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,l){if(t.isGLBufferAttribute){var a=i.get(t);(!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var r=i.get(t);void 0===r?i.set(t,function(t,i){var l,a=t.array,r=t.usage,o=e.createBuffer();if(e.bindBuffer(i,o),e.bufferData(i,a,r),t.onUploadCallback(),a instanceof Float32Array)l=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=5131}else l=5123;else if(a instanceof Int16Array)l=5122;else if(a instanceof Uint32Array)l=5125;else if(a instanceof Int32Array)l=5124;else if(a instanceof Int8Array)l=5120;else if(a instanceof Uint8Array)l=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);l=5121}return{buffer:o,type:l,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,l)):r.version<t.version&&(!function(t,i,l){var a=i.array,r=i.updateRange;e.bindBuffer(l,t),-1===r.count?e.bufferSubData(l,0,a):(n?e.bufferSubData(l,r.offset*a.BYTES_PER_ELEMENT,a,r.offset,r.count):e.bufferSubData(l,r.offset*a.BYTES_PER_ELEMENT,a.subarray(r.offset,r.offset+r.count)),r.count=-1)}(r.buffer,t,l),r.version=t.version)}}}}var rr=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;f(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:l,widthSegments:a,heightSegments:r};for(var o=i/2,g=l/2,s=Math.floor(a),I=Math.floor(r),u=s+1,c=I+1,C=i/s,d=l/I,h=[],A=[],m=[],p=[],v=0;v<c;v++)for(var b=v*d-g,y=0;y<u;y++){var G=y*C-o;A.push(G,-b,0),m.push(0,0,1),p.push(y/s),p.push(1-v/I)}for(var B=0;B<I;B++)for(var Z=0;Z<s;Z++){var q=Z+u*B,x=Z+u*(B+1),w=Z+1+u*(B+1),W=Z+1+u*B;h.push(q,x,W),h.push(x,w,W)}return e.setIndex(h),e.setAttribute("position",new ua(A,3)),e.setAttribute("normal",new ua(m,3)),e.setAttribute("uv",new ua(p,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(fa),or={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},gr={common:{diffuse:{value:new Gi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new oi},uv2Transform:{value:new oi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ri(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new oi}},sprite:{diffuse:{value:new Gi(16777215)},opacity:{value:1},center:{value:new ri(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new oi}}},sr={basic:{uniforms:La([gr.common,gr.specularmap,gr.envmap,gr.aomap,gr.lightmap,gr.fog]),vertexShader:or.meshbasic_vert,fragmentShader:or.meshbasic_frag},lambert:{uniforms:La([gr.common,gr.specularmap,gr.envmap,gr.aomap,gr.lightmap,gr.emissivemap,gr.fog,gr.lights,{emissive:{value:new Gi(0)}}]),vertexShader:or.meshlambert_vert,fragmentShader:or.meshlambert_frag},phong:{uniforms:La([gr.common,gr.specularmap,gr.envmap,gr.aomap,gr.lightmap,gr.emissivemap,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.fog,gr.lights,{emissive:{value:new Gi(0)},specular:{value:new Gi(1118481)},shininess:{value:30}}]),vertexShader:or.meshphong_vert,fragmentShader:or.meshphong_frag},standard:{uniforms:La([gr.common,gr.envmap,gr.aomap,gr.lightmap,gr.emissivemap,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.roughnessmap,gr.metalnessmap,gr.fog,gr.lights,{emissive:{value:new Gi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:or.meshphysical_vert,fragmentShader:or.meshphysical_frag},toon:{uniforms:La([gr.common,gr.aomap,gr.lightmap,gr.emissivemap,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.gradientmap,gr.fog,gr.lights,{emissive:{value:new Gi(0)}}]),vertexShader:or.meshtoon_vert,fragmentShader:or.meshtoon_frag},matcap:{uniforms:La([gr.common,gr.bumpmap,gr.normalmap,gr.displacementmap,gr.fog,{matcap:{value:null}}]),vertexShader:or.meshmatcap_vert,fragmentShader:or.meshmatcap_frag},points:{uniforms:La([gr.points,gr.fog]),vertexShader:or.points_vert,fragmentShader:or.points_frag},dashed:{uniforms:La([gr.common,gr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:or.linedashed_vert,fragmentShader:or.linedashed_frag},depth:{uniforms:La([gr.common,gr.displacementmap]),vertexShader:or.depth_vert,fragmentShader:or.depth_frag},normal:{uniforms:La([gr.common,gr.bumpmap,gr.normalmap,gr.displacementmap,{opacity:{value:1}}]),vertexShader:or.meshnormal_vert,fragmentShader:or.meshnormal_frag},sprite:{uniforms:La([gr.sprite,gr.fog]),vertexShader:or.sprite_vert,fragmentShader:or.sprite_frag},background:{uniforms:{uvTransform:{value:new oi},t2D:{value:null}},vertexShader:or.background_vert,fragmentShader:or.background_frag},cube:{uniforms:La([gr.envmap,{opacity:{value:1}}]),vertexShader:or.cube_vert,fragmentShader:or.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:or.equirect_vert,fragmentShader:or.equirect_frag},distanceRGBA:{uniforms:La([gr.common,gr.displacementmap,{referencePosition:{value:new Ki},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:or.distanceRGBA_vert,fragmentShader:or.distanceRGBA_frag},shadow:{uniforms:La([gr.lights,gr.fog,{color:{value:new Gi(0)},opacity:{value:1}}]),vertexShader:or.shadow_vert,fragmentShader:or.shadow_frag}};function Ir(e,t,n,i,l,a){var r,o,g=new Gi(0),s=!0===l?0:1,I=null,u=0,c=null;function C(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return g},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g.set(e),C(g,s=t)},getClearAlpha:function(){return s},setClearAlpha:function(e){C(g,s=e)},render:function(n,l){var a=!1,d=!0===l.isScene?l.background:null;d&&d.isTexture&&(d=t.get(d));var h=e.xr,A=h.getSession&&h.getSession();A&&"additive"===A.environmentBlendMode&&(d=null),null===d?C(g,s):d&&d.isColor&&(C(d,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.mapping===ze)?(void 0===o&&((o=new Fa(new za(1,1,1),new Ta({name:"BackgroundCubeMaterial",uniforms:Ma(sr.cube.uniforms),vertexShader:sr.cube.vertexShader,fragmentShader:sr.cube.fragmentShader,side:J,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(o)),o.material.uniforms.envMap.value=d,o.material.uniforms.flipEnvMap.value=d.isCubeTexture&&!1===d.isRenderTargetTexture?-1:1,I===d&&u===d.version&&c===e.toneMapping||(o.material.needsUpdate=!0,I=d,u=d.version,c=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null)):d&&d.isTexture&&(void 0===r&&((r=new Fa(new rr(2,2),new Ta({name:"BackgroundMaterial",uniforms:Ma(sr.background.uniforms),vertexShader:sr.background.vertexShader,fragmentShader:sr.background.fragmentShader,side:E,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(r)),r.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),r.material.uniforms.uvTransform.value.copy(d.matrix),I===d&&u===d.version&&c===e.toneMapping||(r.material.needsUpdate=!0,I=d,u=d.version,c=e.toneMapping),r.layers.enableAll(),n.unshift(r,r.geometry,r.material,0,0,null))}}}function ur(e,t,n,i){var l=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),r=i.isWebGL2||null!==a,o={},g=C(null),s=g,I=!1;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function c(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function C(e){for(var t=[],n=[],i=[],a=0;a<l;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function d(){for(var e=s.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){A(e,0)}function A(n,l){var a=s.newAttributes,r=s.enabledAttributes,o=s.attributeDivisors;(a[n]=1,0===r[n]&&(e.enableVertexAttribArray(n),r[n]=1),o[n]!==l)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,l),o[n]=l)}function m(){for(var t=s.newAttributes,n=s.enabledAttributes,i=0,l=n.length;i<l;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function p(t,n,l,a,r,o){!0!==i.isWebGL2||5124!==l&&5125!==l?e.vertexAttribPointer(t,n,l,a,r,o):e.vertexAttribIPointer(t,n,l,r,o)}function v(){f(),I=!0,s!==g&&u((s=g).object)}function f(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function(l,g,c,v,f){var b=!1;if(r){var y=function(t,n,l){var r=!0===l.wireframe,g=o[t.id];void 0===g&&(g={},o[t.id]=g);var s=g[n.id];void 0===s&&(s={},g[n.id]=s);var I=s[r];void 0===I&&(I=C(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),s[r]=I);return I}(v,c,g);s!==y&&u((s=y).object),b=function(e,t,n,i){var l=s.attributes,a=t.attributes,r=0,o=n.getAttributes();for(var g in o){if(o[g].location>=0){var I=l[g],u=a[g];if(void 0===u&&("instanceMatrix"===g&&e.instanceMatrix&&(u=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(u=e.instanceColor)),void 0===I)return!0;if(I.attribute!==u)return!0;if(u&&I.data!==u.data)return!0;r++}}return s.attributesNum!==r||s.index!==i}(l,v,c,f),b&&function(e,t,n,i){var l={},a=t.attributes,r=0,o=n.getAttributes();for(var g in o){if(o[g].location>=0){var I=a[g];void 0===I&&("instanceMatrix"===g&&e.instanceMatrix&&(I=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(I=e.instanceColor));var u={};u.attribute=I,I&&I.data&&(u.data=I.data),l[g]=u,r++}}s.attributes=l,s.attributesNum=r,s.index=i}(l,v,c,f)}else{var G=!0===g.wireframe;s.geometry===v.id&&s.program===c.id&&s.wireframe===G||(s.geometry=v.id,s.program=c.id,s.wireframe=G,b=!0)}null!==f&&n.update(f,34963),(b||I)&&(I=!1,function(l,a,r,o){if(!1===i.isWebGL2&&(l.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var g=o.attributes,s=r.getAttributes(),I=a.defaultAttributeValues;for(var u in s){var c=s[u];if(c.location>=0){var C=g[u];if(void 0===C&&("instanceMatrix"===u&&l.instanceMatrix&&(C=l.instanceMatrix),"instanceColor"===u&&l.instanceColor&&(C=l.instanceColor)),void 0!==C){var v=C.normalized,f=C.itemSize,b=n.get(C);if(void 0===b)continue;var y=b.buffer,G=b.type,B=b.bytesPerElement;if(C.isInterleavedBufferAttribute){var Z=C.data,q=Z.stride,x=C.offset;if(Z.isInstancedInterleavedBuffer){for(var w=0;w<c.locationSize;w++)A(c.location+w,Z.meshPerAttribute);!0!==l.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(var W=0;W<c.locationSize;W++)h(c.location+W);e.bindBuffer(34962,y);for(var S=0;S<c.locationSize;S++)p(c.location+S,f/c.locationSize,G,v,q*B,(x+f/c.locationSize*S)*B)}else{if(C.isInstancedBufferAttribute){for(var R=0;R<c.locationSize;R++)A(c.location+R,C.meshPerAttribute);!0!==l.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=C.meshPerAttribute*C.count)}else for(var V=0;V<c.locationSize;V++)h(c.location+V);e.bindBuffer(34962,y);for(var k=0;k<c.locationSize;k++)p(c.location+k,f/c.locationSize,G,v,f*B,f/c.locationSize*k*B)}}else if(void 0!==I){var X=I[u];if(void 0!==X)switch(X.length){case 2:e.vertexAttrib2fv(c.location,X);break;case 3:e.vertexAttrib3fv(c.location,X);break;case 4:e.vertexAttrib4fv(c.location,X);break;default:e.vertexAttrib1fv(c.location,X)}}}}m()}(l,g,c,v),null!==f&&e.bindBuffer(34963,n.get(f).buffer))},reset:v,resetDefaultState:f,dispose:function(){for(var e in v(),o){var t=o[e];for(var n in t){var i=t[n];for(var l in i)c(i[l].object),delete i[l];delete t[n]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0!==o[e.id]){var t=o[e.id];for(var n in t){var i=t[n];for(var l in i)c(i[l].object),delete i[l];delete t[n]}delete o[e.id]}},releaseStatesOfProgram:function(e){for(var t in o){var n=o[t];if(void 0!==n[e.id]){var i=n[e.id];for(var l in i)c(i[l].object),delete i[l];delete n[e.id]}}},initAttributes:d,enableAttribute:h,disableUnusedAttributes:m}}function cr(e,t,n,i){var l,a=i.isWebGL2;this.setMode=function(e){l=e},this.render=function(t,i){e.drawArrays(l,t,i),n.update(i,l,1)},this.renderInstances=function(i,r,o){if(0!==o){var g,s;if(a)g=e,s="drawArraysInstanced";else if(s="drawArraysInstancedANGLE",null===(g=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[s](l,i,r,o),n.update(r,l,o)}}}function Cr(e,t,n){var i;function l(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,r=void 0!==n.precision?n.precision:"highp",o=l(r);o!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",o,"instead."),r=o);var g=a||t.has("WEBGL_draw_buffers"),s=!0===n.logarithmicDepthBuffer,I=e.getParameter(34930),u=e.getParameter(35660),c=e.getParameter(3379),C=e.getParameter(34076),d=e.getParameter(34921),h=e.getParameter(36347),A=e.getParameter(36348),m=e.getParameter(36349),p=u>0,v=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:l,precision:r,logarithmicDepthBuffer:s,maxTextures:I,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:C,maxAttributes:d,maxVertexUniforms:h,maxVaryings:A,maxFragmentUniforms:m,vertexTextures:p,floatFragmentTextures:v,floatVertexTextures:p&&v,maxSamples:a?e.getParameter(36183):0}}function dr(e){var t=this,n=null,i=0,l=!1,a=!1,r=new er,o=new oi,g={value:null,needsUpdate:!1};function s(){g.value!==n&&(g.value=n,g.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function I(e,n,i,l){var a=null!==e?e.length:0,s=null;if(0!==a){if(s=g.value,!0!==l||null===s){var I=i+4*a,u=n.matrixWorldInverse;o.getNormalMatrix(u),(null===s||s.length<I)&&(s=new Float32Array(I));for(var c=0,C=i;c!==a;++c,C+=4)r.copy(e[c]).applyMatrix4(u,o),r.normal.toArray(s,C),s[C+3]=r.constant}g.value=s,g.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,s}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var r=0!==e.length||t||0!==i||l;return l=t,n=I(e,a,0),i=e.length,r},this.beginShadows=function(){a=!0,I(null)},this.endShadows=function(){a=!1,s()},this.setState=function(t,r,o){var u=t.clippingPlanes,c=t.clipIntersection,C=t.clipShadows,d=e.get(t);if(!l||null===u||0===u.length||a&&!C)a?I(null):s();else{var h=a?0:i,A=4*h,m=d.clippingState||null;g.value=m,m=I(u,r,A,o);for(var p=0;p!==A;++p)m[p]=n[p];d.clippingState=m,this.numIntersection=c?this.numPlanes:0,this.numPlanes+=h}}}function hr(e){var t=new WeakMap;function n(e,t){return t===Fe?e.mapping=He:t===Ne&&(e.mapping=Ke),e}function i(e){var n=e.target;n.removeEventListener("dispose",i);var l=t.get(n);void 0!==l&&(t.delete(n),l.dispose())}return{get:function(l){if(l&&l.isTexture&&!1===l.isRenderTargetTexture){var a=l.mapping;if(a===Fe||a===Ne){if(t.has(l))return n(t.get(l).texture,l.mapping);var r=l.image;if(r&&r.height>0){var o=new Pa(r.height/2);return o.fromEquirectangularTexture(e,l),t.set(l,o),l.addEventListener("dispose",i),n(o.texture,l.mapping)}return null}}return l},dispose:function(){t=new WeakMap}}}sr.physical={uniforms:La([sr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ri(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Gi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ri},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Gi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Gi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:or.meshphysical_vert,fragmentShader:or.meshphysical_frag};var Ar=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return f(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=l,e.top=a,e.bottom=r,e.near=o,e.far=g,e.updateProjectionMatrix(),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,l,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=l,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,l=n-e,a=n+e,r=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var g=(this.right-this.left)/this.view.fullWidth/this.zoom,s=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(l+=g*this.view.offsetX)+g*this.view.width,o=(r-=s*this.view.offsetY)-s*this.view.height}this.projectionMatrix.makeOrthographic(l,a,r,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Ea),mr=[.125,.215,.35,.446,.526,.582],pr=20,vr=new Ar,fr=new Gi,br=null,yr=(1+Math.sqrt(5))/2,Gr=1/yr,Br=[new Ki(1,1,1),new Ki(-1,1,1),new Ki(1,1,-1),new Ki(-1,1,-1),new Ki(0,yr,Gr),new Ki(0,yr,-Gr),new Ki(Gr,0,yr),new Ki(-Gr,0,yr),new Ki(yr,Gr,0),new Ki(-yr,Gr,0)],Zr=function(){function e(t){f(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return y(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;br=this._renderer.getRenderTarget(),this._setSize(256);var l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,i,l),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=Wr(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=wr(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(br),e.scissorTest=!1,xr(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===He||e.mapping===Ke?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),br=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Qe,minFilter:Qe,generateMipmaps:!1,type:ot,format:Ct,encoding:In,depthBuffer:!1},i=qr(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=qr(e,t,n);var l=this._lodMax,a=function(e){for(var t=[],n=[],i=[],l=e,a=e-4+1+mr.length,r=0;r<a;r++){var o=Math.pow(2,l);n.push(o);var g=1/o;r>e-4?g=mr[r-e+4-1]:0===r&&(g=0),i.push(g);for(var s=1/(o-2),I=-s,u=1+s,c=[I,I,u,I,u,u,I,I,u,u,I,u],C=6,d=6,h=3,A=2,m=1,p=new Float32Array(h*d*C),v=new Float32Array(A*d*C),f=new Float32Array(m*d*C),b=0;b<C;b++){var y=b%3*2/3-1,G=b>2?0:-1,B=[y,G,0,y+2/3,G,0,y+2/3,G+1,0,y,G,0,y+2/3,G+1,0,y,G+1,0];p.set(B,h*d*b),v.set(c,A*d*b);var Z=[b,b,b,b,b,b];f.set(Z,m*d*b)}var q=new fa;q.setAttribute("position",new na(p,h)),q.setAttribute("uv",new na(v,A)),q.setAttribute("faceIndex",new na(f,m)),t.push(q),l>4&&l--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(l);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var i=new Float32Array(pr),l=new Ki(0,1,0);return new Ta({name:"SphericalGaussianBlur",defines:{n:pr,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:P,depthTest:!1,depthWrite:!1})}(l,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new Fa(this._lodPlanes[0],e);this._renderer.compile(t,vr)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var l=new Ja(90,1,t,n),a=[1,-1,1,1,1,1],r=[1,1,1,-1,-1,-1],o=this._renderer,g=o.autoClear,s=o.toneMapping;o.getClearColor(fr),o.toneMapping=We,o.autoClear=!1;var I=new $l({name:"PMREM.Background",side:J,depthWrite:!1,depthTest:!1}),u=new Fa(new za,I),c=!1,C=e.background;C?C.isColor&&(I.color.copy(C),e.background=null,c=!0):(I.color.copy(fr),c=!0);for(var d=0;d<6;d++){var h=d%3;0===h?(l.up.set(0,a[d],0),l.lookAt(r[d],0,0)):1===h?(l.up.set(0,0,a[d]),l.lookAt(0,r[d],0)):(l.up.set(0,a[d],0),l.lookAt(0,0,r[d]));var A=this._cubeSize;xr(i,h*A,d>2?A:0,A,A),o.setRenderTarget(i),c&&o.render(u,l),o.render(e,l)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=s,o.autoClear=g,e.background=C}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===He||e.mapping===Ke;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Wr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=wr());var l=i?this._cubemapMaterial:this._equirectMaterial,a=new Fa(this._lodPlanes[0],l);l.uniforms.envMap.value=e;var r=this._cubeSize;xr(t,0,0,3*r,2*r),n.setRenderTarget(t),n.render(a,vr)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var l=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=Br[(i-1)%Br.length];this._blur(e,i-1,i,l,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,l){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",l),this._halfBlur(a,e,n,n,i,"longitudinal",l)}},{key:"_halfBlur",value:function(e,t,n,i,l,a,r){var o=this._renderer,g=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new Fa(this._lodPlanes[i],g),I=g.uniforms,u=this._sizeLods[n]-1,c=isFinite(l)?Math.PI/(2*u):2*Math.PI/39,C=l/c,d=isFinite(l)?1+Math.floor(3*C):pr;d>pr&&console.warn("sigmaRadians, ".concat(l,", is too large and will clip, as it requested ").concat(d," samples when the maximum is set to ").concat(pr));for(var h=[],A=0,m=0;m<pr;++m){var p=m/C,v=Math.exp(-p*p/2);h.push(v),0===m?A+=v:m<d&&(A+=2*v)}for(var f=0;f<h.length;f++)h[f]=h[f]/A;I.envMap.value=e.texture,I.samples.value=d,I.weights.value=h,I.latitudinal.value="latitudinal"===a,r&&(I.poleAxis.value=r);var b=this._lodMax;I.dTheta.value=c,I.mipInt.value=b-n;var y=this._sizeLods[i];xr(t,3*y*(i>b-4?i-b+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(s,vr)}}]),e}();function qr(e,t,n){var i=new Si(e,t,n);return i.texture.mapping=ze,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function xr(e,t,n,i,l){e.viewport.set(t,n,i,l),e.scissor.set(t,n,i,l)}function wr(){return new Ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:P,depthTest:!1,depthWrite:!1})}function Wr(){return new Ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:P,depthTest:!1,depthWrite:!1})}function Sr(e){var t=new WeakMap,n=null;function i(e){var n=e.target;n.removeEventListener("dispose",i);var l=t.get(n);void 0!==l&&(t.delete(n),l.dispose())}return{get:function(l){if(l&&l.isTexture){var a=l.mapping,r=a===Fe||a===Ne,o=a===He||a===Ke;if(r||o){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;var g=t.get(l);return null===n&&(n=new Zr(e)),g=r?n.fromEquirectangular(l,g):n.fromCubemap(l,g),t.set(l,g),g.texture}if(t.has(l))return t.get(l).texture;var s=l.image;if(r&&s&&s.height>0||o&&s&&function(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new Zr(e));var I=r?n.fromEquirectangular(l):n.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",i),I.texture}return null}}return l},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Rr(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Vr(e,t,n,i){var l={},a=new WeakMap;function r(e){var o=e.target;for(var g in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[g]);o.removeEventListener("dispose",r),delete l[o.id];var s=a.get(o);s&&(t.remove(s),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){var n=[],i=e.index,l=e.attributes.position,r=0;if(null!==i){var o=i.array;r=i.version;for(var g=0,s=o.length;g<s;g+=3){var I=o[g+0],u=o[g+1],c=o[g+2];n.push(I,u,u,c,c,I)}}else{var C=l.array;r=l.version;for(var d=0,h=C.length/3-1;d<h;d+=3){var A=d+0,m=d+1,p=d+2;n.push(A,m,m,p,p,A)}}var v=new(gi(n)?sa:oa)(n,1);v.version=r;var f=a.get(e);f&&t.remove(f),a.set(e,v)}return{get:function(e,t){return!0===l[t.id]||(t.addEventListener("dispose",r),l[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var l=e.morphAttributes;for(var a in l)for(var r=l[a],o=0,g=r.length;o<g;o++)t.update(r[o],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function kr(e,t,n,i){var l,a,r,o=i.isWebGL2;this.setMode=function(e){l=e},this.setIndex=function(e){a=e.type,r=e.bytesPerElement},this.render=function(t,i){e.drawElements(l,i,a,t*r),n.update(i,l,1)},this.renderInstances=function(i,g,s){if(0!==s){var I,u;if(o)I=e,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(I=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[u](l,g,a,i*r,s),n.update(g,l,s)}}}function Xr(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Yr(e,t){return e[0]-t[0]}function Hr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Kr(e,t){var n=1,i=t.isInterleavedBufferAttribute?t.data.array:t.array;i instanceof Int8Array?n=127:i instanceof Uint8Array?n=255:i instanceof Uint16Array?n=65535:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),e.divideScalar(n)}function Fr(e,t,n){for(var i={},l=new Float32Array(8),a=new WeakMap,r=new Wi,o=[],g=0;g<8;g++)o[g]=[g,0];return{update:function(g,s,I,u){var c=g.morphTargetInfluences;if(!0===t.isWebGL2){var C=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,d=void 0!==C?C.length:0,h=a.get(s);if(void 0===h||h.count!==d){void 0!==h&&h.texture.dispose();var A=void 0!==s.morphAttributes.position,m=void 0!==s.morphAttributes.normal,p=void 0!==s.morphAttributes.color,v=s.morphAttributes.position||[],f=s.morphAttributes.normal||[],b=s.morphAttributes.color||[],y=0;!0===A&&(y=1),!0===m&&(y=2),!0===p&&(y=3);var G=s.attributes.position.count*y,B=1;G>t.maxTextureSize&&(B=Math.ceil(G/t.maxTextureSize),G=t.maxTextureSize);var Z=new Float32Array(G*B*4*d),q=new Ri(Z,G,B,d);q.type=rt,q.needsUpdate=!0;for(var x=4*y,w=0;w<d;w++)for(var W=v[w],S=f[w],R=b[w],V=G*B*4*w,k=0;k<W.count;k++){var X=k*x;!0===A&&(r.fromBufferAttribute(W,k),!0===W.normalized&&Kr(r,W),Z[V+X+0]=r.x,Z[V+X+1]=r.y,Z[V+X+2]=r.z,Z[V+X+3]=0),!0===m&&(r.fromBufferAttribute(S,k),!0===S.normalized&&Kr(r,S),Z[V+X+4]=r.x,Z[V+X+5]=r.y,Z[V+X+6]=r.z,Z[V+X+7]=0),!0===p&&(r.fromBufferAttribute(R,k),!0===R.normalized&&Kr(r,R),Z[V+X+8]=r.x,Z[V+X+9]=r.y,Z[V+X+10]=r.z,Z[V+X+11]=4===R.itemSize?r.w:1)}h={count:d,texture:q,size:new ri(G,B)},a.set(s,h),s.addEventListener("dispose",(function e(){q.dispose(),a.delete(s),s.removeEventListener("dispose",e)}))}for(var Y=0,H=0;H<c.length;H++)Y+=c[H];var K=s.morphTargetsRelative?1:1-Y;u.getUniforms().setValue(e,"morphTargetBaseInfluence",K),u.getUniforms().setValue(e,"morphTargetInfluences",c),u.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}else{var F=void 0===c?0:c.length,N=i[s.id];if(void 0===N||N.length!==F){N=[];for(var z=0;z<F;z++)N[z]=[z,0];i[s.id]=N}for(var M=0;M<F;M++){var L=N[M];L[0]=M,L[1]=c[M]}N.sort(Hr);for(var _=0;_<8;_++)_<F&&N[_][1]?(o[_][0]=N[_][0],o[_][1]=N[_][1]):(o[_][0]=Number.MAX_SAFE_INTEGER,o[_][1]=0);o.sort(Yr);for(var T=s.morphAttributes.position,E=s.morphAttributes.normal,J=0,U=0;U<8;U++){var D=o[U],Q=D[0],P=D[1];Q!==Number.MAX_SAFE_INTEGER&&P?(T&&s.getAttribute("morphTarget"+U)!==T[Q]&&s.setAttribute("morphTarget"+U,T[Q]),E&&s.getAttribute("morphNormal"+U)!==E[Q]&&s.setAttribute("morphNormal"+U,E[Q]),l[U]=P,J+=P):(T&&!0===s.hasAttribute("morphTarget"+U)&&s.deleteAttribute("morphTarget"+U),E&&!0===s.hasAttribute("morphNormal"+U)&&s.deleteAttribute("morphNormal"+U),l[U]=0)}var O=s.morphTargetsRelative?1:1-J;u.getUniforms().setValue(e,"morphTargetBaseInfluence",O),u.getUniforms().setValue(e,"morphTargetInfluences",l)}}}}function Nr(e,t,n,i){var l=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var r=i.render.frame,o=e.geometry,g=t.get(e,o);return l.get(g)!==r&&(t.update(g),l.set(g,r)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),g},dispose:function(){l=new WeakMap}}}var zr=new wi,Mr=new Ri,Lr=new ki,_r=new Qa,Tr=[],Er=[],Jr=new Float32Array(16),Ur=new Float32Array(9),Dr=new Float32Array(4);function Qr(e,t,n){var i=e[0];if(i<=0||i>0)return e;var l=t*n,a=Tr[l];if(void 0===a&&(a=new Float32Array(l),Tr[l]=a),0!==t){i.toArray(a,0);for(var r=1,o=0;r!==t;++r)o+=n,e[r].toArray(a,o)}return a}function Pr(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Or(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function jr(e,t){var n=Er[t];void 0===n&&(n=new Int32Array(t),Er[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function $r(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function eo(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Pr(n,t))return;e.uniform2fv(this.addr,t),Or(n,t)}}function to(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Pr(n,t))return;e.uniform3fv(this.addr,t),Or(n,t)}}function no(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Pr(n,t))return;e.uniform4fv(this.addr,t),Or(n,t)}}function io(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Pr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Or(n,t)}else{if(Pr(n,i))return;Dr.set(i),e.uniformMatrix2fv(this.addr,!1,Dr),Or(n,i)}}function lo(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Pr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Or(n,t)}else{if(Pr(n,i))return;Ur.set(i),e.uniformMatrix3fv(this.addr,!1,Ur),Or(n,i)}}function ao(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Pr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Or(n,t)}else{if(Pr(n,i))return;Jr.set(i),e.uniformMatrix4fv(this.addr,!1,Jr),Or(n,i)}}function ro(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function oo(e,t){var n=this.cache;Pr(n,t)||(e.uniform2iv(this.addr,t),Or(n,t))}function go(e,t){var n=this.cache;Pr(n,t)||(e.uniform3iv(this.addr,t),Or(n,t))}function so(e,t){var n=this.cache;Pr(n,t)||(e.uniform4iv(this.addr,t),Or(n,t))}function Io(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function uo(e,t){var n=this.cache;Pr(n,t)||(e.uniform2uiv(this.addr,t),Or(n,t))}function co(e,t){var n=this.cache;Pr(n,t)||(e.uniform3uiv(this.addr,t),Or(n,t))}function Co(e,t){var n=this.cache;Pr(n,t)||(e.uniform4uiv(this.addr,t),Or(n,t))}function ho(e,t,n){var i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(e.uniform1i(this.addr,l),i[0]=l),n.setTexture2D(t||zr,l)}function Ao(e,t,n){var i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(e.uniform1i(this.addr,l),i[0]=l),n.setTexture3D(t||Lr,l)}function mo(e,t,n){var i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(e.uniform1i(this.addr,l),i[0]=l),n.setTextureCube(t||_r,l)}function po(e,t,n){var i=this.cache,l=n.allocateTextureUnit();i[0]!==l&&(e.uniform1i(this.addr,l),i[0]=l),n.setTexture2DArray(t||Mr,l)}function vo(e,t){e.uniform1fv(this.addr,t)}function fo(e,t){var n=Qr(t,this.size,2);e.uniform2fv(this.addr,n)}function bo(e,t){var n=Qr(t,this.size,3);e.uniform3fv(this.addr,n)}function yo(e,t){var n=Qr(t,this.size,4);e.uniform4fv(this.addr,n)}function Go(e,t){var n=Qr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Bo(e,t){var n=Qr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Zo(e,t){var n=Qr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function qo(e,t){e.uniform1iv(this.addr,t)}function xo(e,t){e.uniform2iv(this.addr,t)}function wo(e,t){e.uniform3iv(this.addr,t)}function Wo(e,t){e.uniform4iv(this.addr,t)}function So(e,t){e.uniform1uiv(this.addr,t)}function Ro(e,t){e.uniform2uiv(this.addr,t)}function Vo(e,t){e.uniform3uiv(this.addr,t)}function ko(e,t){e.uniform4uiv(this.addr,t)}function Xo(e,t,n){var i=t.length,l=jr(n,i);e.uniform1iv(this.addr,l);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||zr,l[a])}function Yo(e,t,n){var i=t.length,l=jr(n,i);e.uniform1iv(this.addr,l);for(var a=0;a!==i;++a)n.setTexture3D(t[a]||Lr,l[a])}function Ho(e,t,n){var i=t.length,l=jr(n,i);e.uniform1iv(this.addr,l);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||_r,l[a])}function Ko(e,t,n){var i=t.length,l=jr(n,i);e.uniform1iv(this.addr,l);for(var a=0;a!==i;++a)n.setTexture2DArray(t[a]||Mr,l[a])}var Fo=y((function e(t,n,i){f(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return $r;case 35664:return eo;case 35665:return to;case 35666:return no;case 35674:return io;case 35675:return lo;case 35676:return ao;case 5124:case 35670:return ro;case 35667:case 35671:return oo;case 35668:case 35672:return go;case 35669:case 35673:return so;case 5125:return Io;case 36294:return uo;case 36295:return co;case 36296:return Co;case 35678:case 36198:case 36298:case 36306:case 35682:return ho;case 35679:case 36299:case 36307:return Ao;case 35680:case 36300:case 36308:case 36293:return mo;case 36289:case 36303:case 36311:case 36292:return po}}(n.type)})),No=y((function e(t,n,i){f(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return vo;case 35664:return fo;case 35665:return bo;case 35666:return yo;case 35674:return Go;case 35675:return Bo;case 35676:return Zo;case 5124:case 35670:return qo;case 35667:case 35671:return xo;case 35668:case 35672:return wo;case 35669:case 35673:return Wo;case 5125:return So;case 36294:return Ro;case 36295:return Vo;case 36296:return ko;case 35678:case 36198:case 36298:case 36306:case 35682:return Xo;case 35679:case 36299:case 36307:return Yo;case 35680:case 36300:case 36308:case 36293:return Ho;case 36289:case 36303:case 36311:case 36292:return Ko}}(n.type)})),zo=function(){function e(t){f(this,e),this.id=t,this.seq=[],this.map={}}return y(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,l=0,a=i.length;l!==a;++l){var r=i[l];r.setValue(e,t[r.id],n)}}}]),e}(),Mo=/(\w+)(\])?(\[|\.)?/g;function Lo(e,t){e.seq.push(t),e.map[t.id]=t}function _o(e,t,n){var i=e.name,l=i.length;for(Mo.lastIndex=0;;){var a=Mo.exec(i),r=Mo.lastIndex,o=a[1],g="]"===a[2],s=a[3];if(g&&(o|=0),void 0===s||"["===s&&r+2===l){Lo(n,void 0===s?new Fo(o,e,t):new No(o,e,t));break}var I=n.map[o];void 0===I&&Lo(n,I=new zo(o)),n=I}}var To=function(){function e(t,n){f(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),l=0;l<i;++l){var a=t.getActiveUniform(n,l);_o(a,t.getUniformLocation(n,a.name),this)}}return y(e,[{key:"setValue",value:function(e,t,n,i){var l=this.map[t];void 0!==l&&l.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var l=0,a=t.length;l!==a;++l){var r=t[l],o=n[r.id];!1!==o.needsUpdate&&r.setValue(e,o.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,l=e.length;i!==l;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function Eo(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var Jo=0;function Uo(e,t,n){var i=e.getShaderParameter(t,35713),l=e.getShaderInfoLog(t).trim();if(i&&""===l)return"";var a=/ERROR: 0:(\d+)/.exec(l);if(a){var r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+l+"\n\n"+function(e,t){for(var n=e.split("\n"),i=[],l=Math.max(t-6,0),a=Math.min(t+6,n.length),r=l;r<a;r++){var o=r+1;i.push("".concat(o===t?">":" "," ").concat(o,": ").concat(n[r]))}return i.join("\n")}(e.getShaderSource(t),r)}return l}function Do(e,t){var n=function(e){switch(e){case In:return["Linear","( value )"];case un:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Qo(e,t){var n;switch(t){case Se:n="Linear";break;case Re:n="Reinhard";break;case Ve:n="OptimizedCineon";break;case ke:n="ACESFilmic";break;case Xe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Po(e){return""!==e}function Oo(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function jo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var $o=/^[ \t]*#include +<([\w\d./]+)>/gm;function eg(e){return e.replace($o,tg)}function tg(e,t){var n=or[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return eg(n)}var ng=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ig=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lg(e){return e.replace(ig,rg).replace(ng,ag)}function ag(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),rg(e,t,n,i)}function rg(e,t,n,i){for(var l="",a=parseInt(t);a<parseInt(n);a++)l+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return l}function og(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function gg(e,t,n,i){var l,a,r=e.getContext(),o=n.defines,g=n.vertexShader,s=n.fragmentShader,I=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===L?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===_?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===T&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case He:case Ke:t="ENVMAP_TYPE_CUBE";break;case ze:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ke&&(t="ENVMAP_MODE_REFRACTION");return t}(n),C=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case qe:t="ENVMAP_BLENDING_MULTIPLY";break;case xe:t="ENVMAP_BLENDING_MIX";break;case we:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),h=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Po).join("\n")}(n),A=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram(),p=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((l=[A].filter(Po).join("\n")).length>0&&(l+="\n"),(a=[h,A].filter(Po).join("\n")).length>0&&(a+="\n")):(l=[og(n),"#define SHADER_NAME "+n.shaderName,A,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+I:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Po).join("\n"),a=[h,og(n),"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+C:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+I:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==We?"#define TONE_MAPPING":"",n.toneMapping!==We?or.tonemapping_pars_fragment:"",n.toneMapping!==We?Qo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",or.encodings_pars_fragment,Do("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Po).join("\n")),g=jo(g=Oo(g=eg(g),n),n),s=jo(s=Oo(s=eg(s),n),n),g=lg(g),s=lg(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(p="#version 300 es\n",l=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+l,a=["#define varying in",n.glslVersion===En?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===En?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var v,f,b=p+a+s,y=Eo(r,35633,p+l+g),G=Eo(r,35632,b);if(r.attachShader(m,y),r.attachShader(m,G),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){var B=r.getProgramInfoLog(m).trim(),Z=r.getShaderInfoLog(y).trim(),q=r.getShaderInfoLog(G).trim(),x=!0,w=!0;if(!1===r.getProgramParameter(m,35714)){x=!1;var W=Uo(r,y,"vertex"),S=Uo(r,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+B+"\n"+W+"\n"+S)}else""!==B?console.warn("THREE.WebGLProgram: Program Info Log:",B):""!==Z&&""!==q||(w=!1);w&&(this.diagnostics={runnable:x,programLog:B,vertexShader:{log:Z,prefix:l},fragmentShader:{log:q,prefix:a}})}return r.deleteShader(y),r.deleteShader(G),this.getUniforms=function(){return void 0===v&&(v=new To(r,m)),v},this.getAttributes=function(){return void 0===f&&(f=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),l=0;l<i;l++){var a=e.getActiveAttrib(t,l),r=a.name,o=1;35674===a.type&&(o=2),35675===a.type&&(o=3),35676===a.type&&(o=4),n[r]={type:a.type,location:e.getAttribLocation(t,r),locationSize:o}}return n}(r,m)),f},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Jo++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=y,this.fragmentShader=G,this}var sg=0,Ig=function(){function e(){f(this,e),this.shaderCache=new Map,this.materialCache=new Map}return y(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),l=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(l)&&(a.add(l),l.usedTimes++),this}},{key:"remove",value:function(e){var t,n=d(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(l){n.e(l)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache;if(!1===t.has(e)){var n=new ug(e);t.set(e,n)}return t.get(e)}}]),e}(),ug=y((function e(t){f(this,e),this.id=sg++,this.code=t,this.usedTimes=0}));function cg(e,t,n,i,l,a,r){var o=new Zl,g=new Ig,s=[],I=l.isWebGL2,u=l.logarithmicDepthBuffer,c=l.vertexTextures,C=l.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,s,h,A){var m=h.fog,p=A.geometry,v=a.isMeshStandardMaterial?h.environment:null,f=(a.isMeshStandardMaterial?n:t).get(a.envMap||v),b=f&&f.mapping===ze?f.image.height:null,y=d[a.type];null!==a.precision&&(C=l.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",C,"instead.");var G,B,Z,q,x=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,w=void 0!==x?x.length:0,W=0;if(void 0!==p.morphAttributes.position&&(W=1),void 0!==p.morphAttributes.normal&&(W=2),void 0!==p.morphAttributes.color&&(W=3),y){var S=sr[y];G=S.vertexShader,B=S.fragmentShader}else G=a.vertexShader,B=a.fragmentShader,g.update(a),Z=g.getVertexShaderID(a),q=g.getFragmentShaderID(a);var R=e.getRenderTarget(),V=a.alphaTest>0,k=a.clearcoat>0,X=a.iridescence>0;return{isWebGL2:I,shaderID:y,shaderName:a.type,vertexShader:G,fragmentShader:B,defines:a.defines,customVertexShaderID:Z,customFragmentShaderID:q,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:C,instancing:!0===A.isInstancedMesh,instancingColor:!0===A.isInstancedMesh&&null!==A.instanceColor,supportsVertexTextures:c,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:In,map:!!a.map,matcap:!!a.matcap,envMap:!!f,envMapMode:f&&f.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===hn,tangentSpaceNormalMap:a.normalMapType===dn,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===un,clearcoat:k,clearcoatMap:k&&!!a.clearcoatMap,clearcoatRoughnessMap:k&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:k&&!!a.clearcoatNormalMap,iridescence:X,iridescenceMap:X&&!!a.iridescenceMap,iridescenceThicknessMap:X&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===O,alphaMap:!!a.alphaMap,alphaTest:V,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!p.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!p.attributes.color&&4===p.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!m,useFog:!0===a.fog,fogExp2:m&&m.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===A.isSkinnedMesh,morphTargets:void 0!==p.morphAttributes.position,morphNormals:void 0!==p.morphAttributes.normal,morphColors:void 0!==p.morphAttributes.color,morphTargetsCount:w,morphTextureStride:W,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:We,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===U,flipSided:a.side===J,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:I||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:I||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:I||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);t.fog&&o.enable(33);e.push(o.mask),o.disableAll(),t.useFog&&o.enable(0);t.flatShading&&o.enable(1);t.logarithmicDepthBuffer&&o.enable(2);t.skinning&&o.enable(3);t.morphTargets&&o.enable(4);t.morphNormals&&o.enable(5);t.morphColors&&o.enable(6);t.premultipliedAlpha&&o.enable(7);t.shadowMapEnabled&&o.enable(8);t.physicallyCorrectLights&&o.enable(9);t.doubleSided&&o.enable(10);t.flipSided&&o.enable(11);t.useDepthPacking&&o.enable(12);t.dithering&&o.enable(13);t.specularIntensityMap&&o.enable(14);t.specularColorMap&&o.enable(15);t.transmission&&o.enable(16);t.transmissionMap&&o.enable(17);t.thicknessMap&&o.enable(18);t.sheen&&o.enable(19);t.sheenColorMap&&o.enable(20);t.sheenRoughnessMap&&o.enable(21);t.decodeVideoTexture&&o.enable(22);t.opaque&&o.enable(23);e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var i=sr[n];t=_a.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var i,l=0,r=s.length;l<r;l++){var o=s[l];if(o.cacheKey===n){++(i=o).usedTimes;break}}return void 0===i&&(i=new gg(e,n,t,a),s.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},releaseShaderCache:function(e){g.remove(e)},programs:s,dispose:function(){g.dispose()}}}function Cg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function dg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function hg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ag(){var e=[],t=0,n=[],i=[],l=[];function a(n,i,l,a,r,o){var g=e[t];return void 0===g?(g={id:n.id,object:n,geometry:i,material:l,groupOrder:a,renderOrder:n.renderOrder,z:r,group:o},e[t]=g):(g.id=n.id,g.object=n,g.geometry=i,g.material=l,g.groupOrder=a,g.renderOrder=n.renderOrder,g.z=r,g.group=o),t++,g}return{opaque:n,transmissive:i,transparent:l,init:function(){t=0,n.length=0,i.length=0,l.length=0},push:function(e,t,r,o,g,s){var I=a(e,t,r,o,g,s);r.transmission>0?i.push(I):!0===r.transparent?l.push(I):n.push(I)},unshift:function(e,t,r,o,g,s){var I=a(e,t,r,o,g,s);r.transmission>0?i.unshift(I):!0===r.transparent?l.unshift(I):n.unshift(I)},finish:function(){for(var n=t,i=e.length;n<i;n++){var l=e[n];if(null===l.id)break;l.id=null,l.object=null,l.geometry=null,l.material=null,l.group=null}},sort:function(e,t){n.length>1&&n.sort(e||dg),i.length>1&&i.sort(t||hg),l.length>1&&l.sort(t||hg)}}}function mg(){var e=new WeakMap;return{get:function(t,n){var i;return!1===e.has(t)?(i=new Ag,e.set(t,[i])):n>=e.get(t).length?(i=new Ag,e.get(t).push(i)):i=e.get(t)[n],i},dispose:function(){e=new WeakMap}}}function pg(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ki,color:new Gi};break;case"SpotLight":n={position:new Ki,direction:new Ki,color:new Gi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ki,color:new Gi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ki,skyColor:new Gi,groundColor:new Gi};break;case"RectAreaLight":n={color:new Gi,position:new Ki,halfWidth:new Ki,halfHeight:new Ki}}return e[t.id]=n,n}}}var vg=0;function fg(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function bg(e,t){for(var n=new pg,i=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ri};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ri,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)l.probe.push(new Ki);var r=new Ki,o=new dl,g=new dl;return{setup:function(a,r){for(var o=0,g=0,s=0,I=0;I<9;I++)l.probe[I].set(0,0,0);var u=0,c=0,C=0,d=0,h=0,A=0,m=0,p=0;a.sort(fg);for(var v=!0!==r?Math.PI:1,f=0,b=a.length;f<b;f++){var y=a[f],G=y.color,B=y.intensity,Z=y.distance,q=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)o+=G.r*B*v,g+=G.g*B*v,s+=G.b*B*v;else if(y.isLightProbe)for(var x=0;x<9;x++)l.probe[x].addScaledVector(y.sh.coefficients[x],B);else if(y.isDirectionalLight){var w=n.get(y);if(w.color.copy(y.color).multiplyScalar(y.intensity*v),y.castShadow){var W=y.shadow,S=i.get(y);S.shadowBias=W.bias,S.shadowNormalBias=W.normalBias,S.shadowRadius=W.radius,S.shadowMapSize=W.mapSize,l.directionalShadow[u]=S,l.directionalShadowMap[u]=q,l.directionalShadowMatrix[u]=y.shadow.matrix,A++}l.directional[u]=w,u++}else if(y.isSpotLight){var R=n.get(y);if(R.position.setFromMatrixPosition(y.matrixWorld),R.color.copy(G).multiplyScalar(B*v),R.distance=Z,R.coneCos=Math.cos(y.angle),R.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),R.decay=y.decay,y.castShadow){var V=y.shadow,k=i.get(y);k.shadowBias=V.bias,k.shadowNormalBias=V.normalBias,k.shadowRadius=V.radius,k.shadowMapSize=V.mapSize,l.spotShadow[C]=k,l.spotShadowMap[C]=q,l.spotShadowMatrix[C]=y.shadow.matrix,p++}l.spot[C]=R,C++}else if(y.isRectAreaLight){var X=n.get(y);X.color.copy(G).multiplyScalar(B),X.halfWidth.set(.5*y.width,0,0),X.halfHeight.set(0,.5*y.height,0),l.rectArea[d]=X,d++}else if(y.isPointLight){var Y=n.get(y);if(Y.color.copy(y.color).multiplyScalar(y.intensity*v),Y.distance=y.distance,Y.decay=y.decay,y.castShadow){var H=y.shadow,K=i.get(y);K.shadowBias=H.bias,K.shadowNormalBias=H.normalBias,K.shadowRadius=H.radius,K.shadowMapSize=H.mapSize,K.shadowCameraNear=H.camera.near,K.shadowCameraFar=H.camera.far,l.pointShadow[c]=K,l.pointShadowMap[c]=q,l.pointShadowMatrix[c]=y.shadow.matrix,m++}l.point[c]=Y,c++}else if(y.isHemisphereLight){var F=n.get(y);F.skyColor.copy(y.color).multiplyScalar(B*v),F.groundColor.copy(y.groundColor).multiplyScalar(B*v),l.hemi[h]=F,h++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(l.rectAreaLTC1=gr.LTC_FLOAT_1,l.rectAreaLTC2=gr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=gr.LTC_HALF_1,l.rectAreaLTC2=gr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=o,l.ambient[1]=g,l.ambient[2]=s;var N=l.hash;N.directionalLength===u&&N.pointLength===c&&N.spotLength===C&&N.rectAreaLength===d&&N.hemiLength===h&&N.numDirectionalShadows===A&&N.numPointShadows===m&&N.numSpotShadows===p||(l.directional.length=u,l.spot.length=C,l.rectArea.length=d,l.point.length=c,l.hemi.length=h,l.directionalShadow.length=A,l.directionalShadowMap.length=A,l.pointShadow.length=m,l.pointShadowMap.length=m,l.spotShadow.length=p,l.spotShadowMap.length=p,l.directionalShadowMatrix.length=A,l.pointShadowMatrix.length=m,l.spotShadowMatrix.length=p,N.directionalLength=u,N.pointLength=c,N.spotLength=C,N.rectAreaLength=d,N.hemiLength=h,N.numDirectionalShadows=A,N.numPointShadows=m,N.numSpotShadows=p,l.version=vg++)},setupView:function(e,t){for(var n=0,i=0,a=0,s=0,I=0,u=t.matrixWorldInverse,c=0,C=e.length;c<C;c++){var d=e[c];if(d.isDirectionalLight){var h=l.directional[n];h.direction.setFromMatrixPosition(d.matrixWorld),r.setFromMatrixPosition(d.target.matrixWorld),h.direction.sub(r),h.direction.transformDirection(u),n++}else if(d.isSpotLight){var A=l.spot[a];A.position.setFromMatrixPosition(d.matrixWorld),A.position.applyMatrix4(u),A.direction.setFromMatrixPosition(d.matrixWorld),r.setFromMatrixPosition(d.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(u),a++}else if(d.isRectAreaLight){var m=l.rectArea[s];m.position.setFromMatrixPosition(d.matrixWorld),m.position.applyMatrix4(u),g.identity(),o.copy(d.matrixWorld),o.premultiply(u),g.extractRotation(o),m.halfWidth.set(.5*d.width,0,0),m.halfHeight.set(0,.5*d.height,0),m.halfWidth.applyMatrix4(g),m.halfHeight.applyMatrix4(g),s++}else if(d.isPointLight){var p=l.point[i];p.position.setFromMatrixPosition(d.matrixWorld),p.position.applyMatrix4(u),i++}else if(d.isHemisphereLight){var v=l.hemi[I];v.direction.setFromMatrixPosition(d.matrixWorld),v.direction.transformDirection(u),I++}}},state:l}}function yg(e,t){var n=new bg(e,t),i=[],l=[];return{init:function(){i.length=0,l.length=0},state:{lightsArray:i,shadowsArray:l,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){l.push(e)}}}function Gg(e,t){var n=new WeakMap;return{get:function(i){var l,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(i)?(l=new yg(e,t),n.set(i,[l])):a>=n.get(i).length?(l=new yg(e,t),n.get(i).push(l)):l=n.get(i)[a],l},dispose:function(){n=new WeakMap}}}var Bg=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=cn,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(jl),Zg=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new Ki,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(jl);function qg(e,t,n){var i=new ir,l=new ri,a=new ri,r=new Wi,o=new Bg({depthPacking:Cn}),g=new Zg,s={},I=n.maxTextureSize,u={0:J,1:E,2:U},c=new Ta({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ri},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),C=c.clone();C.defines.HORIZONTAL_PASS=1;var d=new fa;d.setAttribute("position",new na(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var h=new Fa(d,c),A=this;function m(n,i){var a=t.update(h);c.defines.VSM_SAMPLES!==n.blurSamples&&(c.defines.VSM_SAMPLES=n.blurSamples,C.defines.VSM_SAMPLES=n.blurSamples,c.needsUpdate=!0,C.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Si(l.x,l.y)),c.uniforms.shadow_pass.value=n.map.texture,c.uniforms.resolution.value=n.mapSize,c.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,c,h,null),C.uniforms.shadow_pass.value=n.mapPass.texture,C.uniforms.resolution.value=n.mapSize,C.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,C,h,null)}function p(t,n,i,l,a,r){var I=null,c=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(I=void 0!==c?c:!0===i.isPointLight?g:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var C=I.uuid,d=n.uuid,h=s[C];void 0===h&&(h={},s[C]=h);var A=h[d];void 0===A&&(A=I.clone(),h[d]=A),I=A}return I.visible=n.visible,I.wireframe=n.wireframe,I.side=r===T?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],I.alphaMap=n.alphaMap,I.alphaTest=n.alphaTest,I.clipShadows=n.clipShadows,I.clippingPlanes=n.clippingPlanes,I.clipIntersection=n.clipIntersection,I.displacementMap=n.displacementMap,I.displacementScale=n.displacementScale,I.displacementBias=n.displacementBias,I.wireframeLinewidth=n.wireframeLinewidth,I.linewidth=n.linewidth,!0===i.isPointLight&&!0===I.isMeshDistanceMaterial&&(I.referencePosition.setFromMatrixPosition(i.matrixWorld),I.nearDistance=l,I.farDistance=a),I}function v(n,l,a,r,o){if(!1!==n.visible){if(n.layers.test(l.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===T)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var g=t.update(n),s=n.material;if(Array.isArray(s))for(var I=g.groups,u=0,c=I.length;u<c;u++){var C=I[u],d=s[C.materialIndex];if(d&&d.visible){var h=p(n,d,r,a.near,a.far,o);e.renderBufferDirect(a,null,g,h,n,C)}}else if(s.visible){var A=p(n,s,r,a.near,a.far,o);e.renderBufferDirect(a,null,g,A,n,null)}}for(var m=n.children,f=0,b=m.length;f<b;f++)v(m[f],l,a,r,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=L,this.render=function(t,n,o){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var g=e.getRenderTarget(),s=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),c=e.state;c.setBlending(P),c.buffers.color.setClear(1,1,1,1),c.buffers.depth.setTest(!0),c.setScissorTest(!1);for(var C=0,d=t.length;C<d;C++){var h=t[C],p=h.shadow;if(void 0!==p){if(!1!==p.autoUpdate||!1!==p.needsUpdate){l.copy(p.mapSize);var f=p.getFrameExtents();if(l.multiply(f),a.copy(p.mapSize),(l.x>I||l.y>I)&&(l.x>I&&(a.x=Math.floor(I/f.x),l.x=a.x*f.x,p.mapSize.x=a.x),l.y>I&&(a.y=Math.floor(I/f.y),l.y=a.y*f.y,p.mapSize.y=a.y)),null===p.map){var b=this.type!==T?{minFilter:Te,magFilter:Te}:{};p.map=new Si(l.x,l.y,b),p.map.texture.name=h.name+".shadowMap",p.camera.updateProjectionMatrix()}e.setRenderTarget(p.map),e.clear();for(var y=p.getViewportCount(),G=0;G<y;G++){var B=p.getViewport(G);r.set(a.x*B.x,a.y*B.y,a.x*B.z,a.y*B.w),c.viewport(r),p.updateMatrices(h,G),i=p.getFrustum(),v(n,o,p.camera,h,this.type)}!0!==p.isPointLightShadow&&this.type===T&&m(p,o),p.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",h,"has no shadow.")}A.needsUpdate=!1,e.setRenderTarget(g,s,u)}}}function xg(e,t,n){var i,l,r=n.isWebGL2;var o=new function(){var t=!1,n=new Wi,i=null,l=new Wi(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,r,o){!0===o&&(t*=r,i*=r,a*=r),n.set(t,i,a,r),!1===l.equals(n)&&(e.clearColor(t,i,a,r),l.copy(n))},reset:function(){t=!1,i=null,l.set(-1,0,0,0)}}},g=new function(){var t=!1,n=null,i=null,l=null;return{setTest:function(e){e?T(2929):E(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case pe:e.depthFunc(512);break;case ve:e.depthFunc(519);break;case fe:e.depthFunc(513);break;case be:e.depthFunc(515);break;case ye:e.depthFunc(514);break;case Ge:e.depthFunc(518);break;case Be:e.depthFunc(516);break;case Ze:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearDepth(t),l=t)},reset:function(){t=!1,n=null,i=null,l=null}}},s=new function(){var t=!1,n=null,i=null,l=null,a=null,r=null,o=null,g=null,s=null;return{setTest:function(e){t||(e?T(2960):E(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,r){i===t&&l===n&&a===r||(e.stencilFunc(t,n,r),i=t,l=n,a=r)},setOp:function(t,n,i){r===t&&o===n&&g===i||(e.stencilOp(t,n,i),r=t,o=n,g=i)},setLocked:function(e){t=e},setClear:function(t){s!==t&&(e.clearStencil(t),s=t)},reset:function(){t=!1,n=null,i=null,l=null,a=null,r=null,o=null,g=null,s=null}}},I={},u={},c=new WeakMap,C=[],d=null,h=!1,A=null,m=null,p=null,v=null,f=null,b=null,y=null,G=!1,B=null,Z=null,q=null,x=null,w=null,W=e.getParameter(35661),S=!1,R=0,V=e.getParameter(7938);-1!==V.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(V)[1]),S=R>=1):-1!==V.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),S=R>=2);var k=null,X={},Y=e.getParameter(3088),H=e.getParameter(2978),z=(new Wi).fromArray(Y),M=(new Wi).fromArray(H);function L(t,n,i){var l=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var r=0;r<i;r++)e.texImage2D(n+r,0,6408,1,1,0,6408,5121,l);return a}var _={};function T(t){!0!==I[t]&&(e.enable(t),I[t]=!0)}function E(t){!1!==I[t]&&(e.disable(t),I[t]=!1)}_[3553]=L(3553,3553,1),_[34067]=L(34067,34069,6),o.setClear(0,0,0,1),g.setClear(1),s.setClear(0),T(2929),g.setFunc(be),we(!1),We(F),T(2884),xe(P);var D=(a(i={},ne,32774),a(i,ie,32778),a(i,le,32779),i);if(r)D[ae]=32775,D[re]=32776;else{var Q=t.get("EXT_blend_minmax");null!==Q&&(D[ae]=Q.MIN_EXT,D[re]=Q.MAX_EXT)}var qe=(a(l={},oe,0),a(l,ge,1),a(l,se,768),a(l,ue,770),a(l,me,776),a(l,he,774),a(l,Ce,772),a(l,Ie,769),a(l,ce,771),a(l,Ae,775),a(l,de,773),l);function xe(t,n,i,l,a,r,o,g){if(t!==P){if(!1===h&&(T(3042),h=!0),t===te)a=a||n,r=r||i,o=o||l,n===m&&a===f||(e.blendEquationSeparate(D[n],D[a]),m=n,f=a),i===p&&l===v&&r===b&&o===y||(e.blendFuncSeparate(qe[i],qe[l],qe[r],qe[o]),p=i,v=l,b=r,y=o),A=t,G=null;else if(t!==A||g!==G){if(m===ne&&f===ne||(e.blendEquation(32774),m=ne,f=ne),g)switch(t){case O:e.blendFuncSeparate(1,771,1,771);break;case j:e.blendFunc(1,1);break;case $:e.blendFuncSeparate(0,769,0,1);break;case ee:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case O:e.blendFuncSeparate(770,771,1,771);break;case j:e.blendFunc(770,1);break;case $:e.blendFuncSeparate(0,769,0,1);break;case ee:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,v=null,b=null,y=null,A=t,G=g}}else!0===h&&(E(3042),h=!1)}function we(t){B!==t&&(t?e.frontFace(2304):e.frontFace(2305),B=t)}function We(t){t!==K?(T(2884),t!==Z&&(t===F?e.cullFace(1029):t===N?e.cullFace(1028):e.cullFace(1032))):E(2884),Z=t}function Se(t,n,i){t?(T(32823),x===n&&w===i||(e.polygonOffset(n,i),x=n,w=i)):E(32823)}function Re(t){void 0===t&&(t=33984+W-1),k!==t&&(e.activeTexture(t),k=t)}return{buffers:{color:o,depth:g,stencil:s},enable:T,disable:E,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(i,l){var a=C,r=!1;if(i)if(void 0===(a=c.get(l))&&(a=[],c.set(l,a)),i.isWebGLMultipleRenderTargets){var o=i.texture;if(a.length!==o.length||36064!==a[0]){for(var g=0,s=o.length;g<s;g++)a[g]=36064+g;a.length=o.length,r=!0}}else 36064!==a[0]&&(a[0]=36064,r=!0);else 1029!==a[0]&&(a[0]=1029,r=!0);r&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:xe,setMaterial:function(e,t){e.side===U?E(2884):T(2884);var n=e.side===J;t&&(n=!n),we(n),e.blending===O&&!1===e.transparent?xe(P):xe(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),g.setFunc(e.depthFunc),g.setTest(e.depthTest),g.setMask(e.depthWrite),o.setMask(e.colorWrite);var i=e.stencilWrite;s.setTest(i),i&&(s.setMask(e.stencilWriteMask),s.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Se(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?T(32926):E(32926)},setFlipSided:we,setCullFace:We,setLineWidth:function(t){t!==q&&(S&&e.lineWidth(t),q=t)},setPolygonOffset:Se,setScissorTest:function(e){e?T(3089):E(3089)},activeTexture:Re,bindTexture:function(t,n){null===k&&Re();var i=X[k];void 0===i&&(i={type:void 0,texture:void 0},X[k]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||_[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=X[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===M.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),M.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),I={},k=null,X={},u={},c=new WeakMap,C=[],d=null,h=!1,A=null,m=null,p=null,v=null,f=null,b=null,y=null,G=!1,B=null,Z=null,q=null,x=null,w=null,z.set(0,0,e.canvas.width,e.canvas.height),M.set(0,0,e.canvas.width,e.canvas.height),o.reset(),g.reset(),s.reset()}}}function wg(e,t,n,i,l,r,o){var g,s,I,u=l.isWebGL2,c=l.maxTextures,C=l.maxCubemapSize,d=l.maxTextureSize,h=l.maxSamples,A=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,v=new WeakMap,f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(E){}function b(e,t){return f?new OffscreenCanvas(e,t):ui("canvas")}function y(e,t,n,i){var l=1;if((e.width>i||e.height>i)&&(l=i/Math.max(e.width,e.height)),l<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?li:Math.floor,r=a(l*e.width),o=a(l*e.height);void 0===I&&(I=b(r,o));var g=n?b(r,o):I;return g.width=r,g.height=o,g.getContext("2d").drawImage(e,0,0,r,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+r+"x"+o+")."),g}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function G(e){return ni(e.width)&&ni(e.height)}function B(e,t){return e.generateMipmaps&&t&&e.minFilter!==Te&&e.minFilter!==Qe}function Z(t){e.generateMipmap(t)}function q(n,i,l,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=i;return 6403===i&&(5126===l&&(o=33326),5131===l&&(o=33325),5121===l&&(o=33321)),33319===i&&(5126===l&&(o=33328),5131===l&&(o=33327),5121===l&&(o=33323)),6408===i&&(5126===l&&(o=34836),5131===l&&(o=34842),5121===l&&(o=a===un&&!1===r?35907:32856),32819===l&&(o=32854),32820===l&&(o=32855)),33325!==o&&33326!==o&&33327!==o&&33328!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e,t,n){return!0===B(e,n)||e.isFramebufferTexture&&e.minFilter!==Te&&e.minFilter!==Qe?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){return e===Te||e===Ee||e===Ue?9728:9729}function W(e){var t=e.target;t.removeEventListener("dispose",W),function(e){var t=i.get(e);if(void 0===t.__webglInit)return;var n=e.source,l=v.get(n);if(l){var a=l[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&R(e),0===Object.keys(l).length&&v.delete(n)}i.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=t.texture,l=i.get(t),a=i.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var r=0;r<6;r++)e.deleteFramebuffer(l.__webglFramebuffer[r]),l.__webglDepthbuffer&&e.deleteRenderbuffer(l.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(l.__webglFramebuffer),l.__webglDepthbuffer&&e.deleteRenderbuffer(l.__webglDepthbuffer),l.__webglMultisampledFramebuffer&&e.deleteFramebuffer(l.__webglMultisampledFramebuffer),l.__webglColorRenderbuffer)for(var g=0;g<l.__webglColorRenderbuffer.length;g++)l.__webglColorRenderbuffer[g]&&e.deleteRenderbuffer(l.__webglColorRenderbuffer[g]);l.__webglDepthRenderbuffer&&e.deleteRenderbuffer(l.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var s=0,I=n.length;s<I;s++){var u=i.get(n[s]);u.__webglTexture&&(e.deleteTexture(u.__webglTexture),o.memory.textures--),i.remove(n[s])}i.remove(n),i.remove(t)}(n)}function R(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var l=t.source;delete v.get(l)[n.__cacheKey],o.memory.textures--}var V=0;function k(e,t){var l=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&l.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void F(l,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,l.__webglTexture)}var X=(a(g={},Me,10497),a(g,Le,33071),a(g,_e,33648),g),Y=(a(s={},Te,9728),a(s,Ee,9984),a(s,Ue,9986),a(s,Qe,9729),a(s,Pe,9985),a(s,je,9987),s);function H(n,a,r){if(r?(e.texParameteri(n,10242,X[a.wrapS]),e.texParameteri(n,10243,X[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,X[a.wrapR]),e.texParameteri(n,10240,Y[a.magFilter]),e.texParameteri(n,10241,Y[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Le&&a.wrapT===Le||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(a.magFilter)),e.texParameteri(n,10241,w(a.minFilter)),a.minFilter!==Te&&a.minFilter!==Qe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var o=t.get("EXT_texture_filter_anisotropic");if(a.type===rt&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&a.type===ot&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,l.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function K(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",W));var l=n.source,a=v.get(l);void 0===a&&(a={},v.set(l,a));var r=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(r!==t.__cacheKey){void 0===a[r]&&(a[r]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[r].usedTimes++;var g=a[t.__cacheKey];void 0!==g&&(a[t.__cacheKey].usedTimes--,0===g.usedTimes&&R(n)),t.__cacheKey=r,t.__webglTexture=a[r].texture}return i}function F(t,i,l){var a=3553;i.isDataArrayTexture&&(a=35866),i.isData3DTexture&&(a=32879);var o=K(t,i),g=i.source;if(n.activeTexture(33984+l),n.bindTexture(a,t.__webglTexture),g.version!==g.__currentVersion||!0===o){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var s,I=function(e){return!u&&(e.wrapS!==Le||e.wrapT!==Le||e.minFilter!==Te&&e.minFilter!==Qe)}(i)&&!1===G(i.image),c=y(i.image,I,!1,d),C=G(c=T(i,c))||u,h=r.convert(i.format,i.encoding),A=r.convert(i.type),m=q(i.internalFormat,h,A,i.encoding,i.isVideoTexture);H(a,i,C);var p=i.mipmaps,v=u&&!0!==i.isVideoTexture,f=void 0===g.__currentVersion||!0===o,b=x(i,c,C);if(i.isDepthTexture)m=6402,u?m=i.type===rt?36012:i.type===at?33190:i.type===It?35056:33189:i.type===rt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===At&&6402===m&&i.type!==it&&i.type!==at&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=at,A=r.convert(i.type)),i.format===mt&&6402===m&&(m=34041,i.type!==It&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=It,A=r.convert(i.type))),f&&(v?n.texStorage2D(3553,1,m,c.width,c.height):n.texImage2D(3553,0,m,c.width,c.height,0,h,A,null));else if(i.isDataTexture)if(p.length>0&&C){v&&f&&n.texStorage2D(3553,b,m,p[0].width,p[0].height);for(var w=0,W=p.length;w<W;w++)s=p[w],v?n.texSubImage2D(3553,w,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,w,m,s.width,s.height,0,h,A,s.data);i.generateMipmaps=!1}else v?(f&&n.texStorage2D(3553,b,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,c.width,c.height,h,A,c.data)):n.texImage2D(3553,0,m,c.width,c.height,0,h,A,c.data);else if(i.isCompressedTexture){v&&f&&n.texStorage2D(3553,b,m,p[0].width,p[0].height);for(var S=0,R=p.length;S<R;S++)s=p[S],i.format!==Ct?null!==h?v?n.compressedTexSubImage2D(3553,S,0,0,s.width,s.height,h,s.data):n.compressedTexImage2D(3553,S,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,S,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,S,m,s.width,s.height,0,h,A,s.data)}else if(i.isDataArrayTexture)v?(f&&n.texStorage3D(35866,b,m,c.width,c.height,c.depth),n.texSubImage3D(35866,0,0,0,0,c.width,c.height,c.depth,h,A,c.data)):n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,h,A,c.data);else if(i.isData3DTexture)v?(f&&n.texStorage3D(32879,b,m,c.width,c.height,c.depth),n.texSubImage3D(32879,0,0,0,0,c.width,c.height,c.depth,h,A,c.data)):n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,h,A,c.data);else if(i.isFramebufferTexture){if(f)if(v)n.texStorage2D(3553,b,m,c.width,c.height);else for(var V=c.width,k=c.height,X=0;X<b;X++)n.texImage2D(3553,X,m,V,k,0,h,A,null),V>>=1,k>>=1}else if(p.length>0&&C){v&&f&&n.texStorage2D(3553,b,m,p[0].width,p[0].height);for(var Y=0,F=p.length;Y<F;Y++)s=p[Y],v?n.texSubImage2D(3553,Y,0,0,h,A,s):n.texImage2D(3553,Y,m,h,A,s);i.generateMipmaps=!1}else v?(f&&n.texStorage2D(3553,b,m,c.width,c.height),n.texSubImage2D(3553,0,0,0,h,A,c)):n.texImage2D(3553,0,m,h,A,c);B(i,C)&&Z(a),g.__currentVersion=g.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function N(t,l,a,o,g){var s=r.convert(a.format,a.encoding),I=r.convert(a.type),u=q(a.internalFormat,s,I,a.encoding);i.get(l).__hasExternalTextures||(32879===g||35866===g?n.texImage3D(g,0,u,l.width,l.height,l.depth,0,s,I,null):n.texImage2D(g,0,u,l.width,l.height,0,s,I,null)),n.bindFramebuffer(36160,t),_(l)?A.framebufferTexture2DMultisampleEXT(36160,o,g,i.get(a).__webglTexture,0,L(l)):e.framebufferTexture2D(36160,o,g,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var l=33189;if(i||_(n)){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===rt?l=36012:a.type===at&&(l=33190));var o=L(n);_(n)?A.renderbufferStorageMultisampleEXT(36161,o,l,n.width,n.height):e.renderbufferStorageMultisample(36161,o,l,n.width,n.height)}else e.renderbufferStorage(36161,l,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var g=L(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,g,35056,n.width,n.height):_(n)?A.renderbufferStorageMultisampleEXT(36161,g,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var s=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],I=0;I<s.length;I++){var u=s[I],c=r.convert(u.format,u.encoding),C=r.convert(u.type),d=q(u.internalFormat,c,C,u.encoding),h=L(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,h,d,n.width,n.height):_(n)?A.renderbufferStorageMultisampleEXT(36161,h,d,n.width,n.height):e.renderbufferStorage(36161,d,n.width,n.height)}e.bindRenderbuffer(36161,null)}function M(t){var l=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!l.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,l){if(l&&l.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!l.depthTexture||!l.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(l.depthTexture).__webglTexture&&l.depthTexture.image.width===l.width&&l.depthTexture.image.height===l.height||(l.depthTexture.image.width=l.width,l.depthTexture.image.height=l.height,l.depthTexture.needsUpdate=!0),k(l.depthTexture,0);var a=i.get(l.depthTexture).__webglTexture,r=L(l);if(l.depthTexture.format===At)_(l)?A.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,r):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(l.depthTexture.format!==mt)throw new Error("Unknown depthTexture format");_(l)?A.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,r):e.framebufferTexture2D(36160,33306,3553,a,0)}}(l.__webglFramebuffer,t)}else if(a){l.__webglDepthbuffer=[];for(var r=0;r<6;r++)n.bindFramebuffer(36160,l.__webglFramebuffer[r]),l.__webglDepthbuffer[r]=e.createRenderbuffer(),z(l.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,l.__webglFramebuffer),l.__webglDepthbuffer=e.createRenderbuffer(),z(l.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function L(e){return Math.min(h,e.samples)}function _(e){var n=i.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function T(e,n){var i=e.encoding,l=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Jn||i!==In&&(i===un?!1===u?!0===t.has("EXT_sRGB")&&l===Ct?(e.format=Jn,e.minFilter=Qe,e.generateMipmaps=!1):n=Bi.sRGBToLinear(n):l===Ct&&a===et||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){var e=V;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),V+=1,e},this.resetTextureUnits=function(){V=0},this.setTexture2D=k,this.setTexture2DArray=function(e,t){var l=i.get(e);e.version>0&&l.__version!==e.version?F(l,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,l.__webglTexture))},this.setTexture3D=function(e,t){var l=i.get(e);e.version>0&&l.__version!==e.version?F(l,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,l.__webglTexture))},this.setTextureCube=function(t,l){var a=i.get(t);t.version>0&&a.__version!==t.version?function(t,i,l){if(6!==i.image.length)return;var a=K(t,i),o=i.source;if(n.activeTexture(33984+l),n.bindTexture(34067,t.__webglTexture),o.version!==o.__currentVersion||!0===a){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var g=i.isCompressedTexture||i.image[0].isCompressedTexture,s=i.image[0]&&i.image[0].isDataTexture,I=[],c=0;c<6;c++)I[c]=g||s?s?i.image[c].image:i.image[c]:y(i.image[c],!1,!0,C),I[c]=T(i,I[c]);var d,h=I[0],A=G(h)||u,m=r.convert(i.format,i.encoding),p=r.convert(i.type),v=q(i.internalFormat,m,p,i.encoding),f=u&&!0!==i.isVideoTexture,b=void 0===o.__currentVersion||!0===a,w=x(i,h,A);if(H(34067,i,A),g){f&&b&&n.texStorage2D(34067,w,v,h.width,h.height);for(var W=0;W<6;W++){d=I[W].mipmaps;for(var S=0;S<d.length;S++){var R=d[S];i.format!==Ct?null!==m?f?n.compressedTexSubImage2D(34069+W,S,0,0,R.width,R.height,m,R.data):n.compressedTexImage2D(34069+W,S,v,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):f?n.texSubImage2D(34069+W,S,0,0,R.width,R.height,m,p,R.data):n.texImage2D(34069+W,S,v,R.width,R.height,0,m,p,R.data)}}}else{d=i.mipmaps,f&&b&&(d.length>0&&w++,n.texStorage2D(34067,w,v,I[0].width,I[0].height));for(var V=0;V<6;V++)if(s){f?n.texSubImage2D(34069+V,0,0,0,I[V].width,I[V].height,m,p,I[V].data):n.texImage2D(34069+V,0,v,I[V].width,I[V].height,0,m,p,I[V].data);for(var k=0;k<d.length;k++){var X=d[k].image[V].image;f?n.texSubImage2D(34069+V,k+1,0,0,X.width,X.height,m,p,X.data):n.texImage2D(34069+V,k+1,v,X.width,X.height,0,m,p,X.data)}}else{f?n.texSubImage2D(34069+V,0,0,0,m,p,I[V]):n.texImage2D(34069+V,0,v,m,p,I[V]);for(var Y=0;Y<d.length;Y++){var F=d[Y];f?n.texSubImage2D(34069+V,Y+1,0,0,m,p,F.image[V]):n.texImage2D(34069+V,Y+1,v,m,p,F.image[V])}}}B(i,A)&&Z(34067),o.__currentVersion=o.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,l):(n.activeTexture(33984+l),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){var l=i.get(e);void 0!==t&&N(l.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&M(e)},this.setupRenderTarget=function(t){var a=t.texture,g=i.get(t),s=i.get(a);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture()),s.__version=a.version,o.memory.textures++);var I=!0===t.isWebGLCubeRenderTarget,c=!0===t.isWebGLMultipleRenderTargets,C=G(t)||u;if(I){g.__webglFramebuffer=[];for(var d=0;d<6;d++)g.__webglFramebuffer[d]=e.createFramebuffer()}else{if(g.__webglFramebuffer=e.createFramebuffer(),c)if(l.drawBuffers)for(var h=t.texture,A=0,m=h.length;A<m;A++){var p=i.get(h[A]);void 0===p.__webglTexture&&(p.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===_(t)){var v=c?a:[a];g.__webglMultisampledFramebuffer=e.createFramebuffer(),g.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,g.__webglMultisampledFramebuffer);for(var f=0;f<v.length;f++){var b=v[f];g.__webglColorRenderbuffer[f]=e.createRenderbuffer(),e.bindRenderbuffer(36161,g.__webglColorRenderbuffer[f]);var y=r.convert(b.format,b.encoding),x=r.convert(b.type),w=q(b.internalFormat,y,x,b.encoding),W=L(t);e.renderbufferStorageMultisample(36161,W,w,t.width,t.height),e.framebufferRenderbuffer(36160,36064+f,36161,g.__webglColorRenderbuffer[f])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(g.__webglDepthRenderbuffer=e.createRenderbuffer(),z(g.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(I){n.bindTexture(34067,s.__webglTexture),H(34067,a,C);for(var R=0;R<6;R++)N(g.__webglFramebuffer[R],t,a,36064,34069+R);B(a,C)&&Z(34067),n.unbindTexture()}else if(c){for(var V=t.texture,k=0,X=V.length;k<X;k++){var Y=V[k],K=i.get(Y);n.bindTexture(3553,K.__webglTexture),H(3553,Y,C),N(g.__webglFramebuffer,t,Y,36064+k,3553),B(Y,C)&&Z(3553)}n.unbindTexture()}else{var F=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?F=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(F,s.__webglTexture),H(F,a,C),N(g.__webglFramebuffer,t,a,36064,F),B(a,C)&&Z(F),n.unbindTexture()}t.depthBuffer&&M(t)},this.updateRenderTargetMipmap=function(e){for(var t=G(e)||u,l=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,r=l.length;a<r;a++){var o=l[a];if(B(o,t)){var g=e.isWebGLCubeRenderTarget?34067:3553,s=i.get(o).__webglTexture;n.bindTexture(g,s),Z(g),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===_(t)){var l=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,r=t.height,o=16384,g=[],s=t.stencilBuffer?33306:36096,I=i.get(t),c=!0===t.isWebGLMultipleRenderTargets;if(c)for(var C=0;C<l.length;C++)n.bindFramebuffer(36160,I.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+C,36161,null),n.bindFramebuffer(36160,I.__webglFramebuffer),e.framebufferTexture2D(36009,36064+C,3553,null,0);n.bindFramebuffer(36008,I.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,I.__webglFramebuffer);for(var d=0;d<l.length;d++){g.push(36064+d),t.depthBuffer&&g.push(s);var h=void 0!==I.__ignoreDepthValues&&I.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),c&&e.framebufferRenderbuffer(36008,36064,36161,I.__webglColorRenderbuffer[d]),!0===h&&(e.invalidateFramebuffer(36008,[s]),e.invalidateFramebuffer(36009,[s])),c){var A=i.get(l[d]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,A,0)}e.blitFramebuffer(0,0,a,r,0,0,a,r,o,9728),m&&e.invalidateFramebuffer(36008,g)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),c)for(var p=0;p<l.length;p++){n.bindFramebuffer(36160,I.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+p,36161,I.__webglColorRenderbuffer[p]);var v=i.get(l[p]).__webglTexture;n.bindFramebuffer(36160,I.__webglFramebuffer),e.framebufferTexture2D(36009,36064+p,3553,v,0)}n.bindFramebuffer(36009,I.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=M,this.setupFrameBufferTexture=N,this.useMultisampledRTT=_}function Wg(e,t,n){var i=n.isWebGL2;return{convert:function(n){var l,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===et)return 5121;if(n===gt)return 32819;if(n===st)return 32820;if(n===tt)return 5120;if(n===nt)return 5122;if(n===it)return 5123;if(n===lt)return 5124;if(n===at)return 5125;if(n===rt)return 5126;if(n===ot)return i?5131:null!==(l=t.get("OES_texture_half_float"))?l.HALF_FLOAT_OES:null;if(n===ut)return 6406;if(n===Ct)return 6408;if(n===dt)return 6409;if(n===ht)return 6410;if(n===At)return 6402;if(n===mt)return 34041;if(n===pt)return 6403;if(n===ct)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Jn)return null!==(l=t.get("EXT_sRGB"))?l.SRGB_ALPHA_EXT:null;if(n===vt)return 36244;if(n===ft)return 33319;if(n===bt)return 33320;if(n===yt)return 36249;if(n===Gt||n===Bt||n===Zt||n===qt)if(a===un){if(null===(l=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===Gt)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Bt)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Zt)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===qt)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(l=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===Gt)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Bt)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Zt)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===qt)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===xt||n===wt||n===Wt||n===St){if(null===(l=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===xt)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===wt)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Wt)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===St)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Rt)return null!==(l=t.get("WEBGL_compressed_texture_etc1"))?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Vt||n===kt){if(null===(l=t.get("WEBGL_compressed_texture_etc")))return null;if(n===Vt)return a===un?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(n===kt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(n===Xt||n===Yt||n===Ht||n===Kt||n===Ft||n===Nt||n===zt||n===Mt||n===Lt||n===_t||n===Tt||n===Et||n===Jt||n===Ut){if(null===(l=t.get("WEBGL_compressed_texture_astc")))return null;if(n===Xt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Yt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ht)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Kt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Ft)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Nt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Mt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Lt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_t)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Tt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Et)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Jt)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ut)return a===un?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Dt){if(null===(l=t.get("EXT_texture_compression_bptc")))return null;if(n===Dt)return a===un?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===It?i?34042:null!==(l=t.get("WEBGL_depth_texture"))?l.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Sg=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=i,e}return y(n)}(Ja),Rg=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return y(n)}(Nl),Vg={type:"move"},kg=function(){function e(){f(this,e),this._targetRay=null,this._grip=null,this._hand=null}return y(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new Rg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new Rg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ki,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ki),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new Rg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ki,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ki),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,l=null,a=null,r=this._targetRay,o=this._grip,g=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(g&&e.hand){a=!0;var s,I=d(e.hand.values());try{for(I.s();!(s=I.n()).done;){var u=s.value,c=t.getJointPose(u,n);if(void 0===g.joints[u.jointName]){var C=new Rg;C.matrixAutoUpdate=!1,C.visible=!1,g.joints[u.jointName]=C,g.add(C)}var h=g.joints[u.jointName];null!==c&&(h.matrix.fromArray(c.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=c.radius),h.visible=null!==c}}catch(v){I.e(v)}finally{I.f()}var A=g.joints["index-finger-tip"],m=g.joints["thumb-tip"],p=A.position.distanceTo(m.position);g.inputState.pinching&&p>.025?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!g.inputState.pinching&&p<=.015&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(l=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(l.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),l.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(l.linearVelocity)):o.hasLinearVelocity=!1,l.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(l.angularVelocity)):o.hasAngularVelocity=!1);null!==r&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==l&&(i=l),null!==i&&(r.matrix.fromArray(i.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),i.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(i.linearVelocity)):r.hasLinearVelocity=!1,i.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(i.angularVelocity)):r.hasAngularVelocity=!1,this.dispatchEvent(Vg)))}return null!==r&&(r.visible=null!==i),null!==o&&(o.visible=null!==l),null!==g&&(g.visible=null!==a),this}}]),e}(),Xg=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o,g,s,I,u){var c;if(f(this,n),(u=void 0!==u?u:At)!==At&&u!==mt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===l&&u===At&&(l=at),void 0===l&&u===mt&&(l=It),(c=t.call(this,null,a,r,o,g,s,u,l,I)).isDepthTexture=!0,c.image={width:e,height:i},c.magFilter=void 0!==g?g:Te,c.minFilter=void 0!==s?s:Te,c.flipY=!1,c.generateMipmaps=!1,c}return y(n)}(wi),Yg=function(e){G(n,e);var t=w(n);function n(e,i){var l;f(this,n);var a=q(l=t.call(this)),r=null,o=1,g=null,s="local-floor",I=null,u=null,c=null,C=null,d=null,h=null,A=i.getContextAttributes(),m=null,p=null,v=[],b=[],y=new Ja;y.layers.enable(1),y.viewport=new Wi;var G=new Ja;G.layers.enable(2),G.viewport=new Wi;var B=[y,G],Z=new Sg;Z.layers.enable(1),Z.layers.enable(2);var x=null,w=null;function W(e){var t=b.indexOf(e.inputSource);if(-1!==t){var n=v[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function R(){r.removeEventListener("select",W),r.removeEventListener("selectstart",W),r.removeEventListener("selectend",W),r.removeEventListener("squeeze",W),r.removeEventListener("squeezestart",W),r.removeEventListener("squeezeend",W),r.removeEventListener("end",R),r.removeEventListener("inputsourceschange",V);for(var t=0;t<v.length;t++){var n=b[t];null!==n&&(b[t]=null,v[t].disconnect(n))}x=null,w=null,e.setRenderTarget(m),d=null,C=null,c=null,r=null,p=null,F.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function V(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=b.indexOf(n);i>=0&&(b[i]=null,v[i].dispatchEvent({type:"disconnected",data:n}))}for(var l=0;l<e.added.length;l++){var a=e.added[l],r=b.indexOf(a);if(-1===r){for(var o=0;o<v.length;o++){if(o>=b.length){b.push(a),r=o;break}if(null===b[o]){b[o]=a,r=o;break}}if(-1===r)break}var g=v[r];g&&g.dispatchEvent({type:"connected",data:a})}}l.cameraAutoUpdate=!0,l.enabled=!1,l.isPresenting=!1,l.getController=function(e){var t=v[e];return void 0===t&&(t=new kg,v[e]=t),t.getTargetRaySpace()},l.getControllerGrip=function(e){var t=v[e];return void 0===t&&(t=new kg,v[e]=t),t.getGripSpace()},l.getHand=function(e){var t=v[e];return void 0===t&&(t=new kg,v[e]=t),t.getHandSpace()},l.setFramebufferScaleFactor=function(e){o=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},l.setReferenceSpaceType=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},l.getReferenceSpace=function(){return I||g},l.setReferenceSpace=function(e){I=e},l.getBaseLayer=function(){return null!==C?C:d},l.getBinding=function(){return c},l.getFrame=function(){return h},l.getSession=function(){return r},l.setSession=function(){var t=S(k().mark((function t(n){var l,u,h,v,f;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=n)){t.next=25;break}if(m=e.getRenderTarget(),r.addEventListener("select",W),r.addEventListener("selectstart",W),r.addEventListener("selectend",W),r.addEventListener("squeeze",W),r.addEventListener("squeezestart",W),r.addEventListener("squeezeend",W),r.addEventListener("end",R),r.addEventListener("inputsourceschange",V),!0===A.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===r.renderState.layers||!1===e.capabilities.isWebGL2?(l={antialias:void 0!==r.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:o},d=new XRWebGLLayer(r,i,l),r.updateRenderState({baseLayer:d}),p=new Si(d.framebufferWidth,d.framebufferHeight,{format:Ct,type:et,encoding:e.outputEncoding})):(u=null,h=null,v=null,A.depth&&(v=A.stencil?35056:33190,u=A.stencil?mt:At,h=A.stencil?It:at),f={colorFormat:32856,depthFormat:v,scaleFactor:o},c=new XRWebGLBinding(r,i),C=c.createProjectionLayer(f),r.updateRenderState({layers:[C]}),p=new Si(C.textureWidth,C.textureHeight,{format:Ct,type:et,depthTexture:new Xg(C.textureWidth,C.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,u),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(p).__ignoreDepthValues=C.ignoreDepthValues),p.isXRRenderTarget=!0,this.setFoveation(1),I=null,t.next=20,r.requestReferenceSpace(s);case 20:g=t.sent,F.setContext(r),F.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var X=new Ki,Y=new Ki;function H(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}l.updateCamera=function(e){if(null!==r){Z.near=G.near=y.near=e.near,Z.far=G.far=y.far=e.far,x===Z.near&&w===Z.far||(r.updateRenderState({depthNear:Z.near,depthFar:Z.far}),x=Z.near,w=Z.far);var t=e.parent,n=Z.cameras;H(Z,t);for(var i=0;i<n.length;i++)H(n[i],t);Z.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),e.position.copy(Z.position),e.quaternion.copy(Z.quaternion),e.scale.copy(Z.scale),e.matrix.copy(Z.matrix),e.matrixWorld.copy(Z.matrixWorld);for(var l=e.children,a=0,o=l.length;a<o;a++)l[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){X.setFromMatrixPosition(t.matrixWorld),Y.setFromMatrixPosition(n.matrixWorld);var i=X.distanceTo(Y),l=t.projectionMatrix.elements,a=n.projectionMatrix.elements,r=l[14]/(l[10]-1),o=l[14]/(l[10]+1),g=(l[9]+1)/l[5],s=(l[9]-1)/l[5],I=(l[8]-1)/l[0],u=(a[8]+1)/a[0],c=r*I,C=r*u,d=i/(-I+u),h=d*-I;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(h),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var A=r+d,m=o+d,p=c-h,v=C+(i-h),f=g*o/m*A,b=s*o/m*A;e.projectionMatrix.makePerspective(p,v,f,b,A,m)}(Z,y,G):Z.projectionMatrix.copy(y.projectionMatrix)}},l.getCamera=function(){return Z},l.getFoveation=function(){return null!==C?C.fixedFoveation:null!==d?d.fixedFoveation:void 0},l.setFoveation=function(e){null!==C&&(C.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};var K=null;var F=new lr;return F.setAnimationLoop((function(t,n){if(u=n.getViewerPose(I||g),h=n,null!==u){var i=u.views;null!==d&&(e.setRenderTargetFramebuffer(p,d.framebuffer),e.setRenderTarget(p));var l=!1;i.length!==Z.cameras.length&&(Z.cameras.length=0,l=!0);for(var a=0;a<i.length;a++){var r=i[a],o=null;if(null!==d)o=d.getViewport(r);else{var s=c.getViewSubImage(C,r);o=s.viewport,0===a&&(e.setRenderTargetTextures(p,s.colorTexture,C.ignoreDepthValues?void 0:s.depthStencilTexture),e.setRenderTarget(p))}var A=B[a];void 0===A&&((A=new Ja).layers.enable(a),A.viewport=new Wi,B[a]=A),A.matrix.fromArray(r.transform.matrix),A.projectionMatrix.fromArray(r.projectionMatrix),A.viewport.set(o.x,o.y,o.width,o.height),0===a&&Z.matrix.copy(A.matrix),!0===l&&Z.cameras.push(A)}}for(var m=0;m<v.length;m++){var f=b[m],y=v[m];null!==f&&void 0!==y&&y.update(f,n,I||g)}K&&K(t,n),h=null})),l.setAnimationLoop=function(e){K=e},l.dispose=function(){},l}return y(n)}(Un);function Hg(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===J&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===J&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var l,a,r=t.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var o=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*o}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?l=i.map:i.specularMap?l=i.specularMap:i.displacementMap?l=i.displacementMap:i.normalMap?l=i.normalMap:i.bumpMap?l=i.bumpMap:i.roughnessMap?l=i.roughnessMap:i.metalnessMap?l=i.metalnessMap:i.alphaMap?l=i.alphaMap:i.emissiveMap?l=i.emissiveMap:i.clearcoatMap?l=i.clearcoatMap:i.clearcoatNormalMap?l=i.clearcoatNormalMap:i.clearcoatRoughnessMap?l=i.clearcoatRoughnessMap:i.iridescenceMap?l=i.iridescenceMap:i.iridescenceThicknessMap?l=i.iridescenceThicknessMap:i.specularIntensityMap?l=i.specularIntensityMap:i.specularColorMap?l=i.specularColorMap:i.transmissionMap?l=i.transmissionMap:i.thicknessMap?l=i.thicknessMap:i.sheenColorMap?l=i.sheenColorMap:i.sheenRoughnessMap&&(l=i.sheenRoughnessMap),void 0!==l&&(l.isWebGLRenderTarget&&(l=l.texture),!0===l.matrixAutoUpdate&&l.updateMatrix(),n.uvTransform.value.copy(l.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,l,a,r){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===J&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,r)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var l;t.map?l=t.map:t.alphaMap&&(l=t.alphaMap);void 0!==l&&(!0===l.matrixAutoUpdate&&l.updateMatrix(),e.uvTransform.value.copy(l.matrix))}(e,i,l,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Kg(){var e=ui("canvas");return e.style.display="block",e}function Fg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:Kg(),i=void 0!==e.context?e.context:null,l=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,r=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,g=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,s=void 0!==e.powerPreference?e.powerPreference:"default",I=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var u=null,c=null,C=[],d=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=In,this.physicallyCorrectLights=!1,this.toneMapping=We,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var h=this,A=!1,m=0,p=0,v=null,f=-1,b=null,y=new Wi,G=new Wi,B=null,Z=n.width,q=n.height,x=1,w=null,W=null,S=new Wi(0,0,Z,q),R=new Wi(0,0,Z,q),V=!1,k=new ir,Y=!1,H=!1,K=null,F=new dl,N=new ri,z=new Ki,M={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function L(){return null===v?x:1}var _,T,D,Q,P,O,j,$,ee,te,ne,ie,le,ae,re,oe,ge,se,Ie,ue,ce,Ce,de,he=i;function Ae(e,t){for(var i=0;i<e.length;i++){var l=e[i],a=n.getContext(l,t);if(null!==a)return a}return null}try{var me={alpha:!0,depth:l,stencil:a,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:g,powerPreference:s,failIfMajorPerformanceCaveat:I};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(X)),n.addEventListener("webglcontextlost",be,!1),n.addEventListener("webglcontextrestored",ye,!1),n.addEventListener("webglcontextcreationerror",Ge,!1),null===he){var pe=["webgl2","webgl","experimental-webgl"];if(!0===h.isWebGL1Renderer&&pe.shift(),null===(he=Ae(pe,me)))throw Ae(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}function ve(){_=new Rr(he),T=new Cr(he,_,e),_.init(T),Ce=new Wg(he,_,T),D=new xg(he,_,T),Q=new Xr,P=new Cg,O=new wg(he,_,D,P,T,Ce,Q),j=new hr(h),$=new Sr(h),ee=new ar(he,T),de=new ur(he,_,ee,T),te=new Vr(he,ee,Q,de),ne=new Nr(he,te,ee,Q),Ie=new Fr(he,T,O),oe=new dr(P),ie=new cg(h,j,$,_,T,de,oe),le=new Hg(h,P),ae=new mg,re=new Gg(_,T),se=new Ir(h,j,D,ne,t,o),ge=new qg(h,ne,T),ue=new cr(he,_,Q,T),ce=new kr(he,_,Q,T),Q.programs=ie.programs,h.capabilities=T,h.extensions=_,h.properties=P,h.renderLists=ae,h.shadowMap=ge,h.state=D,h.info=Q}ve();var fe=new Yg(h,he);function be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;var e=Q.autoReset,t=ge.enabled,n=ge.autoUpdate,i=ge.needsUpdate,l=ge.type;ve(),Q.autoReset=e,ge.enabled=t,ge.autoUpdate=n,ge.needsUpdate=i,ge.type=l}function Ge(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Be(e){var t=e.target;t.removeEventListener("dispose",Be),Ze(t)}function Ze(e){qe(e),P.remove(e)}function qe(e){var t=P.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))}this.xr=fe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=_.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=_.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return x},this.setPixelRatio=function(e){void 0!==e&&(x=e,this.setSize(Z,q,!1))},this.getSize=function(e){return e.set(Z,q)},this.setSize=function(e,t,i){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=e,q=t,n.width=Math.floor(e*x),n.height=Math.floor(t*x),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(Z*x,q*x).floor()},this.setDrawingBufferSize=function(e,t,i){Z=e,q=t,x=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(y)},this.getViewport=function(e){return e.copy(S)},this.setViewport=function(e,t,n,i){e.isVector4?S.set(e.x,e.y,e.z,e.w):S.set(e,t,n,i),D.viewport(y.copy(S).multiplyScalar(x).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),D.scissor(G.copy(R).multiplyScalar(x).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(e){D.setScissorTest(V=e)},this.setOpaqueSort=function(e){w=e},this.setTransparentSort=function(e){W=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),he.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",be,!1),n.removeEventListener("webglcontextrestored",ye,!1),n.removeEventListener("webglcontextcreationerror",Ge,!1),ae.dispose(),re.dispose(),P.dispose(),j.dispose(),$.dispose(),ne.dispose(),de.dispose(),ie.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",Se),fe.removeEventListener("sessionend",Re),K&&(K.dispose(),K=null),Ve.stop()},this.renderBufferDirect=function(e,t,n,i,l,a){null===t&&(t=M);var r=l.isMesh&&l.matrixWorld.determinant()<0,o=ze(e,t,n,i,l);D.setMaterial(i,r);var g=n.index,s=n.attributes.position;if(null===g){if(void 0===s||0===s.count)return}else if(0===g.count)return;var I,u=1;!0===i.wireframe&&(g=te.getWireframeAttribute(n),u=2),de.setup(l,i,o,n,g);var c=ue;null!==g&&(I=ee.get(g),(c=ce).setIndex(I));var C=null!==g?g.count:s.count,d=n.drawRange.start*u,h=n.drawRange.count*u,A=null!==a?a.start*u:0,m=null!==a?a.count*u:1/0,p=Math.max(d,A),v=Math.min(C,d+h,A+m)-1,f=Math.max(0,v-p+1);if(0!==f){if(l.isMesh)!0===i.wireframe?(D.setLineWidth(i.wireframeLinewidth*L()),c.setMode(1)):c.setMode(4);else if(l.isLine){var b=i.linewidth;void 0===b&&(b=1),D.setLineWidth(b*L()),l.isLineSegments?c.setMode(1):l.isLineLoop?c.setMode(2):c.setMode(3)}else l.isPoints?c.setMode(0):l.isSprite&&c.setMode(4);if(l.isInstancedMesh)c.renderInstances(p,f,l.count);else if(n.isInstancedBufferGeometry){var y=Math.min(n.instanceCount,n._maxInstanceCount);c.renderInstances(p,f,y)}else c.render(p,f)}},this.compile=function(e,t){(c=re.get(e)).init(),d.push(c),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(c.pushLight(e),e.castShadow&&c.pushShadow(e))})),c.setupLights(h.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var i=0;i<n.length;i++){Fe(n[i],e,t)}else Fe(n,e,t)})),d.pop(),c=null};var xe=null;function we(e){xe&&xe(e)}function Se(){Ve.stop()}function Re(){Ve.start()}var Ve=new lr;function ke(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)c.pushLight(e),e.castShadow&&c.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var l=ne.update(e),a=e.material;a.visible&&u.push(e,l,a,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Q.render.frame&&(e.skeleton.update(),e.skeleton.frame=Q.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);var r=ne.update(e),o=e.material;if(Array.isArray(o))for(var g=r.groups,s=0,I=g.length;s<I;s++){var C=g[s],d=o[C.materialIndex];d&&d.visible&&u.push(e,r,d,n,z.z,C)}else o.visible&&u.push(e,r,o,n,z.z,null)}for(var h=e.children,A=0,m=h.length;A<m;A++)ke(h[A],t,n,i)}}function Xe(e,t,n,i){var l=e.opaque,a=e.transmissive,r=e.transparent;c.setupLightsView(n),a.length>0&&Ye(l,t,n),i&&D.viewport(y.copy(i)),l.length>0&&He(l,t,n),a.length>0&&He(a,t,n),r.length>0&&He(r,t,n),D.buffers.depth.setTest(!0),D.buffers.depth.setMask(!0),D.buffers.color.setMask(!0),D.setPolygonOffset(!1)}function Ye(e,t,n){var i=T.isWebGL2;null===K&&(K=new Si(1,1,{generateMipmaps:!0,type:_.has("EXT_color_buffer_half_float")?ot:et,minFilter:je,samples:i&&!0===r?4:0})),h.getDrawingBufferSize(N),i?K.setSize(N.x,N.y):K.setSize(li(N.x),li(N.y));var l=h.getRenderTarget();h.setRenderTarget(K),h.clear();var a=h.toneMapping;h.toneMapping=We,He(e,t,n),h.toneMapping=a,O.updateMultisampleRenderTarget(K),O.updateRenderTargetMipmap(K),h.setRenderTarget(l)}function He(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,l=0,a=e.length;l<a;l++){var r=e[l],o=r.object,g=r.geometry,s=null===i?r.material:i,I=r.group;o.layers.test(n.layers)&&Ke(o,t,n,g,s,I)}}function Ke(e,t,n,i,l,a){e.onBeforeRender(h,t,n,i,l,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),l.onBeforeRender(h,t,n,i,e,a),!0===l.transparent&&l.side===U?(l.side=J,l.needsUpdate=!0,h.renderBufferDirect(n,t,i,l,e,a),l.side=E,l.needsUpdate=!0,h.renderBufferDirect(n,t,i,l,e,a),l.side=U):h.renderBufferDirect(n,t,i,l,e,a),e.onAfterRender(h,t,n,i,l,a)}function Fe(e,t,n){!0!==t.isScene&&(t=M);var i=P.get(e),l=c.state.lights,a=c.state.shadowsArray,r=l.state.version,o=ie.getParameters(e,l.state,a,t,n),g=ie.getProgramCacheKey(o),s=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?$:j).get(e.envMap||i.environment),void 0===s&&(e.addEventListener("dispose",Be),s=new Map,i.programs=s);var I=s.get(g);if(void 0!==I){if(i.currentProgram===I&&i.lightsStateVersion===r)return Ne(e,o),I}else o.uniforms=ie.getUniforms(e),e.onBuild(n,o,h),e.onBeforeCompile(o,h),I=ie.acquireProgram(o,g),s.set(g,I),i.uniforms=o.uniforms;var u=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=oe.uniform),Ne(e,o),i.needsLights=Le(e),i.lightsStateVersion=r,i.needsLights&&(u.ambientLightColor.value=l.state.ambient,u.lightProbe.value=l.state.probe,u.directionalLights.value=l.state.directional,u.directionalLightShadows.value=l.state.directionalShadow,u.spotLights.value=l.state.spot,u.spotLightShadows.value=l.state.spotShadow,u.rectAreaLights.value=l.state.rectArea,u.ltc_1.value=l.state.rectAreaLTC1,u.ltc_2.value=l.state.rectAreaLTC2,u.pointLights.value=l.state.point,u.pointLightShadows.value=l.state.pointShadow,u.hemisphereLights.value=l.state.hemi,u.directionalShadowMap.value=l.state.directionalShadowMap,u.directionalShadowMatrix.value=l.state.directionalShadowMatrix,u.spotShadowMap.value=l.state.spotShadowMap,u.spotShadowMatrix.value=l.state.spotShadowMatrix,u.pointShadowMap.value=l.state.pointShadowMap,u.pointShadowMatrix.value=l.state.pointShadowMatrix);var C=I.getUniforms(),d=To.seqWithValue(C.seq,u);return i.currentProgram=I,i.uniformsList=d,I}function Ne(e,t){var n=P.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function ze(e,t,n,i,l){!0!==t.isScene&&(t=M),O.resetTextureUnits();var a=t.fog,r=i.isMeshStandardMaterial?t.environment:null,o=null===v?h.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:In,g=(i.isMeshStandardMaterial?$:j).get(i.envMap||r),s=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,I=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,C=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,A=i.toneMapped?h.toneMapping:We,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,p=void 0!==m?m.length:0,y=P.get(i),G=c.state.lights;if(!0===Y&&(!0===H||e!==b)){var B=e===b&&i.id===f;oe.setState(i,e,B)}var Z=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==G.state.version||y.outputEncoding!==o||l.isInstancedMesh&&!1===y.instancing?Z=!0:l.isInstancedMesh||!0!==y.instancing?l.isSkinnedMesh&&!1===y.skinning?Z=!0:l.isSkinnedMesh||!0!==y.skinning?y.envMap!==g||!0===i.fog&&y.fog!==a?Z=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===oe.numPlanes&&y.numIntersection===oe.numIntersection?(y.vertexAlphas!==s||y.vertexTangents!==I||y.morphTargets!==u||y.morphNormals!==C||y.morphColors!==d||y.toneMapping!==A||!0===T.isWebGL2&&y.morphTargetsCount!==p)&&(Z=!0):Z=!0:Z=!0:Z=!0:(Z=!0,y.__version=i.version);var w=y.currentProgram;!0===Z&&(w=Fe(i,t,l));var W=!1,S=!1,R=!1,V=w.getUniforms(),k=y.uniforms;if(D.useProgram(w.program)&&(W=!0,S=!0,R=!0),i.id!==f&&(f=i.id,S=!0),W||b!==e){if(V.setValue(he,"projectionMatrix",e.projectionMatrix),T.logarithmicDepthBuffer&&V.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,S=!0,R=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var X=V.map.cameraPosition;void 0!==X&&X.setValue(he,z.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&V.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||l.isSkinnedMesh)&&V.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(l.isSkinnedMesh){V.setOptional(he,l,"bindMatrix"),V.setOptional(he,l,"bindMatrixInverse");var F=l.skeleton;F&&(T.floatVertexTextures?(null===F.boneTexture&&F.computeBoneTexture(),V.setValue(he,"boneTexture",F.boneTexture,O),V.setValue(he,"boneTextureSize",F.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var N=n.morphAttributes;return(void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===T.isWebGL2)&&Ie.update(l,n,i,w),(S||y.receiveShadow!==l.receiveShadow)&&(y.receiveShadow=l.receiveShadow,V.setValue(he,"receiveShadow",l.receiveShadow)),S&&(V.setValue(he,"toneMappingExposure",h.toneMappingExposure),y.needsLights&&Me(k,R),a&&!0===i.fog&&le.refreshFogUniforms(k,a),le.refreshMaterialUniforms(k,i,x,q,K),To.upload(he,y.uniformsList,k,O)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(To.upload(he,y.uniformsList,k,O),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&V.setValue(he,"center",l.center),V.setValue(he,"modelViewMatrix",l.modelViewMatrix),V.setValue(he,"normalMatrix",l.normalMatrix),V.setValue(he,"modelMatrix",l.matrixWorld),w}function Me(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Le(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ve.setAnimationLoop(we),"undefined"!==typeof self&&Ve.setContext(self),this.setAnimationLoop=function(e){xe=e,fe.setAnimationLoop(e),null===e?Ve.stop():Ve.start()},fe.addEventListener("sessionstart",Se),fe.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==A){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(h,e,t,v),(c=re.get(e,d.length)).init(),d.push(c),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(F),H=this.localClippingEnabled,Y=oe.init(this.clippingPlanes,H,t),(u=ae.get(e,C.length)).init(),C.push(u),ke(e,t,0,h.sortObjects),u.finish(),!0===h.sortObjects&&u.sort(w,W),!0===Y&&oe.beginShadows();var n=c.state.shadowsArray;if(ge.render(n,e,t),!0===Y&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(u,e),c.setupLights(h.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,l=0,a=i.length;l<a;l++){var r=i[l];Xe(u,e,r,r.viewport)}else Xe(u,e,t);null!==v&&(O.updateMultisampleRenderTarget(v),O.updateRenderTargetMipmap(v)),!0===e.isScene&&e.onAfterRender(h,e,t),de.resetDefaultState(),f=-1,b=null,d.pop(),c=d.length>0?d[d.length-1]:null,C.pop(),u=C.length>0?C[C.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return p},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(e,t,n){P.get(e.texture).__webglTexture=t,P.get(e.depthTexture).__webglTexture=n;var i=P.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===_.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=P.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v=e,m=t,p=n;var i=!0;if(e){var l=P.get(e);void 0!==l.__useDefaultFramebuffer?(D.bindFramebuffer(36160,null),i=!1):void 0===l.__webglFramebuffer?O.setupRenderTarget(e):l.__hasExternalTextures&&O.rebindTextures(e,P.get(e.texture).__webglTexture,P.get(e.depthTexture).__webglTexture)}var a=null,r=!1,o=!1;if(e){var g=e.texture;(g.isData3DTexture||g.isDataArrayTexture)&&(o=!0);var s=P.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=s[t],r=!0):a=T.isWebGL2&&e.samples>0&&!1===O.useMultisampledRTT(e)?P.get(e).__webglMultisampledFramebuffer:s,y.copy(e.viewport),G.copy(e.scissor),B=e.scissorTest}else y.copy(S).multiplyScalar(x).floor(),G.copy(R).multiplyScalar(x).floor(),B=V;var I=D.bindFramebuffer(36160,a);if(I&&T.drawBuffers&&i&&D.drawBuffers(e,a),D.viewport(y),D.scissor(G),D.setScissorTest(B),r){var u=P.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,u.__webglTexture,n)}else if(o){var c=P.get(e.texture),C=t||0;he.framebufferTextureLayer(36160,36064,c.__webglTexture,n||0,C)}f=-1},this.readRenderTargetPixels=function(e,t,n,i,l,a,r){if(e&&e.isWebGLRenderTarget){var o=P.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==r&&(o=o[r]),o){D.bindFramebuffer(36160,o);try{var g=e.texture,s=g.format,I=g.type;if(s!==Ct&&Ce.convert(s)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var u=I===ot&&(_.has("EXT_color_buffer_half_float")||T.isWebGL2&&_.has("EXT_color_buffer_float"));if(I!==et&&Ce.convert(I)!==he.getParameter(35738)&&(I!==rt||!(T.isWebGL2||_.has("OES_texture_float")||_.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-l&&he.readPixels(t,n,i,l,Ce.convert(s),Ce.convert(I),a)}finally{var c=null!==v?P.get(v).__webglFramebuffer:null;D.bindFramebuffer(36160,c)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),l=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);O.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,l,a),D.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=t.image.width,a=t.image.height,r=Ce.convert(n.format),o=Ce.convert(n.type);O.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,i,e.x,e.y,l,a,r,o,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,r,t.mipmaps[0].data):he.texSubImage2D(3553,i,e.x,e.y,r,o,t.image),0===i&&n.generateMipmaps&&he.generateMipmap(3553),D.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(h.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,r=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,g=e.max.z-e.min.z+1,s=Ce.convert(i.format),I=Ce.convert(i.type);if(i.isData3DTexture)O.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");O.setTexture2DArray(i,0),a=35866}he.pixelStorei(37440,i.flipY),he.pixelStorei(37441,i.premultiplyAlpha),he.pixelStorei(3317,i.unpackAlignment);var u=he.getParameter(3314),c=he.getParameter(32878),C=he.getParameter(3316),d=he.getParameter(3315),A=he.getParameter(32877),m=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,m.width),he.pixelStorei(32878,m.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(a,l,t.x,t.y,t.z,r,o,g,s,I,m.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,l,t.x,t.y,t.z,r,o,g,s,m.data)):he.texSubImage3D(a,l,t.x,t.y,t.z,r,o,g,s,I,m),he.pixelStorei(3314,u),he.pixelStorei(32878,c),he.pixelStorei(3316,C),he.pixelStorei(3315,d),he.pixelStorei(32877,A),0===l&&i.generateMipmaps&&he.generateMipmap(a),D.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?O.setTextureCube(e,0):e.isData3DTexture?O.setTexture3D(e,0):e.isDataArrayTexture?O.setTexture2DArray(e,0):O.setTexture2D(e,0),D.unbindTexture()},this.resetState=function(){m=0,p=0,v=null,D.reset(),de.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Ng=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Fg);Ng.prototype.isWebGL1Renderer=!0;var zg,Mg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;f(this,e),this.isFogExp2=!0,this.name="",this.color=new Gi(t),this.density=n}return y(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Lg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;f(this,e),this.isFog=!0,this.name="",this.color=new Gi(t),this.near=n,this.far=i}return y(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),_g=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:q(e)})),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Nl),Tg=function(){function e(t,n){f(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Yn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=jn()}return y(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,l=this.stride;i<l;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Eg=new Ki,Jg=function(){function e(t,n,i){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===l}return y(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Eg.fromBufferAttribute(this,t),Eg.applyMatrix4(e),this.setXYZ(t,Eg.x,Eg.y,Eg.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Eg.fromBufferAttribute(this,t),Eg.applyNormalMatrix(e),this.setXYZ(t,Eg.x,Eg.y,Eg.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Eg.fromBufferAttribute(this,t),Eg.transformDirection(e),this.setXYZ(t,Eg.x,Eg.y,Eg.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,l){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=l,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var l=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[l+a]);return new na(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,l=0;l<this.itemSize;l++)t.push(this.data.array[i+l]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Ug=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new Gi(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(jl),Dg=new Ki,Qg=new Ki,Pg=new Ki,Og=new ri,jg=new ri,$g=new dl,es=new Ki,ts=new Ki,ns=new Ki,is=new ri,ls=new ri,as=new ri,rs=function(e){G(n,e);var t=w(n);function n(e){var i;if(f(this,n),(i=t.call(this)).isSprite=!0,i.type="Sprite",void 0===zg){zg=new fa;var l=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Tg(l,5);zg.setIndex([0,1,2,0,2,3]),zg.setAttribute("position",new Jg(a,3,0,!1)),zg.setAttribute("uv",new Jg(a,2,3,!1))}return i.geometry=zg,i.material=void 0!==e?e:new Ug,i.center=new ri(.5,.5),i}return y(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qg.setFromMatrixScale(this.matrixWorld),$g.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Pg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Qg.multiplyScalar(-Pg.z);var n,i,l=this.material.rotation;0!==l&&(i=Math.cos(l),n=Math.sin(l));var a=this.center;os(es.set(-.5,-.5,0),Pg,a,Qg,n,i),os(ts.set(.5,-.5,0),Pg,a,Qg,n,i),os(ns.set(.5,.5,0),Pg,a,Qg,n,i),is.set(0,0),ls.set(1,0),as.set(1,1);var r=e.ray.intersectTriangle(es,ts,ns,!1,Dg);if(null!==r||(os(ts.set(-.5,.5,0),Pg,a,Qg,n,i),ls.set(0,1),null!==(r=e.ray.intersectTriangle(es,ns,ts,!1,Dg)))){var o=e.ray.origin.distanceTo(Dg);o<e.near||o>e.far||t.push({distance:o,point:Dg.clone(),uv:Pl.getUV(Dg,es,ts,ns,is,ls,as,new ri),face:null,object:this})}}},{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Nl);function os(e,t,n,i,l,a){Og.subVectors(e,n).addScalar(.5).multiply(i),void 0!==l?(jg.x=a*Og.x-l*Og.y,jg.y=l*Og.x+a*Og.y):jg.copy(Og),e.copy(t),e.x+=jg.x,e.y+=jg.y,e.applyMatrix4($g)}var gs=new Ki,ss=new Ki,Is=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(q(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return y(n,[{key:"copy",value:function(e){V(B(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,l=t.length;i<l;i++){var a=t[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,i=this.levels;for(n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){gs.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(gs);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){gs.setFromMatrixPosition(e.matrixWorld),ss.setFromMatrixPosition(this.matrixWorld);var n,i,l=gs.distanceTo(ss)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i&&l>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,l=0,a=i.length;l<a;l++){var r=i[l];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}]),n}(Nl),us=new Ki,cs=new Wi,Cs=new Wi,ds=new Ki,hs=new dl,As=function(e){G(n,e);var t=w(n);function n(e,i){var l;return f(this,n),(l=t.call(this,e,i)).isSkinnedMesh=!0,l.type="SkinnedMesh",l.bindMode="attached",l.bindMatrix=new dl,l.bindMatrixInverse=new dl,l}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Wi,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){V(B(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;cs.fromBufferAttribute(i.attributes.skinIndex,e),Cs.fromBufferAttribute(i.attributes.skinWeight,e),us.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var l=0;l<4;l++){var a=Cs.getComponent(l);if(0!==a){var r=cs.getComponent(l);hs.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ds.copy(us).applyMatrix4(hs),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Fa),ms=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return y(n)}(Nl),ps=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,I=arguments.length>7?arguments[7]:void 0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Te,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Te,C=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;return f(this,n),(e=t.call(this,null,g,s,I,u,c,r,o,C,d)).isDataTexture=!0,e.image={data:i,width:l,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return y(n)}(wi),vs=new dl,fs=new dl,bs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f(this,e),this.uuid=jn(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return y(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new dl)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new dl;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,l=this.bones.length;i<l;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,l=0,a=e.length;l<a;l++){var r=e[l]?e[l].matrixWorld:fs;vs.multiplyMatrices(r,t[l]),vs.toArray(n,16*l)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=ii(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new ps(t,e,e,Ct,rt);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var l=e.bones[n],a=t[l];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),a=new ms),this.bones.push(a),this.boneInverses.push((new dl).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,l=t.length;i<l;i++){var a=t[i];e.bones.push(a.uuid);var r=n[i];e.boneInverses.push(r.toArray())}return e}}]),e}(),ys=function(e){G(n,e);var t=w(n);function n(e,i,l){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return f(this,n),"number"===typeof l&&(r=l,l=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,i,l)).isInstancedBufferAttribute=!0,a.meshPerAttribute=r,a}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(na),Gs=new dl,Bs=new dl,Zs=[],qs=new Fa,xs=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,e,i)).isInstancedMesh=!0,a.instanceMatrix=new ys(new Float32Array(16*l),16),a.instanceColor=null,a.count=l,a.frustumCulled=!1,a}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(qs.geometry=this.geometry,qs.material=this.material,void 0!==qs.material)for(var l=0;l<i;l++){this.getMatrixAt(l,Gs),Bs.multiplyMatrices(n,Gs),qs.matrixWorld=Bs,qs.raycast(e,Zs);for(var a=0,r=Zs.length;a<r;a++){var o=Zs[a];o.instanceId=l,o.object=this,t.push(o)}Zs.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new ys(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Fa),ws=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new Gi(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(jl),Ws=new Ki,Ss=new Ki,Rs=new dl,Vs=new Cl,ks=new al,Xs=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fa,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ws;return f(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=i,e.material=l,e.updateMorphTargets(),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,l=t.count;i<l;i++)Ws.fromBufferAttribute(t,i-1),Ss.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Ws.distanceTo(Ss);e.setAttribute("lineDistance",new ua(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,l=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ks.copy(n.boundingSphere),ks.applyMatrix4(i),ks.radius+=l,!1!==e.ray.intersectsSphere(ks)){Rs.copy(i).invert(),Vs.copy(e.ray).applyMatrix4(Rs);var r=l/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,g=new Ki,s=new Ki,I=new Ki,u=new Ki,c=this.isLineSegments?2:1,C=n.index,d=n.attributes.position;if(null!==C)for(var h=Math.max(0,a.start),A=Math.min(C.count,a.start+a.count)-1;h<A;h+=c){var m=C.getX(h),p=C.getX(h+1);if(g.fromBufferAttribute(d,m),s.fromBufferAttribute(d,p),!(Vs.distanceSqToSegment(g,s,u,I)>o)){u.applyMatrix4(this.matrixWorld);var v=e.ray.origin.distanceTo(u);v<e.near||v>e.far||t.push({distance:v,point:I.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this})}}else for(var f=Math.max(0,a.start),b=Math.min(d.count,a.start+a.count)-1;f<b;f+=c){if(g.fromBufferAttribute(d,f),s.fromBufferAttribute(d,f+1),!(Vs.distanceSqToSegment(g,s,u,I)>o)){u.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(u);y<e.near||y>e.far||t.push({distance:y,point:I.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,l=n.length;i<l;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(Nl),Ys=new Ki,Hs=new Ki,Ks=function(e){G(n,e);var t=w(n);function n(e,i){var l;return f(this,n),(l=t.call(this,e,i)).isLineSegments=!0,l.type="LineSegments",l}return y(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,l=t.count;i<l;i+=2)Ys.fromBufferAttribute(t,i),Hs.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ys.distanceTo(Hs);e.setAttribute("lineDistance",new ua(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Xs),Fs=function(e){G(n,e);var t=w(n);function n(e,i){var l;return f(this,n),(l=t.call(this,e,i)).isLineLoop=!0,l.type="LineLoop",l}return y(n)}(Xs),Ns=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isPointsMaterial=!0,i.type="PointsMaterial",i.color=new Gi(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(jl),zs=new dl,Ms=new Cl,Ls=new al,_s=new Ki,Ts=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fa,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ns;return f(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=i,e.material=l,e.updateMorphTargets(),e}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,l=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ls.copy(n.boundingSphere),Ls.applyMatrix4(i),Ls.radius+=l,!1!==e.ray.intersectsSphere(Ls)){zs.copy(i).invert(),Ms.copy(e.ray).applyMatrix4(zs);var r=l/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,g=n.index,s=n.attributes.position;if(null!==g)for(var I=Math.max(0,a.start),u=Math.min(g.count,a.start+a.count);I<u;I++){var c=g.getX(I);_s.fromBufferAttribute(s,c),Es(_s,c,o,i,e,t,this)}else for(var C=Math.max(0,a.start),d=Math.min(s.count,a.start+a.count);C<d;C++)_s.fromBufferAttribute(s,C),Es(_s,C,o,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,l=n.length;i<l;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(Nl);function Es(e,t,n,i,l,a,r){var o=Ms.distanceSqToPoint(e);if(o<n){var g=new Ki;Ms.closestPointToPoint(e,g),g.applyMatrix4(i);var s=l.ray.origin.distanceTo(g);if(s<l.near||s>l.far)return;a.push({distance:s,distanceToRay:Math.sqrt(o),point:g,index:t,face:null,object:r})}}var Js=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o,g,s,I){var u;f(this,n),(u=t.call(this,e,i,l,a,r,o,g,s,I)).isVideoTexture=!0,u.minFilter=void 0!==o?o:Qe,u.magFilter=void 0!==r?r:Qe,u.generateMipmaps=!1;var c=q(u);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})),u}return y(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(wi),Us=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,{width:e,height:i})).isFramebufferTexture=!0,a.format=l,a.magFilter=Te,a.minFilter=Te,a.generateMipmaps=!1,a.needsUpdate=!0,a}return y(n)}(wi),Ds=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o,g,s,I,u,c,C){var d;return f(this,n),(d=t.call(this,null,o,g,s,I,u,a,r,c,C)).isCompressedTexture=!0,d.image={width:i,height:l},d.mipmaps=e,d.flipY=!1,d.generateMipmaps=!1,d}return y(n)}(wi),Qs=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o,g,s,I){var u;return f(this,n),(u=t.call(this,e,i,l,a,r,o,g,s,I)).isCanvasTexture=!0,u.needsUpdate=!0,u}return y(n)}(wi),Ps=function(){function e(){f(this,e),this.type="Curve",this.arcLengthDivisions=200}return y(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),l=0;n.push(0);for(var a=1;a<=e;a++)l+=(t=this.getPoint(a/e)).distanceTo(i),n.push(l),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),l=0,a=i.length;n=t||e*i[a-1];for(var r,o=0,g=a-1;o<=g;)if((r=i[l=Math.floor(o+(g-o)/2)]-n)<0)o=l+1;else{if(!(r>0)){g=l;break}g=l-1}if(i[l=g]===n)return l/(a-1);var s=i[l];return(l+(n-s)/(i[l+1]-s))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,l=e+n;i<0&&(i=0),l>1&&(l=1);var a=this.getPoint(i),r=this.getPoint(l),o=t||(a.isVector2?new ri:new Ki);return o.copy(r).sub(a).normalize(),o}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Ki,i=[],l=[],a=[],r=new Ki,o=new dl,g=0;g<=e;g++){var s=g/e;i[g]=this.getTangentAt(s,new Ki)}l[0]=new Ki,a[0]=new Ki;var I=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),C=Math.abs(i[0].z);u<=I&&(I=u,n.set(1,0,0)),c<=I&&(I=c,n.set(0,1,0)),C<=I&&n.set(0,0,1),r.crossVectors(i[0],n).normalize(),l[0].crossVectors(i[0],r),a[0].crossVectors(i[0],l[0]);for(var d=1;d<=e;d++){if(l[d]=l[d-1].clone(),a[d]=a[d-1].clone(),r.crossVectors(i[d-1],i[d]),r.length()>Number.EPSILON){r.normalize();var h=Math.acos($n(i[d-1].dot(i[d]),-1,1));l[d].applyMatrix4(o.makeRotationAxis(r,h))}a[d].crossVectors(i[d],l[d])}if(!0===t){var A=Math.acos($n(l[0].dot(l[e]),-1,1));A/=e,i[0].dot(r.crossVectors(l[0],l[e]))>0&&(A=-A);for(var m=1;m<=e;m++)l[m].applyMatrix4(o.makeRotationAxis(i[m],A*m)),a[m].crossVectors(i[m],l[m])}return{tangents:i,normals:l,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Os=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return f(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=l,e.xRadius=a,e.yRadius=r,e.aStartAngle=o,e.aEndAngle=g,e.aClockwise=s,e.aRotation=I,e}return y(n,[{key:"getPoint",value:function(e,t){for(var n=t||new ri,i=2*Math.PI,l=this.aEndAngle-this.aStartAngle,a=Math.abs(l)<Number.EPSILON;l<0;)l+=i;for(;l>i;)l-=i;l<Number.EPSILON&&(l=a?0:i),!0!==this.aClockwise||a||(l===i?l=-i:l-=i);var r=this.aStartAngle+e*l,o=this.aX+this.xRadius*Math.cos(r),g=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var s=Math.cos(this.aRotation),I=Math.sin(this.aRotation),u=o-this.aX,c=g-this.aY;o=u*s-c*I+this.aX,g=u*I+c*s+this.aY}return n.set(o,g)}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Ps),js=function(e){G(n,e);var t=w(n);function n(e,i,l,a,r,o){var g;return f(this,n),(g=t.call(this,e,i,l,l,a,r,o)).isArcCurve=!0,g.type="ArcCurve",g}return y(n)}(Os);function $s(){var e=0,t=0,n=0,i=0;function l(l,a,r,o){e=l,t=r,n=-3*l+3*a-2*r-o,i=2*l-2*a+r+o}return{initCatmullRom:function(e,t,n,i,a){l(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,r,o){var g=(t-e)/a-(n-e)/(a+r)+(n-t)/r,s=(n-t)/r-(i-t)/(r+o)+(i-n)/o;l(t,n,g*=r,s*=r)},calc:function(l){var a=l*l;return e+t*l+n*a+i*(a*l)}}}var eI=new Ki,tI=new $s,nI=new $s,iI=new $s,lI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return f(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=l,e.curveType=a,e.tension=r,e}return y(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,l=i,a=this.points,r=a.length,o=(r-(this.closed?0:1))*e,g=Math.floor(o),s=o-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/r)+1)*r:0===s&&g===r-1&&(g=r-2,s=1),this.closed||g>0?t=a[(g-1)%r]:(eI.subVectors(a[0],a[1]).add(a[0]),t=eI);var I=a[g%r],u=a[(g+1)%r];if(this.closed||g+2<r?n=a[(g+2)%r]:(eI.subVectors(a[r-1],a[r-2]).add(a[r-1]),n=eI),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25,C=Math.pow(t.distanceToSquared(I),c),d=Math.pow(I.distanceToSquared(u),c),h=Math.pow(u.distanceToSquared(n),c);d<1e-4&&(d=1),C<1e-4&&(C=d),h<1e-4&&(h=d),tI.initNonuniformCatmullRom(t.x,I.x,u.x,n.x,C,d,h),nI.initNonuniformCatmullRom(t.y,I.y,u.y,n.y,C,d,h),iI.initNonuniformCatmullRom(t.z,I.z,u.z,n.z,C,d,h)}else"catmullrom"===this.curveType&&(tI.initCatmullRom(t.x,I.x,u.x,n.x,this.tension),nI.initCatmullRom(t.y,I.y,u.y,n.y,this.tension),iI.initCatmullRom(t.z,I.z,u.z,n.z,this.tension));return l.set(tI.calc(s),nI.calc(s),iI.calc(s)),l}},{key:"copy",value:function(e){V(B(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var l=e.points[t];this.points.push(l.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var l=this.points[t];e.points.push(l.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){V(B(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var l=e.points[t];this.points.push((new Ki).fromArray(l))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Ps);function aI(e,t,n,i,l){var a=.5*(i-t),r=.5*(l-n),o=e*e;return(2*n-2*i+a+r)*(e*o)+(-3*n+3*i-2*a-r)*o+a*e+n}function rI(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function oI(e,t,n,i,l){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,l)}var gI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ri,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ri;return f(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=l,e.v2=a,e.v3=r,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=t,i=this.v0,l=this.v1,a=this.v2,r=this.v3;return n.set(oI(e,i.x,l.x,a.x,r.x),oI(e,i.y,l.y,a.y,r.y)),n}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Ps),sI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ki,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ki;return f(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=l,e.v2=a,e.v3=r,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,n=t,i=this.v0,l=this.v1,a=this.v2,r=this.v3;return n.set(oI(e,i.x,l.x,a.x,r.x),oI(e,i.y,l.y,a.y,r.y),oI(e,i.z,l.z,a.z,r.z)),n}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Ps),II=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri;return f(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=l,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new ri;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Ps),uI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki;return f(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=l,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Ps),cI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ri;return f(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=l,e.v2=a,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=t,i=this.v0,l=this.v1,a=this.v2;return n.set(rI(e,i.x,l.x,a.x),rI(e,i.y,l.y,a.y)),n}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Ps),CI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ki;return f(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=l,e.v2=a,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki,n=t,i=this.v0,l=this.v1,a=this.v2;return n.set(rI(e,i.x,l.x,a.x),rI(e,i.y,l.y,a.y),rI(e,i.z,l.z,a.z)),n}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Ps),dI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return y(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri,n=t,i=this.points,l=(i.length-1)*e,a=Math.floor(l),r=l-a,o=i[0===a?a:a-1],g=i[a],s=i[a>i.length-2?i.length-1:a+1],I=i[a>i.length-3?i.length-1:a+2];return n.set(aI(r,o.x,g.x,s.x,I.x),aI(r,o.y,g.y,s.y,I.y)),n}},{key:"copy",value:function(e){V(B(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var l=e.points[t];this.points.push(l.clone())}return this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var l=this.points[t];e.points.push(l.toArray())}return e}},{key:"fromJSON",value:function(e){V(B(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var l=e.points[t];this.points.push((new ri).fromArray(l))}return this}}]),n}(Ps),hI=Object.freeze({__proto__:null,ArcCurve:js,CatmullRomCurve3:lI,CubicBezierCurve:gI,CubicBezierCurve3:sI,EllipseCurve:Os,LineCurve:II,LineCurve3:uI,QuadraticBezierCurve:cI,QuadraticBezierCurve3:CI,SplineCurve:dI}),AI=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return y(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new II(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),i=this.getCurveLengths(),l=0;l<i.length;){if(i[l]>=n){var a=i[l]-n,r=this.curves[l],o=r.getLength(),g=0===o?0:1-a/o;return r.getPointAt(g,t)}l++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,l=this.curves;i<l.length;i++)for(var a=l[i],r=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,o=a.getPoints(r),g=0;g<o.length;g++){var s=o[g];e&&e.equals(s)||(n.push(s),e=s)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){V(B(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var l=e.curves[t];this.curves.push(l.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var l=this.curves[t];e.curves.push(l.toJSON())}return e}},{key:"fromJSON",value:function(e){V(B(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var l=e.curves[t];this.curves.push((new hI[l.type]).fromJSON(l))}return this}}]),n}(Ps),mI=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).type="Path",i.currentPoint=new ri,e&&i.setFromPoints(e),i}return y(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new II(this.currentPoint.clone(),new ri(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var l=new cI(this.currentPoint.clone(),new ri(e,t),new ri(n,i));return this.curves.push(l),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,l,a){var r=new gI(this.currentPoint.clone(),new ri(e,t),new ri(n,i),new ri(l,a));return this.curves.push(r),this.currentPoint.set(l,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new dI(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,l,a){var r=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+r,t+o,n,i,l,a),this}},{key:"absarc",value:function(e,t,n,i,l,a){return this.absellipse(e,t,n,n,i,l,a),this}},{key:"ellipse",value:function(e,t,n,i,l,a,r,o){var g=this.currentPoint.x,s=this.currentPoint.y;return this.absellipse(e+g,t+s,n,i,l,a,r,o),this}},{key:"absellipse",value:function(e,t,n,i,l,a,r,o){var g=new Os(e,t,n,i,l,a,r,o);if(this.curves.length>0){var s=g.getPoint(0);s.equals(this.currentPoint)||this.lineTo(s.x,s.y)}this.curves.push(g);var I=g.getPoint(1);return this.currentPoint.copy(I),this}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return V(B(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(AI),pI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ri(0,.5),new ri(.5,0),new ri(0,-.5)],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;f(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:i,segments:l,phiStart:a,phiLength:r},l=Math.floor(l),r=$n(r,0,2*Math.PI);for(var o=[],g=[],s=[],I=[],u=[],c=1/l,C=new Ki,d=new ri,h=new Ki,A=new Ki,m=new Ki,p=0,v=0,b=0;b<=i.length-1;b++)switch(b){case 0:p=i[b+1].x-i[b].x,v=i[b+1].y-i[b].y,h.x=1*v,h.y=-p,h.z=0*v,m.copy(h),h.normalize(),I.push(h.x,h.y,h.z);break;case i.length-1:I.push(m.x,m.y,m.z);break;default:p=i[b+1].x-i[b].x,v=i[b+1].y-i[b].y,h.x=1*v,h.y=-p,h.z=0*v,A.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),I.push(h.x,h.y,h.z),m.copy(A)}for(var y=0;y<=l;y++)for(var G=a+y*c*r,B=Math.sin(G),Z=Math.cos(G),q=0;q<=i.length-1;q++){C.x=i[q].x*B,C.y=i[q].y,C.z=i[q].x*Z,g.push(C.x,C.y,C.z),d.x=y/l,d.y=q/(i.length-1),s.push(d.x,d.y);var x=I[3*q+0]*B,w=I[3*q+1],W=I[3*q+0]*Z;u.push(x,w,W)}for(var S=0;S<l;S++)for(var R=0;R<i.length-1;R++){var V=R+S*i.length,k=V,X=V+i.length,Y=V+i.length+1,H=V+1;o.push(k,X,H),o.push(Y,H,X)}return e.setIndex(o),e.setAttribute("position",new ua(g,3)),e.setAttribute("uv",new ua(s,2)),e.setAttribute("normal",new ua(u,3)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(fa),vI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;f(this,n);var o=new mI;return o.absarc(0,-l/2,i,1.5*Math.PI,0),o.absarc(0,l/2,i,0,.5*Math.PI),(e=t.call(this,o.getPoints(a),r)).type="CapsuleGeometry",e.parameters={radius:i,height:l,capSegments:a,radialSegments:r},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(pI),fI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;f(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:i,segments:l,thetaStart:a,thetaLength:r},l=Math.max(3,l);var o=[],g=[],s=[],I=[],u=new Ki,c=new ri;g.push(0,0,0),s.push(0,0,1),I.push(.5,.5);for(var C=0,d=3;C<=l;C++,d+=3){var h=a+C/l*r;u.x=i*Math.cos(h),u.y=i*Math.sin(h),g.push(u.x,u.y,u.z),s.push(0,0,1),c.x=(g[d]/i+1)/2,c.y=(g[d+1]/i+1)/2,I.push(c.x,c.y)}for(var A=1;A<=l;A++)o.push(A,A+1,0);return e.setIndex(o),e.setAttribute("position",new ua(g,3)),e.setAttribute("normal",new ua(s,3)),e.setAttribute("uv",new ua(I,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(fa),bI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;f(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:l,height:a,radialSegments:r,heightSegments:o,openEnded:g,thetaStart:s,thetaLength:I};var u=q(e);r=Math.floor(r),o=Math.floor(o);var c=[],C=[],d=[],h=[],A=0,m=[],p=a/2,v=0;function b(){for(var e=new Ki,t=new Ki,n=0,g=(l-i)/a,f=0;f<=o;f++){for(var b=[],y=f/o,G=y*(l-i)+i,B=0;B<=r;B++){var Z=B/r,q=Z*I+s,x=Math.sin(q),w=Math.cos(q);t.x=G*x,t.y=-y*a+p,t.z=G*w,C.push(t.x,t.y,t.z),e.set(x,g,w).normalize(),d.push(e.x,e.y,e.z),h.push(Z,1-y),b.push(A++)}m.push(b)}for(var W=0;W<r;W++)for(var S=0;S<o;S++){var R=m[S][W],V=m[S+1][W],k=m[S+1][W+1],X=m[S][W+1];c.push(R,V,X),c.push(V,k,X),n+=6}u.addGroup(v,n,0),v+=n}function y(e){for(var t=A,n=new ri,a=new Ki,o=0,g=!0===e?i:l,m=!0===e?1:-1,f=1;f<=r;f++)C.push(0,p*m,0),d.push(0,m,0),h.push(.5,.5),A++;for(var b=A,y=0;y<=r;y++){var G=y/r*I+s,B=Math.cos(G),Z=Math.sin(G);a.x=g*Z,a.y=p*m,a.z=g*B,C.push(a.x,a.y,a.z),d.push(0,m,0),n.x=.5*B+.5,n.y=.5*Z*m+.5,h.push(n.x,n.y),A++}for(var q=0;q<r;q++){var x=t+q,w=b+q;!0===e?c.push(w,w+1,x):c.push(w+1,w,x),o+=3}u.addGroup(v,o,!0===e?1:2),v+=o}return b(),!1===g&&(i>0&&y(!0),l>0&&y(!1)),e.setIndex(c),e.setAttribute("position",new ua(C,3)),e.setAttribute("normal",new ua(d,3)),e.setAttribute("uv",new ua(h,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(fa),yI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return f(this,n),(e=t.call(this,0,i,l,a,r,o,g,s)).type="ConeGeometry",e.parameters={radius:i,height:l,radialSegments:a,heightSegments:r,openEnded:o,thetaStart:g,thetaLength:s},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(bI),GI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;f(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:i,indices:l,radius:a,detail:r};var o=[],g=[];function s(e){for(var t=new Ki,n=new Ki,i=new Ki,a=0;a<l.length;a+=3)h(l[a+0],t),h(l[a+1],n),h(l[a+2],i),I(t,n,i,e)}function I(e,t,n,i){for(var l=i+1,a=[],r=0;r<=l;r++){a[r]=[];for(var o=e.clone().lerp(n,r/l),g=t.clone().lerp(n,r/l),s=l-r,I=0;I<=s;I++)a[r][I]=0===I&&r===l?o:o.clone().lerp(g,I/s)}for(var u=0;u<l;u++)for(var c=0;c<2*(l-u)-1;c++){var C=Math.floor(c/2);c%2===0?(d(a[u][C+1]),d(a[u+1][C]),d(a[u][C])):(d(a[u][C+1]),d(a[u+1][C+1]),d(a[u+1][C]))}}function u(e){for(var t=new Ki,n=0;n<o.length;n+=3)t.x=o[n+0],t.y=o[n+1],t.z=o[n+2],t.normalize().multiplyScalar(e),o[n+0]=t.x,o[n+1]=t.y,o[n+2]=t.z}function c(){for(var e=new Ki,t=0;t<o.length;t+=3){e.x=o[t+0],e.y=o[t+1],e.z=o[t+2];var n=p(e)/2/Math.PI+.5,i=v(e)/Math.PI+.5;g.push(n,1-i)}A(),C()}function C(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],i=g[e+4],l=Math.max(t,n,i),a=Math.min(t,n,i);l>.9&&a<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),i<.2&&(g[e+4]+=1))}}function d(e){o.push(e.x,e.y,e.z)}function h(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function A(){for(var e=new Ki,t=new Ki,n=new Ki,i=new Ki,l=new ri,a=new ri,r=new ri,s=0,I=0;s<o.length;s+=9,I+=6){e.set(o[s+0],o[s+1],o[s+2]),t.set(o[s+3],o[s+4],o[s+5]),n.set(o[s+6],o[s+7],o[s+8]),l.set(g[I+0],g[I+1]),a.set(g[I+2],g[I+3]),r.set(g[I+4],g[I+5]),i.copy(e).add(t).add(n).divideScalar(3);var u=p(i);m(l,I+0,e,u),m(a,I+2,t,u),m(r,I+4,n,u)}}function m(e,t,n,i){i<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return s(r),u(a),c(),e.setAttribute("position",new ua(o,3)),e.setAttribute("normal",new ua(o.slice(),3)),e.setAttribute("uv",new ua(g,2)),0===r?e.computeVertexNormals():e.normalizeNormals(),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(fa),BI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,n);var a=(1+Math.sqrt(5))/2,r=1/a,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-a,0,-r,a,0,r,-a,0,r,a,-r,-a,0,-r,a,0,r,-a,0,r,a,0,-a,0,-r,a,0,-r,-a,0,r,a,0,r],g=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,o,g,i,l)).type="DodecahedronGeometry",e.parameters={radius:i,detail:l},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(GI),ZI=new Ki,qI=new Ki,xI=new Ki,wI=new Pl,WI=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(f(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:l},null!==i){for(var a=4,r=Math.pow(10,a),o=Math.cos(Pn*l),g=i.getIndex(),s=i.getAttribute("position"),I=g?g.count:s.count,u=[0,0,0],c=["a","b","c"],C=new Array(3),d={},h=[],A=0;A<I;A+=3){g?(u[0]=g.getX(A),u[1]=g.getX(A+1),u[2]=g.getX(A+2)):(u[0]=A,u[1]=A+1,u[2]=A+2);var m=wI.a,p=wI.b,v=wI.c;if(m.fromBufferAttribute(s,u[0]),p.fromBufferAttribute(s,u[1]),v.fromBufferAttribute(s,u[2]),wI.getNormal(xI),C[0]="".concat(Math.round(m.x*r),",").concat(Math.round(m.y*r),",").concat(Math.round(m.z*r)),C[1]="".concat(Math.round(p.x*r),",").concat(Math.round(p.y*r),",").concat(Math.round(p.z*r)),C[2]="".concat(Math.round(v.x*r),",").concat(Math.round(v.y*r),",").concat(Math.round(v.z*r)),C[0]!==C[1]&&C[1]!==C[2]&&C[2]!==C[0])for(var b=0;b<3;b++){var y=(b+1)%3,G=C[b],B=C[y],Z=wI[c[b]],q=wI[c[y]],x="".concat(G,"_").concat(B),w="".concat(B,"_").concat(G);w in d&&d[w]?(xI.dot(d[w].normal)<=o&&(h.push(Z.x,Z.y,Z.z),h.push(q.x,q.y,q.z)),d[w]=null):x in d||(d[x]={index0:u[b],index1:u[y],normal:xI.clone()})}}for(var W in d)if(d[W]){var S=d[W],R=S.index0,V=S.index1;ZI.fromBufferAttribute(s,R),qI.fromBufferAttribute(s,V),h.push(ZI.x,ZI.y,ZI.z),h.push(qI.x,qI.y,qI.z)}e.setAttribute("position",new ua(h,3))}return e}return y(n)}(fa),SI=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).uuid=jn(),i.type="Shape",i.holes=[],i}return y(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){V(B(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var l=e.holes[t];this.holes.push(l.clone())}return this}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var l=this.holes[t];e.holes.push(l.toJSON())}return e}},{key:"fromJSON",value:function(e){V(B(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var l=e.holes[t];this.holes.push((new mI).fromJSON(l))}return this}}]),n}(mI),RI=function(e,t){var n,i,l,a,r,o,g,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,I=t&&t.length,u=I?t[0]*s:e.length,c=VI(e,0,u,s,!0),C=[];if(!c||c.next===c.prev)return C;if(I&&(c=NI(e,t,c,s)),e.length>80*s){n=l=e[0],i=a=e[1];for(var d=s;d<u;d+=s)(r=e[d])<n&&(n=r),(o=e[d+1])<i&&(i=o),r>l&&(l=r),o>a&&(a=o);g=0!==(g=Math.max(l-n,a-i))?1/g:0}return XI(c,C,s,n,i,g),C};function VI(e,t,n,i,l){var a,r;if(l===function(e,t,n,i){for(var l=0,a=t,r=n-i;a<n;a+=i)l+=(e[r]-e[a])*(e[a+1]+e[r+1]),r=a;return l}(e,t,n,i)>0)for(a=t;a<n;a+=i)r=eu(a,e[a],e[a+1],r);else for(a=n-i;a>=t;a-=i)r=eu(a,e[a],e[a+1],r);return r&&DI(r,r.next)&&(tu(r),r=r.next),r}function kI(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!DI(i,i.next)&&0!==UI(i.prev,i,i.next))i=i.next;else{if(tu(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function XI(e,t,n,i,l,a,r){if(e){!r&&a&&function(e,t,n,i){var l=e;do{null===l.z&&(l.z=_I(l.x,l.y,t,n,i)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next}while(l!==e);l.prevZ.nextZ=null,l.prevZ=null,function(e){var t,n,i,l,a,r,o,g,s=1;do{for(n=e,e=null,a=null,r=0;n;){for(r++,i=n,o=0,t=0;t<s&&(o++,i=i.nextZ);t++);for(g=s;o>0||g>0&&i;)0!==o&&(0===g||!i||n.z<=i.z)?(l=n,n=n.nextZ,o--):(l=i,i=i.nextZ,g--),a?a.nextZ=l:e=l,l.prevZ=a,a=l;n=i}a.nextZ=null,s*=2}while(r>1)}(l)}(e,i,l,a);for(var o,g,s=e;e.prev!==e.next;)if(o=e.prev,g=e.next,a?HI(e,i,l,a):YI(e))t.push(o.i/n),t.push(e.i/n),t.push(g.i/n),tu(e),e=g.next,s=g.next;else if((e=g)===s){r?1===r?XI(e=KI(kI(e),t,n),t,n,i,l,a,2):2===r&&FI(e,t,n,i,l,a):XI(kI(e),t,n,i,l,a,1);break}}}function YI(e){var t=e.prev,n=e,i=e.next;if(UI(t,n,i)>=0)return!1;for(var l=e.next.next;l!==e.prev;){if(EI(t.x,t.y,n.x,n.y,i.x,i.y,l.x,l.y)&&UI(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function HI(e,t,n,i){var l=e.prev,a=e,r=e.next;if(UI(l,a,r)>=0)return!1;for(var o=l.x<a.x?l.x<r.x?l.x:r.x:a.x<r.x?a.x:r.x,g=l.y<a.y?l.y<r.y?l.y:r.y:a.y<r.y?a.y:r.y,s=l.x>a.x?l.x>r.x?l.x:r.x:a.x>r.x?a.x:r.x,I=l.y>a.y?l.y>r.y?l.y:r.y:a.y>r.y?a.y:r.y,u=_I(o,g,t,n,i),c=_I(s,I,t,n,i),C=e.prevZ,d=e.nextZ;C&&C.z>=u&&d&&d.z<=c;){if(C!==e.prev&&C!==e.next&&EI(l.x,l.y,a.x,a.y,r.x,r.y,C.x,C.y)&&UI(C.prev,C,C.next)>=0)return!1;if(C=C.prevZ,d!==e.prev&&d!==e.next&&EI(l.x,l.y,a.x,a.y,r.x,r.y,d.x,d.y)&&UI(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;C&&C.z>=u;){if(C!==e.prev&&C!==e.next&&EI(l.x,l.y,a.x,a.y,r.x,r.y,C.x,C.y)&&UI(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&EI(l.x,l.y,a.x,a.y,r.x,r.y,d.x,d.y)&&UI(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function KI(e,t,n){var i=e;do{var l=i.prev,a=i.next.next;!DI(l,a)&&QI(l,i,i.next,a)&&jI(l,a)&&jI(a,l)&&(t.push(l.i/n),t.push(i.i/n),t.push(a.i/n),tu(i),tu(i.next),i=e=a),i=i.next}while(i!==e);return kI(i)}function FI(e,t,n,i,l,a){var r=e;do{for(var o=r.next.next;o!==r.prev;){if(r.i!==o.i&&JI(r,o)){var g=$I(r,o);return r=kI(r,r.next),g=kI(g,g.next),XI(r,t,n,i,l,a),void XI(g,t,n,i,l,a)}o=o.next}r=r.next}while(r!==e)}function NI(e,t,n,i){var l,a,r,o=[];for(l=0,a=t.length;l<a;l++)(r=VI(e,t[l]*i,l<a-1?t[l+1]*i:e.length,i,!1))===r.next&&(r.steiner=!0),o.push(TI(r));for(o.sort(zI),l=0;l<o.length;l++)MI(o[l],n),n=kI(n,n.next);return n}function zI(e,t){return e.x-t.x}function MI(e,t){if(t=function(e,t){var n,i=t,l=e.x,a=e.y,r=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=l&&o>r){if(r=o,o===l){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(l===r)return n;var g,s=n,I=n.x,u=n.y,c=1/0;i=n;do{l>=i.x&&i.x>=I&&l!==i.x&&EI(a<u?l:r,a,I,u,a<u?r:l,a,i.x,i.y)&&(g=Math.abs(a-i.y)/(l-i.x),jI(i,e)&&(g<c||g===c&&(i.x>n.x||i.x===n.x&&LI(n,i)))&&(n=i,c=g)),i=i.next}while(i!==s);return n}(e,t),t){var n=$I(t,e);kI(t,t.next),kI(n,n.next)}}function LI(e,t){return UI(e.prev,e,t.prev)<0&&UI(t.next,e,e.next)<0}function _I(e,t,n,i,l){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*l)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*l)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function TI(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function EI(e,t,n,i,l,a,r,o){return(l-r)*(t-o)-(e-r)*(a-o)>=0&&(e-r)*(i-o)-(n-r)*(t-o)>=0&&(n-r)*(a-o)-(l-r)*(i-o)>=0}function JI(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&QI(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(jI(e,t)&&jI(t,e)&&function(e,t){var n=e,i=!1,l=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&l<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(UI(e.prev,e,t.prev)||UI(e,t.prev,t))||DI(e,t)&&UI(e.prev,e,e.next)>0&&UI(t.prev,t,t.next)>0)}function UI(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function DI(e,t){return e.x===t.x&&e.y===t.y}function QI(e,t,n,i){var l=OI(UI(e,t,n)),a=OI(UI(e,t,i)),r=OI(UI(n,i,e)),o=OI(UI(n,i,t));return l!==a&&r!==o||(!(0!==l||!PI(e,n,t))||(!(0!==a||!PI(e,i,t))||(!(0!==r||!PI(n,e,i))||!(0!==o||!PI(n,t,i)))))}function PI(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function OI(e){return e>0?1:e<0?-1:0}function jI(e,t){return UI(e.prev,e,e.next)<0?UI(e,t,e.next)>=0&&UI(e,e.prev,t)>=0:UI(e,t,e.prev)<0||UI(e,e.next,t)<0}function $I(e,t){var n=new nu(e.i,e.x,e.y),i=new nu(t.i,t.x,t.y),l=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=l,l.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function eu(e,t,n,i){var l=new nu(e,t,n);return i?(l.next=i.next,l.prev=i,i.next.prev=l,i.next=l):(l.prev=l,l.next=l),l}function tu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var iu=function(){function e(){f(this,e)}return y(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,l=0;l<t;i=l++)n+=e[i].x*e[l].y-e[l].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],l=[];lu(e),au(n,e);var a=e.length;t.forEach(lu);for(var r=0;r<t.length;r++)i.push(a),a+=t[r].length,au(n,t[r]);for(var o=RI(n,i),g=0;g<o.length;g+=3)l.push(o.slice(g,g+3));return l}}]),e}();function lu(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function au(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var ru=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SI([new ri(.5,.5),new ri(-.5,.5),new ri(-.5,-.5),new ri(.5,-.5)]),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:i,options:l},i=Array.isArray(i)?i:[i];for(var a=q(e),r=[],o=[],g=0,s=i.length;g<s;g++){var I=i[g];u(I)}function u(e){var t=[],n=void 0!==l.curveSegments?l.curveSegments:12,i=void 0!==l.steps?l.steps:1,g=void 0!==l.depth?l.depth:1,s=void 0===l.bevelEnabled||l.bevelEnabled,I=void 0!==l.bevelThickness?l.bevelThickness:.2,u=void 0!==l.bevelSize?l.bevelSize:I-.1,c=void 0!==l.bevelOffset?l.bevelOffset:0,C=void 0!==l.bevelSegments?l.bevelSegments:3,d=l.extrudePath,h=void 0!==l.UVGenerator?l.UVGenerator:ou;void 0!==l.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),g=l.amount);var A,m,p,v,f,b=!1;d&&(A=d.getSpacedPoints(i),b=!0,s=!1,m=d.computeFrenetFrames(i,!1),p=new Ki,v=new Ki,f=new Ki),s||(C=0,I=0,u=0,c=0);var y=e.extractPoints(n),G=y.shape,B=y.holes;if(!iu.isClockWise(G)){G=G.reverse();for(var Z=0,q=B.length;Z<q;Z++){var x=B[Z];iu.isClockWise(x)&&(B[Z]=x.reverse())}}for(var w=iu.triangulateShape(G,B),W=G,S=0,R=B.length;S<R;S++){var V=B[S];G=G.concat(V)}function k(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var X=G.length,Y=w.length;function H(e,t,n){var i,l,a,r=e.x-t.x,o=e.y-t.y,g=n.x-e.x,s=n.y-e.y,I=r*r+o*o,u=r*s-o*g;if(Math.abs(u)>Number.EPSILON){var c=Math.sqrt(I),C=Math.sqrt(g*g+s*s),d=t.x-o/c,h=t.y+r/c,A=((n.x-s/C-d)*s-(n.y+g/C-h)*g)/(r*s-o*g),m=(i=d+r*A-e.x)*i+(l=h+o*A-e.y)*l;if(m<=2)return new ri(i,l);a=Math.sqrt(m/2)}else{var p=!1;r>Number.EPSILON?g>Number.EPSILON&&(p=!0):r<-Number.EPSILON?g<-Number.EPSILON&&(p=!0):Math.sign(o)===Math.sign(s)&&(p=!0),p?(i=-o,l=r,a=Math.sqrt(I)):(i=r,l=o,a=Math.sqrt(I/2))}return new ri(i/a,l/a)}for(var K=[],F=0,N=W.length,z=N-1,M=F+1;F<N;F++,z++,M++)z===N&&(z=0),M===N&&(M=0),K[F]=H(W[F],W[z],W[M]);for(var L,_=[],T=K.concat(),E=0,J=B.length;E<J;E++){var U=B[E];L=[];for(var D=0,Q=U.length,P=Q-1,O=D+1;D<Q;D++,P++,O++)P===Q&&(P=0),O===Q&&(O=0),L[D]=H(U[D],U[P],U[O]);_.push(L),T=T.concat(L)}for(var j=0;j<C;j++){for(var $=j/C,ee=I*Math.cos($*Math.PI/2),te=u*Math.sin($*Math.PI/2)+c,ne=0,ie=W.length;ne<ie;ne++){var le=k(W[ne],K[ne],te);Re(le.x,le.y,-ee)}for(var ae=0,re=B.length;ae<re;ae++){var oe=B[ae];L=_[ae];for(var ge=0,se=oe.length;ge<se;ge++){var Ie=k(oe[ge],L[ge],te);Re(Ie.x,Ie.y,-ee)}}}for(var ue=u+c,ce=0;ce<X;ce++){var Ce=s?k(G[ce],T[ce],ue):G[ce];b?(v.copy(m.normals[0]).multiplyScalar(Ce.x),p.copy(m.binormals[0]).multiplyScalar(Ce.y),f.copy(A[0]).add(v).add(p),Re(f.x,f.y,f.z)):Re(Ce.x,Ce.y,0)}for(var de=1;de<=i;de++)for(var he=0;he<X;he++){var Ae=s?k(G[he],T[he],ue):G[he];b?(v.copy(m.normals[de]).multiplyScalar(Ae.x),p.copy(m.binormals[de]).multiplyScalar(Ae.y),f.copy(A[de]).add(v).add(p),Re(f.x,f.y,f.z)):Re(Ae.x,Ae.y,g/i*de)}for(var me=C-1;me>=0;me--){for(var pe=me/C,ve=I*Math.cos(pe*Math.PI/2),fe=u*Math.sin(pe*Math.PI/2)+c,be=0,ye=W.length;be<ye;be++){var Ge=k(W[be],K[be],fe);Re(Ge.x,Ge.y,g+ve)}for(var Be=0,Ze=B.length;Be<Ze;Be++){var qe=B[Be];L=_[Be];for(var xe=0,we=qe.length;xe<we;xe++){var We=k(qe[xe],L[xe],fe);b?Re(We.x,We.y+A[i-1].y,A[i-1].x+ve):Re(We.x,We.y,g+ve)}}}function Se(e,t){for(var n=e.length;--n>=0;){var l=n,a=n-1;a<0&&(a=e.length-1);for(var r=0,o=i+2*C;r<o;r++){var g=X*r,s=X*(r+1);ke(t+l+g,t+a+g,t+a+s,t+l+s)}}}function Re(e,n,i){t.push(e),t.push(n),t.push(i)}function Ve(e,t,n){Xe(e),Xe(t),Xe(n);var i=r.length/3,l=h.generateTopUV(a,r,i-3,i-2,i-1);Ye(l[0]),Ye(l[1]),Ye(l[2])}function ke(e,t,n,i){Xe(e),Xe(t),Xe(i),Xe(t),Xe(n),Xe(i);var l=r.length/3,o=h.generateSideWallUV(a,r,l-6,l-3,l-2,l-1);Ye(o[0]),Ye(o[1]),Ye(o[3]),Ye(o[1]),Ye(o[2]),Ye(o[3])}function Xe(e){r.push(t[3*e+0]),r.push(t[3*e+1]),r.push(t[3*e+2])}function Ye(e){o.push(e.x),o.push(e.y)}!function(){var e=r.length/3;if(s){for(var t=0,n=X*t,l=0;l<Y;l++){var o=w[l];Ve(o[2]+n,o[1]+n,o[0]+n)}n=X*(t=i+2*C);for(var g=0;g<Y;g++){var I=w[g];Ve(I[0]+n,I[1]+n,I[2]+n)}}else{for(var u=0;u<Y;u++){var c=w[u];Ve(c[2],c[1],c[0])}for(var d=0;d<Y;d++){var h=w[d];Ve(h[0]+X*i,h[1]+X*i,h[2]+X*i)}}a.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;Se(W,t),t+=W.length;for(var n=0,i=B.length;n<i;n++){var l=B[n];Se(l,t),t+=l.length}a.addGroup(e,r.length/3-e,1)}()}return e.setAttribute("position",new ua(r,3)),e.setAttribute("uv",new ua(o,2)),e.computeVertexNormals(),e}return y(n,[{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,l=e.length;i<l;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],l=0,a=e.shapes.length;l<a;l++){var r=t[e.shapes[l]];i.push(r)}var o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new hI[o.type]).fromJSON(o)),new n(i,e.options)}}]),n}(fa),ou={generateTopUV:function(e,t,n,i,l){var a=t[3*n],r=t[3*n+1],o=t[3*i],g=t[3*i+1],s=t[3*l],I=t[3*l+1];return[new ri(a,r),new ri(o,g),new ri(s,I)]},generateSideWallUV:function(e,t,n,i,l,a){var r=t[3*n],o=t[3*n+1],g=t[3*n+2],s=t[3*i],I=t[3*i+1],u=t[3*i+2],c=t[3*l],C=t[3*l+1],d=t[3*l+2],h=t[3*a],A=t[3*a+1],m=t[3*a+2];return Math.abs(o-I)<Math.abs(r-s)?[new ri(r,1-g),new ri(s,1-u),new ri(c,1-d),new ri(h,1-m)]:[new ri(o,1-g),new ri(I,1-u),new ri(C,1-d),new ri(A,1-m)]}};var gu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,n);var a=(1+Math.sqrt(5))/2,r=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,r,o,i,l)).type="IcosahedronGeometry",e.parameters={radius:i,detail:l},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(GI),su=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,r,i,l)).type="OctahedronGeometry",e.parameters={radius:i,detail:l},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(GI),Iu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;f(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:i,outerRadius:l,thetaSegments:a,phiSegments:r,thetaStart:o,thetaLength:g},a=Math.max(3,a);for(var s=[],I=[],u=[],c=[],C=i,d=(l-i)/(r=Math.max(1,r)),h=new Ki,A=new ri,m=0;m<=r;m++){for(var p=0;p<=a;p++){var v=o+p/a*g;h.x=C*Math.cos(v),h.y=C*Math.sin(v),I.push(h.x,h.y,h.z),u.push(0,0,1),A.x=(h.x/l+1)/2,A.y=(h.y/l+1)/2,c.push(A.x,A.y)}C+=d}for(var b=0;b<r;b++)for(var y=b*(a+1),G=0;G<a;G++){var B=G+y,Z=B,q=B+a+1,x=B+a+2,w=B+1;s.push(Z,q,w),s.push(q,x,w)}return e.setIndex(s),e.setAttribute("position",new ua(I,3)),e.setAttribute("normal",new ua(u,3)),e.setAttribute("uv",new ua(c,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(fa),uu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SI([new ri(0,.5),new ri(-.5,-.5),new ri(.5,-.5)]),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;f(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:i,curveSegments:l};var a=[],r=[],o=[],g=[],s=0,I=0;if(!1===Array.isArray(i))c(i);else for(var u=0;u<i.length;u++)c(i[u]),e.addGroup(s,I,u),s+=I,I=0;function c(e){var t=r.length/3,n=e.extractPoints(l),i=n.shape,s=n.holes;!1===iu.isClockWise(i)&&(i=i.reverse());for(var u=0,c=s.length;u<c;u++){var C=s[u];!0===iu.isClockWise(C)&&(s[u]=C.reverse())}for(var d=iu.triangulateShape(i,s),h=0,A=s.length;h<A;h++){var m=s[h];i=i.concat(m)}for(var p=0,v=i.length;p<v;p++){var f=i[p];r.push(f.x,f.y,0),o.push(0,0,1),g.push(f.x,f.y)}for(var b=0,y=d.length;b<y;b++){var G=d[b],B=G[0]+t,Z=G[1]+t,q=G[2]+t;a.push(B,Z,q),I+=3}}return e.setIndex(a),e.setAttribute("position",new ua(r,3)),e.setAttribute("normal",new ua(o,3)),e.setAttribute("uv",new ua(g,2)),e}return y(n,[{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var l=e[n];t.shapes.push(l.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],l=0,a=e.shapes.length;l<a;l++){var r=t[e.shapes[l]];i.push(r)}return new n(i,e.curveSegments)}}]),n}(fa);var cu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;f(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:l,heightSegments:a,phiStart:r,phiLength:o,thetaStart:g,thetaLength:s},l=Math.max(3,Math.floor(l)),a=Math.max(2,Math.floor(a));for(var I=Math.min(g+s,Math.PI),u=0,c=[],C=new Ki,d=new Ki,h=[],A=[],m=[],p=[],v=0;v<=a;v++){var b=[],y=v/a,G=0;0==v&&0==g?G=.5/l:v==a&&I==Math.PI&&(G=-.5/l);for(var B=0;B<=l;B++){var Z=B/l;C.x=-i*Math.cos(r+Z*o)*Math.sin(g+y*s),C.y=i*Math.cos(g+y*s),C.z=i*Math.sin(r+Z*o)*Math.sin(g+y*s),A.push(C.x,C.y,C.z),d.copy(C).normalize(),m.push(d.x,d.y,d.z),p.push(Z+G,1-y),b.push(u++)}c.push(b)}for(var q=0;q<a;q++)for(var x=0;x<l;x++){var w=c[q][x+1],W=c[q][x],S=c[q+1][x],R=c[q+1][x+1];(0!==q||g>0)&&h.push(w,W,R),(q!==a-1||I<Math.PI)&&h.push(W,S,R)}return e.setIndex(h),e.setAttribute("position",new ua(A,3)),e.setAttribute("normal",new ua(m,3)),e.setAttribute("uv",new ua(p,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(fa),Cu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,r,i,l)).type="TetrahedronGeometry",e.parameters={radius:i,detail:l},e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(GI),du=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;f(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:i,tube:l,radialSegments:a,tubularSegments:r,arc:o},a=Math.floor(a),r=Math.floor(r);for(var g=[],s=[],I=[],u=[],c=new Ki,C=new Ki,d=new Ki,h=0;h<=a;h++)for(var A=0;A<=r;A++){var m=A/r*o,p=h/a*Math.PI*2;C.x=(i+l*Math.cos(p))*Math.cos(m),C.y=(i+l*Math.cos(p))*Math.sin(m),C.z=l*Math.sin(p),s.push(C.x,C.y,C.z),c.x=i*Math.cos(m),c.y=i*Math.sin(m),d.subVectors(C,c).normalize(),I.push(d.x,d.y,d.z),u.push(A/r),u.push(h/a)}for(var v=1;v<=a;v++)for(var b=1;b<=r;b++){var y=(r+1)*v+b-1,G=(r+1)*(v-1)+b-1,B=(r+1)*(v-1)+b,Z=(r+1)*v+b;g.push(y,G,Z),g.push(G,B,Z)}return e.setIndex(g),e.setAttribute("position",new ua(s,3)),e.setAttribute("normal",new ua(I,3)),e.setAttribute("uv",new ua(u,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(fa),hu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;f(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:i,tube:l,tubularSegments:a,radialSegments:r,p:o,q:g},a=Math.floor(a),r=Math.floor(r);for(var s=[],I=[],u=[],c=[],C=new Ki,d=new Ki,h=new Ki,A=new Ki,m=new Ki,p=new Ki,v=new Ki,b=0;b<=a;++b){var y=b/a*o*Math.PI*2;k(y,o,g,i,h),k(y+.01,o,g,i,A),p.subVectors(A,h),v.addVectors(A,h),m.crossVectors(p,v),v.crossVectors(m,p),m.normalize(),v.normalize();for(var G=0;G<=r;++G){var B=G/r*Math.PI*2,Z=-l*Math.cos(B),q=l*Math.sin(B);C.x=h.x+(Z*v.x+q*m.x),C.y=h.y+(Z*v.y+q*m.y),C.z=h.z+(Z*v.z+q*m.z),I.push(C.x,C.y,C.z),d.subVectors(C,h).normalize(),u.push(d.x,d.y,d.z),c.push(b/a),c.push(G/r)}}for(var x=1;x<=a;x++)for(var w=1;w<=r;w++){var W=(r+1)*(x-1)+(w-1),S=(r+1)*x+(w-1),R=(r+1)*x+w,V=(r+1)*(x-1)+w;s.push(W,S,V),s.push(S,R,V)}function k(e,t,n,i,l){var a=Math.cos(e),r=Math.sin(e),o=n/t*e,g=Math.cos(o);l.x=i*(2+g)*.5*a,l.y=i*(2+g)*r*.5,l.z=i*Math.sin(o)*.5}return e.setIndex(s),e.setAttribute("position",new ua(I,3)),e.setAttribute("normal",new ua(u,3)),e.setAttribute("uv",new ua(c,2)),e}return y(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(fa),Au=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new CI(new Ki(-1,-1,0),new Ki(-1,1,0),new Ki(1,1,0)),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:i,tubularSegments:l,radius:a,radialSegments:r,closed:o};var g=i.computeFrenetFrames(l,o);e.tangents=g.tangents,e.normals=g.normals,e.binormals=g.binormals;var s=new Ki,I=new Ki,u=new ri,c=new Ki,C=[],d=[],h=[],A=[];function m(){for(var e=0;e<l;e++)p(e);p(!1===o?l:0),b(),v()}function p(e){c=i.getPointAt(e/l,c);for(var t=g.normals[e],n=g.binormals[e],o=0;o<=r;o++){var u=o/r*Math.PI*2,h=Math.sin(u),A=-Math.cos(u);I.x=A*t.x+h*n.x,I.y=A*t.y+h*n.y,I.z=A*t.z+h*n.z,I.normalize(),d.push(I.x,I.y,I.z),s.x=c.x+a*I.x,s.y=c.y+a*I.y,s.z=c.z+a*I.z,C.push(s.x,s.y,s.z)}}function v(){for(var e=1;e<=l;e++)for(var t=1;t<=r;t++){var n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;A.push(n,i,o),A.push(i,a,o)}}function b(){for(var e=0;e<=l;e++)for(var t=0;t<=r;t++)u.x=e/l,u.y=t/r,h.push(u.x,u.y)}return m(),e.setIndex(A),e.setAttribute("position",new ua(C,3)),e.setAttribute("normal",new ua(d,3)),e.setAttribute("uv",new ua(h,2)),e}return y(n,[{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new hI[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(fa),mu=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(f(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:i},null!==i){var l=[],a=new Set,r=new Ki,o=new Ki;if(null!==i.index){var g=i.attributes.position,s=i.index,I=i.groups;0===I.length&&(I=[{start:0,count:s.count,materialIndex:0}]);for(var u=0,c=I.length;u<c;++u)for(var C=I[u],d=C.start,h=C.count,A=d,m=d+h;A<m;A+=3)for(var p=0;p<3;p++){var v=s.getX(A+p),b=s.getX(A+(p+1)%3);r.fromBufferAttribute(g,v),o.fromBufferAttribute(g,b),!0===pu(r,o,a)&&(l.push(r.x,r.y,r.z),l.push(o.x,o.y,o.z))}}else for(var y=i.attributes.position,G=0,B=y.count/3;G<B;G++)for(var Z=0;Z<3;Z++){var q=3*G+Z,x=3*G+(Z+1)%3;r.fromBufferAttribute(y,q),o.fromBufferAttribute(y,x),!0===pu(r,o,a)&&(l.push(r.x,r.y,r.z),l.push(o.x,o.y,o.z))}e.setAttribute("position",new ua(l,3))}return e}return y(n)}(fa);function pu(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),l="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(l)&&(n.add(i),n.add(l),!0)}var vu=Object.freeze({__proto__:null,BoxGeometry:za,BoxBufferGeometry:za,CapsuleGeometry:vI,CapsuleBufferGeometry:vI,CircleGeometry:fI,CircleBufferGeometry:fI,ConeGeometry:yI,ConeBufferGeometry:yI,CylinderGeometry:bI,CylinderBufferGeometry:bI,DodecahedronGeometry:BI,DodecahedronBufferGeometry:BI,EdgesGeometry:WI,ExtrudeGeometry:ru,ExtrudeBufferGeometry:ru,IcosahedronGeometry:gu,IcosahedronBufferGeometry:gu,LatheGeometry:pI,LatheBufferGeometry:pI,OctahedronGeometry:su,OctahedronBufferGeometry:su,PlaneGeometry:rr,PlaneBufferGeometry:rr,PolyhedronGeometry:GI,PolyhedronBufferGeometry:GI,RingGeometry:Iu,RingBufferGeometry:Iu,ShapeGeometry:uu,ShapeBufferGeometry:uu,SphereGeometry:cu,SphereBufferGeometry:cu,TetrahedronGeometry:Cu,TetrahedronBufferGeometry:Cu,TorusGeometry:du,TorusBufferGeometry:du,TorusKnotGeometry:hu,TorusKnotBufferGeometry:hu,TubeGeometry:Au,TubeBufferGeometry:Au,WireframeGeometry:mu}),fu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new Gi(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(jl),bu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return y(n)}(Ta),yu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new Gi(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new Gi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=dn,i.normalScale=new ri(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(jl),Gu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new ri(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(q(i),"reflectivity",{get:function(){return $n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new Gi(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new Gi(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new Gi(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return y(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=v(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(yu),Bu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new Gi(16777215),i.specular=new Gi(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new Gi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=dn,i.normalScale=new ri(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=qe,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(jl),Zu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new Gi(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new Gi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=dn,i.normalScale=new ri(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(jl),qu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=dn,i.normalScale=new ri(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(jl),xu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new Gi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new Gi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=qe,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(jl),wu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new Gi(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=dn,i.normalScale=new ri(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(jl),Wu=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(ws),Su={arraySlice:function(e,t,n){return Su.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,l=new e.constructor(i),a=0,r=0;r!==i;++a)for(var o=n[a]*t,g=0;g!==t;++g)l[r++]=e[o+g];return l},flattenJSON:function(e,t,n,i){for(var l=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[l++];if(void 0!==a){var r=a[i];if(void 0!==r)if(Array.isArray(r))do{void 0!==(r=a[i])&&(t.push(a.time),n.push.apply(n,r)),a=e[l++]}while(void 0!==a);else if(void 0!==r.toArray)do{void 0!==(r=a[i])&&(t.push(a.time),r.toArray(n,n.length)),a=e[l++]}while(void 0!==a);else do{void 0!==(r=a[i])&&(t.push(a.time),n.push(r)),a=e[l++]}while(void 0!==a)}},subclip:function(e,t,n,i){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var r=[],o=0;o<a.tracks.length;++o){for(var g=a.tracks[o],s=g.getValueSize(),I=[],u=[],c=0;c<g.times.length;++c){var C=g.times[c]*l;if(!(C<n||C>=i)){I.push(g.times[c]);for(var d=0;d<s;++d)u.push(g.values[c*s+d])}}0!==I.length&&(g.times=Su.convertArray(I,g.times.constructor),g.values=Su.convertArray(u,g.values.constructor),r.push(g))}a.tracks=r;for(var h=1/0,A=0;A<a.tracks.length;++A)h>a.tracks[A].times[0]&&(h=a.tracks[A].times[0]);for(var m=0;m<a.tracks.length;++m)a.tracks[m].shift(-1*h);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var l=n.tracks.length,a=t/i,r=function(t){var i=n.tracks[t],l=i.ValueTypeName;if("bool"===l||"string"===l)return"continue";var r=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===l}));if(void 0===r)return"continue";var o=0,g=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=g/3);var s=0,I=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=I/3);var u=i.times.length-1,c=void 0;if(a<=i.times[0]){var C=o,d=g-o;c=Su.arraySlice(i.values,C,d)}else if(a>=i.times[u]){var h=u*g+o,A=h+g-o;c=Su.arraySlice(i.values,h,A)}else{var m=i.createInterpolant(),p=o,v=g-o;m.evaluate(a),c=Su.arraySlice(m.resultBuffer,p,v)}"quaternion"===l&&(new Hi).fromArray(c).normalize().conjugate().toArray(c);for(var f=r.times.length,b=0;b<f;++b){var y=b*I+s;if("quaternion"===l)Hi.multiplyQuaternionsFlat(r.values,y,c,0,r.values,y);else for(var G=I-2*s,B=0;B<G;++B)r.values[y+B]-=c[B]}},o=0;o<l;++o)r(o);return e.blendMode=rn,e}},Ru=function(){function e(t,n,i,l){f(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==l?l:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return y(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],l=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var r=n+2;;){if(void 0===i){if(e<l)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===r)break;if(l=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=l)break e;var o=t[1];e<o&&(n=2,l=o);for(var g=n-2;;){if(void 0===l)return this._cachedIndex=0,this.copySampleValue_(0);if(n===g)break;if(i=l,e>=(l=t[--n-1]))break t}a=n,n=0}for(;n<a;){var s=n+a>>>1;e<t[s]?a=s:n=s+1}if(i=t[n],void 0===(l=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,l,i)}return this.interpolate_(n,l,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,l=e*i,a=0;a!==i;++a)t[a]=n[l+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),Vu=function(e){G(n,e);var t=w(n);function n(e,i,l,a){var r;return f(this,n),(r=t.call(this,e,i,l,a))._weightPrev=-0,r._offsetPrev=-0,r._weightNext=-0,r._offsetNext=-0,r.DefaultSettings_={endingStart:tn,endingEnd:tn},r}return y(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,l=e-2,a=e+1,r=i[l],o=i[a];if(void 0===r)switch(this.getSettings_().endingStart){case nn:l=e,r=2*t-n;break;case ln:r=t+i[l=i.length-2]-i[l+1];break;default:l=e,r=n}if(void 0===o)switch(this.getSettings_().endingEnd){case nn:a=e,o=2*n-t;break;case ln:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}var g=.5*(n-t),s=this.valueSize;this._weightPrev=g/(t-r),this._weightNext=g/(o-n),this._offsetPrev=l*s,this._offsetNext=a*s}},{key:"interpolate_",value:function(e,t,n,i){for(var l=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=e*r,g=o-r,s=this._offsetPrev,I=this._offsetNext,u=this._weightPrev,c=this._weightNext,C=(n-t)/(i-t),d=C*C,h=d*C,A=-u*h+2*u*d-u*C,m=(1+u)*h+(-1.5-2*u)*d+(-.5+u)*C+1,p=(-1-c)*h+(1.5+c)*d+.5*C,v=c*h-c*d,f=0;f!==r;++f)l[f]=A*a[s+f]+m*a[g+f]+p*a[o+f]+v*a[I+f];return l}}]),n}(Ru),ku=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),t.call(this,e,i,l,a)}return y(n,[{key:"interpolate_",value:function(e,t,n,i){for(var l=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=e*r,g=o-r,s=(n-t)/(i-t),I=1-s,u=0;u!==r;++u)l[u]=a[g+u]*I+a[o+u]*s;return l}}]),n}(Ru),Xu=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),t.call(this,e,i,l,a)}return y(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Ru),Yu=function(){function e(t,n,i,l){if(f(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Su.convertArray(n,this.TimeBufferType),this.values=Su.convertArray(i,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}return y(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Xu(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new ku(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Vu(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case jt:t=this.InterpolantFactoryMethodDiscrete;break;case $t:t=this.InterpolantFactoryMethodLinear;break;case en:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jt;case this.InterpolantFactoryMethodLinear:return $t;case this.InterpolantFactoryMethodSmooth:return en}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,i=n.length,l=0,a=i-1;l!==i&&n[l]<e;)++l;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==l||a!==i){l>=a&&(l=(a=Math.max(a,1))-1);var r=this.getValueSize();this.times=Su.arraySlice(n,l,a),this.values=Su.arraySlice(this.values,l*r,a*r)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,l=n.length;0===l&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,r=0;r!==l;r++){var o=n[r];if("number"===typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,r,o),e=!1;break}if(null!==a&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,r,o,a),e=!1;break}a=o}if(void 0!==i&&Su.isTypedArray(i))for(var g=0,s=i.length;g!==s;++g){var I=i[g];if(isNaN(I)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,I),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=Su.arraySlice(this.times),t=Su.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===en,l=e.length-1,a=1,r=1;r<l;++r){var o=!1,g=e[r];if(g!==e[r+1]&&(1!==r||g!==e[0]))if(i)o=!0;else for(var s=r*n,I=s-n,u=s+n,c=0;c!==n;++c){var C=t[s+c];if(C!==t[I+c]||C!==t[u+c]){o=!0;break}}if(o){if(r!==a){e[a]=e[r];for(var d=r*n,h=a*n,A=0;A!==n;++A)t[h+A]=t[d+A]}++a}}if(l>0){e[a]=e[l];for(var m=l*n,p=a*n,v=0;v!==n;++v)t[p+v]=t[m+v];++a}return a!==e.length?(this.times=Su.arraySlice(e,0,a),this.values=Su.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=Su.arraySlice(this.times,0),t=Su.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Su.convertArray(e.times,Array),values:Su.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();Yu.prototype.TimeBufferType=Float32Array,Yu.prototype.ValueBufferType=Float32Array,Yu.prototype.DefaultInterpolation=$t;var Hu=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Yu);Hu.prototype.ValueTypeName="bool",Hu.prototype.ValueBufferType=Array,Hu.prototype.DefaultInterpolation=jt,Hu.prototype.InterpolantFactoryMethodLinear=void 0,Hu.prototype.InterpolantFactoryMethodSmooth=void 0;var Ku=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Yu);Ku.prototype.ValueTypeName="color";var Fu=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Yu);Fu.prototype.ValueTypeName="number";var Nu=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),t.call(this,e,i,l,a)}return y(n,[{key:"interpolate_",value:function(e,t,n,i){for(var l=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=(n-t)/(i-t),g=e*r,s=g+r;g!==s;g+=4)Hi.slerpFlat(l,0,a,g-r,a,g,o);return l}}]),n}(Ru),zu=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Nu(this.times,this.values,this.getValueSize(),e)}}]),n}(Yu);zu.prototype.ValueTypeName="quaternion",zu.prototype.DefaultInterpolation=$t,zu.prototype.InterpolantFactoryMethodSmooth=void 0;var Mu=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Yu);Mu.prototype.ValueTypeName="string",Mu.prototype.ValueBufferType=Array,Mu.prototype.DefaultInterpolation=jt,Mu.prototype.InterpolantFactoryMethodLinear=void 0,Mu.prototype.InterpolantFactoryMethodSmooth=void 0;var Lu=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n)}(Yu);Lu.prototype.ValueTypeName="vector";var _u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:an;f(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=l,this.uuid=jn(),this.duration<0&&this.resetDuration()}return y(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),l=0,a=n.length;l!==a;++l)t.push(Tu(n[l]).scale(i));var r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},l=0,a=n.length;l!==a;++l)t.push(Yu.toJSON(n[l]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var l=t.length,a=[],r=0;r<l;r++){var o=[],g=[];o.push((r+l-1)%l,r,(r+1)%l),g.push(0,1,0);var s=Su.getKeyframeOrder(o);o=Su.sortedArray(o,1,s),g=Su.sortedArray(g,1,s),i||0!==o[0]||(o.push(l),g.push(g[0])),a.push(new Fu(".morphTargetInfluences["+t[r].name+"]",o,g).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var l=0;l<n.length;l++)if(n[l].name===t)return n[l];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},l=/^([\w-]*?)([\d]+)$/,a=0,r=e.length;a<r;a++){var o=e[a],g=o.name.match(l);if(g&&g.length>1){var s=g[1],I=i[s];I||(i[s]=I=[]),I.push(o)}}var u=[];for(var c in i)u.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return u}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,l){if(0!==n.length){var a=[],r=[];Su.flattenJSON(n,a,r,i),0!==a.length&&l.push(new e(t,a,r))}},i=[],l=e.name||"default",a=e.fps||30,r=e.blendMode,o=e.length||-1,g=e.hierarchy||[],s=0;s<g.length;s++){var I=g[s].keys;if(I&&0!==I.length)if(I[0].morphTargets){var u={},c=void 0;for(c=0;c<I.length;c++)if(I[c].morphTargets)for(var C=0;C<I[c].morphTargets.length;C++)u[I[c].morphTargets[C]]=-1;for(var d in u){for(var h=[],A=[],m=0;m!==I[c].morphTargets.length;++m){var p=I[c];h.push(p.time),A.push(p.morphTarget===d?1:0)}i.push(new Fu(".morphTargetInfluence["+d+"]",h,A))}o=u.length*a}else{var v=".bones["+t[s].name+"]";n(Lu,v+".position",I,"pos",i),n(zu,v+".quaternion",I,"rot",i),n(Lu,v+".scale",I,"scl",i)}}return 0===i.length?null:new this(l,o,i,r)}}]),e}();function Tu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fu;case"vector":case"vector2":case"vector3":case"vector4":return Lu;case"color":return Ku;case"quaternion":return zu;case"bool":case"boolean":return Hu;case"string":return Mu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];Su.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Eu,Ju={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Uu=y((function e(t,n,i){f(this,e);var l=this,a=!1,r=0,o=0,g=void 0,s=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==l.onStart&&l.onStart(e,r,o),a=!0},this.itemEnd=function(e){r++,void 0!==l.onProgress&&l.onProgress(e,r,o),r===o&&(a=!1,void 0!==l.onLoad&&l.onLoad())},this.itemError=function(e){void 0!==l.onError&&l.onError(e)},this.resolveURL=function(e){return g?g(e):e},this.setURLModifier=function(e){return g=e,this},this.addHandler=function(e,t){return s.push(e,t),this},this.removeHandler=function(e){var t=s.indexOf(e);return-1!==t&&s.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=s.length;t<n;t+=2){var i=s[t],l=s[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return l}return null}})),Du=new Uu,Qu=function(){function e(t){f(this,e),this.manager=void 0!==t?t:Du,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return y(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,l){n.load(e,i,t,l)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Pu={},Ou=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Ju.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),l.manager.itemEnd(e)}),0),a;if(void 0===Pu[e]){Pu[e]=[],Pu[e].push({onLoad:t,onProgress:n,onError:i});var r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,g=this.responseType;fetch(r).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=Pu[e],i=t.body.getReader(),l=t.headers.get("Content-Length"),a=l?parseInt(l):0,r=0!==a,o=0,g=new ReadableStream({start:function(e){!function t(){i.read().then((function(i){var l=i.done,g=i.value;if(l)e.close();else{o+=g.byteLength;for(var s=new ProgressEvent("progress",{lengthComputable:r,loaded:o,total:a}),I=0,u=n.length;I<u;I++){var c=n[I];c.onProgress&&c.onProgress(s)}e.enqueue(g),t()}}))}()}});return new Response(g)}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((function(e){switch(g){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,o)}));case"json":return e.json();default:if(void 0===o)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){Ju.add(e,t);var n=Pu[e];delete Pu[e];for(var i=0,l=n.length;i<l;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=Pu[e];if(void 0===n)throw l.manager.itemError(e),t;delete Pu[e];for(var i=0,a=n.length;i<a;i++){var r=n[i];r.onError&&r.onError(t)}l.manager.itemError(e)})).finally((function(){l.manager.itemEnd(e)})),this.manager.itemStart(e)}else Pu[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Qu),ju=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(l.parse(JSON.parse(n)))}catch($p){i?i($p):console.error($p),l.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=_u.parse(e[n]);t.push(i)}return t}}]),n}(Qu),$u=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=[],r=new Ds,o=new Ou(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(l.withCredentials);var g=0;function s(s){o.load(e[s],(function(e){var n=l.parse(e,!0);a[s]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(g+=1)&&(1===n.mipmapCount&&(r.minFilter=Qe),r.image=a,r.format=n.format,r.needsUpdate=!0,t&&t(r))}),n,i)}if(Array.isArray(e))for(var I=0,u=e.length;I<u;++I)s(I);else o.load(e,(function(e){var n=l.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,o=0;o<i;o++){a[o]={mipmaps:[]};for(var g=0;g<n.mipmapCount;g++)a[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+g]),a[o].format=n.format,a[o].width=n.width,a[o].height=n.height}r.image=a}else r.image.width=n.width,r.image.height=n.height,r.mipmaps=n.mipmaps;1===n.mipmapCount&&(r.minFilter=Qe),r.format=n.format,r.needsUpdate=!0,t&&t(r)}),n,i);return r}}]),n}(Qu),ec=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var l=this,a=Ju.get(e);if(void 0!==a)return l.manager.itemStart(e),setTimeout((function(){t&&t(a),l.manager.itemEnd(e)}),0),a;var r=ui("img");function o(){s(),Ju.add(e,this),t&&t(this),l.manager.itemEnd(e)}function g(t){s(),i&&i(t),l.manager.itemError(e),l.manager.itemEnd(e)}function s(){r.removeEventListener("load",o,!1),r.removeEventListener("error",g,!1)}return r.addEventListener("load",o,!1),r.addEventListener("error",g,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(r.crossOrigin=this.crossOrigin),l.manager.itemStart(e),r.src=e,r}}]),n}(Qu),tc=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=new Qa,a=new ec(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var r=0;function o(n){a.load(e[n],(function(e){l.images[n]=e,6===++r&&(l.needsUpdate=!0,t&&t(l))}),void 0,i)}for(var g=0;g<e.length;++g)o(g);return l}}]),n}(Qu),nc=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new ps,r=new Ou(this.manager);return r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setPath(this.path),r.setWithCredentials(l.withCredentials),r.load(e,(function(e){var n=l.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Le,a.wrapT=void 0!==n.wrapT?n.wrapT:Le,a.magFilter=void 0!==n.magFilter?n.magFilter:Qe,a.minFilter=void 0!==n.minFilter?n.minFilter:Qe,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=je),1===n.mipmapCount&&(a.minFilter=Qe),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}]),n}(Qu),ic=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=new wi,a=new ec(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){l.image=e,l.needsUpdate=!0,void 0!==t&&t(l)}),n,i),l}}]),n}(Qu),lc=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f(this,n),(i=t.call(this)).isLight=!0,i.type="Light",i.color=new Gi(e),i.intensity=l,i}return y(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Nl),ac=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),(a=t.call(this,e,l)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Nl.DefaultUp),a.updateMatrix(),a.groundColor=new Gi(i),a}return y(n,[{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(lc),rc=new dl,oc=new Ki,gc=new Ki,sc=function(){function e(t){f(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ri(512,512),this.map=null,this.mapPass=null,this.matrix=new dl,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ir,this._frameExtents=new ri(1,1),this._viewportCount=1,this._viewports=[new Wi(0,0,1,1)]}return y(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;oc.setFromMatrixPosition(e.matrixWorld),t.position.copy(oc),gc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gc),t.updateMatrixWorld(),rc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Ic=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,new Ja(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return y(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*On*e.angle*this.focus,l=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;i===t.fov&&l===t.aspect&&a===t.far||(t.fov=i,t.aspect=l,t.far=a,t.updateProjectionMatrix()),V(B(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(sc),uc=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return f(this,n),(l=t.call(this,e,i)).isSpotLight=!0,l.type="SpotLight",l.position.copy(Nl.DefaultUp),l.updateMatrix(),l.target=new Nl,l.distance=a,l.angle=r,l.penumbra=o,l.decay=g,l.shadow=new Ic,l}return y(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(lc),cc=new dl,Cc=new Ki,dc=new Ki,hc=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,new Ja(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new ri(4,2),e._viewportCount=6,e._viewports=[new Wi(2,1,1,1),new Wi(0,1,1,1),new Wi(3,1,1,1),new Wi(1,1,1,1),new Wi(3,0,1,1),new Wi(1,0,1,1)],e._cubeDirections=[new Ki(1,0,0),new Ki(-1,0,0),new Ki(0,0,1),new Ki(0,0,-1),new Ki(0,1,0),new Ki(0,-1,0)],e._cubeUps=[new Ki(0,1,0),new Ki(0,1,0),new Ki(0,1,0),new Ki(0,1,0),new Ki(0,0,1),new Ki(0,0,-1)],e}return y(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,l=e.distance||n.far;l!==n.far&&(n.far=l,n.updateProjectionMatrix()),Cc.setFromMatrixPosition(e.matrixWorld),n.position.copy(Cc),dc.copy(n.position),dc.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(dc),n.updateMatrixWorld(),i.makeTranslation(-Cc.x,-Cc.y,-Cc.z),cc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cc)}}]),n}(sc),Ac=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return f(this,n),(l=t.call(this,e,i)).isPointLight=!0,l.type="PointLight",l.distance=a,l.decay=r,l.shadow=new hc,l}return y(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(lc),mc=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this,new Ar(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return y(n)}(sc),pc=function(e){G(n,e);var t=w(n);function n(e,i){var l;return f(this,n),(l=t.call(this,e,i)).isDirectionalLight=!0,l.type="DirectionalLight",l.position.copy(Nl.DefaultUp),l.updateMatrix(),l.target=new Nl,l.shadow=new mc,l}return y(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(lc),vc=function(e){G(n,e);var t=w(n);function n(e,i){var l;return f(this,n),(l=t.call(this,e,i)).isAmbientLight=!0,l.type="AmbientLight",l}return y(n)}(lc),fc=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return f(this,n),(l=t.call(this,e,i)).isRectAreaLight=!0,l.type="RectAreaLight",l.width=a,l.height=r,l}return y(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(lc),bc=function(){function e(){f(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Ki)}return y(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,l=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*l),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*l*1.092548),t.addScaledVector(a[6],.315392*(3*l*l-1)),t.addScaledVector(a[7],n*l*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,l=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*l),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*l),t.addScaledVector(a[6],.743125*l*l-.247708),t.addScaledVector(a[7],.858086*n*l),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,l=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*l,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*l,t[6]=.315392*(3*l*l-1),t[7]=1.092548*n*l,t[8]=.546274*(n*n-i*i)}}]),e}(),yc=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bc,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return f(this,n),(e=t.call(this,void 0,l)).isLightProbe=!0,e.sh=i,e}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(lc),Gc=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).textures={},i}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(l.manager);a.setPath(l.path),a.setRequestHeader(l.requestHeader),a.setWithCredentials(l.withCredentials),a.load(e,(function(n){try{t(l.parse(JSON.parse(n)))}catch($p){i?i($p):console.error($p),l.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var l=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(l.uuid=e.uuid),void 0!==e.name&&(l.name=e.name),void 0!==e.color&&void 0!==l.color&&l.color.setHex(e.color),void 0!==e.roughness&&(l.roughness=e.roughness),void 0!==e.metalness&&(l.metalness=e.metalness),void 0!==e.sheen&&(l.sheen=e.sheen),void 0!==e.sheenColor&&(l.sheenColor=(new Gi).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(l.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==l.emissive&&l.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==l.specular&&l.specular.setHex(e.specular),void 0!==e.specularIntensity&&(l.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==l.specularColor&&l.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(l.shininess=e.shininess),void 0!==e.clearcoat&&(l.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(l.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(l.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(l.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(l.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(l.transmission=e.transmission),void 0!==e.thickness&&(l.thickness=e.thickness),void 0!==e.attenuationDistance&&(l.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==l.attenuationColor&&l.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(l.fog=e.fog),void 0!==e.flatShading&&(l.flatShading=e.flatShading),void 0!==e.blending&&(l.blending=e.blending),void 0!==e.combine&&(l.combine=e.combine),void 0!==e.side&&(l.side=e.side),void 0!==e.shadowSide&&(l.shadowSide=e.shadowSide),void 0!==e.opacity&&(l.opacity=e.opacity),void 0!==e.transparent&&(l.transparent=e.transparent),void 0!==e.alphaTest&&(l.alphaTest=e.alphaTest),void 0!==e.depthTest&&(l.depthTest=e.depthTest),void 0!==e.depthWrite&&(l.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(l.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(l.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(l.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(l.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(l.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(l.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(l.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(l.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(l.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(l.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(l.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(l.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(l.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(l.rotation=e.rotation),1!==e.linewidth&&(l.linewidth=e.linewidth),void 0!==e.dashSize&&(l.dashSize=e.dashSize),void 0!==e.gapSize&&(l.gapSize=e.gapSize),void 0!==e.scale&&(l.scale=e.scale),void 0!==e.polygonOffset&&(l.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(l.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(l.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(l.dithering=e.dithering),void 0!==e.alphaToCoverage&&(l.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(l.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(l.visible=e.visible),void 0!==e.toneMapped&&(l.toneMapped=e.toneMapped),void 0!==e.userData&&(l.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?l.vertexColors=e.vertexColors>0:l.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var r=e.uniforms[a];switch(l.uniforms[a]={},r.type){case"t":l.uniforms[a].value=i(r.value);break;case"c":l.uniforms[a].value=(new Gi).setHex(r.value);break;case"v2":l.uniforms[a].value=(new ri).fromArray(r.value);break;case"v3":l.uniforms[a].value=(new Ki).fromArray(r.value);break;case"v4":l.uniforms[a].value=(new Wi).fromArray(r.value);break;case"m3":l.uniforms[a].value=(new oi).fromArray(r.value);break;case"m4":l.uniforms[a].value=(new dl).fromArray(r.value);break;default:l.uniforms[a].value=r.value}}if(void 0!==e.defines&&(l.defines=e.defines),void 0!==e.vertexShader&&(l.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(l.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)l.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(l.flatShading=1===e.shading),void 0!==e.size&&(l.size=e.size),void 0!==e.sizeAttenuation&&(l.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(l.map=i(e.map)),void 0!==e.matcap&&(l.matcap=i(e.matcap)),void 0!==e.alphaMap&&(l.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(l.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(l.bumpScale=e.bumpScale),void 0!==e.normalMap&&(l.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(l.normalMapType=e.normalMapType),void 0!==e.normalScale){var g=e.normalScale;!1===Array.isArray(g)&&(g=[g,g]),l.normalScale=(new ri).fromArray(g)}return void 0!==e.displacementMap&&(l.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(l.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(l.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(l.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(l.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(l.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(l.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(l.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(l.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(l.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(l.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(l.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(l.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(l.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(l.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(l.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(l.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(l.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(l.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(l.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(l.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(l.clearcoatNormalScale=(new ri).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(l.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(l.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(l.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(l.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(l.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(l.sheenRoughnessMap=i(e.sheenRoughnessMap)),l}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:fu,SpriteMaterial:Ug,RawShaderMaterial:bu,ShaderMaterial:Ta,PointsMaterial:Ns,MeshPhysicalMaterial:Gu,MeshStandardMaterial:yu,MeshPhongMaterial:Bu,MeshToonMaterial:Zu,MeshNormalMaterial:qu,MeshLambertMaterial:xu,MeshDepthMaterial:Bg,MeshDistanceMaterial:Zg,MeshBasicMaterial:$l,MeshMatcapMaterial:wu,LineDashedMaterial:Wu,LineBasicMaterial:ws,Material:jl}[e]}}]),n}(Qu),Bc=function(){function e(){f(this,e)}return y(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch($p){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Zc=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=V(B(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(fa),qc=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(l.manager);a.setPath(l.path),a.setRequestHeader(l.requestHeader),a.setWithCredentials(l.withCredentials),a.load(e,(function(n){try{t(l.parse(JSON.parse(n)))}catch($p){i?i($p):console.error($p),l.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var l=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers[t],l=new Uint32Array(i).buffer;return n[t]=l,l}(e,l.buffer),r=Ii(l.type,a),o=new Tg(r,l.stride);return o.uuid=l.uuid,t[i]=o,o}var l=e.isInstancedBufferGeometry?new Zc:new fa,a=e.data.index;if(void 0!==a){var r=Ii(a.type,a.array);l.setIndex(new na(r,1))}var o=e.data.attributes;for(var g in o){var s=o[g],I=void 0;if(s.isInterleavedBufferAttribute){var u=i(e.data,s.data);I=new Jg(u,s.itemSize,s.offset,s.normalized)}else{var c=Ii(s.type,s.array);I=new(s.isInstancedBufferAttribute?ys:na)(c,s.itemSize,s.normalized)}void 0!==s.name&&(I.name=s.name),void 0!==s.usage&&I.setUsage(s.usage),void 0!==s.updateRange&&(I.updateRange.offset=s.updateRange.offset,I.updateRange.count=s.updateRange.count),l.setAttribute(g,I)}var C=e.data.morphAttributes;if(C)for(var d in C){for(var h=C[d],A=[],m=0,p=h.length;m<p;m++){var v=h[m],f=void 0;if(v.isInterleavedBufferAttribute){var b=i(e.data,v.data);f=new Jg(b,v.itemSize,v.offset,v.normalized)}else{var y=Ii(v.type,v.array);f=new na(y,v.itemSize,v.normalized)}void 0!==v.name&&(f.name=v.name),A.push(f)}l.morphAttributes[d]=A}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);var G=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==G)for(var B=0,Z=G.length;B!==Z;++B){var q=G[B];l.addGroup(q.start,q.count,q.materialIndex)}var x=e.data.boundingSphere;if(void 0!==x){var w=new Ki;void 0!==x.center&&w.fromArray(x.center),l.boundingSphere=new al(w,x.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}]),n}(Qu),xc=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=""===this.path?Bc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var r=new Ou(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(o){return void 0!==i&&i(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}var r=a.metadata;void 0!==r&&void 0!==r.type&&"geometry"!==r.type.toLowerCase()?l.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)}},{key:"loadAsync",value:function(){var e=S(k().mark((function e(t,n){var i,l,a,r,o,g;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,l=""===this.path?Bc.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||l,(a=new Ou(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(r=e.sent,o=JSON.parse(r),void 0!==(g=o.metadata)&&void 0!==g.type&&"geometry"!==g.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(o);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,(function(){void 0!==t&&t(g)})),r=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,r),g=this.parseObject(e.object,l,o,r,n),s=this.parseSkeletons(e.skeletons,g);if(this.bindSkeletons(g,s),void 0!==t){var I=!1;for(var u in a)if(a[u].data instanceof HTMLImageElement){I=!0;break}!1===I&&t(g)}return g}},{key:"parseAsync",value:function(){var e=S(k().mark((function e(t){var n,i,l,a,r,o,g,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),l=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,r=this.parseTextures(t.textures,a),o=this.parseMaterials(t.materials,r),g=this.parseObject(t.object,l,o,r,n),s=this.parseSkeletons(t.skeletons,g),this.bindSkeletons(g,s),e.abrupt("return",g);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var l=(new SI).fromJSON(e[n]);t[l.uuid]=l}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var l=0,a=e.length;l<a;l++){var r=(new bs).fromJSON(e[l],i);n[r.uuid]=r}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new qc,l=0,a=e.length;l<a;l++){var r=void 0,o=e[l];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":r=i.parse(o);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:o.type in vu?r=vu[o.type].fromJSON(o,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(o.type,'"'))}r.uuid=o.uuid,void 0!==o.name&&(r.name=o.name),!0===r.isBufferGeometry&&void 0!==o.userData&&(r.userData=o.userData),n[o.uuid]=r}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var l=new Gc;l.setTextures(t);for(var a=0,r=e.length;a<r;a++){var o=e[a];if("MultiMaterial"===o.type){for(var g=[],s=0;s<o.materials.length;s++){var I=o.materials[s];void 0===n[I.uuid]&&(n[I.uuid]=l.parse(I)),g.push(n[I.uuid])}i[o.uuid]=g}else void 0===n[o.uuid]&&(n[o.uuid]=l.parse(o)),i[o.uuid]=n[o.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],l=_u.parse(i);t[l.uuid]=l}return t}},{key:"parseImages",value:function(e,t){var n,i=this,l={};function a(e){if("string"===typeof e){var t=e;return function(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Ii(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var r=new Uu(t);(n=new ec(r)).setCrossOrigin(this.crossOrigin);for(var o=0,g=e.length;o<g;o++){var s=e[o],I=s.url;if(Array.isArray(I)){for(var u=[],c=0,C=I.length;c<C;c++){var d=a(I[c]);null!==d&&(d instanceof HTMLImageElement?u.push(d):u.push(new ps(d.data,d.width,d.height)))}l[s.uuid]=new Zi(u)}else{var h=a(s.url);l[s.uuid]=new Zi(h)}}}return l}},{key:"parseImagesAsync",value:function(){var e=S(k().mark((function e(t){var n,i,l,a,r,o,g,s,I,u,c,C,d,h,A;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){return r=S(k().mark((function e(t){var i,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i=t)?i:n.resourcePath+i,e.next=5,l.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Ii(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)},a=function(e){return r.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}(l=new ec(this.manager)).setCrossOrigin(this.crossOrigin),o=0,g=t.length;case 8:if(!(o<g)){e.next=33;break}if(s=t[o],I=s.url,!Array.isArray(I)){e.next=26;break}u=[],c=0,C=I.length;case 14:if(!(c<C)){e.next=23;break}return d=I[c],e.next=18,a(d);case 18:null!==(h=e.sent)&&(h instanceof HTMLImageElement?u.push(h):u.push(new ps(h.data,h.width,h.height)));case 20:c++,e.next=14;break;case 23:i[s.uuid]=new Zi(u),e.next=30;break;case 26:return e.next=28,a(s.url);case 28:A=e.sent,i[s.uuid]=new Zi(A);case 30:o++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var l=0,a=e.length;l<a;l++){var r=e[l];void 0===r.image&&console.warn('THREE.ObjectLoader: No "image" specified for',r.uuid),void 0===t[r.image]&&console.warn("THREE.ObjectLoader: Undefined image",r.image);var o=t[r.image],g=o.data,s=void 0;Array.isArray(g)?(s=new Qa,6===g.length&&(s.needsUpdate=!0)):(s=g&&g.data?new ps:new wi,g&&(s.needsUpdate=!0)),s.source=o,s.uuid=r.uuid,void 0!==r.name&&(s.name=r.name),void 0!==r.mapping&&(s.mapping=n(r.mapping,wc)),void 0!==r.offset&&s.offset.fromArray(r.offset),void 0!==r.repeat&&s.repeat.fromArray(r.repeat),void 0!==r.center&&s.center.fromArray(r.center),void 0!==r.rotation&&(s.rotation=r.rotation),void 0!==r.wrap&&(s.wrapS=n(r.wrap[0],Wc),s.wrapT=n(r.wrap[1],Wc)),void 0!==r.format&&(s.format=r.format),void 0!==r.type&&(s.type=r.type),void 0!==r.encoding&&(s.encoding=r.encoding),void 0!==r.minFilter&&(s.minFilter=n(r.minFilter,Sc)),void 0!==r.magFilter&&(s.magFilter=n(r.magFilter,Sc)),void 0!==r.anisotropy&&(s.anisotropy=r.anisotropy),void 0!==r.flipY&&(s.flipY=r.flipY),void 0!==r.premultiplyAlpha&&(s.premultiplyAlpha=r.premultiplyAlpha),void 0!==r.unpackAlignment&&(s.unpackAlignment=r.unpackAlignment),void 0!==r.userData&&(s.userData=r.userData),i[r.uuid]=s}return i}},{key:"parseObject",value:function(e,t,n,i,l){var a,r,o;function g(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,l=e.length;i<l;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function I(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new _g,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Gi(e.background):a.background=I(e.background)),void 0!==e.environment&&(a.environment=I(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Lg(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Mg(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Ja(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ar(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new vc(e.color,e.intensity);break;case"DirectionalLight":a=new pc(e.color,e.intensity);break;case"PointLight":a=new Ac(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new fc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new uc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new ac(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new yc).fromJSON(e);break;case"SkinnedMesh":r=g(e.geometry),o=s(e.material),a=new As(r,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":r=g(e.geometry),o=s(e.material),a=new Fa(r,o);break;case"InstancedMesh":r=g(e.geometry),o=s(e.material);var u=e.count,c=e.instanceMatrix,C=e.instanceColor;(a=new xs(r,o,u)).instanceMatrix=new ys(new Float32Array(c.array),16),void 0!==C&&(a.instanceColor=new ys(new Float32Array(C.array),C.itemSize));break;case"LOD":a=new Is;break;case"Line":a=new Xs(g(e.geometry),s(e.material));break;case"LineLoop":a=new Fs(g(e.geometry),s(e.material));break;case"LineSegments":a=new Ks(g(e.geometry),s(e.material));break;case"PointCloud":case"Points":a=new Ts(g(e.geometry),s(e.material));break;case"Sprite":a=new rs(s(e.material));break;case"Group":a=new Rg;break;case"Bone":a=new ms;break;default:a=new Nl}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var d=e.children,h=0;h<d.length;h++)a.add(this.parseObject(d[h],t,n,i,l));if(void 0!==e.animations)for(var A=e.animations,m=0;m<A.length;m++){var p=A[m];a.animations.push(l[p])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var v=e.levels,f=0;f<v.length;f++){var b=v[f],y=a.getObjectByProperty("uuid",b.object);void 0!==y&&a.addLevel(y,b.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"setTexturePath",value:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}]),n}(Qu),wc={UVMapping:Ye,CubeReflectionMapping:He,CubeRefractionMapping:Ke,EquirectangularReflectionMapping:Fe,EquirectangularRefractionMapping:Ne,CubeUVReflectionMapping:ze},Wc={RepeatWrapping:Me,ClampToEdgeWrapping:Le,MirroredRepeatWrapping:_e},Sc={NearestFilter:Te,NearestMipmapNearestFilter:Ee,NearestMipmapLinearFilter:Ue,LinearFilter:Qe,LinearMipmapNearestFilter:Pe,LinearMipmapLinearFilter:je},Rc=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return y(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var l=this,a=Ju.get(e);if(void 0!==a)return l.manager.itemStart(e),setTimeout((function(){t&&t(a),l.manager.itemEnd(e)}),0),a;var r={};r.credentials="anonymous"===this.crossOrigin?"same-origin":"include",r.headers=this.requestHeader,fetch(e,r).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(l.options,{colorSpaceConversion:"none"}))})).then((function(n){Ju.add(e,n),t&&t(n),l.manager.itemEnd(e)})).catch((function(t){i&&i(t),l.manager.itemError(e),l.manager.itemEnd(e)})),l.manager.itemStart(e)}}]),n}(Qu),Vc={getContext:function(){return void 0===Eu&&(Eu=new(window.AudioContext||window.webkitAudioContext)),Eu},setContext:function(e){Eu=e}},kc=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);Vc.getContext().decodeAudioData(a,(function(e){t(e)}))}catch($p){i?i($p):console.error($p),l.manager.itemError(e)}}),n,i)}}]),n}(Qu),Xc=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;f(this,n),(l=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var r=(new Gi).set(e),o=(new Gi).set(i),g=new Ki(r.r,r.g,r.b),s=new Ki(o.r,o.g,o.b),I=Math.sqrt(Math.PI),u=I*Math.sqrt(.75);return l.sh.coefficients[0].copy(g).add(s).multiplyScalar(I),l.sh.coefficients[1].copy(g).sub(s).multiplyScalar(u),l}return y(n)}(yc),Yc=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;f(this,n),(i=t.call(this,void 0,l)).isAmbientLightProbe=!0;var a=(new Gi).set(e);return i.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return y(n)}(yc),Hc=new dl,Kc=new dl,Fc=new dl,Nc=function(){function e(){f(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ja,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ja,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return y(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Fc.copy(e.projectionMatrix);var n,i,l=t.eyeSep/2,a=l*t.near/t.focus,r=t.near*Math.tan(Pn*t.fov*.5)/t.zoom;Kc.elements[12]=-l,Hc.elements[12]=l,n=-r*t.aspect+a,i=r*t.aspect+a,Fc.elements[0]=2*t.near/(i-n),Fc.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(Fc),n=-r*t.aspect-a,i=r*t.aspect-a,Fc.elements[0]=2*t.near/(i-n),Fc.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(Fc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Kc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Hc)}}]),e}(),zc=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return y(e,[{key:"start",value:function(){this.startTime=Mc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Mc();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Mc(){return("undefined"===typeof performance?Date:performance).now()}var Lc=new Ki,_c=new Hi,Tc=new Ki,Ec=new Ki,Jc=function(e){G(n,e);var t=w(n);function n(){var e;return f(this,n),(e=t.call(this)).type="AudioListener",e.context=Vc.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new zc,e}return y(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){V(B(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Lc,_c,Tc),Ec.set(0,0,-1).applyQuaternion(_c),t.positionX){var l=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Lc.x,l),t.positionY.linearRampToValueAtTime(Lc.y,l),t.positionZ.linearRampToValueAtTime(Lc.z,l),t.forwardX.linearRampToValueAtTime(Ec.x,l),t.forwardY.linearRampToValueAtTime(Ec.y,l),t.forwardZ.linearRampToValueAtTime(Ec.z,l),t.upX.linearRampToValueAtTime(i.x,l),t.upY.linearRampToValueAtTime(i.y,l),t.upZ.linearRampToValueAtTime(i.z,l)}else t.setPosition(Lc.x,Lc.y,Lc.z),t.setOrientation(Ec.x,Ec.y,Ec.z,i.x,i.y,i.z)}}]),n}(Nl),Uc=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this)).type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return y(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Nl),Dc=new Ki,Qc=new Hi,Pc=new Ki,Oc=new Ki,jc=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return y(n,[{key:"disconnect",value:function(){V(B(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(V(B(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Dc,Qc,Pc),Oc.set(0,0,1).applyQuaternion(Qc);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dc.x,i),t.positionY.linearRampToValueAtTime(Dc.y,i),t.positionZ.linearRampToValueAtTime(Dc.z,i),t.orientationX.linearRampToValueAtTime(Oc.x,i),t.orientationY.linearRampToValueAtTime(Oc.y,i),t.orientationZ.linearRampToValueAtTime(Oc.z,i)}else t.setPosition(Dc.x,Dc.y,Dc.z),t.setOrientation(Oc.x,Oc.y,Oc.z)}}}]),n}(Uc),$c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;f(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return y(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),eC=function(){function e(t,n,i){var l,a,r;switch(f(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":l=this._slerp,a=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":l=this._select,a=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:l=this._lerp,a=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=a,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return y(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,l=e*i+i,a=this.cumulativeWeight;if(0===a){for(var r=0;r!==i;++r)n[l+r]=n[r];a=t}else{var o=t/(a+=t);this._mixBufferRegion(n,l,0,o,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,l=this.cumulativeWeight,a=this.cumulativeWeightAdditive,r=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){var o=t*this._origIndex;this._mixBufferRegion(n,i,o,1-l,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var g=t,s=t+t;g!==s;++g)if(n[g]!==n[g+t]){r.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var l=n,a=i;l!==a;++l)t[l]=t[i+l%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,l){if(i>=.5)for(var a=0;a!==l;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){Hi.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,l){var a=this._workIndex*l;Hi.multiplyQuaternionsFlat(e,a,e,t,e,n),Hi.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,l){for(var a=1-i,r=0;r!==l;++r){var o=t+r;e[o]=e[o]*a+e[n+r]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,l){for(var a=0;a!==l;++a){var r=t+a;e[r]=e[r]+e[n+a]*i}}}]),e}(),tC="\\[\\]\\.:\\/",nC=new RegExp("[\\[\\]\\.:\\/]","g"),iC="[^\\[\\]\\.:\\/]",lC="[^"+tC.replace("\\.","")+"]",aC=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",iC)+/(WCOD+)?/.source.replace("WCOD",lC)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iC)+"$"),rC=["material","materials","bones"],oC=function(){function e(t,n,i){f(this,e);var l=i||gC.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,l)}return y(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,l=n.length;i!==l;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),gC=function(){function e(t,n,i){f(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return y(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,l=n.length;i!==l;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,l=n.length;i!==l;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,l=n.length;i!==l;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,l=n.length;i!==l;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,l=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var r=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===r){r=o;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}var g=t[l];if(void 0!==g){var s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);var I=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===l){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}I=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=a}else void 0!==g.fromArray&&void 0!==g.toArray?(I=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(I=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=l;this.getValue=this.GetterByBindingType[I],this.setValue=this.SetterByBindingTypeAndVersioning[I][s]}else{var u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+l+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(nC,"")}},{key:"parseTrackName",value:function(e){var t=aC.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var l=n.nodeName.substring(i+1);-1!==rC.indexOf(l)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=l)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var l=n[i];if(l.name===t||l.uuid===t)return l;var a=e(l.children);if(a)return a}return null}(e.children);if(i)return i}return null}}]),e}();gC.Composite=oC,gC.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},gC.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},gC.prototype.GetterByBindingType=[gC.prototype._getValue_direct,gC.prototype._getValue_array,gC.prototype._getValue_arrayElement,gC.prototype._getValue_toArray],gC.prototype.SetterByBindingTypeAndVersioning=[[gC.prototype._setValue_direct,gC.prototype._setValue_direct_setNeedsUpdate,gC.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gC.prototype._setValue_array,gC.prototype._setValue_array_setNeedsUpdate,gC.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gC.prototype._setValue_arrayElement,gC.prototype._setValue_arrayElement_setNeedsUpdate,gC.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gC.prototype._setValue_fromArray,gC.prototype._setValue_fromArray_setNeedsUpdate,gC.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var sC=function(){function e(){f(this,e),this.isAnimationObjectGroup=!0,this.uuid=jn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var l=this;this.stats={objects:{get total(){return l._objects.length},get inUse(){return this.total-l.nCachedObjects_}},get bindingsPerObject(){return l._bindings.length}}}return y(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,l=this._bindings,a=l.length,r=void 0,o=e.length,g=this.nCachedObjects_,s=0,I=arguments.length;s!==I;++s){var u=arguments[s],c=u.uuid,C=t[c];if(void 0===C){C=o++,t[c]=C,e.push(u);for(var d=0,h=a;d!==h;++d)l[d].push(new gC(u,n[d],i[d]))}else if(C<g){r=e[C];var A=--g,m=e[A];t[m.uuid]=C,e[C]=m,t[c]=A,e[A]=u;for(var p=0,v=a;p!==v;++p){var f=l[p],b=f[A],y=f[C];f[C]=b,void 0===y&&(y=new gC(u,n[p],i[p])),f[A]=y}}else e[C]!==r&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,l=this.nCachedObjects_,a=0,r=arguments.length;a!==r;++a){var o=arguments[a],g=o.uuid,s=t[g];if(void 0!==s&&s>=l){var I=l++,u=e[I];t[u.uuid]=s,e[s]=u,t[g]=I,e[I]=o;for(var c=0,C=i;c!==C;++c){var d=n[c],h=d[I],A=d[s];d[s]=h,d[I]=A}}}this.nCachedObjects_=l}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,l=this.nCachedObjects_,a=e.length,r=0,o=arguments.length;r!==o;++r){var g=arguments[r],s=g.uuid,I=t[s];if(void 0!==I)if(delete t[s],I<l){var u=--l,c=e[u],C=--a,d=e[C];t[c.uuid]=I,e[I]=c,t[d.uuid]=u,e[u]=d,e.pop();for(var h=0,A=i;h!==A;++h){var m=n[h],p=m[u],v=m[C];m[I]=p,m[u]=v,m.pop()}}else{var f=--a,b=e[f];f>0&&(t[b.uuid]=I),e[I]=b,e.pop();for(var y=0,G=i;y!==G;++y){var B=n[y];B[I]=B[f],B.pop()}}}this.nCachedObjects_=l}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],l=this._bindings;if(void 0!==i)return l[i];var a=this._paths,r=this._parsedPaths,o=this._objects,g=o.length,s=this.nCachedObjects_,I=new Array(g);i=l.length,n[e]=i,a.push(e),r.push(t),l.push(I);for(var u=s,c=o.length;u!==c;++u){var C=o[u];I[u]=new gC(C,e,t)}return I}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,l=this._parsedPaths,a=this._bindings,r=a.length-1,o=a[r];t[e[r]]=n,a[n]=o,a.pop(),l[n]=l[r],l.pop(),i[n]=i[r],i.pop()}}}]),e}(),IC=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;f(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=l;for(var a=n.tracks,r=a.length,o=new Array(r),g={endingStart:tn,endingEnd:tn},s=0;s!==r;++s){var I=a[s].createInterpolant(null);o[s]=I,I.settings=g}this._interpolantSettings=g,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Pt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return y(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,l=e._clip.duration,a=l/i,r=i/l;e.warp(1,a,t),this.warp(r,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,l=i.time,a=this.timeScale,r=this._timeScaleInterpolant;null===r&&(r=i._lendControlInterpolant(),this._timeScaleInterpolant=r);var o=r.parameterPositions,g=r.sampleValues;return o[0]=l,o[1]=l+n,g[0]=e/a,g[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var l=this._startTime;if(null!==l){var a=(e-l)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var r=this._updateTime(t),o=this._updateWeight(e);if(o>0){var g=this._interpolants,s=this._propertyBindings;if(this.blendMode===rn)for(var I=0,u=g.length;I!==u;++I)g[I].evaluate(r),s[I].accumulateAdditive(o);else for(var c=0,C=g.length;c!==C;++c)g[c].evaluate(r),s[c].accumulate(i,o)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,l=this._loopCount,a=n===Ot;if(0===e)return-1===l?i:a&&1===(1&l)?t-i:i;if(n===Qt){-1===l&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===l&&(e>=0?(l=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var r=Math.floor(i/t);i-=t*r,l+=Math.abs(r);var o=this.repetitions-l;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var g=e<0;this._setEndings(g,!g,a)}else this._setEndings(!1,!1,a);this._loopCount=l,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=i;if(a&&1===(1&l))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=nn,i.endingEnd=nn):(i.endingStart=e?this.zeroSlopeAtStart?nn:tn:ln,i.endingEnd=t?this.zeroSlopeAtEnd?nn:tn:ln)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,l=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var r=a.parameterPositions,o=a.sampleValues;return r[0]=l,o[0]=t,r[1]=l+e,o[1]=n,this}}]),e}(),uC=new Float32Array(1),cC=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return y(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,l=i.length,a=e._propertyBindings,r=e._interpolants,o=n.uuid,g=this._bindingsByRootAndName,s=g[o];void 0===s&&(s={},g[o]=s);for(var I=0;I!==l;++I){var u=i[I],c=u.name,C=s[c];if(void 0!==C)++C.referenceCount,a[I]=C;else{if(void 0!==(C=a[I])){null===C._cacheIndex&&(++C.referenceCount,this._addInactiveBinding(C,o,c));continue}var d=t&&t._propertyBindings[I].binding.parsedPath;++(C=new eC(gC.create(n,c,d),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(C,o,c),a[I]=C}r[I].resultBuffer=C.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var l=e._propertyBindings,a=0,r=l.length;a!==r;++a){var o=l[a];0===o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var l=t[n];0===--l.useCount&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,l=this._actionsByClip,a=l[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[t]=a;else{var r=a.knownActions;e._byClipCacheIndex=r.length,r.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var l=e._clip.uuid,a=this._actionsByClip,r=a[l],o=r.knownActions,g=o[o.length-1],s=e._byClipCacheIndex;g._byClipCacheIndex=s,o[s]=g,o.pop(),e._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[l],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var l=t[n];0===--l.referenceCount&&this._removeInactiveBinding(l)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=n,t[n]=l}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=n,t[n]=l}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,l=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=l.length,l.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,l=n.path,a=this._bindingsByRootAndName,r=a[i],o=t[t.length-1],g=e._cacheIndex;o._cacheIndex=g,t[g]=o,t.pop(),delete r[l],0===Object.keys(r).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=n,t[n]=l}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,l=t[i];e._cacheIndex=i,t[i]=e,l._cacheIndex=n,t[n]=l}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ku(new Float32Array(2),new Float32Array(2),1,uC)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,l=t[i];e.__cacheIndex=i,t[i]=e,l.__cacheIndex=n,t[n]=l}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,l=i.uuid,a="string"===typeof e?_u.findByName(i,e):e,r=null!==a?a.uuid:e,o=this._actionsByClip[r],g=null;if(void 0===n&&(n=null!==a?a.blendMode:an),void 0!==o){var s=o.actionByRoot[l];if(void 0!==s&&s.blendMode===n)return s;g=o.knownActions[0],null===a&&(a=g._clip)}if(null===a)return null;var I=new IC(this,a,t,n);return this._bindAction(I,g),this._addInactiveAction(I,r,l),I}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,l="string"===typeof e?_u.findByName(n,e):e,a=l?l.uuid:e,r=this._actionsByClip[a];return void 0!==r&&r.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,l=Math.sign(e),a=this._accuIndex^=1,r=0;r!==n;++r){t[r]._update(i,e,l,a)}for(var o=this._bindings,g=this._nActiveBindings,s=0;s!==g;++s)o[s].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,l=i[n];if(void 0!==l){for(var a=l.knownActions,r=0,o=a.length;r!==o;++r){var g=a[r];this._deactivateAction(g);var s=g._cacheIndex,I=t[t.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,I._cacheIndex=s,t[s]=I,t.pop(),this._removeInactiveBindingsForAction(g)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var l=n[i].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var r in a){var o=a[r];o.restoreOriginalState(),this._removeInactiveBinding(o)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Un),CC=function(){function e(t){f(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return y(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),dC=function(e){G(n,e);var t=w(n);function n(e,i){var l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return f(this,n),(l=t.call(this,e,i)).isInstancedInterleavedBuffer=!0,l.meshPerAttribute=a,l}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=V(B(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=V(B(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Tg),hC=function(){function e(t,n,i,l,a){f(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=l,this.count=a,this.version=0}return y(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),AC=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;f(this,e),this.ray=new Cl(t,n),this.near=i,this.far=l,this.camera=null,this.layers=new Zl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return y(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return pC(e,this,n,t),n.sort(mC),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,l=e.length;i<l;i++)pC(e[i],this,n,t);return n.sort(mC),n}}]),e}();function mC(e,t){return e.distance-t.distance}function pC(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var l=e.children,a=0,r=l.length;a<r;a++)pC(l[a],t,n,!0)}var vC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,e),this.radius=t,this.phi=n,this.theta=i,this}return y(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos($n(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),fC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,e),this.radius=t,this.theta=n,this.y=i,this}return y(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),bC=new ri,yC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ri(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri(-1/0,-1/0);f(this,e),this.isBox2=!0,this.min=t,this.max=n}return y(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=bC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return bC.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),GC=new Ki,BC=new Ki,ZC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki;f(this,e),this.start=t,this.end=n}return y(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){GC.subVectors(e,this.start),BC.subVectors(this.end,this.start);var n=BC.dot(BC),i=BC.dot(GC)/n;return t&&(i=$n(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),qC=new Ki,xC=function(e){G(n,e);var t=w(n);function n(e,i){var l;f(this,n),(l=t.call(this)).light=e,l.light.updateMatrixWorld(),l.matrix=e.matrixWorld,l.matrixAutoUpdate=!1,l.color=i;for(var a=new fa,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],o=0,g=1;o<32;o++,g++){var s=o/32*Math.PI*2,I=g/32*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(I),Math.sin(I),1)}a.setAttribute("position",new ua(r,3));var u=new ws({fog:!1,toneMapped:!1});return l.cone=new Ks(a,u),l.add(l.cone),l.update(),l}return y(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),qC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qC),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Nl),wC=new Ki,WC=new dl,SC=new dl,RC=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n);for(var l=VC(e),a=new fa,r=[],o=[],g=new Gi(0,0,1),s=new Gi(0,1,0),I=0;I<l.length;I++){var u=l[I];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(g.r,g.g,g.b),o.push(s.r,s.g,s.b))}a.setAttribute("position",new ua(r,3)),a.setAttribute("color",new ua(o,3));var c=new ws({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=t.call(this,a,c)).isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=l,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return y(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,l=i.getAttribute("position");SC.copy(this.root.matrixWorld).invert();for(var a=0,r=0;a<t.length;a++){var o=t[a];o.parent&&o.parent.isBone&&(WC.multiplyMatrices(SC,o.matrixWorld),wC.setFromMatrixPosition(WC),l.setXYZ(r,wC.x,wC.y,wC.z),WC.multiplyMatrices(SC,o.parent.matrixWorld),wC.setFromMatrixPosition(WC),l.setXYZ(r+1,wC.x,wC.y,wC.z),r+=2)}i.getAttribute("position").needsUpdate=!0,V(B(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Ks);function VC(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,VC(e.children[n]));return t}var kC=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;f(this,n);var r=new cu(i,4,2),o=new $l({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,r,o)).light=e,a.light.updateMatrixWorld(),a.color=l,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return y(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Fa),XC=new Ki,YC=new Gi,HC=new Gi,KC=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;f(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=l;var r=new su(i);r.rotateY(.5*Math.PI),a.material=new $l({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var o=r.getAttribute("position"),g=new Float32Array(3*o.count);return r.setAttribute("color",new na(g,3)),a.add(new Fa(r,a.material)),a.update(),a}return y(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");YC.copy(this.light.color),HC.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var l=n<i/2?YC:HC;t.setXYZ(n,l.r,l.g,l.b)}t.needsUpdate=!0}e.lookAt(XC.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Nl),FC=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;f(this,n),a=new Gi(a),r=new Gi(r);for(var o=l/2,g=i/l,s=i/2,I=[],u=[],c=0,C=0,d=-s;c<=l;c++,d+=g){I.push(-s,0,d,s,0,d),I.push(d,0,-s,d,0,s);var h=c===o?a:r;h.toArray(u,C),C+=3,h.toArray(u,C),C+=3,h.toArray(u,C),C+=3,h.toArray(u,C),C+=3}var A=new fa;A.setAttribute("position",new ua(I,3)),A.setAttribute("color",new ua(u,3));var m=new ws({vertexColors:!0,toneMapped:!1});return(e=t.call(this,A,m)).type="GridHelper",e}return y(n)}(Ks),NC=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;f(this,n),o=new Gi(o),g=new Gi(g);for(var s=[],I=[],u=0;u<=l;u++){var c=u/l*(2*Math.PI),C=Math.sin(c)*i,d=Math.cos(c)*i;s.push(0,0,0),s.push(C,0,d);var h=1&u?o:g;I.push(h.r,h.g,h.b),I.push(h.r,h.g,h.b)}for(var A=0;A<=a;A++)for(var m=1&A?o:g,p=i-i/a*A,v=0;v<r;v++){var b=v/r*(2*Math.PI),y=Math.sin(b)*p,G=Math.cos(b)*p;s.push(y,0,G),I.push(m.r,m.g,m.b),b=(v+1)/r*(2*Math.PI),y=Math.sin(b)*p,G=Math.cos(b)*p,s.push(y,0,G),I.push(m.r,m.g,m.b)}var B=new fa;B.setAttribute("position",new ua(s,3)),B.setAttribute("color",new ua(I,3));var Z=new ws({vertexColors:!0,toneMapped:!1});return(e=t.call(this,B,Z)).type="PolarGridHelper",e}return y(n)}(Ks),zC=new Ki,MC=new Ki,LC=new Ki,_C=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;f(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=l,void 0===i&&(i=1);var r=new fa;r.setAttribute("position",new ua([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var o=new ws({fog:!1,toneMapped:!1});return a.lightPlane=new Xs(r,o),a.add(a.lightPlane),(r=new fa).setAttribute("position",new ua([0,0,0,0,0,1],3)),a.targetLine=new Xs(r,o),a.add(a.targetLine),a.update(),a}return y(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){zC.setFromMatrixPosition(this.light.matrixWorld),MC.setFromMatrixPosition(this.light.target.matrixWorld),LC.subVectors(MC,zC),this.lightPlane.lookAt(MC),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(MC),this.targetLine.scale.z=LC.length()}}]),n}(Nl),TC=new Ki,EC=new Ea,JC=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n);var l=new fa,a=new ws({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],g={};function s(e,t){I(e),I(t)}function I(e){r.push(0,0,0),o.push(0,0,0),void 0===g[e]&&(g[e]=[]),g[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),l.setAttribute("position",new ua(r,3)),l.setAttribute("color",new ua(o,3)),(i=t.call(this,l,a)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=g,i.update();var u=new Gi(16755200),c=new Gi(16711680),C=new Gi(43775),d=new Gi(16777215),h=new Gi(3355443);return i.setColors(u,c,C,d,h),i}return y(n,[{key:"setColors",value:function(e,t,n,i,l){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,l.r,l.g,l.b),a.setXYZ(41,l.r,l.g,l.b),a.setXYZ(42,l.r,l.g,l.b),a.setXYZ(43,l.r,l.g,l.b),a.setXYZ(44,l.r,l.g,l.b),a.setXYZ(45,l.r,l.g,l.b),a.setXYZ(46,l.r,l.g,l.b),a.setXYZ(47,l.r,l.g,l.b),a.setXYZ(48,l.r,l.g,l.b),a.setXYZ(49,l.r,l.g,l.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;EC.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),UC("c",t,e,EC,0,0,-1),UC("t",t,e,EC,0,0,1),UC("n1",t,e,EC,-1,-1,-1),UC("n2",t,e,EC,1,-1,-1),UC("n3",t,e,EC,-1,1,-1),UC("n4",t,e,EC,1,1,-1),UC("f1",t,e,EC,-1,-1,1),UC("f2",t,e,EC,1,-1,1),UC("f3",t,e,EC,-1,1,1),UC("f4",t,e,EC,1,1,1),UC("u1",t,e,EC,.7,1.1,-1),UC("u2",t,e,EC,-.7,1.1,-1),UC("u3",t,e,EC,0,2,-1),UC("cf1",t,e,EC,-1,0,1),UC("cf2",t,e,EC,1,0,1),UC("cf3",t,e,EC,0,-1,1),UC("cf4",t,e,EC,0,1,1),UC("cn1",t,e,EC,-1,0,-1),UC("cn2",t,e,EC,1,0,-1),UC("cn3",t,e,EC,0,-1,-1),UC("cn4",t,e,EC,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Ks);function UC(e,t,n,i,l,a,r){TC.set(l,a,r).unproject(i);var o=t[e];if(void 0!==o)for(var g=n.getAttribute("position"),s=0,I=o.length;s<I;s++)g.setXYZ(o[s],TC.x,TC.y,TC.z)}var DC,QC,PC=new zi,OC=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;f(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),o=new fa;return o.setIndex(new na(a,1)),o.setAttribute("position",new na(r,3)),(i=t.call(this,o,new ws({color:l,toneMapped:!1}))).object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return y(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&PC.setFromObject(this.object),!PC.isEmpty()){var t=PC.min,n=PC.max,i=this.geometry.attributes.position,l=i.array;l[0]=n.x,l[1]=n.y,l[2]=n.z,l[3]=t.x,l[4]=n.y,l[5]=n.z,l[6]=t.x,l[7]=t.y,l[8]=n.z,l[9]=n.x,l[10]=t.y,l[11]=n.z,l[12]=n.x,l[13]=n.y,l[14]=t.z,l[15]=t.x,l[16]=n.y,l[17]=t.z,l[18]=t.x,l[19]=t.y,l[20]=t.z,l[21]=n.x,l[22]=t.y,l[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return V(B(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}}]),n}(Ks),jC=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;f(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new fa;return o.setIndex(new na(a,1)),o.setAttribute("position",new ua(r,3)),(i=t.call(this,o,new ws({color:l,toneMapped:!1}))).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return y(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),V(B(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(Ks),$C=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;f(this,n);var r=a,o=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],g=new fa;g.setAttribute("position",new ua(o,3)),g.computeBoundingSphere(),(i=t.call(this,g,new ws({color:r,toneMapped:!1}))).type="PlaneHelper",i.plane=e,i.size=l;var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],I=new fa;return I.setAttribute("position",new ua(s,3)),I.computeBoundingSphere(),i.add(new Fa(I,new $l({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return y(n,[{key:"updateMatrixWorld",value:function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?J:E,this.lookAt(this.plane.normal),V(B(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Xs),ed=new Ki,td=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ki(0,0,1),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ki(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*o;return f(this,n),(e=t.call(this)).type="ArrowHelper",void 0===DC&&((DC=new fa).setAttribute("position",new ua([0,0,0,0,1,0],3)),(QC=new bI(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(l),e.line=new Xs(DC,new ws({color:r,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Fa(QC,new $l({color:r,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(a,o,g),e}return y(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ed.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ed,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Nl),nd=function(e){G(n,e);var t=w(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f(this,n);var l=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new fa;r.setAttribute("position",new ua(l,3)),r.setAttribute("color",new ua(a,3));var o=new ws({vertexColors:!0,toneMapped:!1});return(e=t.call(this,r,o)).type="AxesHelper",e}return y(n,[{key:"setColors",value:function(e,t,n){var i=new Gi,l=this.geometry.attributes.color.array;return i.set(e),i.toArray(l,0),i.toArray(l,3),i.set(t),i.toArray(l,6),i.toArray(l,9),i.set(n),i.toArray(l,12),i.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Ks),id=function(){function e(){f(this,e),this.type="ShapePath",this.color=new Gi,this.subPaths=[],this.currentPath=null}return y(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new mI,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,l,a){return this.currentPath.bezierCurveTo(e,t,n,i,l,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var l=e[n],a=new SI;a.curves=l.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,l=n-1,a=0;a<n;l=a++){var r=t[l],o=t[a],g=o.x-r.x,s=o.y-r.y;if(Math.abs(s)>Number.EPSILON){if(s<0&&(r=t[a],g=-g,o=t[l],s=-s),e.y<r.y||e.y>o.y)continue;if(e.y===r.y){if(e.x===r.x)return!0}else{var I=s*(e.x-r.x)-g*(e.y-r.y);if(0===I)return!0;if(I<0)continue;i=!i}}else{if(e.y!==r.y)continue;if(o.x<=e.x&&e.x<=r.x||r.x<=e.x&&e.x<=o.x)return!0}}return i}var l,a,r,o=iu.isClockWise,g=this.subPaths;if(0===g.length)return[];if(!0===t)return n(g);var s=[];if(1===g.length)return a=g[0],(r=new SI).curves=a.curves,s.push(r),s;var I=!o(g[0].getPoints());I=e?!I:I;var u,c,C=[],d=[],h=[],A=0;d[A]=void 0,h[A]=[];for(var m=0,p=g.length;m<p;m++)l=o(u=(a=g[m]).getPoints()),(l=e?!l:l)?(!I&&d[A]&&A++,d[A]={s:new SI,p:u},d[A].s.curves=a.curves,I&&A++,h[A]=[]):h[A].push({h:a,p:u[0]});if(!d[0])return n(g);if(d.length>1){for(var v=!1,f=0,b=0,y=d.length;b<y;b++)C[b]=[];for(var G=0,B=d.length;G<B;G++)for(var Z=h[G],q=0;q<Z.length;q++){for(var x=Z[q],w=!0,W=0;W<d.length;W++)i(x.p,d[W].p)&&(G!==W&&f++,w?(w=!1,C[W].push(x)):v=!0);w&&C[G].push(x)}f>0&&!1===v&&(h=C)}for(var S=0,R=d.length;S<R;S++){r=d[S].s,s.push(r);for(var V=0,k=(c=h[S]).length;V<k;V++)r.holes.push(c[V].h)}return s}}]),e}(),ld=cd(),ad=ld.floatView,rd=ld.uint32View,od=ld.baseTable,gd=ld.shiftTable,sd=ld.mantissaTable,Id=ld.exponentTable,ud=ld.offsetTable;function cd(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),l=new Uint32Array(512),a=0;a<256;++a){var r=a-127;r<-27?(i[a]=0,i[256|a]=32768,l[a]=24,l[256|a]=24):r<-14?(i[a]=1024>>-r-14,i[256|a]=1024>>-r-14|32768,l[a]=-r-1,l[256|a]=-r-1):r<=15?(i[a]=r+15<<10,i[256|a]=r+15<<10|32768,l[a]=13,l[256|a]=13):r<128?(i[a]=31744,i[256|a]=64512,l[a]=24,l[256|a]=24):(i[a]=31744,i[256|a]=64512,l[a]=13,l[256|a]=13)}for(var o=new Uint32Array(2048),g=new Uint32Array(64),s=new Uint32Array(64),I=1;I<1024;++I){for(var u=I<<13,c=0;0===(8388608&u);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,o[I]=u|c}for(var C=1024;C<2048;++C)o[C]=939524096+(C-1024<<13);for(var d=1;d<31;++d)g[d]=d<<23;g[31]=1199570944,g[32]=2147483648;for(var h=33;h<63;++h)g[h]=2147483648+(h-32<<23);g[63]=3347054592;for(var A=1;A<64;++A)32!==A&&(s[A]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:l,mantissaTable:o,exponentTable:g,offsetTable:s}}var Cd=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=$n(e,-65504,65504),ad[0]=e;var t=rd[0],n=t>>23&511;return od[n]+((8388607&t)>>gd[n])},fromHalfFloat:function(e){var t=e>>10;return rd[0]=sd[ud[t]+(1023&e)]+Id[t],ad[0]}}),dd=function(e){G(n,e);var t=w(n);function n(){return f(this,n),console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),t.call(this)}return y(n)}(fa),hd=function(e){G(n,e);var t=w(n);function n(){return f(this,n),console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),t.call(this)}return y(n)}(fa);function Ad(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function md(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function pd(){console.error("THREE.ImmediateRenderObject has been removed.")}var vd=function(e){G(n,e);var t=w(n);function n(e,i,l){var a;return f(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(a=t.call(this,e,i,l)).samples=4,a}return y(n)}(Si),fd=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,i,l,a)}return y(n)}(Ri),bd=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,i,l,a)}return y(n)}(ki);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X);var yd=n(585);function Gd(e){var t,n=new Set,i=function(e,i){var l="function"===typeof e?e(t):e;if(l!==t){var a=t;t=i?l:Object.assign({},t,l),n.forEach((function(e){return e(t,a)}))}},l=function(){return t},a={setState:i,getState:l,subscribe:function(e,i,a){return i||a?function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var r=i(t);function o(){var n=i(t);if(!a(r,n)){var l=r;e(r=n,l)}}return n.add(o),function(){return n.delete(o)}}(e,i,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(i,l,a),a}var Bd="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;function Zd(e){var t="function"===typeof e?Gd(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=(0,i.useReducer)((function(e){return e+1}),0),r=c(a,2),o=r[1],g=t.getState(),s=(0,i.useRef)(g),I=(0,i.useRef)(n),u=(0,i.useRef)(l),C=(0,i.useRef)(!1),d=(0,i.useRef)();void 0===d.current&&(d.current=n(g));var h=!1;(s.current!==g||I.current!==n||u.current!==l||C.current)&&(e=n(g),h=!l(d.current,e)),Bd((function(){h&&(d.current=e),s.current=g,I.current=n,u.current=l,C.current=!1}));var A=(0,i.useRef)(g);Bd((function(){var e=function(){try{var e=t.getState(),n=I.current(e);u.current(d.current,n)||(s.current=e,d.current=n,o())}catch(i){C.current=!0,o()}},n=t.subscribe(e);return t.getState()!==A.current&&e(),n}),[]);var m=h?e:d.current;return(0,i.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}var qd=n(258),xd=n.n(qd),wd=n(545);function Wd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var i=e.length;if(t.length!==i)return!1;for(var l=0;l<i;l++)if(!n(e[l],t[l]))return!1;return!0}var Sd=[];function Rd(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=d(Sd);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(Wd(t,r.keys,r.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return r.response;if(!i)throw r.promise}}}catch(g){a.e(g)}finally{a.f()}var o={keys:t,equal:l.equal,promise:e.apply(void 0,v(t)).then((function(e){return o.response=e})).then((function(){l.lifespan&&l.lifespan>0&&setTimeout((function(){var e=Sd.indexOf(o);-1!==e&&Sd.splice(e,1)}),l.lifespan)})).catch((function(e){return o.error=e}))};if(Sd.push(o),!i)throw o.promise}var Vd=function(e,t,n){return Rd(e,t,!1,n)},kd=["children","key","ref"],Xd=["children","key","ref"],Yd=["args","attach"],Hd=["args","children"],Kd=["args","children"],Fd=["params"],Nd=["events","size"],zd=function(e){return e&&e.isOrthographicCamera},Md="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;function Ld(e){var t=i.useRef(e);return Md((function(){t.current=e}),[e]),t}function _d(e){var t=e.set;return Md((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var Td=function(e){G(n,e);var t=w(n);function n(){var e;f(this,n);for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return(e=t.call.apply(t,[this].concat(l))).state={error:!1},e}return y(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(i.Component);Td.getDerivedStateFromError=function(){return{error:!0}};var Ed="__default";function Jd(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}var Ud=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},Dd={obj:function(e){return e===Object(e)&&!Dd.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.arrays,l=void 0===i?"shallow":i,a=n.objects,r=void 0===a?"reference":a,o=n.strict,g=void 0===o||o;if(typeof e!==typeof t||!!e!==!!t)return!1;if(Dd.str(e)||Dd.num(e))return e===t;var s=Dd.obj(e);if(s&&"reference"===r)return e===t;var I,u=Dd.arr(e);if(u&&"reference"===l)return e===t;if((u||s)&&e===t)return!0;for(I in e)if(!(I in t))return!1;for(I in g?t:e)if(e[I]!==t[I])return!1;if(Dd.und(I)){if(u&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Qd(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Pd(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=o({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function Od(e,t){var n=e;if(t.includes("-")){var i=t.split("-"),l=i.pop();return n=i.reduce((function(e,t){return e[t]}),e),{target:n,key:l}}return{target:n,key:t}}var jd=/-\d+$/;function $d(e,t,n){if(Dd.str(n)){if(jd.test(n)){var i=Od(e,n.replace(jd,"")),l=i.target,a=i.key;Array.isArray(l[a])||(l[a]=[])}var r=Od(e,n),o=r.target,g=r.key;t.__r3f.previousAttach=o[g],o[g]=t}else t.__r3f.previousAttach=n(e,t)}function eh(e,t,n){var i,l;if(Dd.str(n)){var a=Od(e,n),r=a.target,o=a.key,g=t.__r3f.previousAttach;void 0===g?delete r[o]:r[o]=g}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(l=t.__r3f)||delete l.previousAttach}function th(e,t){t.children,t.key,t.ref;var n,i=C(t,kd),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(l.children,l.key,l.ref,C(l,Xd)),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=null!=(n=null==e?void 0:e.__r3f)?n:{},s=Object.entries(i),I=[];if(r)for(var u=Object.keys(a),d=0;d<u.length;d++)i.hasOwnProperty(u[d])||s.unshift([u[d],Ed+"remove"]);s.forEach((function(t){var n,i=c(t,2),l=i[0],r=i[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==l)&&!Dd.equ(r,a[l])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(l))return I.push([l,r,!0,[]]);var o=[];l.includes("-")&&(o=l.split("-")),I.push([l,r,!1,o])}}));var h=o({},i);return g.memoizedProps&&g.memoizedProps.args&&(h.args=g.memoizedProps.args),g.memoizedProps&&g.memoizedProps.attach&&(h.attach=g.memoizedProps.attach),{memoized:h,changes:I}}function nh(e,t){var n,i,l,a=null!=(n=e.__r3f)?n:{},r=a.root,o=null!=(i=null==r||null==r.getState?void 0:r.getState())?i:{},s=(l=t)&&l.memoized&&l.changes?t:th(e,t),C=s.memoized,d=s.changes,h=a.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=C),d.forEach((function(t){var n,i,l=c(t,4),r=l[0],s=l[1],d=l[2],h=l[3],A=e,f=A[r];if(h.length&&(f=h.reduce((function(e,t){return e[t]}),e),!f||!f.set)){var b=h.reverse(),y=g(n=b)||p(n)||I(n)||u(),G=y[0];A=y.slice(1).reverse().reduce((function(e,t){return e[t]}),e),r=G}if(s===Ed+"remove")if(f&&f.constructor)s=m(f.constructor,v(null!=(i=C.args)?i:[]));else if(A.constructor){var B,Z=m(A.constructor,v(null!=(B=A.__r3f.memoizedProps.args)?B:[]));s=Z[f],Z.dispose&&Z.dispose()}else s=0;if(d)s?a.handlers[r]=s:delete a.handlers[r],a.eventCount=Object.keys(a.handlers).length;else if(f&&f.set&&(f.copy||f instanceof Zl)){var q;if(Array.isArray(s))f.fromArray?f.fromArray(s):(q=f).set.apply(q,v(s));else if(f.copy&&s&&s.constructor&&f.constructor.name===s.constructor.name)f.copy(s);else if(void 0!==s){var x=f instanceof Gi;!x&&f.setScalar?f.setScalar(s):f instanceof Zl&&s instanceof Zl?f.mask=s.mask:f.set(s);0}}else A[r]=s,!o.linear&&A[r]instanceof wi&&(A[r].encoding=un);ih(e)})),a.parent&&o.internal&&e.raycast&&h!==a.eventCount){var A=o.internal.interaction.indexOf(e);A>-1&&o.internal.interaction.splice(A,1),a.eventCount&&o.internal.interaction.push(e)}return d.length&&e.parent&&lh(e),e}function ih(e){var t,n,i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function lh(e){null==e.onUpdate||e.onUpdate(e)}function ah(e,t){e.manual||(zd(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function rh(e,t,n){var i=n.pop(),l=n.reduce((function(e,t){return e[t]}),e);return l[i]=t}function oh(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function gh(e,t,n,i){var l=n.get(t);l&&(n.delete(t),0===n.size&&(e.delete(i),l.target.releasePointerCapture(i)))}function sh(e){var t=new Ki;function n(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function i(t){var n=e.getState().internal;Array.from(n.hovered.values()).forEach((function(e){if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,l=null==i?void 0:i.handlers;if(n.hovered.delete(oh(e)),null!=i&&i.eventCount){var a=o(o({},e),{},{intersections:t});null==l.onPointerOut||l.onPointerOut(a),null==l.onPointerLeave||l.onPointerLeave(a)}}}))}function l(e,t){t.forEach((function(t){var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:function(a){switch(a){case"onPointerLeave":case"onPointerCancel":return function(){return i([])};case"onLostPointerCapture":return function(t){var n=e.getState().internal;"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),i([]))}}return function(r){var g=e.getState(),s=g.onPointerMissed,I=g.internal;I.lastEvent.current=r;var u="onPointerMove"===a,c="onClick"===a||"onContextMenu"===a||"onDoubleClick"===a,C=function(t,n){var i=e.getState(),l=new Set,a=[],r=n?n(i.internal.interaction):i.internal.interaction;r.forEach((function(e){var t=Ud(e);t&&(t.raycaster.camera=void 0)})),i.previousRoot||null==i.events.compute||i.events.compute(t,i);var g=r.flatMap((function(e){var n,i=Ud(e);return i&&i.events.enabled&&null!==i.raycaster.camera?(void 0===i.raycaster.camera&&(null==i.events.compute||i.events.compute(t,i,null==(n=i.previousRoot)?void 0:n.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)),i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=Ud(e.object),i=Ud(t.object);return n&&i?i.events.priority-n.events.priority||e.distance-t.distance:0})).filter((function(e){var t=oh(e);return!l.has(t)&&(l.add(t),!0)}));i.events.filter&&(g=i.events.filter(g,i));var s,I=d(g);try{for(I.s();!(s=I.n()).done;)for(var u=s.value,c=u.object;c;){var C;null!=(C=c.__r3f)&&C.eventCount&&a.push(o(o({},u),{},{eventObject:c})),c=c.parent}}catch(p){I.e(p)}finally{I.f()}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId)){var h,A=d(i.internal.capturedMap.get(t.pointerId).values());try{for(A.s();!(h=A.n()).done;){var m=h.value;a.push(m.intersection)}}catch(p){A.e(p)}finally{A.f()}}return a}(r,u?n:void 0),h=c?function(t){var n=e.getState().internal,i=t.offsetX-n.initialClick[0],l=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+l*l))}(r):0;"onPointerDown"===a&&(I.initialClick=[r.offsetX,r.offsetY],I.initialHits=C.map((function(e){return e.eventObject}))),c&&!C.length&&h<=2&&(l(r,I.interaction),s&&s(r)),u&&i(C),function(n,l,a,r){var g=e.getState(),s=g.raycaster,I=g.pointer,u=g.camera,c=g.internal;n.length&&function(){var e,g=t.set(I.x,I.y,0).unproject(u),C={stopped:!1},h=d(n);try{var A=function(){var t=e.value,d=function(e){var n,i;return null!=(n=null==(i=c.capturedMap.get(e))?void 0:i.has(t.eventObject))&&n},h=function(e){var n={intersection:t,target:l.target};c.capturedMap.has(e)?c.capturedMap.get(e).set(t.eventObject,n):c.capturedMap.set(e,new Map([[t.eventObject,n]])),l.target.setPointerCapture(e)},A=function(e){var n=c.capturedMap.get(e);n&&gh(c.capturedMap,t.eventObject,n,e)},m={};for(var p in l){var f=l[p];"function"!==typeof f&&(m[p]=f)}var b=o(o(o({},t),m),{},{pointer:I,intersections:n,stopped:C.stopped,delta:a,unprojectedPoint:g,ray:s.ray,camera:u,stopPropagation:function(){var e="pointerId"in l&&c.capturedMap.get(l.pointerId);if((!e||e.has(t.eventObject))&&(b.stopped=C.stopped=!0,c.hovered.size&&Array.from(c.hovered.values()).find((function(e){return e.eventObject===t.eventObject})))){var a=n.slice(0,n.indexOf(t));i([].concat(v(a),[t]))}},target:{hasPointerCapture:d,setPointerCapture:h,releasePointerCapture:A},currentTarget:{hasPointerCapture:d,setPointerCapture:h,releasePointerCapture:A},nativeEvent:l});if(r(b),!0===C.stopped)return"break"};for(h.s();!(e=h.n()).done&&"break"!==A(););}catch(m){h.e(m)}finally{h.f()}}()}(C,r,h,(function(e){var t=e.eventObject,n=t.__r3f,i=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(u){if(i.onPointerOver||i.onPointerEnter||i.onPointerOut||i.onPointerLeave){var o=oh(e),g=I.hovered.get(o);g?g.stopped&&e.stopPropagation():(I.hovered.set(o,e),null==i.onPointerOver||i.onPointerOver(e),null==i.onPointerEnter||i.onPointerEnter(e))}null==i.onPointerMove||i.onPointerMove(e)}else{var s=i[a];s?c&&!I.initialHits.includes(t)||(l(r,I.interaction.filter((function(e){return!I.initialHits.includes(e)}))),s(e)):c&&I.initialHits.includes(t)&&l(r,I.interaction.filter((function(e){return!I.initialHits.includes(e)})))}}))}}}}var Ih={},uh=function(e){Ih=o(o({},Ih),e)};var ch,Ch=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],dh=function(e){return!(null==e||!e.render)},hh=i.createContext(null);var Ah,mh,ph=new Set,vh=new Set,fh=new Set;function bh(e,t){e.forEach((function(e){return(0,e.callback)(t)}))}function yh(e,t,n){var i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Ah=t.internal.subscribers,ch=0;ch<Ah.length;ch++)(mh=Ah[ch]).ref.current(mh.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function Gh(){var e=i.useContext(hh);if(!e)throw"R3F hooks can only be used within the Canvas component!";return e}function Bh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return Gh()(e,t)}function Zh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Gh(),i=n.getState().internal.subscribe,l=Ld(e);return Md((function(){return i(l,t,n)}),[t,i,n]),null}function qh(e,t){return function(n){var i=new n;e&&e(i);for(var l=arguments.length,a=new Array(l>1?l-1:0),r=1;r<l;r++)a[r-1]=arguments[r];return Promise.all(a.map((function(e){return new Promise((function(n,l){return i.load(e,(function(e){e.scene&&Object.assign(e,Qd(e.scene)),n(e)}),t,(function(t){return l("Could not load ".concat(e,": ").concat(t.message))}))}))})))}}function xh(e,t,n,i){var l=Array.isArray(t)?t:[t],a=Vd(qh(n,i),[e].concat(v(l)),{equal:Dd.equ});return Array.isArray(t)?a:a[0]}xh.preload=function(e,t,n){var i=Array.isArray(t)?t:[t];return function(e,t,n){Rd(e,t,!0,n)}(qh(n),[e].concat(v(i)))},xh.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)Sd.splice(0,Sd.length);else{var t=Sd.find((function(t){return Wd(e,t.keys,t.equal)}));if(t){var n=Sd.indexOf(t);-1!==n&&Sd.splice(n,1)}}}([e].concat(v(n)))};var wh=new Map,Wh=function(e){var t,n,i,l=!1;function a(r){if(n=requestAnimationFrame(a),l=!0,t=0,ph.size&&bh(ph,r),e.forEach((function(e){var n;!(i=e.store.getState()).internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(n=i.gl.xr)&&n.isPresenting||(t+=yh(r,i))})),vh.size&&bh(vh,r),0===t)return fh.size&&bh(fh,r),l=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),r);null!=(i=n.gl.xr)&&i.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),l||(l=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;n&&bh(ph,t),i?yh(t,i,l):e.forEach((function(e){return yh(t,e.store.getState())})),n&&bh(vh,t)}}}(wh),Sh=Wh.invalidate,Rh=Wh.advance,Vh=function(e,t){function n(e,t,n){var i,l=t.args,a=void 0===l?[]:l,r=t.attach,o=C(t,Yd),g="".concat(e[0].toUpperCase()).concat(e.slice(1));if(void 0===r&&(g.endsWith("Geometry")?r="geometry":g.endsWith("Material")&&(r="material")),"primitive"===e){if(void 0===o.object)throw"Primitives without 'object' are invalid!";i=Pd(o.object,{type:e,root:n,attach:r,primitive:!0})}else{var s=Ih[g];if(!s)throw"".concat(g," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively");if(!Array.isArray(a))throw"The args prop must be an array!";i=Pd(m(s,v(a)),{type:e,root:n,attach:r,memoizedProps:{args:a}})}return"inject"!==g&&nh(i,o),i}function i(e,t){var n,i,l=!1;t&&(null!=(n=t.__r3f)&&n.attach?$d(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),l=!0),l||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||Pd(t,{}),t.__r3f.parent=e,lh(t),ih(t))}function l(e,t,n){var i=!1;if(t){var l,a;if(null!=(l=t.__r3f)&&l.attach)$d(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var r=e.children.filter((function(e){return e!==t})),o=r.indexOf(n);e.children=[].concat(v(r.slice(0,o)),[t],v(r.slice(o))),i=!0}i||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||Pd(t,{}),t.__r3f.parent=e,lh(t),ih(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&v(e).forEach((function(e){return r(t,e,n)}))}function r(e,t,n){if(t){var i,l,r;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(l=t.__r3f)&&l.attach)eh(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,i){e.eventObject!==t&&e.object!==t||n.hovered.delete(i)})),n.capturedMap.forEach((function(e,i){gh(n.capturedMap,t,e,i)}))}(t.__r3f.root,t)}var g,s=null==(r=t.__r3f)?void 0:r.primitive,I=void 0===n?null!==t.dispose&&!s:n;if(!s)a(null==(g=t.__r3f)?void 0:g.objects,t,I),a(t.children,t,I);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,s||delete t.__r3f),I&&t.dispose&&"Scene"!==t.type&&(0,wd.unstable_scheduleCallback)(wd.unstable_IdlePriority,(function(){try{t.dispose()}catch($p){}})),ih(e)}}return{reconciler:xd()({createInstance:n,removeChild:r,appendChild:i,appendInitialChild:i,insertBefore:l,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){var n=e.getState().scene;n.__r3f.root=e,i(n,t)},removeChildFromContainer:function(e,t){return r(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){return l(e.getState().scene,t,n)},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];var l=i.args,a=void 0===l?[]:l,r=(i.children,C(i,Hd)),o=n.args,g=void 0===o?[]:o,s=(n.children,C(n,Kd));if(!Array.isArray(a))throw"The args prop must be an array!";if(a.some((function(e,t){return e!==g[t]})))return[!0];var I=th(e,r,s,!0);return I.changes.length?[!1,I]:null},commitUpdate:function(e,t,l,a,o,g){var s=c(t,2),I=s[0],u=s[1];I?function(e,t,l,a){var o,g=null==(o=e.__r3f)?void 0:o.parent;if(g){var s=n(t,l,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((function(e){return i(s,e)})),e.children=[]),e.__r3f.objects.forEach((function(e){return i(s,e)})),e.__r3f.objects=[],r(g,e),i(g,s),s.raycast&&s.__r3f.eventCount&&s.__r3f.root.getState().internal.interaction.push(s),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=s,e.ref&&("function"===typeof e.ref?e.ref(s):e.ref.current=s))}))}}(e,l,o,g):nh(e,u)},commitMount:function(e,t,n,i){var l,a=null!=(l=e.__r3f)?l:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return Pd(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{},i=n.attach,l=n.parent;i&&l&&eh(l,e,i),e.isObject3D&&(e.visible=!1),ih(e)},unhideInstance:function(e,t){var n,i=null!=(n=null==e?void 0:e.__r3f)?n:{},l=i.attach,a=i.parent;l&&a&&$d(a,e,l),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),ih(e)},createTextInstance:function(){throw new Error("Text is not allowed in the R3F tree.")},hideTextInstance:function(){throw new Error("Text is not allowed in the R3F tree.")},unhideTextInstance:function(){},getCurrentEventPriority:function(){return t?t():yd.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&Dd.fun(performance.now)?performance.now:Dd.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:Dd.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Dd.fun(clearTimeout)?clearTimeout:void 0}),applyProps:nh}}(0,(function(){var e,t;switch(null==(e=window)||null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return yd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return yd.ContinuousEventPriority;default:return yd.DefaultEventPriority}})),kh=Vh.reconciler,Xh=Vh.applyProps,Yh={objects:"shallow",strict:!1},Hh=function(e,t){var n="function"===typeof e?e(t):e;return dh(n)?n:new Fg(o({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function Kh(t){var n=wh.get(t),l=null==n?void 0:n.fiber,a=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var r,g="function"===typeof reportError?reportError:console.error,s=a||function(e,t){var n=Zd((function(n,l){var a=new Ki,r=new Ki,g=new Ki;function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l().size,i=n.width,o=n.height,s=n.top,I=n.left,u=i/o;t instanceof Ki?g.copy(t):g.set.apply(g,v(t));var c=e.getWorldPosition(a).distanceTo(g);if(zd(e))return{width:i/e.zoom,height:o/e.zoom,top:s,left:I,factor:1,distance:c,aspect:u};var C=e.fov*Math.PI/180,d=2*Math.tan(C/2)*c,h=d*(i/o);return{width:h,height:d,top:s,left:I,factor:i/h,distance:c,aspect:u}}var I=void 0,u=function(e){return n((function(t){return{performance:o(o({},t.performance),{},{current:e})}}))},c=new ri,C={set:n,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(l(),t)},advance:function(e,n){return t(e,n,l())},legacy:!1,linear:!1,flat:!1,scene:Pd(new _g),controls:null,clock:new zc,pointer:c,mouse:c,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=l();I&&clearTimeout(I),e.performance.current!==e.performance.min&&u(e.performance.min),I=setTimeout((function(){return u(l().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:function(e){return n((function(t){return o(o({},t),{},{events:o(o({},t.events),e)})}))},setSize:function(e,t,i,a,g){var I=l().camera,u={width:e,height:t,top:a||0,left:g||0,updateStyle:i};n((function(e){return{size:u,viewport:o(o({},e.viewport),s(I,r,u))}}))},setDpr:function(e){return n((function(t){var n=Jd(e);return{viewport:o(o({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=l().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var i=l().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=l().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return C})),l=n.getState(),a=l.size,r=l.viewport.dpr,g=l.camera;return n.subscribe((function(){var e=n.getState(),t=e.camera,i=e.size,l=e.viewport,s=e.gl,I=e.set;i===a&&l.dpr===r||(a=i,r=l.dpr,ah(t,i),s.setPixelRatio(l.dpr),s.setSize(i.width,i.height,i.updateStyle)),t!==g&&(g=t,I((function(e){return{viewport:o(o({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),n.subscribe((function(t){return e(t)})),n}(Sh,Rh),I=l||kh.createContainer(s,yd.ConcurrentRoot,null,!1,null,"",g,null);n||wh.set(t,{fiber:I,store:s});var u=!1;return{configure:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.gl,l=n.size,a=n.events,g=n.onCreated,I=n.shadows,c=void 0!==I&&I,d=n.linear,h=void 0!==d&&d,A=n.flat,m=void 0!==A&&A,p=n.legacy,v=void 0!==p&&p,f=n.orthographic,b=void 0!==f&&f,y=n.frameloop,G=void 0===y?"always":y,B=n.dpr,Z=void 0===B?[1,2]:B,q=n.performance,x=n.raycaster,w=n.camera,W=n.onPointerMissed,S=s.getState(),R=S.gl;S.gl||S.set({gl:R=Hh(i,t)});var V=S.raycaster;V||S.set({raycaster:V=new AC});var k=x||{},X=k.params,Y=C(k,Fd);if(Dd.equ(Y,V,Yh)||Xh(V,o({},Y)),Dd.equ(X,V.params,Yh)||Xh(V,{params:o(o({},V.params),X)}),!S.camera){var H=w instanceof Ea,K=H?w:b?new Ar(0,0,0,0,.1,1e3):new Ja(75,0,.1,1e3);H||(K.position.z=5,w&&Xh(K,w),null!=w&&w.rotation||K.lookAt(0,0,0)),S.set({camera:K})}if(!S.xr){var F=function(e,t){var n=s.getState();"never"!==n.frameloop&&Rh(e,!0,n,t)},N=function(){var e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?F:null),e.gl.xr.isPresenting||Sh(e)},z={connect:function(){var e=s.getState().gl;e.xr.addEventListener("sessionstart",N),e.xr.addEventListener("sessionend",N)},disconnect:function(){var e=s.getState().gl;e.xr.removeEventListener("sessionstart",N),e.xr.removeEventListener("sessionend",N)}};R.xr&&z.connect(),S.set({xr:z})}if(R.shadowMap){var M=Dd.boo(c);if(M&&R.shadowMap.enabled!==c||!Dd.equ(c,R.shadowMap,Yh)){var L=R.shadowMap.enabled;R.shadowMap.enabled=!!c,M?R.shadowMap.type=_:Object.assign(R.shadowMap,c),L!==R.shadowMap.enabled&&(R.shadowMap.needsUpdate=!0)}}rh(e,v,["ColorManagement","legacyMode"]);var T=h?In:un,E=m?We:ke;return R.outputEncoding!==T&&(R.outputEncoding=T),R.toneMapping!==E&&(R.toneMapping=E),S.legacy!==v&&S.set((function(){return{legacy:v}})),S.linear!==h&&S.set((function(){return{linear:h}})),S.flat!==m&&S.set((function(){return{flat:m}})),!i||Dd.fun(i)||dh(i)||Dd.equ(i,R,Yh)||Xh(R,i),a&&!S.events.handlers&&S.set({events:a(s)}),Z&&S.viewport.dpr!==Jd(Z)&&S.setDpr(Z),l=l||(t.parentElement?{width:t.parentElement.clientWidth,height:t.parentElement.clientHeight,top:t.parentElement.clientTop,left:t.parentElement.clientLeft}:{width:0,height:0,top:0,left:0}),Dd.equ(l,S.size,Yh)||S.setSize(l.width,l.height,l.updateStyle,l.top,l.left),S.frameloop!==G&&S.setFrameloop(G),S.onPointerMissed||S.set({onPointerMissed:W}),q&&!Dd.equ(q,S.performance,Yh)&&S.set((function(e){return{performance:o(o({},e.performance),q)}})),r=g,u=!0,this},render:function(e){return u||this.configure(),kh.updateContainer(i.createElement(Fh,{store:s,children:e,onCreated:r,rootElement:t}),I,null,(function(){})),s},unmount:function(){Nh(t)}}}function Fh(e){var t=e.store,n=e.children,l=e.onCreated,a=e.rootElement;return Md((function(){var e=t.getState();e.set((function(e){return{internal:o(o({},e.internal),{},{active:!0})}})),l&&l(e),t.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),i.createElement(hh.Provider,{value:t},n)}function Nh(e,t){var n=wh.get(e),i=null==n?void 0:n.fiber;if(i){var l=null==n?void 0:n.store.getState();l&&(l.internal.active=!1),kh.updateContainer(null,i,null,(function(){l&&setTimeout((function(){try{var n,i,a,r;null==l.events.disconnect||l.events.disconnect(),null==(n=l.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(a=l.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(r=l.gl)&&r.xr&&l.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(l),wh.delete(e),t&&t(e)}catch($p){}}),500)}))}}function zh(e){var t=e.state,n=void 0===t?{}:t,l=e.children,a=e.container,r=n.events,g=n.size,s=C(n,Nd),I=Gh(),u=c(i.useState((function(){return new AC})),1)[0],d=c(i.useState((function(){return new ri})),1)[0],h=i.useCallback((function(e,t){var n=o({},e);Object.keys(e).forEach((function(i){(Ch.includes(i)||e[i]!==t[i])&&delete n[i]}));var i=void 0;if(t&&g){var l=t.camera;i=e.viewport.getCurrentViewport(l,new Ki,g),l!==e.camera&&ah(l,g)}return o(o({},n),{},{scene:a,raycaster:u,pointer:d,mouse:d,previousRoot:I,events:o(o(o({},e.events),null==t?void 0:t.events),r),size:o(o({},e.size),g),viewport:o(o({},e.viewport),i)},s)}),[n]),A=i.useState((function(){var e=I.getState(),t=Zd((function(t,n){return o(o(o({},e),{},{scene:a,raycaster:u,pointer:d,mouse:d,previousRoot:I,events:o(o({},e.events),r),size:o(o({},e.size),g)},s),{},{set:t,get:n,setEvents:function(e){return t((function(t){return o(o({},t),{},{events:o(o({},t.events),e)})}))}})}));return t})),m=c(A,1)[0];return i.useEffect((function(){var e=I.subscribe((function(e){return m.setState((function(t){return h(e,t)}))}));return function(){e(),m.destroy()}}),[]),i.useEffect((function(){m.setState((function(e){return h(I.getState(),e)}))}),[h]),i.createElement(i.Fragment,null,kh.createPortal(i.createElement(hh.Provider,{value:m},l),m,null))}kh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mh.apply(this,arguments)}var Lh=n(494),_h=n.n(Lh);function Th(e){var t=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,n=t.debounce,l=t.scroll,a=t.polyfill,r=t.offsetSize,o=a||("undefined"===typeof window?y((function e(){f(this,e)})):window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var g=c((0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),s=g[0],I=g[1],u=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),C=n?"number"===typeof n?n:n.scroll:null,d=n?"number"===typeof n?n:n.resize:null,h=(0,i.useRef)(!1);(0,i.useEffect)((function(){return h.current=!0,function(){h.current=!1}}));var A=c((0,i.useMemo)((function(){var e=function(){if(u.current.element){var e=u.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};u.current.element instanceof HTMLElement&&r&&(t.height=u.current.element.offsetHeight,t.width=u.current.element.offsetWidth),Object.freeze(t),h.current&&!Uh(u.current.lastBounds,t)&&I(u.current.lastBounds=t)}};return[e,d?_h()(e,d):e,C?_h()(e,C):e]}),[I,r,C,d]),3),m=A[0],p=A[1],v=A[2];function b(){u.current.scrollContainers&&(u.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",v,!0)})),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function G(){u.current.element&&(u.current.resizeObserver=new o(v),u.current.resizeObserver.observe(u.current.element),l&&u.current.scrollContainers&&u.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",v,{capture:!0,passive:!0})})))}var B,Z,q;return B=v,Z=Boolean(l),(0,i.useEffect)((function(){if(Z){var e=B;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[B,Z]),q=p,(0,i.useEffect)((function(){var e=q;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[q]),(0,i.useEffect)((function(){b(),G()}),[l,v,p]),(0,i.useEffect)((function(){return b}),[]),[function(e){e&&e!==u.current.element&&(b(),u.current.element=e,u.current.scrollContainers=Eh(e),G())},s,m]}function Eh(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,v(Eh(e.parentElement)))}var Jh=["x","y","top","bottom","left","right","width","height"],Uh=function(e,t){return Jh.every((function(n){return e[n]===t[n]}))},Dh=["children","fallback","resize","style","gl","events","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],Qh={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ph(e){var t=sh(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Qh).reduce((function(e,n){return o(o({},e),{},a({},n,t(n)))}),{}),connect:function(t){var n,i=e.getState(),l=i.set,a=i.events;null==a.disconnect||a.disconnect(),l((function(e){return{events:o(o({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=c(e,2),i=n[0],l=n[1],a=c(Qh[i],2),r=a[0],o=a[1];t.addEventListener(r,l,{passive:o})}))},disconnect:function(){var t,n=e.getState(),i=n.set,l=n.events;l.connected&&(Object.entries(null!=(t=l.handlers)?t:[]).forEach((function(e){var t=c(e,2),n=t[0],i=t[1];if(l&&l.connected instanceof HTMLElement){var a=c(Qh[n],1)[0];l.connected.removeEventListener(a,i)}})),i((function(e){return{events:o(o({},e.events),{},{connected:void 0})}})))}}}var Oh,jh=i.forwardRef((function(t,n){var l=t.children,a=t.fallback,r=t.resize,g=t.style,s=t.gl,I=t.events,u=void 0===I?Ph:I,d=t.shadows,h=t.linear,A=t.flat,m=t.legacy,p=t.orthographic,v=t.frameloop,f=t.dpr,b=t.performance,y=t.raycaster,G=t.camera,B=t.onPointerMissed,Z=t.onCreated,q=C(t,Dh);i.useMemo((function(){return uh(e)}),[]);var x=c(Th(o({scroll:!0,debounce:{scroll:50,resize:0}},r)),2),w=x[0],W=x[1],S=i.useRef(null),R=i.useRef(null),V=c(i.useState(null),2),k=V[0],X=V[1];i.useImperativeHandle(n,(function(){return S.current}));var Y=Ld(B),H=c(i.useState(!1),2),K=H[0],F=H[1],N=c(i.useState(!1),2),z=N[0],M=N[1];if(K)throw K;if(z)throw z;var L=i.useRef(null);return W.width>0&&W.height>0&&k&&(L.current||(L.current=Kh(k)),L.current.configure({gl:s,events:u,shadows:d,linear:h,flat:A,legacy:m,orthographic:p,frameloop:v,dpr:f,performance:b,raycaster:y,camera:G,size:W,onPointerMissed:function(){return null==Y.current?void 0:Y.current.apply(Y,arguments)},onCreated:function(e){null==e.events.connect||e.events.connect(R.current),null==Z||Z(e)}}),L.current.render(i.createElement(Td,{set:M},i.createElement(i.Suspense,{fallback:i.createElement(_d,{set:F})},l)))),Md((function(){X(S.current)}),[]),i.useEffect((function(){if(k)return function(){return Nh(k)}}),[k]),i.createElement("div",Mh({ref:R,style:o({position:"relative",width:"100%",height:"100%",overflow:"hidden"},g)},q),i.createElement("div",{ref:w,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:S,style:{display:"block"}},a)))})),$h=n(184),eA=["onCollide","onCollideBegin","onCollideEnd"],tA=["bi","bj"],nA=["body","contact","target"],iA=["uuid"],lA=["body","ray"],aA={exports:{}},rA="object"===typeof Reflect?Reflect:null,oA=rA&&"function"===typeof rA.apply?rA.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};Oh=rA&&"function"===typeof rA.ownKeys?rA.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var gA=Number.isNaN||function(e){return e!==e};function sA(){sA.init.call(this)}aA.exports=sA,aA.exports.once=function(e,t){return new Promise((function(n,i){function l(n){e.removeListener(t,a),i(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",l),n([].slice.call(arguments))}vA(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&vA(e,"error",t,n)}(e,l,{once:!0})}))},sA.EventEmitter=sA,sA.prototype._events=void 0,sA.prototype._eventsCount=0,sA.prototype._maxListeners=void 0;var IA=10;function uA(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function cA(e){return void 0===e._maxListeners?sA.defaultMaxListeners:e._maxListeners}function CA(e,t,n,i){var l,a,r,o;if(uA(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),r=a[t]),void 0===r)r=a[t]=n,++e._eventsCount;else if("function"===typeof r?r=a[t]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),(l=cA(e))>0&&r.length>l&&!r.warned){r.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=e,g.type=t,g.count=r.length,o=g,console&&console.warn&&console.warn(o)}return e}function dA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hA(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},l=dA.bind(i);return l.listener=n,i.wrapFn=l,l}function AA(e,t,n){var i=e._events;if(void 0===i)return[];var l=i[t];return void 0===l?[]:"function"===typeof l?n?[l.listener||l]:[l]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(l):pA(l,l.length)}function mA(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function pA(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function vA(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function l(a){i.once&&e.removeEventListener(t,l),n(a)}))}}Object.defineProperty(sA,"defaultMaxListeners",{enumerable:!0,get:function(){return IA},set:function(e){if("number"!==typeof e||e<0||gA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");IA=e}}),sA.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},sA.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||gA(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},sA.prototype.getMaxListeners=function(){return cA(this)},sA.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,l=this._events;if(void 0!==l)i=i&&void 0===l.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var r=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw r.context=a,r}var o=l[e];if(void 0===o)return!1;if("function"===typeof o)oA(o,this,t);else{var g=o.length,s=pA(o,g);for(n=0;n<g;++n)oA(s[n],this,t)}return!0},sA.prototype.addListener=function(e,t){return CA(this,e,t,!1)},sA.prototype.on=sA.prototype.addListener,sA.prototype.prependListener=function(e,t){return CA(this,e,t,!0)},sA.prototype.once=function(e,t){return uA(t),this.on(e,hA(this,e,t)),this},sA.prototype.prependOnceListener=function(e,t){return uA(t),this.prependListener(e,hA(this,e,t)),this},sA.prototype.removeListener=function(e,t){var n,i,l,a,r;if(uA(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(l=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){r=n[a].listener,l=a;break}if(l<0)return this;0===l?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,l),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},sA.prototype.off=sA.prototype.removeListener,sA.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var l,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(l=a[i])&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},sA.prototype.listeners=function(e){return AA(this,e,!0)},sA.prototype.rawListeners=function(e){return AA(this,e,!1)},sA.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):mA.call(e,t)},sA.prototype.listenerCount=mA,sA.prototype.eventNames=function(){return this._eventsCount>0?Oh(this._events):[]};var fA=aA.exports;function bA(e,t,n){var i=void 0===t?null:t,l=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),l=0,a=n.length;l<a;++l)i[l]=n.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=l.indexOf("\n",10)+1,r=l.substring(a)+(i?"//# sourceMappingURL="+i:""),o=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(o)}var yA=function(e,t,n){var i;return function(l){return i=i||bA(e,t,n),new Worker(i,l)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQogIGNvbnN0IG1heG1pbkEgPSBbXTsKICBjb25zdCBtYXhtaW5CID0gW107CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgM2QgYm94IHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNpemUgPSAxCiAgICogICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IENBTk5PTi5WZWMzKHNpemUsIHNpemUsIHNpemUpCiAgICogICAgIGNvbnN0IGJveFNoYXBlID0gbmV3IENBTk5PTi5Cb3goaGFsZkV4dGVudHMpCiAgICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib3hCb2R5KQogICAqLwogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKCiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwogIGNvbnN0IEJPRFlfU0xFRVBfU1RBVEVTID0gewogICAgLyoqIEFXQUtFICovCiAgICBBV0FLRTogMCwKCiAgICAvKiogU0xFRVBZICovCiAgICBTTEVFUFk6IDEsCgogICAgLyoqIFNMRUVQSU5HICovCiAgICBTTEVFUElORzogMgogIH07CiAgLyoqCiAgICogQm9keVNsZWVwU3RhdGUKICAgKi8KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIGJvZHkgdHlwZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZSgxKQogICAqICAgICBjb25zdCBib2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsKICAgKiAgICAgICBtYXNzOiAxLAogICAqICAgICAgIHNoYXBlLAogICAqICAgICB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpCiAgICovCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IDE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHsKICAgICAgICB0aGlzLnZlbG9jaXR5LmNvcHkob3B0aW9ucy52ZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG1hc3MgPSB0eXBlb2Ygb3B0aW9ucy5tYXNzID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWFzcyA6IDA7CiAgICAgIHRoaXMubWFzcyA9IG1hc3M7CiAgICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsIHx8IG51bGw7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmxpbmVhckRhbXBpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW5lYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQzsKCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHsKICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGU7CiAgICAgIH0KCiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHR5cGVvZiBvcHRpb25zLmFsbG93U2xlZXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbGxvd1NsZWVwIDogdHJ1ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgOiAwLjE7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwVGltZUxpbWl0IDogMTsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLnRvcnF1ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuc2hhcGVzID0gW107CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuZml4ZWRSb3RhdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZpeGVkUm90YXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5maXhlZFJvdGF0aW9uIDogZmFsc2U7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy5saW5lYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmxpbmVhckZhY3RvcikgewogICAgICAgIHRoaXMubGluZWFyRmFjdG9yLmNvcHkob3B0aW9ucy5saW5lYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IuY29weShvcHRpb25zLmFuZ3VsYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSAwOwogICAgICB0aGlzLndsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpOwoKICAgICAgaWYgKG9wdGlvbnMuc2hhcGUpIHsKICAgICAgICB0aGlzLmFkZFNoYXBlKG9wdGlvbnMuc2hhcGUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdha2UgdGhlIGJvZHkgdXAuCiAgICAgKi8KCgogICAgd2FrZVVwKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwoKICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBGb3JjZSBib2R5IHNsZWVwCiAgICAgKi8KCgogICAgc2xlZXAoKSB7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBJTkc7CiAgICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgZXZlcnkgdGltZXN0ZXAgdG8gdXBkYXRlIGludGVybmFsIHNsZWVwIHRpbWVyIGFuZCBjaGFuZ2Ugc2xlZXAgc3RhdGUgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kcwogICAgICovCgoKICAgIHNsZWVwVGljayh0aW1lKSB7CiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBjb25zdCBzbGVlcFN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkID0gdGhpcy5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgc3BlZWRTcXVhcmVkIDwgc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBZOyAvLyBTbGVlcHkKCiAgICAgICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gdGltZTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHNwZWVkU3F1YXJlZCA+IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLndha2VVcCgpOyAvLyBXYWtlIHVwCiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHsKICAgICAgICAgIHRoaXMuc2xlZXAoKTsgLy8gU2xlZXBpbmcKCiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcEV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSAic29sdmUgbWFzcyIuCiAgICAgKi8KCgogICAgdXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpIHsKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLnNldFplcm8oKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLnNldFplcm8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IHRoaXMuaW52TWFzczsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYSk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgcG9pbnQgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvTG9jYWxGcmFtZSh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CgogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7IGVsc2UgewogICAgICAgIGNvbnN0IG0xID0gdWl3X20xOwogICAgICAgIGNvbnN0IG0yID0gdWl3X20yOwogICAgICAgIG0xLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTsKICAgICAgICBtMS50cmFuc3Bvc2UobTIpOwogICAgICAgIG0xLnNjYWxlKEksIG0xKTsKICAgICAgICBtMS5tbXVsdChtMiwgdGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLgogICAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGFtb3VudCBvZiBmb3JjZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZShmb3JjZSwgcmVsYXRpdmVQb2ludCkgewogICAgICBpZiAocmVsYXRpdmVQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50KSB7CiAgICAgIGlmIChsb2NhbFBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTsKICAgICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkOyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZQoKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxGb3JjZSwgd29ybGRGb3JjZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gdG9ycXVlIFRoZSBhbW91bnQgb2YgdG9ycXVlIHRvIGFkZC4KICAgICAqLwoKCiAgICBhcHBseVRvcnF1ZSh0b3JxdWUpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIHRoaXMudG9ycXVlLnZhZGQodG9ycXVlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGltcHVsc2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS4KICAgICAqIEltcHVsc2VzIHdpbGwgYmUgYWRkZWQgdG8gQm9keS52ZWxvY2l0eSBhbmQgQm9keS5hbmd1bGFyVmVsb2NpdHkuCiAgICAgKiBAcGFyYW0gaW1wdWxzZSBUaGUgYW1vdW50IG9mIGltcHVsc2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlcgoKCiAgICAgIGNvbnN0IHIgPSByZWxhdGl2ZVBvaW50OyAvLyBDb21wdXRlIHByb2R1Y2VkIGNlbnRyYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3QgdmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG87CiAgICAgIHZlbG8uY29weShpbXB1bHNlKTsKICAgICAgdmVsby5zY2FsZSh0aGlzLmludk1hc3MsIHZlbG8pOyAvLyBBZGQgbGluZWFyIGltcHVsc2UKCiAgICAgIHRoaXMudmVsb2NpdHkudmFkZCh2ZWxvLCB0aGlzLnZlbG9jaXR5KTsgLy8gQ29tcHV0ZSBwcm9kdWNlZCByb3RhdGlvbmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHJvdFZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvOwogICAgICByLmNyb3NzKGltcHVsc2UsIHJvdFZlbG8pOwogICAgICAvKgogICAgICAgcm90VmVsby54ICo9IHRoaXMuaW52SW5lcnRpYS54OwogICAgICAgcm90VmVsby55ICo9IHRoaXMuaW52SW5lcnRpYS55OwogICAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56OwogICAgICAgKi8KCiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkLnZtdWx0KHJvdFZlbG8sIHJvdFZlbG8pOyAvLyBBZGQgcm90YXRpb25hbCBJbXB1bHNlCgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS52YWRkKHJvdFZlbG8sIHRoaXMuYW5ndWxhclZlbG9jaXR5KTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgbG9jYWxseS1kZWZpbmVkIGltcHVsc2UgdG8gYSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgZm9yY2UgdmVjdG9yIHRvIGFwcGx5LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGJvZHkgZnJhbWUuCiAgICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIG5ldyBNYXQzKCk7CiAgY29uc3QgQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KICBjbGFzcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBmb3IgY29sbGlzaW9ucyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBicm9hZHBoYXNlIHVzZXMgYm91bmRpbmcgYm94ZXMgZm9yIGludGVyc2VjdGlvbiB0ZXN0cywgZWxzZSBpdCB1c2VzIGJvdW5kaW5nIHNwaGVyZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGAke2lkMX0sJHtpZDJ9YCA6IGAke2lkMn0sJHtpZDF9YDsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgogIGNvbnN0IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUXVhdGVybmlvbigpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHsKICAgIGtleXM6IFtdCiAgfTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyID0gW107CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KICBjbGFzcyBOYWl2ZUJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGNvbGxpc2lvbiBwYWlycyBpbiB0aGUgcGh5c2ljcyB3b3JsZAogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoOwogICAgICBsZXQgYmk7CiAgICAgIGxldCBiajsgLy8gTmFpdmUgTl4yIGZ0dyEKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7CiAgICAgICAgICBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwogIGNsYXNzIFJheWNhc3RSZXN1bHQgewogICAgLyoqCiAgICAgKiByYXlGcm9tV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogcmF5VG9Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXROb3JtYWxXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXRQb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhhc0hpdAogICAgICovCgogICAgLyoqCiAgICAgKiBzaGFwZQogICAgICovCgogICAgLyoqCiAgICAgKiBib2R5CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaGl0IHRyaWFuZ2xlLCBpZiB0aGUgaGl0IHNoYXBlIHdhcyBhIHRyaW1lc2gKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzdGFuY2UgdG8gdGhlIGhpdC4gV2lsbCBiZSBzZXQgdG8gLTEgaWYgdGhlcmUgd2FzIG5vIGhpdAogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllcwogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKCiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCiAgY29uc3QgUkFZX01PREVTID0gewogICAgLyoqIENMT1NFU1QgKi8KICAgIENMT1NFU1Q6IDEsCgogICAgLyoqIEFOWSAqLwogICAgQU5ZOiAyLAoKICAgIC8qKiBBTEwgKi8KICAgIEFMTDogNAogIH07CiAgLyoqCiAgICogUmF5TW9kZQogICAqLwoKICBfU2hhcGUkdHlwZXMkU1BIRVJFID0gU2hhcGUudHlwZXMuU1BIRVJFOwogIF9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FOwogIF9TaGFwZSR0eXBlcyRCT1ggPSBTaGFwZS50eXBlcy5CT1g7CiAgX1NoYXBlJHR5cGVzJENZTElOREVSID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjsKICBfU2hhcGUkdHlwZXMkSEVJR0hURkkgPSBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRDsKICBfU2hhcGUkdHlwZXMkVFJJTUVTSCA9IFNoYXBlLnR5cGVzLlRSSU1FU0g7CgogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwogIGNsYXNzIFJheSB7CiAgICAvKioKICAgICAqIGZyb20KICAgICAqLwoKICAgIC8qKgogICAgICogdG8KICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHJheS4gVXNlZCB3aGVuIGNoZWNraW5nIHBhcmFsbGVsaXR5IGV0Yy4KICAgICAqIEBkZWZhdWx0IDAuMDAwMQogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gYGZhbHNlYCBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgUmF5IHRvIHRha2UgYGNvbGxpc2lvblJlc3BvbnNlYCBmbGFncyBpbnRvIGFjY291bnQgb24gYm9kaWVzIGFuZCBzaGFwZXMuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSByYXkgc2tpcHMgYW55IGhpdHMgd2l0aCBub3JtYWwuZG90KHJheURpcmVjdGlvbikgPCAwLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyTWFzawogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyR3JvdXAKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcnNlY3Rpb24gbW9kZS4gU2hvdWxkIGJlIFJheS5BTlksIFJheS5BTEwgb3IgUmF5LkNMT1NFU1QuCiAgICAgKiBAZGVmYXVsdCBSQVkuQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEN1cnJlbnQgcmVzdWx0IG9iamVjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VyLXByb3ZpZGVkIHJlc3VsdCBjYWxsYmFjay4gV2lsbCBiZSB1c2VkIGlmIG1vZGUgaXMgUmF5LkFMTC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ0xPU0VTVAogICAgICovCgogICAgLyoqCiAgICAgKiBBTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQUxMCiAgICAgKi8KICAgIGdldCBbX1NoYXBlJHR5cGVzJFNQSEVSRV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0UGxhbmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQk9YXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDWUxJTkRFUl0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEhFSUdIVEZJXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFRSSU1FU0hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0VHJpbWVzaDsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0byA9PT0gdm9pZCAwKSB7CiAgICAgICAgdG8gPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7CiAgICAgIHRoaXMudG8gPSB0by5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0cnVlOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSAtMTsKICAgICAgdGhpcy5tb2RlID0gUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwoKICAgICAgdGhpcy5jYWxsYmFjayA9IHJlc3VsdCA9PiB7fTsKICAgIH0KICAgIC8qKgogICAgICogRG8gaXRlcnNlY3Rpb24gYWdhaW5zdCBhbGwgYm9kaWVzIGluIHRoZSBnaXZlbiBXb3JsZC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZywgb3RoZXJ3aXNlIGZhbHNlLgogICAgICovCgoKICAgIGludGVyc2VjdFdvcmxkKHdvcmxkLCBvcHRpb25zKSB7CiAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG9wdGlvbnMucmVzdWx0IHx8IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9ICEhb3B0aW9ucy5za2lwQmFja2ZhY2VzOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IC0xOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CgogICAgICBpZiAob3B0aW9ucy5mcm9tKSB7CiAgICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudG8pIHsKICAgICAgICB0aGlzLnRvLmNvcHkob3B0aW9ucy50byk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7CgogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnJlc3VsdC5yZXNldCgpOwogICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTsKICAgICAgdG1wQXJyYXkubGVuZ3RoID0gMDsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5hYWJiUXVlcnkod29ybGQsIHRtcEFBQkIkMSwgdG1wQXJyYXkpOwogICAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7CiAgICAgIHJldHVybiB0aGlzLmhhc0hpdDsKICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYSBib2R5LCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9keShib2R5LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7CgogICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHhpID0gaW50ZXJzZWN0Qm9keV94aTsKICAgICAgY29uc3QgcWkgPSBpbnRlcnNlY3RCb2R5X3FpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSBib2R5LnNoYXBlcy5sZW5ndGg7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldOwoKICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwCiAgICAgICAgfQoKICAgICAgICBib2R5LnF1YXRlcm5pb24ubXVsdChib2R5LnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgeGkudmFkZChib2R5LnBvc2l0aW9uLCB4aSk7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RTaGFwZShzaGFwZSwgcWksIHhpLCBib2R5KTsKCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhbiBhcnJheSBib2RpZXMsIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICoKICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2RpZXMoYm9kaWVzLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaW50ZXJzZWN0Qm9keShib2RpZXNbaV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgKi8KCgogICAgdXBkYXRlRGlyZWN0aW9uKCkgewogICAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7CiAgICAgIHRoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIGludGVyc2VjdFNoYXBlKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZQoKICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBpbnRlcnNlY3RNZXRob2QgPSB0aGlzW3NoYXBlLnR5cGVdOwoKICAgICAgaWYgKGludGVyc2VjdE1ldGhvZCkgewogICAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpOwogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdEJveChib3gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpOwogICAgfQoKICAgIF9pbnRlcnNlY3RQbGFuZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBuZXcgVmVjMygwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9Gcm9tID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9UbyA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwoKICAgICAgaWYgKHBsYW5lVG9Gcm9tICogcGxhbmVUb1RvID4gMCkgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBhcmUgb24gdGhlIHNhbWUgc2lkZSBvZiB0aGUgcGxhbmUuLi4gYmFpbCBvdXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG5fZG90X2RpciA9IHdvcmxkTm9ybWFsLmRvdChkaXJlY3Rpb24pOwoKICAgICAgaWYgKE1hdGguYWJzKG5fZG90X2RpcikgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcGxhbmVQb2ludFRvRnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgcGxhbmVQb2ludFRvRnJvbSk7CiAgICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyOwogICAgICBkaXJlY3Rpb24uc2NhbGUodCwgZGlyX3NjYWxlZF93aXRoX3QpOwogICAgICBmcm9tLnZhZGQoZGlyX3NjYWxlZF93aXRoX3QsIGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS4KICAgICAqLwoKCiAgICBnZXRBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgewogICAgICAgIGxvd2VyQm91bmQsCiAgICAgICAgdXBwZXJCb3VuZAogICAgICB9ID0gYWFiYjsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBsb3dlckJvdW5kLnggPSBNYXRoLm1pbih0by54LCBmcm9tLngpOwogICAgICBsb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0by55LCBmcm9tLnkpOwogICAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopOwogICAgICB1cHBlckJvdW5kLnggPSBNYXRoLm1heCh0by54LCBmcm9tLngpOwogICAgICB1cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0by55LCBmcm9tLnkpOwogICAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopOwogICAgfQoKICAgIF9pbnRlcnNlY3RIZWlnaHRmaWVsZChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgc2hhcGUuZGF0YTsKICAgICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlcwoKICAgICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7CgogICAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTsKICAgICAgbG9jYWxSYXkudG8uY29weSh0aGlzLnRvKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS5mcm9tLCBsb2NhbFJheS5mcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pOwogICAgICBsb2NhbFJheS51cGRhdGVEaXJlY3Rpb24oKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBjb25zdCBpbmRleCA9IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4OwogICAgICBsZXQgaU1pblg7CiAgICAgIGxldCBpTWluWTsKICAgICAgbGV0IGlNYXhYOwogICAgICBsZXQgaU1heFk7IC8vIFNldCB0byBtYXgKCiAgICAgIGlNaW5YID0gaU1pblkgPSAwOwogICAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxOwogICAgICBjb25zdCBhYWJiID0gbmV3IEFBQkIoKTsKICAgICAgbG9jYWxSYXkuZ2V0QUFCQihhYWJiKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWluWCA9IE1hdGgubWF4KGlNaW5YLCBpbmRleFswXSk7CiAgICAgIGlNaW5ZID0gTWF0aC5tYXgoaU1pblksIGluZGV4WzFdKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWF4WCA9IE1hdGgubWluKGlNYXhYLCBpbmRleFswXSArIDEpOwogICAgICBpTWF4WSA9IE1hdGgubWluKGlNYXhZLCBpbmRleFsxXSArIDEpOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTsKCiAgICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSAvLyBMb3dlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdFNwaGVyZShzcGhlcmUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgciA9IHNwaGVyZS5yYWRpdXM7CiAgICAgIGNvbnN0IGEgPSAodG8ueCAtIGZyb20ueCkgKiogMiArICh0by55IC0gZnJvbS55KSAqKiAyICsgKHRvLnogLSBmcm9tLnopICoqIDI7CiAgICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7CiAgICAgIGNvbnN0IGMgPSAoZnJvbS54IC0gcG9zaXRpb24ueCkgKiogMiArIChmcm9tLnkgLSBwb3NpdGlvbi55KSAqKiAyICsgKGZyb20ueiAtIHBvc2l0aW9uLnopICoqIDIgLSByICoqIDI7CiAgICAgIGNvbnN0IGRlbHRhID0gYiAqKiAyIC0gNCAqIGEgKiBjOwogICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7CiAgICAgIGNvbnN0IG5vcm1hbCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsOwoKICAgICAgaWYgKGRlbHRhIDwgMCkgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkZWx0YSA9PT0gMCkgewogICAgICAgIC8vIHNpbmdsZSBpbnRlcnNlY3Rpb24gcG9pbnQKICAgICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGQxID0gKC1iIC0gTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwogICAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwoKICAgICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQxLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDIsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdENvbnZleChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuZmFjZUxpc3QgfHwgbnVsbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGZhY2VzID0gc2hhcGUuZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzaGFwZS5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8odG8pOwogICAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBqID0gMDsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGogPCBOZmFjZXM7IGorKykgewogICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3QgPyBmYWNlTGlzdFtqXSA6IGo7CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTsKICAgICAgICBjb25zdCBmYWNlTm9ybWFsID0gbm9ybWFsc1tmaV07CiAgICAgICAgY29uc3QgcSA9IHF1YXQ7CiAgICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIHZlY3Rvci5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTsKICAgICAgICB2ZWN0b3IudmFkZCh4LCB2ZWN0b3IpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICB2ZWN0b3IudnN1Yihmcm9tLCB2ZWN0b3IpOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICAgIHEudm11bHQoZmFjZU5vcm1hbCwgbm9ybWFsKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gZGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAoKICAgICAgICBpZiAoTWF0aC5hYnMoZG90KSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBpZiAoZG90IDwgMCkgewogICAgICAgIC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBkaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChmcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIGEgaXMgdGhlIHBvaW50IHdlIGNvbXBhcmUgcG9pbnRzIGIgYW5kIGMgd2l0aC4KCiAgICAgICAgYS5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KGEsIGEpOwogICAgICAgIHgudmFkZChhLCBhKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDE7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgZmFjZS5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgIC8vIFRyYW5zZm9ybSAzIHZlcnRpY2VzIHRvIHdvcmxkIGNvb3JkcwogICAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTsKICAgICAgICAgIGMuY29weSh2ZXJ0aWNlc1tmYWNlW2kgKyAxXV0pOwogICAgICAgICAgcS52bXVsdChiLCBiKTsKICAgICAgICAgIHEudm11bHQoYywgYyk7CiAgICAgICAgICB4LnZhZGQoYiwgYik7CiAgICAgICAgICB4LnZhZGQoYywgYyk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7CgogICAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgZmkpOwogICAgICAgIH0gLy8gfQoKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LgogICAgICogQHRvZG8gVXNlIE9jdHJlZSBsb29rdXAKICAgICAqLwoKCiAgICBfaW50ZXJzZWN0VHJpbWVzaChtZXNoLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX25vcm1hbDsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7CiAgICAgIGNvbnN0IHRyZWVUcmFuc2Zvcm0gPSBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm07CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjsKICAgICAgY29uc3QgbG9jYWxGcm9tID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb207CiAgICAgIGNvbnN0IGxvY2FsVG8gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG87CiAgICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGluZGljZXMgPSBtZXNoLmluZGljZXM7CiAgICAgIG1lc2gudmVydGljZXM7IC8vIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmZhY2VOb3JtYWxzCgogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICB0cmVlVHJhbnNmb3JtLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pOwogICAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSEKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGZyb20sIGxvY2FsRnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgdG8sIGxvY2FsVG8pOwogICAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbFRvLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbFRvLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsRnJvbS55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxGcm9tLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIGxvY2FsRGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZVNxdWFyZWQgPSBsb2NhbEZyb20uZGlzdGFuY2VTcXVhcmVkKGxvY2FsVG8pOwogICAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgdHJpYW5nbGVzSW5kZXggPSB0cmlhbmdsZXNbaV07CiAgICAgICAgbWVzaC5nZXROb3JtYWwodHJpYW5nbGVzSW5kZXgsIG5vcm1hbCk7IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDNdLCBhKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgYS52c3ViKGxvY2FsRnJvbSwgdmVjdG9yKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gbG9jYWxEaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCiAgICAgICAgLy8gaWYgKE1hdGguYWJzKCBkb3QgKSA8IHRoaXMucHJlY2lzaW9uKXsKICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGxvY2FsRnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBHZXQgdHJpYW5nbGUgdmVydGljZXMKCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAxXSwgYik7CiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAyXSwgYyk7CiAgICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7CgogICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGludGVyc2VjdHBvaW50IGFuZCBub3JtYWwgdG8gd29ybGQKCgogICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUocXVhdCwgbm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBpbnRlcnNlY3RQb2ludCwgd29ybGRJbnRlcnNlY3RQb2ludCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTsKICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW50ZXJzZWN0aW9ucyBzaG91bGQgY29udGludWUKICAgICAqLwoKCiAgICByZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgaGl0RmFjZUluZGV4KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8oaGl0UG9pbnRXb3JsZCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OyAvLyBTa2lwIGJhY2sgZmFjZXM/CgogICAgICBpZiAodGhpcy5za2lwQmFja2ZhY2VzICYmIG5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVzdWx0LmhpdEZhY2VJbmRleCA9IHR5cGVvZiBoaXRGYWNlSW5kZXggIT09ICd1bmRlZmluZWQnID8gaGl0RmFjZUluZGV4IDogLTE7CgogICAgICBzd2l0Y2ggKHRoaXMubW9kZSkgewogICAgICAgIGNhc2UgUmF5LkFMTDoKICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkNMT1NFU1Q6CiAgICAgICAgICAvLyBTdG9yZSBpZiBjbG9zZXIgdGhhbiBjdXJyZW50IGNsb3Nlc3QKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkgewogICAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkFOWToKICAgICAgICAgIC8vIFJlcG9ydCBhbmQgc3RvcC4KICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXMgcGVyICJCYXJ5Y2VudHJpYyBUZWNobmlxdWUiIGFzIG5hbWVkCiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cuYmxhY2twYXduLmNvbS90ZXh0cy9wb2ludGlucG9seS9kZWZhdWx0Lmh0bWwgaGVyZX0gYnV0IHdpdGhvdXQgdGhlIGRpdmlzaW9uCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50SW5UcmlhbmdsZShwLCBhLCBiLCBjKSB7CiAgICAgIGMudnN1YihhLCB2MCk7CiAgICAgIGIudnN1YihhLCB2MSk7CiAgICAgIHAudnN1YihhLCB2Mik7CiAgICAgIGNvbnN0IGRvdDAwID0gdjAuZG90KHYwKTsKICAgICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpOwogICAgICBjb25zdCBkb3QwMiA9IHYwLmRvdCh2Mik7CiAgICAgIGNvbnN0IGRvdDExID0gdjEuZG90KHYxKTsKICAgICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpOwogICAgICBsZXQgdTsKICAgICAgbGV0IHY7CiAgICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTsKICAgIH0KCiAgfQogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFJheWNhc3RSZXN1bHQoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhPcHRpb25zID0gewogICAgZmFjZUxpc3Q6IFswXQogIH07CiAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5ID0gbmV3IFJheSgpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KCiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCiAgY2xhc3MgU0FQQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBMaXN0IG9mIGJvZGllcyBjdXJyZW50bHkgaW4gdGhlIGJyb2FkcGhhc2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEF4aXMgdG8gc29ydCB0aGUgYm9kaWVzIGFsb25nLgogICAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy4KICAgICAqIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwaWNrIHRoZSBheGlzIHdoZXJlIGJvZGllcyBhcmUgbW9zdCBkaXN0cmlidXRlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy4KICAgICAqLwogICAgc3RhdGljIGNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSB7CiAgICAgIGxldCBiaVBvczsKICAgICAgbGV0IGJqUG9zOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueDsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi55OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLno7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56OwogICAgICB9CgogICAgICBjb25zdCByaSA9IGJpLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICByaiA9IGJqLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSwKICAgICAgICAgICAgYm91bmRCMSA9IGJqUG9zIC0gcmo7CiAgICAgIHJldHVybiBib3VuZEIxIDwgYm91bmRBMjsKICAgIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZAoKICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFgKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFgoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnggPD0gdi5hYWJiLmxvd2VyQm91bmQueCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WQogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueSA8PSB2LmFhYmIubG93ZXJCb3VuZC55KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRaCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRaKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcih3b3JsZCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmF4aXNMaXN0ID0gW107CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKCiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGF4aXNMaXN0LnB1c2goZXZlbnQuYm9keSk7CiAgICAgIH07CgogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpOwoKICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgYXhpc0xpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHdvcmxkKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZCh3b3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSB3b3JsZAogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7CiAgICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheQogICAgICB0aGlzLmF4aXNMaXN0Lmxlbmd0aCA9IDA7IC8vIEFkZCBhbGwgYm9kaWVzIGZyb20gdGhlIG5ldyB3b3JsZAoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmF4aXNMaXN0LnB1c2god29ybGQuYm9kaWVzW2ldKTsKICAgICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnkKCgogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy4KCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlycwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0gLy8gTG9vayB0aHJvdWdoIHRoZSBsaXN0CgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgTjsgaisrKSB7CiAgICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIVNBUEJyb2FkcGhhc2UuY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHAxLCBwMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc29ydExpc3QoKSB7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGNvbnN0IE4gPSBheGlzTGlzdC5sZW5ndGg7IC8vIFVwZGF0ZSBBQUJCcwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiaS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29ydCB0aGUgbGlzdAoKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRYKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRZKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgdmFyaWFuY2Ugb2YgdGhlIGJvZHkgcG9zaXRpb25zIGFuZCBlc3RpbWF0ZXMgdGhlIGJlc3QgYXhpcyB0byB1c2UuCiAgICAgKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHByb3BlcnR5IGBheGlzSW5kZXhgLgogICAgICovCgoKICAgIGF1dG9EZXRlY3RBeGlzKCkgewogICAgICBsZXQgc3VtWCA9IDA7CiAgICAgIGxldCBzdW1YMiA9IDA7CiAgICAgIGxldCBzdW1ZID0gMDsKICAgICAgbGV0IHN1bVkyID0gMDsKICAgICAgbGV0IHN1bVogPSAwOwogICAgICBsZXQgc3VtWjIgPSAwOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaW52TiA9IDEgLyBOOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgY2VudGVyWCA9IGIucG9zaXRpb24ueDsKICAgICAgICBzdW1YICs9IGNlbnRlclg7CiAgICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7CiAgICAgICAgY29uc3QgY2VudGVyWSA9IGIucG9zaXRpb24ueTsKICAgICAgICBzdW1ZICs9IGNlbnRlclk7CiAgICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7CiAgICAgICAgY29uc3QgY2VudGVyWiA9IGIucG9zaXRpb24uejsKICAgICAgICBzdW1aICs9IGNlbnRlclo7CiAgICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhbmNlWCA9IHN1bVgyIC0gc3VtWCAqIHN1bVggKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVkgPSBzdW1ZMiAtIHN1bVkgKiBzdW1ZICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47CgogICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7CiAgICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWikgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cykgewogICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkgewogICAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsCiAgICAgICAgd2FrZVVwQm9kaWVzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLmJvZHlBID0gYm9keUE7CiAgICAgIHRoaXMuYm9keUIgPSBib2R5QjsKICAgICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IG9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKCiAgICAgIGlmIChvcHRpb25zLndha2VVcEJvZGllcykgewogICAgICAgIGlmIChib2R5QSkgewogICAgICAgICAgYm9keUEud2FrZVVwKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYm9keUIpIHsKICAgICAgICAgIGJvZHlCLndha2VVcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYWxsIHRoZSBlcXVhdGlvbnMgd2l0aCBkYXRhLgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgdXBkYXRlKCkgbm90IGltcGxtZW1lbnRlZCBpbiB0aGlzIENvbnN0cmFpbnQgc3ViY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBlbmFibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRGlzYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBkaXNhYmxlKCkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXFzW2ldLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9CiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBbiBlbGVtZW50IGNvbnRhaW5pbmcgNiBlbnRyaWVzLCAzIHNwYXRpYWwgYW5kIDMgcm90YXRpb25hbCBkZWdyZWVzIG9mIGZyZWVkb20uCiAgICovCgogIGNsYXNzIEphY29iaWFuRWxlbWVudCB7CiAgICAvKioKICAgICAqIHNwYXRpYWwKICAgICAqLwoKICAgIC8qKgogICAgICogcm90YXRpb25hbAogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CgogIC8qKgogICAqIEVxdWF0aW9uIGJhc2UgY2xhc3MuCiAgICoKICAgKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLgogICAqLwogIGNsYXNzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTWluaW11bSAocmVhZDogbmVnYXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgbnVtYmVyLCBwcm9wb3J0aW9uYWwgdG8gdGhlIGZvcmNlIGFkZGVkIHRvIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJpLCBiaiwgbWluRm9yY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtaW5Gb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWluRm9yY2UgPSAtMWU2OwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWluRm9yY2UgPSBtaW5Gb3JjZTsKICAgICAgdGhpcy5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB0aGlzLmJpID0gYmk7CiAgICAgIHRoaXMuYmogPSBiajsKICAgICAgdGhpcy5hID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuYiA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmVwcyA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSBuZXcgSmFjb2JpYW5FbGVtZW50KCk7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMDsKICAgICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtcwogICAgfQogICAgLyoqCiAgICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy4KICAgICAqCiAgICAgKiBUaGUgRXF1YXRpb24gY29uc3RydWN0b3Igc2V0cyB0eXBpY2FsIFNQT09LIHBhcmFtZXRlcnMgYXMgc3VjaDoKICAgICAqICogYHN0aWZmbmVzc2AgPSAxZTcKICAgICAqICogYHJlbGF4YXRpb25gID0gNAogICAgICogKiBgdGltZVN0ZXBgPSAxIC8gNjAsIF9ub3RlIHRoZSBoYXJkY29kZWQgcmVmcmVzaCByYXRlLl8KICAgICAqLwoKCiAgICBzZXRTcG9va1BhcmFtcyhzdGlmZm5lc3MsIHJlbGF4YXRpb24sIHRpbWVTdGVwKSB7CiAgICAgIGNvbnN0IGQgPSByZWxheGF0aW9uOwogICAgICBjb25zdCBrID0gc3RpZmZuZXNzOwogICAgICBjb25zdCBoID0gdGltZVN0ZXA7CiAgICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpOwogICAgICB0aGlzLmIgPSA0LjAgKiBkIC8gKDEgKyA0ICogZCk7CiAgICAgIHRoaXMuZXBzID0gNC4wIC8gKGggKiBoICogayAqICgxICsgNCAqIGQpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgU1BPT0sgZXF1YXRpb24KICAgICAqLwoKCiAgICBjb21wdXRlQihhLCBiLCBoKSB7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR3EgPSB0aGlzLmNvbXB1dGVHcSgpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdxKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB4aSA9IGJpLnBvc2l0aW9uOwogICAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uOwogICAgICByZXR1cm4gR0Euc3BhdGlhbC5kb3QoeGkpICsgR0Iuc3BhdGlhbC5kb3QoeGopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKlcsIHdoZXJlIFcgYXJlIHRoZSBib2R5IHZlbG9jaXRpZXMKICAgICAqLwoKCiAgICBjb21wdXRlR1coKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyh2aSwgd2kpICsgR0IubXVsdGlwbHlWZWN0b3JzKHZqLCB3aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqV2xhbWJkYSwgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHV2xhbWJkYSgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52bGFtYmRhOwogICAgICBjb25zdCB2aiA9IGJqLnZsYW1iZGE7CiAgICAgIGNvbnN0IHdpID0gYmkud2xhbWJkYTsKICAgICAgY29uc3Qgd2ogPSBiai53bGFtYmRhOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqZiwgd2hlcmUgTSBpcyB0aGUgbWFzcyBtYXRyaXggd2l0aCBkaWFnb25hbCBibG9ja3MgZm9yIGVhY2ggYm9keSwgYW5kIGYgYXJlIHRoZSBmb3JjZXMgb24gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBjb21wdXRlR2lNZigpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgZmkgPSBiaS5mb3JjZTsKICAgICAgY29uc3QgdGkgPSBiaS50b3JxdWU7CiAgICAgIGNvbnN0IGZqID0gYmouZm9yY2U7CiAgICAgIGNvbnN0IHRqID0gYmoudG9ycXVlOwogICAgICBjb25zdCBpbnZNYXNzaSA9IGJpLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52TWFzc2ogPSBiai5pbnZNYXNzU29sdmU7CiAgICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTsKICAgICAgZmouc2NhbGUoaW52TWFzc2osIGlNZmopOwogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdCh0aSwgaW52SWlfdm11bHRfdGF1aSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyhpTWZpLCBpbnZJaV92bXVsdF90YXVpKSArIEdCLm11bHRpcGx5VmVjdG9ycyhpTWZqLCBpbnZJal92bXVsdF90YXVqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqRycKICAgICAqLwoKCiAgICBjb21wdXRlR2lNR3QoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52SWkgPSBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgbGV0IHJlc3VsdCA9IGludk1hc3NpICsgaW52TWFzc2o7CiAgICAgIGludklpLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpOwogICAgICBpbnZJai52bXVsdChHQi5yb3RhdGlvbmFsLCB0bXApOwogICAgICByZXN1bHQgKz0gdG1wLmRvdChHQi5yb3RhdGlvbmFsKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdGVtcCA9IGFkZFRvV2xhbWJkYV90ZW1wOyAvLyBBZGQgdG8gbGluZWFyIHZlbG9jaXR5CiAgICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogRwoKICAgICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpOwogICAgICBiai52bGFtYmRhLmFkZFNjYWxlZFZlY3Rvcihiai5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Iuc3BhdGlhbCwgYmoudmxhbWJkYSk7IC8vIEFkZCB0byBhbmd1bGFyIHZlbG9jaXR5CgogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQS5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmkud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJpLndsYW1iZGEpOwogICAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmoud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJqLndsYW1iZGEpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBkZW5vbWluYXRvciBwYXJ0IG9mIHRoZSBTUE9PSyBlcXVhdGlvbjogQyA9IEcqaW52KE0pKkcnICsgZXBzCiAgICAgKi8KCgogICAgY29tcHV0ZUMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVHaU1HdCgpICsgdGhpcy5lcHM7CiAgICB9CgogIH0KICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb250YWN0L25vbi1wZW5ldHJhdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICovCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzCgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwogIGNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5QS4KICAgICAqLwoKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIGJvZHlCIEJvZHkgdGhhdCB3aWxsIGJlIGNvbnN0cmFpbmVkIGluIGEgc2ltaWxhciB3YXkgdG8gdGhlIHNhbWUgcG9pbnQgYXMgYm9keUEuIFdlIHdpbGwgdGhlcmVmb3JlIGdldCBhIGxpbmsgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuIElmIG5vdCBzcGVjaWZpZWQsIGJvZHlBIHdpbGwgYmUgY29uc3RyYWluZWQgdG8gYSBzdGF0aWMgcG9pbnQuCiAgICAgKiBAcGFyYW0gcGl2b3RCIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUIgd2hpY2ggYm9keUIgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKHBpdm90QSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHBpdm90QiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uZSBlcXVhdGlvbi4gV29ya3MgdG8ga2VlcCB0aGUgZ2l2ZW4gYm9keSB3b3JsZCB2ZWN0b3JzIGFsaWduZWQsIG9yIHRpbHRlZCB3aXRoaW4gYSBnaXZlbiBhbmdsZSBmcm9tIGVhY2ggb3RoZXIuCiAgICovCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDI7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQyOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gVGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvciBpczoKICAgICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGIKICAgICAgLy8gZyA9IGEgKiBiCiAgICAgIC8vIGdkb3QgPSAoYiB4IGEpICogd2kgKyAoYSB4IGIpICogd2oKICAgICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBjb25zdHJhaW50LiBXb3JrcyB0byBrZWVwIHRoZSBsb2NhbCB2ZWN0b3JzIG9ydGhvZ29uYWwgdG8gZWFjaCBvdGhlciBpbiB3b3JsZCBzcGFjZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQxOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gZyA9IG5pICogbmoKICAgICAgLy8gZ2RvdCA9IChuaiB4IG5pKSAqIHdpICsgKG5pIHggbmopICogd2oKICAgICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgQ29uZSBUd2lzdCBjb25zdHJhaW50LCB1c2VmdWwgZm9yIHJhZ2RvbGxzLgogICAqLwogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9ICEhb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgdCA9IHRoaXMudHdpc3RFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdHlwZW9mIG9wdGlvbnMudHdpc3RBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnR3aXN0QW5nbGUgOiAwOyAvLyBNYWtlIHRoZSBjb25lIGVxdWF0aW9uIHB1c2ggdGhlIGJvZGllcyB0b3dhcmQgdGhlIGNvbmUgYXhpcywgbm90IG91dHdhcmQKCiAgICAgIGMubWF4Rm9yY2UgPSAwOwogICAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoKICAgICAgdC5tYXhGb3JjZSA9IDA7CiAgICAgIHQubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goYywgdCk7CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uOwogICAgICBjb25zdCB0d2lzdCA9IHRoaXMudHdpc3RFcXVhdGlvbjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFVwZGF0ZSB0aGUgYXhlcyB0byB0aGUgY29uZSBjb25zdHJhaW50CgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQSwgY29uZS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50CgogICAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICB0aGlzLmF4aXNCLnRhbmdlbnRzKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBjb25lLmFuZ2xlID0gdGhpcy5hbmdsZTsKICAgICAgdHdpc3QubWF4QW5nbGUgPSB0aGlzLnR3aXN0QW5nbGU7CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCiAgY2xhc3MgRGlzdGFuY2VDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkaXN0YW5jZSBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIGRpc3RhbmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwogIGNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7CiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy55QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMueUIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsKICAgICAgdGhpcy56QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7IC8vIC4uLmFuZCB0aGUgZm9sbG93aW5nIHJvdGF0aW9uYWwgZXF1YXRpb25zIHdpbGwga2VlcCBhbGwgcm90YXRpb25hbCBET0YncyBpbiBwbGFjZQoKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyMSwgcjIsIHIzKTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uOwogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVGhlc2UgdmVjdG9yIHBhaXJzIG11c3QgYmUgb3J0aG9nb25hbAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEEsIHIxLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUEsIHIyLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekIsIHIyLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEIsIHIzLmF4aXNCKTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1vdG9yIHZlbG9jaXR5LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIHRoaXMuYmk7CiAgICAgIHRoaXMuYmo7CiAgICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwCiAgICAgIC8vIGdkb3QgPSBheGlzQSAqIHdpIC0gYXhpc0IgKiB3agogICAgICAvLyBnZG90ID0gRyAqIFcgPSBHICogW3ZpIHdpIHZqIHdqXQogICAgICAvLyA9PgogICAgICAvLyBHID0gWzAgYXhpc0EgMCAtYXhpc0JdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkoYXhpc0EpOwogICAgICBheGlzQi5uZWdhdGUoR0Iucm90YXRpb25hbCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQS5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQi5ub3JtYWxpemUoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb24gPSBuZXcgUm90YXRpb25hbE1vdG9yRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtYXhGb3JjZSk7CiAgICAgIG1vdG9yLmVuYWJsZWQgPSBmYWxzZTsgLy8gTm90IGVuYWJsZWQgYnkgZGVmYXVsdAogICAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7CiAgICB9CiAgICAvKioKICAgICAqIGVuYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZW5hYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogZGlzYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZGlzYWJsZU1vdG9yKCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3RvclNwZWVkCiAgICAgKi8KCgogICAgc2V0TW90b3JTcGVlZChzcGVlZCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDsKICAgIH0KICAgIC8qKgogICAgICogc2V0TW90b3JNYXhGb3JjZQogICAgICovCgoKICAgIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3Qgd29ybGRBeGlzQSA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMTsKICAgICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlcwoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQoYXhpc0IsIHdvcmxkQXhpc0IpOwogICAgICB3b3JsZEF4aXNBLnRhbmdlbnRzKHIxLmF4aXNBLCByMi5heGlzQSk7CiAgICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CiAgICAgIHIyLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CgogICAgICBpZiAodGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQpIHsKICAgICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0EsIG1vdG9yLmF4aXNBKTsKICAgICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTsKICAgICAgfQogICAgfQoKICB9CiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25zdHJhaW5zIHRoZSBzbGlwcGluZyBpbiBhIGNvbnRhY3QgYWxvbmcgYSB0YW5nZW50CiAgICovCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50ID0gbmV3IFZlYzMoKTsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanh0ID0gRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMjsKICAgICAgY29uc3QgdCA9IHRoaXMudDsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICByaS5jcm9zcyh0LCByaXh0KTsKICAgICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XQogICAgICAvLyBBbmQgcmVtZW1iZXIsIHRoaXMgaXMgYSBwdXJlIHZlbG9jaXR5IGNvbnN0cmFpbnQsIGcgaXMgYWx3YXlzIHplcm8hCgogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXh0Lm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KHQpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogRGVmaW5lcyB3aGF0IGhhcHBlbnMgd2hlbiB0d28gbWF0ZXJpYWxzIG1lZXQuCiAgICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCCiAgICovCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CiAgQ29udGFjdE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwogIGNsYXNzIE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogTWF0ZXJpYWwgbmFtZS4KICAgICAqIElmIG9wdGlvbnMgaXMgYSBzdHJpbmcsIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhhdCBzdHJpbmcuCiAgICAgKiBAdG9kbyBEZXByZWNhdGUgdGhpcwogICAgICovCgogICAgLyoqIE1hdGVyaWFsIGlkLiAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmcmljdGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlc3RpdHV0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgcmVzdGl0dXRpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBheGxlV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsCiAgICAgICAgc3VzcGVuc2lvbk1heExlbmd0aDogMiwKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLAogICAgICAgIGRhbXBpbmdDb21wcmVzc2lvbjogMTAsCiAgICAgICAgZGFtcGluZ1JlbGF4YXRpb246IDEwLAogICAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSwKICAgICAgICBmb3J3YXJkQWNjZWxlcmF0aW9uOiAxLAogICAgICAgIHNpZGVBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc3RlZXJpbmc6IDAsCiAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgZGVsdGFSb3RhdGlvbjogMCwKICAgICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLAogICAgICAgIG1heFN1c3BlbnNpb25Gb3JjZTogTnVtYmVyLk1BWF9WQUxVRSwKICAgICAgICBpc0Zyb250V2hlZWw6IHRydWUsCiAgICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLAogICAgICAgIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OiAwLAogICAgICAgIHN1c3BlbnNpb25Gb3JjZTogMCwKICAgICAgICBzbGlwSW5mbzogMCwKICAgICAgICBza2lkSW5mbzogMCwKICAgICAgICBzdXNwZW5zaW9uTGVuZ3RoOiAwLAogICAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsCiAgICAgICAgdXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogZmFsc2UsCiAgICAgICAgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogLTAuMQogICAgICB9KTsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSBvcHRpb25zLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gb3B0aW9ucy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gb3B0aW9ucy5kaXJlY3Rpb25Mb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbldvcmxkID0gb3B0aW9ucy5kaXJlY3Rpb25Xb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZVdvcmxkID0gb3B0aW9ucy5heGxlV29ybGQuY2xvbmUoKTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDsKICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1czsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gb3B0aW9ucy5zdXNwZW5zaW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uOwogICAgICB0aGlzLmRhbXBpbmdSZWxheGF0aW9uID0gb3B0aW9ucy5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSBvcHRpb25zLmZyaWN0aW9uU2xpcDsKICAgICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICB0aGlzLnNpZGVBY2NlbGVyYXRpb24gPSBvcHRpb25zLnNpZGVBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc3RlZXJpbmcgPSAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5yb2xsSW5mbHVlbmNlID0gb3B0aW9ucy5yb2xsSW5mbHVlbmNlOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlOwogICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsKICAgICAgdGhpcy5icmFrZSA9IDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7CiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgdGhpcy5zbGlwSW5mbyA9IDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSAwOwogICAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwOwogICAgICB0aGlzLnNpZGVJbXB1bHNlID0gMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgICAgIHRoaXMuaXNJbkNvbnRhY3QgPSBmYWxzZTsKICAgIH0KCiAgICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7CiAgICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB0aGlzLnJheWNhc3RSZXN1bHQ7CgogICAgICBpZiAodGhpcy5pc0luQ29udGFjdCkgewogICAgICAgIGNvbnN0IHByb2plY3QgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChyYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkKTsKICAgICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXMuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocmVscG9zLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKHByb2plY3QgPj0gLTAuMSkgewogICAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBOb3QgaW4gY29udGFjdCA6IHBvc2l0aW9uIHdoZWVsIGluIGEgbmljZSAocmVzdCBsZW5ndGgpIHBvc2l0aW9uCiAgICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpOwogICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogVmVoaWNsZSBoZWxwZXIgY2xhc3MgdGhhdCBjYXN0cyByYXlzIGZyb20gdGhlIHdoZWVsIHBvc2l0aW9ucyB0b3dhcmRzIHRoZSBncm91bmQgYW5kIGFwcGxpZXMgZm9yY2VzLgogICAqLwogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3JheXZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gbmV3IFZlYzMoKTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107CiAgY29uc3Qgc2lkZUZyaWN0aW9uU3RpZmZuZXNzMiA9IDE7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY2FsY1JvbGxpbmdGcmljdGlvbihib2R5MCwgYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQsIG1heEltcHVsc2UpIHsKICAgIGxldCBqMSA9IDA7CiAgICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CgogICAgY29uc3QgdmVsMSA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMTsKICAgIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMik7CgogICAgYm9keTAuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwxKTsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHZyZWwgPSBmcmljdGlvbkRpcmVjdGlvbldvcmxkLmRvdCh2ZWwpOwogICAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IHJlbGF4YXRpb24gPSAxOwogICAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHkKCiAgICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52OwoKICAgIGlmIChtYXhJbXB1bHNlIDwgajEpIHsKICAgICAgajEgPSBtYXhJbXB1bHNlOwogICAgfQoKICAgIGlmIChqMSA8IC1tYXhJbXB1bHNlKSB7CiAgICAgIGoxID0gLW1heEltcHVsc2U7CiAgICB9CgogICAgcmV0dXJuIGoxOwogIH0KCiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keSwgcG9zLCBub3JtYWwpIHsKICAgIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDsKICAgIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDsKICAgIGNvbnN0IHZlYyA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjOwogICAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTsKICAgIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTsKICAgIHIwLmNyb3NzKG5vcm1hbCwgYzApOwogICAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pOwogICAgbS5jcm9zcyhyMCwgdmVjKTsKICAgIHJldHVybiBib2R5Lmludk1hc3MgKyBub3JtYWwuZG90KHZlYyk7CiAgfQoKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwgPSBuZXcgVmVjMygpOyAvLyBiaWxhdGVyYWwgY29uc3RyYWludCBiZXR3ZWVuIHR3byBkeW5hbWljIG9iamVjdHMKCiAgZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChib2R5MSwgcG9zMSwgYm9keTIsIHBvczIsIG5vcm1hbCkgewogICAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7CiAgICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlCiAgICB9IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gcG9zMi52c3ViKGJvZHkyLnBvc2l0aW9uLCByZWxfcG9zMik7CgoKICAgIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyOwogICAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTsKICAgIGJvZHkyLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczIsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpOwogICAgY29uc3QgY29udGFjdERhbXBpbmcgPSAwLjI7CiAgICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpOwogICAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTsKICAgIHJldHVybiBpbXB1bHNlOwogIH0KCiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDsKICAgICAgdGFyZ2V0LnggPSBJOwogICAgICB0YXJnZXQueSA9IEk7CiAgICAgIHRhcmdldC56ID0gSTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKiB2b2x1bWUgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1czsKICAgICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTsKICAgICAgICBtaW5bYXhdID0gcG9zW2F4XSAtIHI7CiAgICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByOwogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEN5bGluZGVyIGNsYXNzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1c1RvcCA9IDAuNQogICAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjUKICAgKiAgICAgY29uc3QgaGVpZ2h0ID0gMgogICAqICAgICBjb25zdCBudW1TZWdtZW50cyA9IDEyCiAgICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKQogICAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGN5bGluZGVyQm9keSkKICAgKi8KCiAgY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHsKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi8KCiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHJhZGl1c1RvcCBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4KICAgICAqIEBwYXJhbSBudW1TZWdtZW50cyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c1RvcCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c0JvdHRvbSA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgewogICAgICAgIGhlaWdodCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChudW1TZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbnVtU2VnbWVudHMgPSA4OwogICAgICB9CgogICAgICBpZiAocmFkaXVzVG9wIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzQm90dG9tIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgY29uc3QgTiA9IG51bVNlZ21lbnRzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBheGVzID0gW107CiAgICAgIGNvbnN0IGZhY2VzID0gW107CiAgICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTsKICAgICAgY29uc3QgdG9wZmFjZSA9IFtdOwogICAgICBjb25zdCBjb3MgPSBNYXRoLmNvczsKICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTsKICAgICAgYm90dG9tZmFjZS5wdXNoKDApOyAvLyBGaXJzdCB0b3AgcG9pbnQKCiAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbigwKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3MoMCkpKTsKICAgICAgdG9wZmFjZS5wdXNoKDEpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7CiAgICAgICAgY29uc3QgdGhldGFOID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAwLjUpOwoKICAgICAgICBpZiAoaSA8IE4gLSAxKSB7CiAgICAgICAgICAvLyBCb3R0b20KICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIGJvdHRvbWZhY2UucHVzaCgyICogaSArIDIpOyAvLyBUb3AKCiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4odGhldGEpLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlCgogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMSwgMF0pOyAvLyBDb25uZWN0CiAgICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50cwoKCiAgICAgICAgaWYgKE4gJSAyID09PSAxIHx8IGkgPCBOIC8gMikgewogICAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZhY2VzLnB1c2goYm90dG9tZmFjZSk7CiAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2UKCiAgICAgIGNvbnN0IHRlbXAgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykgewogICAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTsKICAgICAgfQoKICAgICAgZmFjZXMucHVzaCh0ZW1wKTsKICAgICAgc3VwZXIoewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogICAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDsKICAgICAgdGhpcy5yYWRpdXNCb3R0b20gPSByYWRpdXNCb3R0b207CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogUGFydGljbGUgc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGFydGljbGVTaGFwZSA9IG5ldyBDQU5OT04uUGFydGljbGUoKQogICAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSkKICAgKi8KICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CgogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwogIGNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHdvcmxkTm9ybWFsICovCgogICAgLyoqIHdvcmxkTm9ybWFsTmVlZHNVcGRhdGUgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUExBTkUKICAgICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbAoKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIG1heFZhbHVlOiBudWxsLAogICAgICAgIG1pblZhbHVlOiBudWxsLAogICAgICAgIGVsZW1lbnRTaXplOiAxCiAgICAgIH0pOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuSEVJR0hURklFTEQKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIGAke3hpfV8ke3lpfV8ke2dldFVwcGVyVHJpYW5nbGUgPyAxIDogMH1gOwogICAgfQoKICAgIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CgogICAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHsKICAgICAgICBjb252ZXgsCiAgICAgICAgb2Zmc2V0CiAgICAgIH07CiAgICB9CgogICAgY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZAogICAgICovCgoKICAgIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgICAgIGIuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgICAgYy5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS4KICAgICAqLwoKCiAgICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4OwogICAgICBsZXQgb2Zmc2V0UmVzdWx0ID0gdGhpcy5waWxsYXJPZmZzZXQ7CgogICAgICBpZiAodGhpcy5jYWNoZUVuYWJsZWQpIHsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpOwoKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDsKICAgICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gZGF0YS5vZmZzZXQ7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICAgIG9mZnNldFJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7CiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlCgogICAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgaWYgKCFyZXN1bHQudmVydGljZXNbaV0pIHsKICAgICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFJldXNlIGZhY2VzIGlmIHBvc3NpYmxlCgoKICAgICAgZmFjZXMubGVuZ3RoID0gNTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKCFmYWNlc1tpXSkgewogICAgICAgICAgZmFjZXNbaV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gcmVzdWx0LnZlcnRpY2VzOwogICAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTsKCiAgICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyB0b3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAwOwogICAgICAgIGZhY2VzWzJdWzFdID0gMjsKICAgICAgICBmYWNlc1syXVsyXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDE7CiAgICAgICAgZmFjZXNbM11bMV0gPSAwOwogICAgICAgIGZhY2VzWzNdWzJdID0gMzsKICAgICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA1OwogICAgICAgIGZhY2VzWzRdWzJdID0gMjsKICAgICAgICBmYWNlc1s0XVszXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAyOwogICAgICAgIGZhY2VzWzJdWzFdID0gNTsKICAgICAgICBmYWNlc1syXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDM7CiAgICAgICAgZmFjZXNbM11bMV0gPSA0OwogICAgICAgIGZhY2VzWzNdWzJdID0gMTsKICAgICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDE7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA0OwogICAgICAgIGZhY2VzWzRdWzJdID0gNTsKICAgICAgICBmYWNlc1s0XVszXSA9IDI7CiAgICAgIH0KCiAgICAgIHJlc3VsdC5jb21wdXRlTm9ybWFscygpOwogICAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7CiAgICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB0aGlzLnNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgcmVzdWx0LCBvZmZzZXRSZXN1bHQpOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGUKICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovCiAgICAgIG1pbi5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CiAgICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBtaW4vbWF4IHZhbHVlcwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IG5ldyBWZWMzKGRhdGEubGVuZ3RoICogcywgZGF0YVswXS5sZW5ndGggKiBzLCBNYXRoLm1heChNYXRoLmFicyh0aGlzLm1heFZhbHVlKSwgTWF0aC5hYnModGhpcy5taW5WYWx1ZSkpKS5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgaGVpZ2h0IHZhbHVlcyBmcm9tIGFuIGltYWdlLiBDdXJyZW50bHkgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3Nlci4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRzRnJvbUltYWdlKGltYWdlLCBzY2FsZSkgewogICAgICBjb25zdCB7CiAgICAgICAgeCwKICAgICAgICB6LAogICAgICAgIHkKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5kYXRhOwogICAgICBtYXRyaXgubGVuZ3RoID0gMDsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHsKICAgICAgICBjb25zdCByb3cgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbWFnZURhdGEud2lkdGg7IGorKykgewogICAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07CiAgICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07CiAgICAgICAgICBjb25zdCBjID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMl07CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6OwoKICAgICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgICByb3cucHVzaChoZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh5IDwgMCkgewogICAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0cml4LnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQoKICB9CiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQoKICAvKioKICAgKiBPY3RyZWVOb2RlCiAgICovCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKCiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KICBjb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTsKICBjb25zdCB1bnNjYWxlZEFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICBjb25zdCBhYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwogIGNsYXNzIFNvbHZlciB7CiAgICAvKioKICAgICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gR2F1c3MtU2VpZGVsIHNvbHZlci4KICAgKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS4KICAgKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmCiAgICovCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX0JzID0gW107CgogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCiAgY2xhc3MgU3BsaXRTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqIHN1YnNvbHZlciAqLwogICAgY29uc3RydWN0b3Ioc3Vic29sdmVyKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQoKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KICBjbGFzcyBQb29sIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm9iamVjdHMgPSBbXTsKICAgICAgdGhpcy50eXBlID0gT2JqZWN0OwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KICAgIHJlbGVhc2UoKSB7CiAgICAgIGNvbnN0IE5hcmdzID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7CiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2goaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQoKICAvKioKICAgKiBWZWMzUG9vbAogICAqLwoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudHlwZSA9IFZlYzM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3IKICAgICAqLwogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKICBjb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7CiAgICBzcGhlcmVTcGhlcmU6IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSwKICAgIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLAogICAgc3BoZXJlQm94OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVDb252ZXg6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgc3BoZXJlSGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCwKICAgIHNwaGVyZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBjb252ZXhQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwbGFuZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCwKICAgIHBsYW5lVHJpbWVzaDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5UUklNRVNICiAgfTsKCiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwogIGNsYXNzIE5hcnJvd3BoYXNlIHsKICAgIC8qKgogICAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvb2xlZCB2ZWN0b3JzLgogICAgICovCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGxhbmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVQbGFuZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveENvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5oZWlnaHRmaWVsZEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFydGljbGVDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7CiAgICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7CgogICAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHsKICAgICAgICAgIHJlZHVjZWRNYXNzID0gMSAvIHJlZHVjZWRNYXNzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTsKICAgICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7CiAgICAgICAgYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcgKiByZWR1Y2VkTWFzczsKICAgICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwoKICAgICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopOwogICAgICAgIGMyLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50cwoKICAgICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXMKCiAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gY29udGFjdEVxdWF0aW9uLmVuYWJsZWQ7CiAgICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRha2UgdGhlIGF2ZXJhZ2UgTiBsYXRlc3QgY29udGFjdCBwb2ludCBvbiB0aGUgcGxhbmUuCiAgICAgKi8KCgogICAgY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cykgewogICAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb24KICAgICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byAiYXZlcmFnZSIgZnJpY3Rpb24gZXF1YXRpb25zCgogICAgICBpZiAoIXRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjLCB0aGlzLmZyaWN0aW9uUmVzdWx0KSB8fCBudW1Db250YWN0cyA9PT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07CiAgICAgIGNvbnN0IGYyID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zZXRaZXJvKCk7CiAgICAgIGNvbnN0IGJvZHlBID0gYy5iaTsKICAgICAgYy5iajsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7CiAgICAgICAgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDEgLSBpXTsKCiAgICAgICAgaWYgKGMuYmkgIT09IGJvZHlBKSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52TnVtQ29udGFjdHMgPSAxIC8gbnVtQ29udGFjdHM7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7CiAgICAgIGYyLnJpLmNvcHkoZjEucmkpOyAvLyBTaG91bGQgYmUgdGhlIHNhbWUKCiAgICAgIGYyLnJqLmNvcHkoZjEucmopOwogICAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzCiAgICAgKiBAcGFyYW0gcDEgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0cwogICAgICogQHBhcmFtIG9sZGNvbnRhY3RzIE9wdGlvbmFsLiBBcnJheSBvZiByZXVzYWJsZSBjb250YWN0IG9iamVjdHMKICAgICAqLwoKCiAgICBnZXRDb250YWN0cyhwMSwgcDIsIHdvcmxkLCByZXN1bHQsIG9sZGNvbnRhY3RzLCBmcmljdGlvblJlc3VsdCwgZnJpY3Rpb25Qb29sKSB7CiAgICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0cwogICAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0czsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IGZyaWN0aW9uUG9vbDsKICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDsKICAgICAgY29uc3QgcWkgPSB0bXBRdWF0MTsKICAgICAgY29uc3QgcWogPSB0bXBRdWF0MjsKICAgICAgY29uc3QgeGkgPSB0bXBWZWMxOwogICAgICBjb25zdCB4aiA9IHRtcFZlYzI7CgogICAgICBmb3IgKGxldCBrID0gMCwgTiA9IHAxLmxlbmd0aDsgayAhPT0gTjsgaysrKSB7CiAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllcwogICAgICAgIGNvbnN0IGJpID0gcDFba107CiAgICAgICAgY29uc3QgYmogPSBwMltrXTsgLy8gR2V0IGNvbnRhY3QgbWF0ZXJpYWwKCiAgICAgICAgbGV0IGJvZHlDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJpLnF1YXRlcm5pb24ubXVsdChiaS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTsKICAgICAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzW2ldOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmouc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlcwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTsKICAgICAgICAgICAgYmoucXVhdGVybmlvbi52bXVsdChiai5zaGFwZU9mZnNldHNbal0sIHhqKTsKICAgICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopOwogICAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTsKCiAgICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSAvLyBHZXQgY29sbGlzaW9uIG1hdGVyaWFsCgoKICAgICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkgewogICAgICAgICAgICAgIHNoYXBlQ29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKHNpLm1hdGVyaWFsLCBzai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHMKCiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTsKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdOwoKICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgbGV0IHJldHZhbCA9IGZhbHNlOyAvLyBUTyBETzogaW52ZXN0aWdhdGUgd2h5IHNwaGVyZVBhcnRpY2xlIGFuZCBjb252ZXhQYXJ0aWNsZQogICAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyCiAgICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpCgogICAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmV0dmFsICYmIGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwCiAgICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgICAgICAgICAgICB3b3JsZC5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVTcGhlcmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyOwogICAgICB9IC8vIFdlIHdpbGwgaGF2ZSBvbmx5IG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQoKCiAgICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEubmkubm9ybWFsaXplKCk7IC8vIENvbnRhY3QgcG9pbnQgbG9jYXRpb25zCgogICAgICBjb250YWN0RXEucmkuY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmouc2NhbGUoLXNqLnJhZGl1cywgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmoudmFkZCh4aiwgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7CiAgICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTsKICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcSwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICB9CgogICAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQogICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHIubmkuc2V0KDAsIDAsIDEpOwogICAgICBxai52bXVsdChyLm5pLCByLm5pKTsKICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbAoKICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkPwogICAgICAvLyBWZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QgcG9pbnQKCiAgICAgIHIubmkuc2NhbGUoc2kucmFkaXVzLCByLnJpKTsgLy8gUHJvamVjdCBkb3duIHNwaGVyZSBvbiBwbGFuZQoKICAgICAgeGkudnN1Yih4aiwgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKTsKICAgICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pOwogICAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZQoKICAgICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgoKICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqCgogICAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlczsKICAgICAgeGkudnN1Yih4aiwgYm94X3RvX3NwaGVyZSk7CiAgICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gU3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIHBlbmV0cmF0aW9uIGluZm8KCiAgICAgIGNvbnN0IHNpZGVfbnMgPSBzcGhlcmVCb3hfc2lkZV9uczsKICAgICAgY29uc3Qgc2lkZV9uczEgPSBzcGhlcmVCb3hfc2lkZV9uczE7CiAgICAgIGNvbnN0IHNpZGVfbnMyID0gc3BoZXJlQm94X3NpZGVfbnMyOwogICAgICBsZXQgc2lkZV9oID0gbnVsbDsKICAgICAgbGV0IHNpZGVfcGVuZXRyYXRpb25zID0gMDsKICAgICAgbGV0IHNpZGVfZG90MSA9IDA7CiAgICAgIGxldCBzaWRlX2RvdDIgPSAwOwogICAgICBsZXQgc2lkZV9kaXN0YW5jZSA9IG51bGw7CgogICAgICBmb3IgKGxldCBpZHggPSAwLCBuc2lkZXMgPSBzaWRlcy5sZW5ndGg7IGlkeCAhPT0gbnNpZGVzICYmIGZvdW5kID09PSBmYWxzZTsgaWR4KyspIHsKICAgICAgICAvLyBHZXQgdGhlIHBsYW5lIHNpZGUgbm9ybWFsIChucykKICAgICAgICBjb25zdCBucyA9IHNwaGVyZUJveF9uczsKICAgICAgICBucy5jb3B5KHNpZGVzW2lkeF0pOwogICAgICAgIGNvbnN0IGggPSBucy5sZW5ndGgoKTsKICAgICAgICBucy5ub3JtYWxpemUoKTsgLy8gVGhlIG5vcm1hbC9kaXN0YW5jZSBkb3QgcHJvZHVjdCB0ZWxscyB3aGljaCBzaWRlIG9mIHRoZSBwbGFuZSB3ZSBhcmUKCiAgICAgICAgY29uc3QgZG90ID0gYm94X3RvX3NwaGVyZS5kb3QobnMpOwoKICAgICAgICBpZiAoZG90IDwgaCArIFIgJiYgZG90ID4gMCkgewogICAgICAgICAgLy8gSW50ZXJzZWN0cyBwbGFuZS4gTm93IGNoZWNrIHRoZSBvdGhlciB0d28gZGltZW5zaW9ucwogICAgICAgICAgY29uc3QgbnMxID0gc3BoZXJlQm94X25zMTsKICAgICAgICAgIGNvbnN0IG5zMiA9IHNwaGVyZUJveF9uczI7CiAgICAgICAgICBuczEuY29weShzaWRlc1soaWR4ICsgMSkgJSAzXSk7CiAgICAgICAgICBuczIuY29weShzaWRlc1soaWR4ICsgMikgJSAzXSk7CiAgICAgICAgICBjb25zdCBoMSA9IG5zMS5sZW5ndGgoKTsKICAgICAgICAgIGNvbnN0IGgyID0gbnMyLmxlbmd0aCgpOwogICAgICAgICAgbnMxLm5vcm1hbGl6ZSgpOwogICAgICAgICAgbnMyLm5vcm1hbGl6ZSgpOwogICAgICAgICAgY29uc3QgZG90MSA9IGJveF90b19zcGhlcmUuZG90KG5zMSk7CiAgICAgICAgICBjb25zdCBkb3QyID0gYm94X3RvX3NwaGVyZS5kb3QobnMyKTsKCiAgICAgICAgICBpZiAoZG90MSA8IGgxICYmIGRvdDEgPiAtaDEgJiYgZG90MiA8IGgyICYmIGRvdDIgPiAtaDIpIHsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGRvdCAtIGggLSBSKTsKCiAgICAgICAgICAgIGlmIChzaWRlX2Rpc3RhbmNlID09PSBudWxsIHx8IGRpc3QgPCBzaWRlX2Rpc3RhbmNlKSB7CiAgICAgICAgICAgICAgc2lkZV9kaXN0YW5jZSA9IGRpc3Q7CiAgICAgICAgICAgICAgc2lkZV9kb3QxID0gZG90MTsKICAgICAgICAgICAgICBzaWRlX2RvdDIgPSBkb3QyOwogICAgICAgICAgICAgIHNpZGVfaCA9IGg7CiAgICAgICAgICAgICAgc2lkZV9ucy5jb3B5KG5zKTsKICAgICAgICAgICAgICBzaWRlX25zMS5jb3B5KG5zMSk7CiAgICAgICAgICAgICAgc2lkZV9uczIuY29weShuczIpOwogICAgICAgICAgICAgIHNpZGVfcGVuZXRyYXRpb25zKys7CgogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoc2lkZV9wZW5ldHJhdGlvbnMpIHsKICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgc2lkZV9ucy5zY2FsZSgtUiwgci5yaSk7IC8vIFNwaGVyZSByCgogICAgICAgIHIubmkuY29weShzaWRlX25zKTsKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHNob3VsZCBiZSBvdXQgb2Ygc3BoZXJlCgogICAgICAgIHNpZGVfbnMuc2NhbGUoc2lkZV9oLCBzaWRlX25zKTsKICAgICAgICBzaWRlX25zMS5zY2FsZShzaWRlX2RvdDEsIHNpZGVfbnMxKTsKICAgICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczEsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMyLnNjYWxlKHNpZGVfZG90Miwgc2lkZV9uczIpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMiwgci5yaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0gLy8gQ2hlY2sgY29ybmVycwoKCiAgICAgIGxldCByaiA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3Qgc3BoZXJlX3RvX2Nvcm5lciA9IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyOwoKICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IDIgJiYgIWZvdW5kOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gMiAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgIT09IDIgJiYgIWZvdW5kOyBsKyspIHsKICAgICAgICAgICAgcmouc2V0KDAsIDAsIDApOwoKICAgICAgICAgICAgaWYgKGopIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1swXSwgcmopOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaykgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzFdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChsKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMl0sIHJqKTsKICAgICAgICAgICAgfSAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCgogICAgICAgICAgICB4ai52YWRkKHJqLCBzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgc3BoZXJlX3RvX2Nvcm5lci52c3ViKHhpLCBzcGhlcmVfdG9fY29ybmVyKTsKCiAgICAgICAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByLm5pLmNvcHkoci5yaSk7CiAgICAgICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLmNvcHkocmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2M3Bvb2wucmVsZWFzZShyaik7CiAgICAgIHJqID0gbnVsbDsgLy8gQ2hlY2sgZWRnZXMKCiAgICAgIGNvbnN0IGVkZ2VUYW5nZW50ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBlZGdlQ2VudGVyID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCByID0gdjNwb29sLmdldCgpOyAvLyByID0gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlcgoKICAgICAgY29uc3Qgb3J0aG9nb25hbCA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgZGlzdCA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgTnNpZGVzID0gc2lkZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5zaWRlcyAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOc2lkZXMgJiYgIWZvdW5kOyBrKyspIHsKICAgICAgICAgIGlmIChqICUgMyAhPT0gayAlIDMpIHsKICAgICAgICAgICAgLy8gR2V0IGVkZ2UgdGFuZ2VudAogICAgICAgICAgICBzaWRlc1trXS5jcm9zcyhzaWRlc1tqXSwgZWRnZVRhbmdlbnQpOwogICAgICAgICAgICBlZGdlVGFuZ2VudC5ub3JtYWxpemUoKTsKICAgICAgICAgICAgc2lkZXNbal0udmFkZChzaWRlc1trXSwgZWRnZUNlbnRlcik7CiAgICAgICAgICAgIHIuY29weSh4aSk7CiAgICAgICAgICAgIHIudnN1YihlZGdlQ2VudGVyLCByKTsKICAgICAgICAgICAgci52c3ViKHhqLCByKTsKICAgICAgICAgICAgY29uc3Qgb3J0aG9ub3JtID0gci5kb3QoZWRnZVRhbmdlbnQpOyAvLyBkaXN0YW5jZSBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCgogICAgICAgICAgICBlZGdlVGFuZ2VudC5zY2FsZShvcnRob25vcm0sIG9ydGhvZ29uYWwpOyAvLyBWZWN0b3IgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyIGluIHRoZSB0YW5nZW50IGRpcmVjdGlvbgogICAgICAgICAgICAvLyBGaW5kIHRoZSB0aGlyZCBzaWRlIG9ydGhvZ29uYWwgdG8gdGhpcyBvbmUKCiAgICAgICAgICAgIGxldCBsID0gMDsKCiAgICAgICAgICAgIHdoaWxlIChsID09PSBqICUgMyB8fCBsID09PSBrICUgMykgewogICAgICAgICAgICAgIGwrKzsKICAgICAgICAgICAgfSAvLyB2ZWMgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgcHJvamVjdGVkIHRvIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIHRoZSBlZGdlIHRhbmdlbnQKCgogICAgICAgICAgICBkaXN0LmNvcHkoeGkpOwogICAgICAgICAgICBkaXN0LnZzdWIob3J0aG9nb25hbCwgZGlzdCk7CiAgICAgICAgICAgIGRpc3QudnN1YihlZGdlQ2VudGVyLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKHhqLCBkaXN0KTsgLy8gRGlzdGFuY2VzIGluIHRhbmdlbnQgZGlyZWN0aW9uIGFuZCBkaXN0YW5jZSBpbiB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byBpdAoKICAgICAgICAgICAgY29uc3QgdGRpc3QgPSBNYXRoLmFicyhvcnRob25vcm0pOwogICAgICAgICAgICBjb25zdCBuZGlzdCA9IGRpc3QubGVuZ3RoKCk7CgogICAgICAgICAgICBpZiAodGRpc3QgPCBzaWRlc1tsXS5sZW5ndGgoKSAmJiBuZGlzdCA8IFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgZWRnZUNlbnRlci52YWRkKG9ydGhvZ29uYWwsIHJlcy5yaik7IC8vIGJveCByagoKICAgICAgICAgICAgICByZXMucmouY29weShyZXMucmopOwogICAgICAgICAgICAgIGRpc3QubmVnYXRlKHJlcy5uaSk7CiAgICAgICAgICAgICAgcmVzLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHJlcy5yaS5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgcmVzLnJpLnZhZGQoeGosIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJpLnZzdWIoeGksIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHJlcy5yaS5zY2FsZShSLCByZXMucmkpOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1YihiaS5wb3NpdGlvbiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmoudmFkZCh4aiwgcmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmoudnN1Yihiai5wb3NpdGlvbiwgcmVzLnJqKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHJlcyk7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHJlcywgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKGVkZ2VUYW5nZW50LCBlZGdlQ2VudGVyLCByLCBvcnRob2dvbmFsLCBkaXN0KTsKICAgIH0KCiAgICBwbGFuZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5pZCA9IHNqLmlkOwogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleChzaSwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpczsKCiAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChzaS5maW5kU2VwYXJhdGluZ0F4aXMoc2osIHhpLCBxaSwgeGosIHFqLCBzZXBBeGlzLCBmYWNlTGlzdEEsIGZhY2VMaXN0QikpIHsKICAgICAgICBjb25zdCByZXMgPSBbXTsKICAgICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7CiAgICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLCBxaSwgc2osIHhqLCBxaiwgc2VwQXhpcywgLTEwMCwgMTAwLCByZXMpOwogICAgICAgIGxldCBudW1Db250YWN0cyA9IDA7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICAgIGNvbnN0IHJqID0gci5yajsKICAgICAgICAgIHNlcEF4aXMubmVnYXRlKHIubmkpOwogICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7CiAgICAgICAgICBxLnNjYWxlKHJlc1tqXS5kZXB0aCwgcSk7CiAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAgICAgICByai5jb3B5KHJlc1tqXS5wb2ludCk7IC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKCiAgICAgICAgICByaS52c3ViKHhpLCByaSk7CiAgICAgICAgICByai52c3ViKHhqLCByaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIG51bUNvbnRhY3RzKys7CgogICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZUNvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsKICAgICAgeGkudnN1Yih4aiwgY29udmV4X3RvX3NwaGVyZSk7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzai5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZmFjZXMgPSBzai5mYWNlczsKICAgICAgY29uc3QgdmVydHMgPSBzai52ZXJ0aWNlczsKICAgICAgY29uc3QgUiA9IHNpLnJhZGl1czsKICAgICAgLy8gICAgIHJldHVybjsKICAgICAgLy8gfQoKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIENoZWNrIGNvcm5lcnMKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB2ZXJ0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsgLy8gV29ybGQgcG9zaXRpb24gb2YgY29ybmVyCgogICAgICAgIGNvbnN0IHdvcmxkQ29ybmVyID0gc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyOwogICAgICAgIHFqLnZtdWx0KHYsIHdvcmxkQ29ybmVyKTsKICAgICAgICB4ai52YWRkKHdvcmxkQ29ybmVyLCB3b3JsZENvcm5lcik7CiAgICAgICAgY29uc3Qgc3BoZXJlX3RvX2Nvcm5lciA9IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lcjsKICAgICAgICB3b3JsZENvcm5lci52c3ViKHhpLCBzcGhlcmVfdG9fY29ybmVyKTsKCiAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgIHIucmkubm9ybWFsaXplKCk7CiAgICAgICAgICByLm5pLmNvcHkoci5yaSk7CiAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgd29ybGRDb3JuZXIudnN1Yih4aiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gLy8gQ2hlY2sgc2lkZSAocGxhbmUpIGludGVyc2VjdGlvbnMKCgogICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtYWwgPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IGZhY2UgPSBmYWNlc1tpXTsgLy8gR2V0IHdvcmxkLXRyYW5zZm9ybWVkIG5vcm1hbCBvZiB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbDsKICAgICAgICBxai52bXVsdChub3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gR2V0IGEgd29ybGQgdmVydGV4IGZyb20gdGhlIGZhY2UKCiAgICAgICAgY29uc3Qgd29ybGRQb2ludCA9IHNwaGVyZUNvbnZleF93b3JsZFBvaW50OwogICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbMF1dLCB3b3JsZFBvaW50KTsKICAgICAgICB3b3JsZFBvaW50LnZhZGQoeGosIHdvcmxkUG9pbnQpOyAvLyBHZXQgYSBwb2ludCBvbiB0aGUgc3BoZXJlLCBjbG9zZXN0IHRvIHRoZSBmYWNlIG5vcm1hbAoKICAgICAgICBjb25zdCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUgPSBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lOwogICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpOwogICAgICAgIHhpLnZhZGQod29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpOyAvLyBWZWN0b3IgZnJvbSBhIGZhY2UgcG9pbnQgdG8gdGhlIGNsb3Nlc3QgcG9pbnQgb24gdGhlIHNwaGVyZQoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYyA9IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYzsKICAgICAgICB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUudnN1Yih3b3JsZFBvaW50LCBwZW5ldHJhdGlvblZlYyk7IC8vIFRoZSBwZW5ldHJhdGlvbi4gTmVnYXRpdmUgdmFsdWUgbWVhbnMgb3ZlcmxhcC4KCiAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSBwZW5ldHJhdGlvblZlYy5kb3Qod29ybGROb3JtYWwpOwogICAgICAgIGNvbnN0IHdvcmxkUG9pbnRUb1NwaGVyZSA9IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQ7CiAgICAgICAgeGkudnN1Yih3b3JsZFBvaW50LCB3b3JsZFBvaW50VG9TcGhlcmUpOwoKICAgICAgICBpZiAocGVuZXRyYXRpb24gPCAwICYmIHdvcmxkUG9pbnRUb1NwaGVyZS5kb3Qod29ybGROb3JtYWwpID4gMCkgewogICAgICAgICAgLy8gSW50ZXJzZWN0cyBwbGFuZS4gTm93IGNoZWNrIGlmIHRoZSBzcGhlcmUgaXMgaW5zaWRlIHRoZSBmYWNlIHBvbHlnb24KICAgICAgICAgIGNvbnN0IGZhY2VWZXJ0cyA9IFtdOyAvLyBGYWNlIHZlcnRpY2VzLCBpbiB3b3JsZCBjb29yZHMKCiAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTnZlcnRzID0gZmFjZS5sZW5ndGg7IGogIT09IE52ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlW2pdXSwgd29ybGRWZXJ0ZXgpOwogICAgICAgICAgICB4ai52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIGZhY2VWZXJ0cy5wdXNoKHdvcmxkVmVydGV4KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocG9pbnRJblBvbHlnb24oZmFjZVZlcnRzLCB3b3JsZE5vcm1hbCwgeGkpKSB7CiAgICAgICAgICAgIC8vIElzIHRoZSBzcGhlcmUgY2VudGVyIGluIHRoZSBmYWNlIHBvbHlnb24/CiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgci5yaSk7IC8vIENvbnRhY3Qgb2Zmc2V0LCBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdAoKICAgICAgICAgICAgd29ybGROb3JtYWwubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgcG9pbnRpbmcgb3V0IG9mIHNwaGVyZQoKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMyID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtcGVuZXRyYXRpb24sIHBlbmV0cmF0aW9uVmVjMik7CiAgICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCBwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsgLy94aS52c3ViKHhqKS52YWRkKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpLnZhZGQocGVuZXRyYXRpb25WZWMyICwgci5yaik7CgogICAgICAgICAgICB4aS52c3ViKHhqLCByLnJqKTsKICAgICAgICAgICAgci5yai52YWRkKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQsIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25WZWMyLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocGVuZXRyYXRpb25TcGhlcmVQb2ludCk7CiAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlcwoKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm47IC8vIFdlIG9ubHkgZXhwZWN0ICpvbmUqIGZhY2UgY29udGFjdAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gRWRnZT8KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGZhY2UubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAvLyBHZXQgdHdvIHdvcmxkIHRyYW5zZm9ybWVkIHZlcnRpY2VzCiAgICAgICAgICAgICAgY29uc3QgdjEgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgY29uc3QgdjIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDEpICUgZmFjZS5sZW5ndGhdXSwgdjEpOwogICAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbKGogKyAyKSAlIGZhY2UubGVuZ3RoXV0sIHYyKTsKICAgICAgICAgICAgICB4ai52YWRkKHYxLCB2MSk7CiAgICAgICAgICAgICAgeGoudmFkZCh2MiwgdjIpOyAvLyBDb25zdHJ1Y3QgZWRnZSB2ZWN0b3IKCiAgICAgICAgICAgICAgY29uc3QgZWRnZSA9IHNwaGVyZUNvbnZleF9lZGdlOwogICAgICAgICAgICAgIHYyLnZzdWIodjEsIGVkZ2UpOyAvLyBDb25zdHJ1Y3QgdGhlIHNhbWUgdmVjdG9yLCBidXQgbm9ybWFsaXplZAoKICAgICAgICAgICAgICBjb25zdCBlZGdlVW5pdCA9IHNwaGVyZUNvbnZleF9lZGdlVW5pdDsKICAgICAgICAgICAgICBlZGdlLnVuaXQoZWRnZVVuaXQpOyAvLyBwIGlzIHhpIHByb2plY3RlZCBvbnRvIHRoZSBlZGdlCgogICAgICAgICAgICAgIGNvbnN0IHAgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgY29uc3QgdjFfdG9feGkgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgeGkudnN1Yih2MSwgdjFfdG9feGkpOwogICAgICAgICAgICAgIGNvbnN0IGRvdCA9IHYxX3RvX3hpLmRvdChlZGdlVW5pdCk7CiAgICAgICAgICAgICAgZWRnZVVuaXQuc2NhbGUoZG90LCBwKTsKICAgICAgICAgICAgICBwLnZhZGQodjEsIHApOyAvLyBDb21wdXRlIGEgdmVjdG9yIGZyb20gcCB0byB0aGUgY2VudGVyIG9mIHRoZSBzcGhlcmUKCiAgICAgICAgICAgICAgY29uc3QgeGlfdG9fcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBwLnZzdWIoeGksIHhpX3RvX3ApOyAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgLy8gQU5EIGlmIHAgaXMgaW4gYmV0d2VlbiB2MSBhbmQgdjIKCiAgICAgICAgICAgICAgaWYgKGRvdCA+IDAgJiYgZG90ICogZG90IDwgZWRnZS5sZW5ndGhTcXVhcmVkKCkgJiYgeGlfdG9fcC5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgICAgICAgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1cwogICAgICAgICAgICAgICAgLy8gRWRnZSBjb250YWN0IQogICAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgICAgcC52c3ViKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHAudnN1Yih4aSwgci5uaSk7CiAgICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgICAgci5uaS5zY2FsZShSLCByLnJpKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHsKICAgICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2Mik7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjFfdG9feGkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlcwoKCiAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHBsYW5lQ29udmV4KHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBwbGFuZVBvc2l0aW9uLCBjb252ZXhQb3NpdGlvbiwgcGxhbmVRdWF0LCBjb252ZXhRdWF0LCBwbGFuZUJvZHksIGNvbnZleEJvZHksIHNpLCBzaiwganVzdFRlc3QpIHsKICAgICAgLy8gU2ltcGx5IHJldHVybiB0aGUgcG9pbnRzIGJlaGluZCB0aGUgcGxhbmUuCiAgICAgIGNvbnN0IHdvcmxkVmVydGV4ID0gcGxhbmVDb252ZXhfdjsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBwbGFuZUNvbnZleF9ub3JtYWw7CiAgICAgIHdvcmxkTm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgcGxhbmVRdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvbgoKICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKICAgICAgY29uc3QgcmVscG9zID0gcGxhbmVDb252ZXhfcmVscG9zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGNvbnZleFNoYXBlLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIGNvbnZleCB2ZXJ0ZXgKICAgICAgICB3b3JsZFZlcnRleC5jb3B5KGNvbnZleFNoYXBlLnZlcnRpY2VzW2ldKTsKICAgICAgICBjb252ZXhRdWF0LnZtdWx0KHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgY29udmV4UG9zaXRpb24udmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgIHdvcmxkVmVydGV4LnZzdWIocGxhbmVQb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjb25zdCBkb3QgPSB3b3JsZE5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCBjb252ZXhCb2R5LCBwbGFuZVNoYXBlLCBjb252ZXhTaGFwZSwgc2ksIHNqKTsgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZUNvbnZleF9wcm9qZWN0ZWQ7CiAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSh3b3JsZE5vcm1hbC5kb3QocmVscG9zKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHdvcmxkVmVydGV4LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOwogICAgICAgICAgcHJvamVjdGVkLnZzdWIocGxhbmVQb3NpdGlvbiwgci5yaSk7IC8vIEZyb20gcGxhbmUgdG8gdmVydGV4IHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIHIubmkuY29weSh3b3JsZE5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwgb3V0IGZyb20gcGxhbmUKICAgICAgICAgIC8vIHJqIGlzIG5vdyBqdXN0IHRoZSB2ZWN0b3IgZnJvbSB0aGUgY29udmV4IGNlbnRlciB0byB0aGUgdmVydGV4CgogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihjb252ZXhQb3NpdGlvbiwgci5yaik7IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHkKCiAgICAgICAgICByLnJpLnZhZGQocGxhbmVQb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmoudmFkZChjb252ZXhQb3NpdGlvbiwgci5yaik7CiAgICAgICAgICByLnJqLnZzdWIoY29udmV4Qm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpOwogICAgICB9CiAgICB9CgogICAgYm94Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZUhlaWdodGZpZWxkKHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBzcGhlcmVQb3MsIGhmUG9zLCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGRhdGEgPSBoZlNoYXBlLmRhdGE7CiAgICAgIGNvbnN0IHJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMjsgLy8gR2V0IHNwaGVyZSBwb3NpdGlvbiB0byBoZWlnaHRmaWVsZCBsb2NhbCEKCiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnggLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnggKyByYWRpdXMpIC8gdykgKyAxOwogICAgICBsZXQgaU1pblkgPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy55IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbFNwaGVyZVBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKICAgICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCgoKICAgICAgaWYgKGlNaW5YIDwgMCkgewogICAgICAgIGlNaW5YID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYIDwgMCkgewogICAgICAgIGlNYXhYID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZIDwgMCkgewogICAgICAgIGlNaW5ZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZIDwgMCkgewogICAgICAgIGlNYXhZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWF4WSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGNvbnN0IG1pbk1heCA9IFtdOwogICAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7CiAgICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTsKICAgICAgY29uc3QgbWF4ID0gbWluTWF4WzFdOyAvLyBCYWlsIG91dCBpZiB3ZSBjYW4ndCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsU3BoZXJlUG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxTcGhlcmVQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHNCZWZvcmUgPSByZXN1bHQubGVuZ3RoOwogICAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZQoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKHNwaGVyZVBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc3BoZXJlU2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKHNwaGVyZVBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc3BoZXJlU2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG51bUNvbnRhY3RzID0gcmVzdWx0Lmxlbmd0aCAtIG51bUNvbnRhY3RzQmVmb3JlOwoKICAgICAgICAgIGlmIChudW1Db250YWN0cyA+IDIpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgLyoKICAgICAgICAgICAgLy8gU2tpcCBhbGwgYnV0IDEKICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBudW1Db250YWN0cyAtIDE7IGsrKykgewogICAgICAgICAgICAgICAgcmVzdWx0LnBvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAqLwoKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBib3hIZWlnaHRmaWVsZChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkKHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGRhdGEgPSBoZlNoYXBlLmRhdGE7CiAgICAgIGNvbnN0IHcgPSBoZlNoYXBlLmVsZW1lbnRTaXplOwogICAgICBjb25zdCByYWRpdXMgPSBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBjb252ZXhIZWlnaHRmaWVsZF90bXAyOwogICAgICBjb25zdCBmYWNlTGlzdCA9IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0OyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxDb252ZXhQb3MgPSBjb252ZXhIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgY29udmV4UG9zLCBsb2NhbENvbnZleFBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsQ29udmV4UG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlJ3JlIGNhbnQgdG91Y2ggdGhlIGJvdW5kaW5nIGhlaWdodCBib3gKCiAgICAgIGlmIChsb2NhbENvbnZleFBvcy56IC0gcmFkaXVzID4gbWF4IHx8IGxvY2FsQ29udmV4UG9zLnogKyByYWRpdXMgPCBtaW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoY29udmV4UG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLmNvbnZleENvbnZleChjb252ZXhTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIGNvbnZleFBvcywgd29ybGRQaWxsYXJPZmZzZXQsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCBudWxsLCBudWxsLCBqdXN0VGVzdCwgZmFjZUxpc3QsIG51bGwpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoY29udmV4UG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLmNvbnZleENvbnZleChjb252ZXhTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIGNvbnZleFBvcywgd29ybGRQaWxsYXJPZmZzZXQsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCBudWxsLCBudWxsLCBqdXN0VGVzdCwgZmFjZUxpc3QsIG51bGwpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gVGhlIG5vcm1hbCBpcyB0aGUgdW5pdCB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHBhcnRpY2xlIGNlbnRlcgogICAgICBjb25zdCBub3JtYWwgPSBwYXJ0aWNsZVNwaGVyZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHhpLnZzdWIoeGosIG5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbmd0aFNxdWFyZWQgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgaWYgKGxlbmd0aFNxdWFyZWQgPD0gc2oucmFkaXVzICogc2oucmFkaXVzKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICByLnJqLmNvcHkobm9ybWFsKTsKICAgICAgICByLnJqLnNjYWxlKHNqLnJhZGl1cywgci5yaik7CiAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICAgIHIubmkubmVnYXRlKHIubmkpOwogICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0KICAgIH0KCiAgICBwbGFuZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlUGxhbmVfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBjb25zdCByZWxwb3MgPSBwYXJ0aWNsZVBsYW5lX3JlbHBvczsKICAgICAgeGkudnN1Yihiai5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgY29uc3QgZG90ID0gbm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQogICAgICAgIC8vIEdldCBwYXJ0aWNsZSBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQ7CiAgICAgICAgbm9ybWFsLnNjYWxlKG5vcm1hbC5kb3QoeGkpLCBwcm9qZWN0ZWQpOwogICAgICAgIHhpLnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvL3Byb2plY3RlZC52YWRkKGJqLnBvc2l0aW9uLHByb2plY3RlZCk7CiAgICAgICAgLy8gcmogaXMgbm93IHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgci5yai5jb3B5KHByb2plY3RlZCk7CiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0KICAgIH0KCiAgICBib3hQYXJ0aWNsZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleFBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGxldCBwZW5ldHJhdGVkRmFjZUluZGV4ID0gLTE7CiAgICAgIGNvbnN0IHBlbmV0cmF0ZWRGYWNlTm9ybWFsID0gY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWw7CiAgICAgIGNvbnN0IHdvcmxkUGVuZXRyYXRpb25WZWMgPSBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjOwogICAgICBsZXQgbWluUGVuZXRyYXRpb24gPSBudWxsOwoKICAgICAgY29uc3QgbG9jYWwgPSBjb252ZXhQYXJ0aWNsZV9sb2NhbDsKICAgICAgbG9jYWwuY29weSh4aSk7CiAgICAgIGxvY2FsLnZzdWIoeGosIGxvY2FsKTsgLy8gQ29udmVydCBwb3NpdGlvbiB0byByZWxhdGl2ZSB0aGUgY29udmV4IG9yaWdpbgoKICAgICAgcWouY29uanVnYXRlKGNxaik7CiAgICAgIGNxai52bXVsdChsb2NhbCwgbG9jYWwpOwoKICAgICAgaWYgKHNqLnBvaW50SXNJbnNpZGUobG9jYWwpKSB7CiAgICAgICAgaWYgKHNqLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSkgewogICAgICAgICAgc2ouY29tcHV0ZVdvcmxkVmVydGljZXMoeGosIHFqKTsKICAgICAgICB9CgogICAgICAgIGlmIChzai53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZEZhY2VOb3JtYWxzKHFqKTsKICAgICAgICB9IC8vIEZvciBlYWNoIHdvcmxkIHBvbHlnb24gaW4gdGhlIHBvbHloZWRyYQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IHNqLmZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzOyBpKyspIHsKICAgICAgICAgIC8vIENvbnN0cnVjdCB3b3JsZCBmYWNlIHZlcnRpY2VzCiAgICAgICAgICBjb25zdCB2ZXJ0cyA9IFtzai53b3JsZFZlcnRpY2VzW3NqLmZhY2VzW2ldWzBdXV07CiAgICAgICAgICBjb25zdCBub3JtYWwgPSBzai53b3JsZEZhY2VOb3JtYWxzW2ldOyAvLyBDaGVjayBob3cgbXVjaCB0aGUgcGFydGljbGUgcGVuZXRyYXRlcyB0aGUgcG9seWdvbiBwbGFuZS4KCiAgICAgICAgICB4aS52c3ViKHZlcnRzWzBdLCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTsKICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uID0gLW5vcm1hbC5kb3QoY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CgogICAgICAgICAgaWYgKG1pblBlbmV0cmF0aW9uID09PSBudWxsIHx8IE1hdGguYWJzKHBlbmV0cmF0aW9uKSA8IE1hdGguYWJzKG1pblBlbmV0cmF0aW9uKSkgewogICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWluUGVuZXRyYXRpb24gPSBwZW5ldHJhdGlvbjsKICAgICAgICAgICAgcGVuZXRyYXRlZEZhY2VJbmRleCA9IGk7CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLmNvcHkobm9ybWFsKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChwZW5ldHJhdGVkRmFjZUluZGV4ICE9PSAtMSkgewogICAgICAgICAgLy8gU2V0dXAgY29udGFjdAogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5zY2FsZShtaW5QZW5ldHJhdGlvbiwgd29ybGRQZW5ldHJhdGlvblZlYyk7IC8vIHJqIGlzIHRoZSBwYXJ0aWNsZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGZhY2UKCiAgICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZhZGQoeGksIHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52c3ViKHhqLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHIucmouY29weSh3b3JsZFBlbmV0cmF0aW9uVmVjKTsgLy9jb25zdCBwcm9qZWN0ZWRUb0ZhY2UgPSB4aS52c3ViKHhqKS52YWRkKHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgLy9wcm9qZWN0ZWRUb0ZhY2UuY29weShyLnJqKTsKICAgICAgICAgIC8vcWoudm11bHQoci5yaixyLnJqKTsKCiAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICAgIGNvbnN0IHJqID0gci5yajsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ1BvaW50IGZvdW5kIGluc2lkZSBjb252ZXgsIGJ1dCBkaWQgbm90IGZpbmQgcGVuZXRyYXRpbmcgZmFjZSEnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBoZWlnaHRmaWVsZEN5bGluZGVyKGhmU2hhcGUsIGNvbnZleFNoYXBlLCBoZlBvcywgY29udmV4UG9zLCBoZlF1YXQsIGNvbnZleFF1YXQsIGhmQm9keSwgY29udmV4Qm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBwYXJ0aWNsZUN5bGluZGVyKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVUcmltZXNoKHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHNwaGVyZVBvcywgdHJpbWVzaFBvcywgc3BoZXJlUXVhdCwgdHJpbWVzaFF1YXQsIHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZWRnZVZlcnRleEEgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhBOwogICAgICBjb25zdCBlZGdlVmVydGV4QiA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEI7CiAgICAgIGNvbnN0IGVkZ2VWZWN0b3IgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3I7CiAgICAgIGNvbnN0IGVkZ2VWZWN0b3JVbml0ID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdDsKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zOwogICAgICBjb25zdCB0bXAgPSBzcGhlcmVUcmltZXNoX3RtcDsKICAgICAgY29uc3QgbG9jYWxTcGhlcmVBQUJCID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkI7CiAgICAgIGNvbnN0IHYyID0gc3BoZXJlVHJpbWVzaF92MjsKICAgICAgY29uc3QgcmVscG9zID0gc3BoZXJlVHJpbWVzaF9yZWxwb3M7CiAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzOyAvLyBDb252ZXJ0IHNwaGVyZSBwb3NpdGlvbiB0byBsb2NhbCBpbiB0aGUgdHJpbWVzaAoKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBhYWJiIG9mIHRoZSBzcGhlcmUgbG9jYWxseSBpbiB0aGUgdHJpbWVzaAoKICAgICAgY29uc3Qgc3BoZXJlUmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBsb2NhbFNwaGVyZUFBQkIubG93ZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCAtIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSAtIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiAtIHNwaGVyZVJhZGl1cyk7CiAgICAgIGxvY2FsU3BoZXJlQUFCQi51cHBlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55ICsgc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56ICsgc3BoZXJlUmFkaXVzKTsKICAgICAgdHJpbWVzaFNoYXBlLmdldFRyaWFuZ2xlc0luQUFCQihsb2NhbFNwaGVyZUFBQkIsIHRyaWFuZ2xlcyk7IC8vZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUuaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHRyaWFuZ2xlcy5wdXNoKGkpOyAvLyBBbGwKICAgICAgLy8gVmVydGljZXMKCiAgICAgIGNvbnN0IHYgPSBzcGhlcmVUcmltZXNoX3Y7CiAgICAgIGNvbnN0IHJhZGl1c1NxdWFyZWQgPSBzcGhlcmVTaGFwZS5yYWRpdXMgKiBzcGhlcmVTaGFwZS5yYWRpdXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgdik7IC8vIENoZWNrIHZlcnRleCBvdmVybGFwIGluIHNwaGVyZQoKICAgICAgICAgIHYudnN1Yihsb2NhbFNwaGVyZVBvcywgcmVscG9zKTsKCiAgICAgICAgICBpZiAocmVscG9zLmxlbmd0aFNxdWFyZWQoKSA8PSByYWRpdXNTcXVhcmVkKSB7CiAgICAgICAgICAgIC8vIFNhZmUgdXAKICAgICAgICAgICAgdjIuY29weSh2KTsKICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7CiAgICAgICAgICAgIHYudnN1YihzcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICByLm5pLmNvcHkocmVscG9zKTsKICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gcmkgaXMgdGhlIHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gdGhlIHNwaGVyZSBzdXJmYWNlCgogICAgICAgICAgICByLnJpLmNvcHkoci5uaSk7CiAgICAgICAgICAgIHIucmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHQKCiAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gQ2hlY2sgYWxsIGVkZ2VzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIGVkZ2VWZXJ0ZXhBKTsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIChqICsgMSkgJSAzXSwgZWRnZVZlcnRleEIpOwogICAgICAgICAgZWRnZVZlcnRleEIudnN1YihlZGdlVmVydGV4QSwgZWRnZVZlY3Rvcik7IC8vIFByb2plY3Qgc3BoZXJlIHBvc2l0aW9uIHRvIHRoZSBlZGdlCgogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QiwgdG1wKTsKICAgICAgICAgIGNvbnN0IHBvc2l0aW9uQWxvbmdFZGdlQiA9IHRtcC5kb3QoZWRnZVZlY3Rvcik7CiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApOwogICAgICAgICAgbGV0IHBvc2l0aW9uQWxvbmdFZGdlQSA9IHRtcC5kb3QoZWRnZVZlY3Rvcik7CgogICAgICAgICAgaWYgKHBvc2l0aW9uQWxvbmdFZGdlQSA+IDAgJiYgcG9zaXRpb25BbG9uZ0VkZ2VCIDwgMCkgewogICAgICAgICAgICAvLyBOb3cgY2hlY2sgdGhlIG9ydGhvZ29uYWwgZGlzdGFuY2UgZnJvbSBlZGdlIHRvIHNwaGVyZSBjZW50ZXIKICAgICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuY29weShlZGdlVmVjdG9yKTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQubm9ybWFsaXplKCk7CiAgICAgICAgICAgIHBvc2l0aW9uQWxvbmdFZGdlQSA9IHRtcC5kb3QoZWRnZVZlY3RvclVuaXQpOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5zY2FsZShwb3NpdGlvbkFsb25nRWRnZUEsIHRtcCk7CiAgICAgICAgICAgIHRtcC52YWRkKGVkZ2VWZXJ0ZXhBLCB0bXApOyAvLyB0bXAgaXMgbm93IHRoZSBzcGhlcmUgY2VudGVyIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZWRnZSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSB0cmltZXNoIGZyYW1lCgogICAgICAgICAgICBjb25zdCBkaXN0ID0gdG1wLmRpc3RhbmNlVG8obG9jYWxTcGhlcmVQb3MpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPCBzcGhlcmVTaGFwZS5yYWRpdXMpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgci5uaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHRtcCwgdG1wKTsKICAgICAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5yaSwgci5yaSk7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gVHJpYW5nbGUgZmFjZXMKCgogICAgICBjb25zdCB2YSA9IHNwaGVyZVRyaW1lc2hfdmE7CiAgICAgIGNvbnN0IHZiID0gc3BoZXJlVHJpbWVzaF92YjsKICAgICAgY29uc3QgdmMgPSBzcGhlcmVUcmltZXNoX3ZjOwogICAgICBjb25zdCBub3JtYWwgPSBzcGhlcmVUcmltZXNoX25vcm1hbDsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFRyaWFuZ2xlVmVydGljZXModHJpYW5nbGVzW2ldLCB2YSwgdmIsIHZjKTsKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0Tm9ybWFsKHRyaWFuZ2xlc1tpXSwgbm9ybWFsKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHZhLCB0bXApOwogICAgICAgIGxldCBkaXN0ID0gdG1wLmRvdChub3JtYWwpOwogICAgICAgIG5vcm1hbC5zY2FsZShkaXN0LCB0bXApOwogICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodG1wLCB0bXApOyAvLyB0bXAgaXMgbm93IHRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSB0cmlhbmdsZSBwbGFuZQoKICAgICAgICBkaXN0ID0gdG1wLmRpc3RhbmNlVG8obG9jYWxTcGhlcmVQb3MpOwoKICAgICAgICBpZiAoUmF5LnBvaW50SW5UcmlhbmdsZSh0bXAsIHZhLCB2YiwgdmMpICYmIGRpc3QgPCBzcGhlcmVTaGFwZS5yYWRpdXMpIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7CiAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgci5uaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHRtcCwgdG1wKTsKICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5yaSwgci5yaSk7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CgogICAgcGxhbmVUcmltZXNoKHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcGxhbmVQb3MsIHRyaW1lc2hQb3MsIHBsYW5lUXVhdCwgdHJpbWVzaFF1YXQsIHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBNYWtlIGNvbnRhY3RzIQogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgbm9ybWFsID0gcGxhbmVUcmltZXNoX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgcGxhbmVRdWF0LnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS52ZXJ0aWNlcy5sZW5ndGggLyAzOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgdmVydGV4IGZyb20gdHJpbWVzaAogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgoaSwgdik7IC8vIFNhZmUgdXAKCiAgICAgICAgY29uc3QgdjIgPSBuZXcgVmVjMygpOwogICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7IC8vIENoZWNrIHBsYW5lIHNpZGUKCiAgICAgICAgY29uc3QgcmVscG9zID0gcGxhbmVUcmltZXNoX3JlbHBvczsKICAgICAgICB2LnZzdWIocGxhbmVQb3MsIHJlbHBvcyk7CiAgICAgICAgY29uc3QgZG90ID0gbm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCBwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsCiAgICAgICAgICAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQ7CiAgICAgICAgICBub3JtYWwuc2NhbGUocmVscG9zLmRvdChub3JtYWwpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgdi52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy8gcmkgaXMgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICAgIHIucmkuY29weShwcm9qZWN0ZWQpOwogICAgICAgICAgci5yaS52c3ViKHBsYW5lQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICByLnJqLmNvcHkodik7CiAgICAgICAgICByLnJqLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOyAvLyBTdG9yZSByZXN1bHQKCiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgIH0KICAgICAgfQogICAgfSAvLyBjb252ZXhUcmltZXNoKAogICAgLy8gICBzaTogQ29udmV4UG9seWhlZHJvbiwgc2o6IFRyaW1lc2gsIHhpOiBWZWMzLCB4ajogVmVjMywgcWk6IFF1YXRlcm5pb24sIHFqOiBRdWF0ZXJuaW9uLAogICAgLy8gICBiaTogQm9keSwgYmo6IEJvZHksIHJzaT86IFNoYXBlIHwgbnVsbCwgcnNqPzogU2hhcGUgfCBudWxsLAogICAgLy8gICBmYWNlTGlzdEE/OiBudW1iZXJbXSB8IG51bGwsIGZhY2VMaXN0Qj86IG51bWJlcltdIHwgbnVsbCwKICAgIC8vICkgewogICAgLy8gICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7CiAgICAvLyAgIGlmKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cyl7CiAgICAvLyAgICAgICByZXR1cm47CiAgICAvLyAgIH0KICAgIC8vICAgLy8gQ29uc3RydWN0IGEgdGVtcCBodWxsIGZvciBlYWNoIHRyaWFuZ2xlCiAgICAvLyAgIGNvbnN0IGh1bGxCID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgIC8vICAgaHVsbEIuZmFjZXMgPSBbWzAsMSwyXV07CiAgICAvLyAgIGNvbnN0IHZhID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogICAgLy8gICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGh1bGxCLnZlcnRpY2VzID0gWwogICAgLy8gICAgICAgdmEsCiAgICAvLyAgICAgICB2YiwKICAgIC8vICAgICAgIHZjCiAgICAvLyAgIF07CiAgICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ouaW5kaWNlcy5sZW5ndGggLyAzOyBpKyspIHsKICAgIC8vICAgICAgIGNvbnN0IHRyaWFuZ2xlTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgIC8vICAgICAgIHNqLmdldE5vcm1hbChpLCB0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICBodWxsQi5mYWNlTm9ybWFscyA9IFt0cmlhbmdsZU5vcm1hbF07CiAgICAvLyAgICAgICBzai5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIHZhLCB2YiwgdmMpOwogICAgLy8gICAgICAgbGV0IGQgPSBzaS50ZXN0U2VwQXhpcyh0cmlhbmdsZU5vcm1hbCwgaHVsbEIsIHhpLCBxaSwgeGosIHFqKTsKICAgIC8vICAgICAgIGlmKCFkKXsKICAgIC8vICAgICAgICAgICB0cmlhbmdsZU5vcm1hbC5zY2FsZSgtMSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgICAgIGQgPSBzaS50ZXN0U2VwQXhpcyh0cmlhbmdsZU5vcm1hbCwgaHVsbEIsIHhpLCBxaSwgeGosIHFqKTsKICAgIC8vICAgICAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgLy8gICAgICAgICAgIH0KICAgIC8vICAgICAgIH0KICAgIC8vICAgICAgIGNvbnN0IHJlczogQ29udmV4UG9seWhlZHJvbkNvbnRhY3RQb2ludFtdID0gW107CiAgICAvLyAgICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7CiAgICAvLyAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGkscWksaHVsbEIseGoscWosdHJpYW5nbGVOb3JtYWwsLTEwMCwxMDAscmVzKTsKICAgIC8vICAgICAgIGZvcihsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKyl7CiAgICAvLyAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLGJqLHNpLHNqLHJzaSxyc2opLAogICAgLy8gICAgICAgICAgICAgICByaSA9IHIucmksCiAgICAvLyAgICAgICAgICAgICAgIHJqID0gci5yajsKICAgIC8vICAgICAgICAgICByLm5pLmNvcHkodHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgICAgIHIubmkubmVnYXRlKHIubmkpOwogICAgLy8gICAgICAgICAgIHJlc1tqXS5ub3JtYWwubmVnYXRlKHEpOwogICAgLy8gICAgICAgICAgIHEubXVsdChyZXNbal0uZGVwdGgsIHEpOwogICAgLy8gICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgIC8vICAgICAgICAgICByai5jb3B5KHJlc1tqXS5wb2ludCk7CiAgICAvLyAgICAgICAgICAgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQogICAgLy8gICAgICAgICAgIHJpLnZzdWIoeGkscmkpOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoeGoscmopOwogICAgLy8gICAgICAgICAgIC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCiAgICAvLyAgICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgLy8gICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgIC8vICAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAvLyAgICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgLy8gICAgICAgICAgIHJlc3VsdC5wdXNoKHIpOwogICAgLy8gICAgICAgfQogICAgLy8gICB9CiAgICAvLyB9CgoKICB9CiAgY29uc3QgYXZlcmFnZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRCID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0MSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgdG1wUXVhdDIgPSBuZXcgUXVhdGVybmlvbigpOwoKICBjb25zdCBwbGFuZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZVRyaW1lc2hfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhBID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdG1wID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3ZhID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3ZiID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3ZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90cmlhbmdsZXMgPSBbXTsKICBjb25zdCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lX3RvX3NwaGVyZV9vcnRobyA9IG5ldyBWZWMzKCk7IC8vIFNlZSBodHRwOi8vYnVsbGV0cGh5c2ljcy5jb20vQnVsbGV0L0J1bGxldEZ1bGwvU3BoZXJlVHJpYW5nbGVEZXRlY3Rvcl84Y3BwX3NvdXJjZS5odG1sCgogIGNvbnN0IHBvaW50SW5Qb2x5Z29uX2VkZ2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBvaW50SW5Qb2x5Z29uX3Z0cCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uKHZlcnRzLCBub3JtYWwsIHApIHsKICAgIGxldCBwb3NpdGl2ZVJlc3VsdCA9IG51bGw7CiAgICBjb25zdCBOID0gdmVydHMubGVuZ3RoOwoKICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBHZXQgZWRnZSB0byB0aGUgbmV4dCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IGVkZ2UgPSBwb2ludEluUG9seWdvbl9lZGdlOwogICAgICB2ZXJ0c1soaSArIDEpICUgTl0udnN1Yih2LCBlZGdlKTsgLy8gR2V0IGNyb3NzIHByb2R1Y3QgYmV0d2VlbiBwb2x5Z29uIG5vcm1hbCBhbmQgdGhlIGVkZ2UKCiAgICAgIGNvbnN0IGVkZ2VfeF9ub3JtYWwgPSBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsOyAvL2NvbnN0IGVkZ2VfeF9ub3JtYWwgPSBuZXcgVmVjMygpOwoKICAgICAgZWRnZS5jcm9zcyhub3JtYWwsIGVkZ2VfeF9ub3JtYWwpOyAvLyBHZXQgdmVjdG9yIGJldHdlZW4gcG9pbnQgYW5kIGN1cnJlbnQgdmVydGV4CgogICAgICBjb25zdCB2ZXJ0ZXhfdG9fcCA9IHBvaW50SW5Qb2x5Z29uX3Z0cDsKICAgICAgcC52c3ViKHYsIHZlcnRleF90b19wKTsgLy8gVGhpcyBkb3QgcHJvZHVjdCBkZXRlcm1pbmVzIHdoaWNoIHNpZGUgb2YgdGhlIGVkZ2UgdGhlIHBvaW50IGlzCgogICAgICBjb25zdCByID0gZWRnZV94X25vcm1hbC5kb3QodmVydGV4X3RvX3ApOyAvLyBJZiBhbGwgc3VjaCBkb3QgcHJvZHVjdHMgaGF2ZSBzYW1lIHNpZ24sIHdlIGFyZSBpbnNpZGUgdGhlIHBvbHlnb24uCgogICAgICBpZiAocG9zaXRpdmVSZXN1bHQgPT09IG51bGwgfHwgciA+IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IHRydWUgfHwgciA8PSAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSBmYWxzZSkgewogICAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCkgewogICAgICAgICAgcG9zaXRpdmVSZXN1bHQgPSByID4gMDsKICAgICAgICB9CgogICAgICAgIGNvbnRpbnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LgogICAgICB9CiAgICB9IC8vIElmIHdlIGdvdCBoZXJlLCBhbGwgZG90IHByb2R1Y3RzIHdlcmUgb2YgdGhlIHNhbWUgc2lnbi4KCgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBjb25zdCBib3hfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9uczEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlcyA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKICBjb25zdCBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2VVbml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZENvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfdiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4Q29udmV4X3NlcEF4aXMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9xID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOyAvLyBXSVAKCiAgY29uc3QgY3FqID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV9sb2NhbCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfdG1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3QgPSBbMF07CiAgY29uc3Qgc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlSGVpZ2h0ZmllbGRfdG1wMiA9IG5ldyBWZWMzKCk7CgogIGNsYXNzIE92ZXJsYXBLZWVwZXIgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gW107CiAgICAgIHRoaXMucHJldmlvdXMgPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogZ2V0S2V5CiAgICAgKi8KCgogICAgZ2V0S2V5KGksIGopIHsKICAgICAgaWYgKGogPCBpKSB7CiAgICAgICAgY29uc3QgdGVtcCA9IGo7CiAgICAgICAgaiA9IGk7CiAgICAgICAgaSA9IHRlbXA7CiAgICAgIH0KCiAgICAgIHJldHVybiBpIDw8IDE2IHwgajsKICAgIH0KICAgIC8qKgogICAgICogc2V0CiAgICAgKi8KCgogICAgc2V0KGksIGopIHsKICAgICAgLy8gSW5zZXJ0aW9uIHNvcnQuIFRoaXMgd2F5IHRoZSBkaWZmIHdpbGwgaGF2ZSBsaW5lYXIgY29tcGxleGl0eS4KICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkoaSwgaik7CiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIGxldCBpbmRleCA9IDA7CgogICAgICB3aGlsZSAoa2V5ID4gY3VycmVudFtpbmRleF0pIHsKICAgICAgICBpbmRleCsrOwogICAgICB9CgogICAgICBpZiAoa2V5ID09PSBjdXJyZW50W2luZGV4XSkgewogICAgICAgIHJldHVybjsgLy8gUGFpciB3YXMgYWxyZWFkeSBhZGRlZAogICAgICB9CgogICAgICBmb3IgKGxldCBqID0gY3VycmVudC5sZW5ndGggLSAxOyBqID49IGluZGV4OyBqLS0pIHsKICAgICAgICBjdXJyZW50W2ogKyAxXSA9IGN1cnJlbnRbal07CiAgICAgIH0KCiAgICAgIGN1cnJlbnRbaW5kZXhdID0ga2V5OwogICAgfQogICAgLyoqCiAgICAgKiB0aWNrCiAgICAgKi8KCgogICAgdGljaygpIHsKICAgICAgY29uc3QgdG1wID0gdGhpcy5jdXJyZW50OwogICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnByZXZpb3VzOwogICAgICB0aGlzLnByZXZpb3VzID0gdG1wOwogICAgICB0aGlzLmN1cnJlbnQubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogZ2V0RGlmZgogICAgICovCgoKICAgIGdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscykgewogICAgICBjb25zdCBhID0gdGhpcy5jdXJyZW50OwogICAgICBjb25zdCBiID0gdGhpcy5wcmV2aW91czsKICAgICAgY29uc3QgYWwgPSBhLmxlbmd0aDsKICAgICAgY29uc3QgYmwgPSBiLmxlbmd0aDsKICAgICAgbGV0IGogPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbDsgaSsrKSB7CiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgY29uc3Qga2V5QSA9IGFbaV07CgogICAgICAgIHdoaWxlIChrZXlBID4gYltqXSkgewogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgZm91bmQgPSBrZXlBID09PSBiW2pdOwoKICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICB1bnBhY2tBbmRQdXNoKGFkZGl0aW9ucywga2V5QSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUIgPSBiW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QiA+IGFbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0gYVtqXSA9PT0ga2V5QjsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChyZW1vdmFscywga2V5Qik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KCiAgZnVuY3Rpb24gdW5wYWNrQW5kUHVzaChhcnJheSwga2V5KSB7CiAgICBhcnJheS5wdXNoKChrZXkgJiAweGZmZmYwMDAwKSA+PiAxNiwga2V5ICYgMHgwMDAwZmZmZik7CiAgfQoKICBjb25zdCBnZXRLZXkgPSAoaSwgaikgPT4gaSA8IGogPyBgJHtpfS0ke2p9YCA6IGAke2p9LSR7aX1gOwogIC8qKgogICAqIFR1cGxlRGljdGlvbmFyeQogICAqLwoKCiAgY2xhc3MgVHVwbGVEaWN0aW9uYXJ5IHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmRhdGEgPSB7CiAgICAgICAga2V5czogW10KICAgICAgfTsKICAgIH0KCiAgICAvKiogZ2V0ICovCiAgICBnZXQoaSwgaikgewogICAgICBjb25zdCBrZXkgPSBnZXRLZXkoaSwgaik7CiAgICAgIHJldHVybiB0aGlzLmRhdGFba2V5XTsKICAgIH0KICAgIC8qKiBzZXQgKi8KCgogICAgc2V0KGksIGosIHZhbHVlKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsgLy8gQ2hlY2sgaWYga2V5IGFscmVhZHkgZXhpc3RzCgogICAgICBpZiAoIXRoaXMuZ2V0KGksIGopKSB7CiAgICAgICAgdGhpcy5kYXRhLmtleXMucHVzaChrZXkpOwogICAgICB9CgogICAgICB0aGlzLmRhdGFba2V5XSA9IHZhbHVlOwogICAgfQogICAgLyoqIGRlbGV0ZSAqLwoKCiAgICBkZWxldGUoaSwgaikgewogICAgICBjb25zdCBrZXkgPSBnZXRLZXkoaSwgaik7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kYXRhLmtleXMuaW5kZXhPZihrZXkpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KCiAgICAgIGRlbGV0ZSB0aGlzLmRhdGFba2V5XTsKICAgIH0KICAgIC8qKiByZXNldCAqLwoKCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3Qga2V5cyA9IGRhdGEua2V5czsKCiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGRlbGV0ZSBkYXRhW2tleV07CiAgICAgIH0KICAgIH0KCiAgfQoKICAvKioKICAgKiBUaGUgcGh5c2ljcyB3b3JsZAogICAqLwogIGNsYXNzIFdvcmxkIGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBDdXJyZW50bHkgLyBsYXN0IHVzZWQgdGltZXN0ZXAuIElzIHNldCB0byAtMSBpZiBub3QgYXZhaWxhYmxlLiBUaGlzIHZhbHVlIGlzIHVwZGF0ZWQgYmVmb3JlIGVhY2ggaW50ZXJuYWwgc3RlcCwgd2hpY2ggbWVhbnMgdGhhdCBpdCBpcyAiZnJlc2giIGluc2lkZSBldmVudCBjYWxsYmFja3MuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1ha2VzIGJvZGllcyBnbyB0byBzbGVlcCB3aGVuIHRoZXkndmUgYmVlbiBpbmFjdGl2ZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgY3VycmVudCBjb250YWN0cyAoaW5zdGFuY2VzIG9mIENvbnRhY3RFcXVhdGlvbikgaW4gdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBIb3cgb2Z0ZW4gdG8gbm9ybWFsaXplIHF1YXRlcm5pb25zLiBTZXQgdG8gMCBmb3IgZXZlcnkgc3RlcCwgMSBmb3IgZXZlcnkgc2Vjb25kIGV0Yy4uIEEgbGFyZ2VyIHZhbHVlIGluY3JlYXNlcyBwZXJmb3JtYW5jZS4gSWYgYm9kaWVzIHRlbmQgdG8gZXhwbG9kZSwgc2V0IHRvIGEgc21hbGxlciB2YWx1ZSAoemVybyB0byBiZSBzdXJlIG5vdGhpbmcgY2FuIGdvIHdyb25nKS4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgdG8gdXNlIGZhc3QgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBJdCBpcyBvZnRlbiBlbm91Z2ggYWNjdXJhdGUgdG8gdXNlLgogICAgICogSWYgYm9kaWVzIHRlbmQgdG8gZXhwbG9kZSwgc2V0IHRvIGZhbHNlLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdhbGwtY2xvY2sgdGltZSBzaW5jZSBzaW11bGF0aW9uIHN0YXJ0LgogICAgICovCgogICAgLyoqCiAgICAgKiBOdW1iZXIgb2YgdGltZXN0ZXBzIHRha2VuIHNpbmNlIHN0YXJ0LgogICAgICovCgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGFuZCBsYXN0IHRpbWVzdGVwIHNpemVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgZ3Jhdml0eSBvZiB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBOYWl2ZUJyb2FkcGhhc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgc29sdmVyIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBHU1NvbHZlcgogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25NYXRyaXgKICAgICAqLwoKICAgIC8qKgogICAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgdGhlIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwLwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICB0aGlzLmJyb2FkcGhhc2UgPSBvcHRpb25zLmJyb2FkcGhhc2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYnJvYWRwaGFzZSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTsKICAgICAgdGhpcy5ib2RpZXMgPSBbXTsKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKICAgICAgdGhpcy5zb2x2ZXIgPSBvcHRpb25zLnNvbHZlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zb2x2ZXIgOiBuZXcgR1NTb2x2ZXIoKTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwogICAgICB0aGlzLm5hcnJvd3BoYXNlID0gbmV3IE5hcnJvd3BoYXNlKHRoaXMpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IFtdOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlID0gbmV3IFR1cGxlRGljdGlvbmFyeSgpOwogICAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgnZGVmYXVsdCcpOwogICAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSBuZXcgQ29udGFjdE1hdGVyaWFsKHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB0aGlzLmRlZmF1bHRNYXRlcmlhbCwgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMAogICAgICB9KTsKICAgICAgdGhpcy5kb1Byb2ZpbGluZyA9IGZhbHNlOwogICAgICB0aGlzLnByb2ZpbGUgPSB7CiAgICAgICAgc29sdmU6IDAsCiAgICAgICAgbWFrZUNvbnRhY3RDb25zdHJhaW50czogMCwKICAgICAgICBicm9hZHBoYXNlOiAwLAogICAgICAgIGludGVncmF0ZTogMCwKICAgICAgICBuYXJyb3dwaGFzZTogMAogICAgICB9OwogICAgICB0aGlzLmFjY3VtdWxhdG9yID0gMDsKICAgICAgdGhpcy5zdWJzeXN0ZW1zID0gW107CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdhZGRCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0gewogICAgICAgIHR5cGU6ICdyZW1vdmVCb2R5JywKICAgICAgICBib2R5OiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB7fTsKICAgICAgdGhpcy5icm9hZHBoYXNlLnNldFdvcmxkKHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbnRhY3QgbWF0ZXJpYWwgYmV0d2VlbiBtYXRlcmlhbHMgbTEgYW5kIG0yCiAgICAgKiBAcmV0dXJuIFRoZSBjb250YWN0IG1hdGVyaWFsIGlmIGl0IHdhcyBmb3VuZC4KICAgICAqLwoKCiAgICBnZXRDb250YWN0TWF0ZXJpYWwobTEsIG0yKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmdldChtMS5pZCwgbTIuaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBTdG9yZSBvbGQgY29sbGlzaW9uIHN0YXRlIGluZm8KICAgICAqLwoKCiAgICBjb2xsaXNpb25NYXRyaXhUaWNrKCkgewogICAgICBjb25zdCB0ZW1wID0gdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91czsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IHRoaXMuY29sbGlzaW9uTWF0cml4OwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHRlbXA7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnJlc2V0KCk7CiAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIGNvbnN0cmFpbnQgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgYWRkQ29uc3RyYWludChjKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjKTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnN0cmFpbnQKICAgICAqLwoKCiAgICByZW1vdmVDb25zdHJhaW50KGMpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb25zdHJhaW50cy5pbmRleE9mKGMpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmNvbnN0cmFpbnRzLnNwbGljZShpZHgsIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheWNhc3QgdGVzdAogICAgICogQGRlcHJlY2F0ZWQgVXNlIC5yYXljYXN0QWxsLCAucmF5Y2FzdENsb3Nlc3Qgb3IgLnJheWNhc3RBbnkgaW5zdGVhZC4KICAgICAqLwoKCiAgICByYXlUZXN0KGZyb20sIHRvLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJheWNhc3RSZXN1bHQpIHsKICAgICAgICAvLyBEbyByYXljYXN0Q2xvc2VzdAogICAgICAgIHRoaXMucmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIERvIHJheWNhc3RBbGwKICAgICAgICB0aGlzLnJheWNhc3RBbGwoZnJvbSwgdG8sIHsKICAgICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWUKICAgICAgICB9LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0IGFnYWluc3QgYWxsIGJvZGllcy4gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgZm9yIGVhY2ggaGl0IHdpdGggYSBSYXljYXN0UmVzdWx0IGFzIHNpbmdsZSBhcmd1bWVudC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbGwoZnJvbSwgdG8sIG9wdGlvbnMsIGNhbGxiYWNrKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5BTEw7CiAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207CiAgICAgIG9wdGlvbnMudG8gPSB0bzsKICAgICAgb3B0aW9ucy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHN0b3AgYXQgdGhlIGZpcnN0IHJlc3VsdC4gTm90ZSB0aGF0IHRoZSBvcmRlciBpcyByYW5kb20gLSBidXQgdGhlIG1ldGhvZCBpcyBmYXN0LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdEFueShmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5BTlk7CiAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207CiAgICAgIG9wdGlvbnMudG8gPSB0bzsKICAgICAgb3B0aW9ucy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgcmV0dXJuIGluZm9ybWF0aW9uIG9mIHRoZSBjbG9zZXN0IGhpdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCBvcHRpb25zLCByZXN1bHQpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkNMT1NFU1Q7CiAgICAgIG9wdGlvbnMuZnJvbSA9IGZyb207CiAgICAgIG9wdGlvbnMudG8gPSB0bzsKICAgICAgb3B0aW9ucy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHJpZ2lkIGJvZHkgdG8gdGhlIHNpbXVsYXRpb24uCiAgICAgKiBAdG9kbyBJZiB0aGUgc2ltdWxhdGlvbiBoYXMgbm90IHlldCBzdGFydGVkLCB3aHkgcmVjcmV0ZSBhbmQgY29weSBhcnJheXMgZm9yIGVhY2ggYm9keT8gQWNjdW11bGF0ZSBpbiBkeW5hbWljIGFycmF5cyBpbiB0aGlzIGNhc2UuCiAgICAgKiBAdG9kbyBBZGRpbmcgYW4gYXJyYXkgb2YgYm9kaWVzIHNob3VsZCBiZSBwb3NzaWJsZS4gVGhpcyB3b3VsZCBzYXZlIHNvbWUgbG9vcHMgdG9vCiAgICAgKi8KCgogICAgYWRkQm9keShib2R5KSB7CiAgICAgIGlmICh0aGlzLmJvZGllcy5pbmNsdWRlcyhib2R5KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYm9keS5pbmRleCA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTsKICAgICAgYm9keS53b3JsZCA9IHRoaXM7CiAgICAgIGJvZHkuaW5pdFBvc2l0aW9uLmNvcHkoYm9keS5wb3NpdGlvbik7CiAgICAgIGJvZHkuaW5pdFZlbG9jaXR5LmNvcHkoYm9keS52ZWxvY2l0eSk7CiAgICAgIGJvZHkudGltZUxhc3RTbGVlcHkgPSB0aGlzLnRpbWU7CgogICAgICBpZiAoYm9keSBpbnN0YW5jZW9mIEJvZHkpIHsKICAgICAgICBib2R5LmluaXRBbmd1bGFyVmVsb2NpdHkuY29weShib2R5LmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgICAgYm9keS5pbml0UXVhdGVybmlvbi5jb3B5KGJvZHkucXVhdGVybmlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHModGhpcy5ib2RpZXMubGVuZ3RoKTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF0gPSBib2R5OwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5hZGRCb2R5RXZlbnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSByaWdpZCBib2R5IGZyb20gdGhlIHNpbXVsYXRpb24uCiAgICAgKi8KCgogICAgcmVtb3ZlQm9keShib2R5KSB7CiAgICAgIGJvZHkud29ybGQgPSBudWxsOwogICAgICBjb25zdCBuID0gdGhpcy5ib2RpZXMubGVuZ3RoIC0gMTsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IGlkeCA9IGJvZGllcy5pbmRleE9mKGJvZHkpOwoKICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICBib2RpZXMuc3BsaWNlKGlkeCwgMSk7IC8vIFRvZG86IHNob3VsZCB1c2UgYSBnYXJiYWdlIGZyZWUgbWV0aG9kCiAgICAgICAgLy8gUmVjb21wdXRlIGluZGV4CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS5pbmRleCA9IGk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKG4pOwogICAgICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICAgIGRlbGV0ZSB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLnJlbW92ZUJvZHlFdmVudCk7CiAgICAgIH0KICAgIH0KCiAgICBnZXRCb2R5QnlJZChpZCkgewogICAgICByZXR1cm4gdGhpcy5pZFRvQm9keU1hcFtpZF07CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE1ha2UgYSBmYXN0ZXIgbWFwCiAgICAgKi8KCgogICAgZ2V0U2hhcGVCeUlkKGlkKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZXMgPSBib2RpZXNbaV0uc2hhcGVzOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbal07CgogICAgICAgICAgaWYgKHNoYXBlLmlkID09PSBpZCkgewogICAgICAgICAgICByZXR1cm4gc2hhcGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQWRkcyBhIGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIFdvcmxkCiAgICAgKi8KCgogICAgYWRkQ29udGFjdE1hdGVyaWFsKGNtYXQpIHsKICAgICAgLy8gQWRkIGNvbnRhY3QgbWF0ZXJpYWwKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzLnB1c2goY21hdCk7IC8vIEFkZCBjdXJyZW50IGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIG1hdGVyaWFsIHRhYmxlCgogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLnNldChjbWF0Lm1hdGVyaWFsc1swXS5pZCwgY21hdC5tYXRlcmlhbHNbMV0uaWQsIGNtYXQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgY29udGFjdCBtYXRlcmlhbCBmcm9tIHRoZSBXb3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICBjb25zdCBpZHggPSB0aGlzLmNvbnRhY3RtYXRlcmlhbHMuaW5kZXhPZihjbWF0KTsKCiAgICAgIGlmIChpZHggPT09IC0xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZGVsZXRlKGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHNpbXVsYXRpb24gZm9yd2FyZCBrZWVwaW5nIHRyYWNrIG9mIGxhc3QgY2FsbGVkIHRpbWUKICAgICAqIHRvIGJlIGFibGUgdG8gc3RlcCB0aGUgd29ybGQgYXQgYSBmaXhlZCByYXRlLCBpbmRlcGVuZGVudGx5IG9mIGZyYW1lcmF0ZS4KICAgICAqCiAgICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZSAoZGVmYXVsdDogMSAvIDYwKS4KICAgICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsIChkZWZhdWx0OiAxMCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vcG9zdC9maXhfeW91cl90aW1lc3RlcC8KICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gUnVuIHRoZSBzaW11bGF0aW9uIGluZGVwZW5kZW50bHkgb2YgZnJhbWVyYXRlIGV2ZXJ5IDEgLyA2MCBtcwogICAgICogICAgIHdvcmxkLmZpeGVkU3RlcCgpCiAgICAgKi8KCgogICAgZml4ZWRTdGVwKGR0LCBtYXhTdWJTdGVwcykgewogICAgICBpZiAoZHQgPT09IHZvaWQgMCkgewogICAgICAgIGR0ID0gMSAvIDYwOwogICAgICB9CgogICAgICBpZiAobWF4U3ViU3RlcHMgPT09IHZvaWQgMCkgewogICAgICAgIG1heFN1YlN0ZXBzID0gMTA7CiAgICAgIH0KCiAgICAgIGNvbnN0IHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7IC8vIHNlY29uZHMKCiAgICAgIGlmICghdGhpcy5sYXN0Q2FsbFRpbWUpIHsKICAgICAgICB0aGlzLnN0ZXAoZHQsIHVuZGVmaW5lZCwgbWF4U3ViU3RlcHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RDYWxsZWQgPSB0aW1lIC0gdGhpcy5sYXN0Q2FsbFRpbWU7CiAgICAgICAgdGhpcy5zdGVwKGR0LCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcyk7CiAgICAgIH0KCiAgICAgIHRoaXMubGFzdENhbGxUaW1lID0gdGltZTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgcGh5c2ljcyB3b3JsZCBmb3J3YXJkIGluIHRpbWUuCiAgICAgKgogICAgICogVGhlcmUgYXJlIHR3byBtb2Rlcy4gVGhlIHNpbXBsZSBtb2RlIGlzIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb24uIEluIHRoaXMgY2FzZSB5b3Ugb25seSB1c2UgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGUgc2Vjb25kIGNhc2UgdXNlcyBpbnRlcnBvbGF0aW9uLiBJbiB0aGF0IHlvdSBhbHNvIHByb3ZpZGUgdGhlIHRpbWUgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IHVzZWQsIGFzIHdlbGwgYXMgdGhlIG1heGltdW0gZml4ZWQgdGltZXN0ZXBzIHRvIHRha2UuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UuCiAgICAgKiBAcGFyYW0gdGltZVNpbmNlTGFzdENhbGxlZCBUaGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCBjYWxsZWQuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbCAoZGVmYXVsdDogMTApLgogICAgICogQHNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxODA0MjYxNTQ1MzEvaHR0cDovL2J1bGxldHBoeXNpY3Mub3JnL21lZGlhd2lraS0xLjUuOC9pbmRleC5waHAvU3RlcHBpbmdfVGhlX1dvcmxkI1doYXRfZG9fdGhlX3BhcmFtZXRlcnNfdG9fYnREeW5hbWljc1dvcmxkOjpzdGVwU2ltdWxhdGlvbl9tZWFuLjNGCiAgICAgKiBAZXhhbXBsZQogICAgICogICAgIC8vIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb24KICAgICAqICAgICB3b3JsZC5zdGVwKDEgLyA2MCkKICAgICAqLwoKCiAgICBzdGVwKGR0LCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcykgewogICAgICBpZiAobWF4U3ViU3RlcHMgPT09IHZvaWQgMCkgewogICAgICAgIG1heFN1YlN0ZXBzID0gMTA7CiAgICAgIH0KCiAgICAgIGlmICh0aW1lU2luY2VMYXN0Q2FsbGVkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAvLyBGaXhlZCwgc2ltcGxlIHN0ZXBwaW5nCiAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOyAvLyBJbmNyZW1lbnQgdGltZQoKICAgICAgICB0aGlzLnRpbWUgKz0gZHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICAgIGNvbnN0IHQwID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgbGV0IHN1YnN0ZXBzID0gMDsKCiAgICAgICAgd2hpbGUgKHRoaXMuYWNjdW11bGF0b3IgPj0gZHQgJiYgc3Vic3RlcHMgPCBtYXhTdWJTdGVwcykgewogICAgICAgICAgLy8gRG8gZml4ZWQgc3RlcHMgdG8gY2F0Y2ggdXAKICAgICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsKICAgICAgICAgIHRoaXMuYWNjdW11bGF0b3IgLT0gZHQ7CiAgICAgICAgICBzdWJzdGVwcysrOwoKICAgICAgICAgIGlmIChwZXJmb3JtYW5jZS5ub3coKSAtIHQwID4gZHQgKiAxMDAwKSB7CiAgICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuCiAgICAgICAgICAgIC8vIFdlIGFyZSBiZWxvdyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZS4KICAgICAgICAgICAgLy8gQmV0dGVyIGJhaWwgb3V0LgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8vIFJlbW92ZSB0aGUgZXhjZXNzIGFjY3VtdWxhdG9yLCBzaW5jZSB3ZSBtYXkgbm90CiAgICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cAoKCiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHRoaXMuYWNjdW11bGF0b3IgJSBkdDsKICAgICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0OwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmJvZGllc1tqXTsKICAgICAgICAgIGIucHJldmlvdXNQb3NpdGlvbi5sZXJwKGIucG9zaXRpb24sIHQsIGIuaW50ZXJwb2xhdGVkUG9zaXRpb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24ubm9ybWFsaXplKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRpbWUgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgfQogICAgfQoKICAgIGludGVybmFsU3RlcChkdCkgewogICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0czsKICAgICAgY29uc3QgcDEgPSBXb3JsZF9zdGVwX3AxOwogICAgICBjb25zdCBwMiA9IFdvcmxkX3N0ZXBfcDI7CiAgICAgIGNvbnN0IE4gPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBzb2x2ZXIgPSB0aGlzLnNvbHZlcjsKICAgICAgY29uc3QgZ3Jhdml0eSA9IHRoaXMuZ3Jhdml0eTsKICAgICAgY29uc3QgZG9Qcm9maWxpbmcgPSB0aGlzLmRvUHJvZmlsaW5nOwogICAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlOwogICAgICBjb25zdCBEWU5BTUlDID0gQm9keS5EWU5BTUlDOwogICAgICBsZXQgcHJvZmlsaW5nU3RhcnQgPSAtSW5maW5pdHk7CiAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50czsKICAgICAgY29uc3QgZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICBncmF2aXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBneCA9IGdyYXZpdHkueDsKICAgICAgY29uc3QgZ3kgPSBncmF2aXR5Lnk7CiAgICAgIGNvbnN0IGd6ID0gZ3Jhdml0eS56OwogICAgICBsZXQgaSA9IDA7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIEFkZCBncmF2aXR5IHRvIGFsbCBvYmplY3RzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlID09PSBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgZiA9IGJpLmZvcmNlOwogICAgICAgICAgY29uc3QgbSA9IGJpLm1hc3M7CiAgICAgICAgICBmLnggKz0gbSAqIGd4OwogICAgICAgICAgZi55ICs9IG0gKiBneTsKICAgICAgICAgIGYueiArPSBtICogZ3o7CiAgICAgICAgfQogICAgICB9IC8vIFVwZGF0ZSBzdWJzeXN0ZW1zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIE5zdWJzeXN0ZW1zID0gdGhpcy5zdWJzeXN0ZW1zLmxlbmd0aDsgaSAhPT0gTnN1YnN5c3RlbXM7IGkrKykgewogICAgICAgIHRoaXMuc3Vic3lzdGVtc1tpXS51cGRhdGUoKTsKICAgICAgfSAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXAKCiAgICAgIHAyLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5jb2xsaXNpb25QYWlycyh0aGlzLCBwMSwgcDIpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5icm9hZHBoYXNlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBSZW1vdmUgY29uc3RyYWluZWQgcGFpcnMgd2l0aCBjb2xsaWRlQ29ubmVjdGVkID09IGZhbHNlCgoKICAgICAgbGV0IE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldOwoKICAgICAgICBpZiAoIWMuY29sbGlkZUNvbm5lY3RlZCkgewogICAgICAgICAgZm9yIChsZXQgaiA9IHAxLmxlbmd0aCAtIDE7IGogPj0gMDsgaiAtPSAxKSB7CiAgICAgICAgICAgIGlmIChjLmJvZHlBID09PSBwMVtqXSAmJiBjLmJvZHlCID09PSBwMltqXSB8fCBjLmJvZHlCID09PSBwMVtqXSAmJiBjLmJvZHlBID09PSBwMltqXSkgewogICAgICAgICAgICAgIHAxLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgICBwMi5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4VGljaygpOyAvLyBHZW5lcmF0ZSBjb250YWN0cwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgb2xkY29udGFjdHMgPSBXb3JsZF9zdGVwX29sZENvbnRhY3RzOwogICAgICBjb25zdCBOb2xkQ29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkQ29udGFjdHM7IGkrKykgewogICAgICAgIG9sZGNvbnRhY3RzLnB1c2goY29udGFjdHNbaV0pOwogICAgICB9CgogICAgICBjb250YWN0cy5sZW5ndGggPSAwOyAvLyBUcmFuc2ZlciBGcmljdGlvbkVxdWF0aW9uIGZyb20gY3VycmVudCBsaXN0IHRvIHRoZSBwb29sIGZvciByZXVzZQoKICAgICAgY29uc3QgTm9sZEZyaWN0aW9uRXF1YXRpb25zID0gdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkRnJpY3Rpb25FcXVhdGlvbnM7IGkrKykgewogICAgICAgIGZyaWN0aW9uRXF1YXRpb25Qb29sLnB1c2godGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoID0gMDsKICAgICAgdGhpcy5uYXJyb3dwaGFzZS5nZXRDb250YWN0cyhwMSwgcDIsIHRoaXMsIGNvbnRhY3RzLCBvbGRjb250YWN0cywgLy8gVG8gYmUgcmV1c2VkCiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMsIGZyaWN0aW9uRXF1YXRpb25Qb29sKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubmFycm93cGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIExvb3Agb3ZlciBhbGwgY29sbGlzaW9ucwoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gQWRkIGFsbCBmcmljdGlvbiBlcXMKCgogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbih0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTsKICAgICAgfQoKICAgICAgY29uc3QgbmNvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IG5jb250YWN0czsgaysrKSB7CiAgICAgICAgLy8gQ3VycmVudCBjb250YWN0CiAgICAgICAgY29uc3QgYyA9IGNvbnRhY3RzW2tdOyAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gaW5kZWNlcwoKICAgICAgICBjb25zdCBiaSA9IGMuYmk7CiAgICAgICAgY29uc3QgYmogPSBjLmJqOwogICAgICAgIGNvbnN0IHNpID0gYy5zaTsKICAgICAgICBjb25zdCBzaiA9IGMuc2o7IC8vIEdldCBjb2xsaXNpb24gcHJvcGVydGllcwoKICAgICAgICBsZXQgY207CgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgY20gPSB0aGlzLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY20gPSB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSAvLyBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTsKCgogICAgICAgIGNtLmZyaWN0aW9uOyAvLyBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgICAgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5mcmljdGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLmZyaWN0aW9uID49IDApIHsKICAgICAgICAgICAgYmkubWF0ZXJpYWwuZnJpY3Rpb24gKiBiai5tYXRlcmlhbC5mcmljdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGMucmVzdGl0dXRpb24gPSBiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiAqIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uOwogICAgICAgICAgfQogICAgICAgIH0gLy8gYy5zZXRTcG9va1BhcmFtcygKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLAogICAgICAgIC8vICAgICAgICAgICBkdAogICAgICAgIC8vICAgICAgICk7CgoKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oYyk7IC8vIC8vIEFkZCBmcmljdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICAgICAgLy8gaWYobXUgPiAwKXsKICAgICAgICAvLyAJLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICAvLyAJY29uc3QgbXVnID0gbXUgKiBnbm9ybTsKICAgICAgICAvLyAJY29uc3QgcmVkdWNlZE1hc3MgPSAoYmkuaW52TWFzcyArIGJqLmludk1hc3MpOwogICAgICAgIC8vIAlpZihyZWR1Y2VkTWFzcyA+IDApewogICAgICAgIC8vIAkJcmVkdWNlZE1hc3MgPSAxL3JlZHVjZWRNYXNzOwogICAgICAgIC8vIAl9CiAgICAgICAgLy8gCWNvbnN0IHBvb2wgPSBmcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgICAvLyAJY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAljb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCXRoaXMuZnJpY3Rpb25FcXVhdGlvbnMucHVzaChjMSwgYzIpOwogICAgICAgIC8vIAljMS5iaSA9IGMyLmJpID0gYmk7CiAgICAgICAgLy8gCWMxLmJqID0gYzIuYmogPSBiajsKICAgICAgICAvLyAJYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcqcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCWMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcqcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCS8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwogICAgICAgIC8vIAljMS5yaS5jb3B5KGMucmkpOwogICAgICAgIC8vIAljMS5yai5jb3B5KGMucmopOwogICAgICAgIC8vIAljMi5yaS5jb3B5KGMucmkpOwogICAgICAgIC8vIAljMi5yai5jb3B5KGMucmopOwogICAgICAgIC8vIAkvLyBDb25zdHJ1Y3QgdGFuZ2VudHMKICAgICAgICAvLyAJYy5uaS50YW5nZW50cyhjMS50LCBjMi50KTsKICAgICAgICAvLyAgICAgICAgICAgLy8gU2V0IHNwb29rIHBhcmFtcwogICAgICAgIC8vICAgICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpOwogICAgICAgIC8vICAgICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpOwogICAgICAgIC8vICAgICAgICAgICBjMS5lbmFibGVkID0gYzIuZW5hYmxlZCA9IGMuZW5hYmxlZDsKICAgICAgICAvLyAJLy8gQWRkIGVxdWF0aW9ucyB0byBzb2x2ZXIKICAgICAgICAvLyAJc29sdmVyLmFkZEVxdWF0aW9uKGMxKTsKICAgICAgICAvLyAJc29sdmVyLmFkZEVxdWF0aW9uKGMyKTsKICAgICAgICAvLyB9CgogICAgICAgIGlmIChiaS5hbGxvd1NsZWVwICYmIGJpLnR5cGUgPT09IEJvZHkuRFlOQU1JQyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgYmoudHlwZSAhPT0gQm9keS5TVEFUSUMpIHsKICAgICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEIgPSBiai52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiai5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWRCID0gYmouc2xlZXBTcGVlZExpbWl0ICoqIDI7CgogICAgICAgICAgaWYgKHNwZWVkU3F1YXJlZEIgPj0gc3BlZWRMaW1pdFNxdWFyZWRCICogMikgewogICAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChiai5hbGxvd1NsZWVwICYmIGJqLnR5cGUgPT09IEJvZHkuRFlOQU1JQyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgYmkudHlwZSAhPT0gQm9keS5TVEFUSUMpIHsKICAgICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEEgPSBiaS52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiaS5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWRBID0gYmkuc2xlZXBTcGVlZExpbWl0ICoqIDI7CgogICAgICAgICAgaWYgKHNwZWVkU3F1YXJlZEEgPj0gc3BlZWRMaW1pdFNxdWFyZWRBICogMikgewogICAgICAgICAgICBiai53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IC8vIE5vdyB3ZSBrbm93IHRoYXQgaSBhbmQgaiBhcmUgaW4gY29udGFjdC4gU2V0IGNvbGxpc2lvbiBtYXRyaXggc3RhdGUKCgogICAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldChiaSwgYmosIHRydWUpOwoKICAgICAgICBpZiAoIXRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMuZ2V0KGJpLCBiaikpIHsKICAgICAgICAgIC8vIEZpcnN0IGNvbnRhY3QhCiAgICAgICAgICAvLyBXZSByZXVzZSB0aGUgY29sbGlkZUV2ZW50IG9iamVjdCwgb3RoZXJ3aXNlIHdlIHdpbGwgZW5kIHVwIGNyZWF0aW5nIG5ldyBvYmplY3RzIGZvciBlYWNoIG5ldyBjb250YWN0LCBldmVuIGlmIHRoZXJlJ3Mgbm8gZXZlbnQgbGlzdGVuZXIgYXR0YWNoZWQuCiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmo7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5jb250YWN0ID0gYzsKICAgICAgICAgIGJpLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJpOwogICAgICAgICAgYmouZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpOwogICAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnNldChzaS5pZCwgc2ouaWQpOwogICAgICB9CgogICAgICB0aGlzLmVtaXRDb250YWN0RXZlbnRzKCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm1ha2VDb250YWN0Q29uc3RyYWludHMgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gV2FrZSB1cCBib2RpZXMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHsKICAgICAgICAgIGJpLndha2VVcCgpOwogICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgdXNlci1hZGRlZCBjb25zdHJhaW50cwoKCiAgICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldOwogICAgICAgIGMudXBkYXRlKCk7CgogICAgICAgIGZvciAobGV0IGogPSAwLCBOZXEgPSBjLmVxdWF0aW9ucy5sZW5ndGg7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdOwogICAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGVxKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbQoKCiAgICAgIHNvbHZlci5zb2x2ZShkdCwgdGhpcyk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBSZW1vdmUgYWxsIGNvbnRhY3RzIGZyb20gc29sdmVyCgoKICAgICAgc29sdmVyLnJlbW92ZUFsbEVxdWF0aW9ucygpOyAvLyBBcHBseSBkYW1waW5nLCBzZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2J1bGxldC9pc3N1ZXMvZGV0YWlsP2lkPTc0IGZvciBkZXRhaWxzCgogICAgICBjb25zdCBwb3cgPSBNYXRoLnBvdzsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSAmIERZTkFNSUMpIHsKICAgICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzCiAgICAgICAgICBjb25zdCBsZCA9IHBvdygxLjAgLSBiaS5saW5lYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICBjb25zdCB2ID0gYmkudmVsb2NpdHk7CiAgICAgICAgICB2LnNjYWxlKGxkLCB2KTsKICAgICAgICAgIGNvbnN0IGF2ID0gYmkuYW5ndWxhclZlbG9jaXR5OwoKICAgICAgICAgIGlmIChhdikgewogICAgICAgICAgICBjb25zdCBhZCA9IHBvdygxLjAgLSBiaS5hbmd1bGFyRGFtcGluZywgZHQpOwogICAgICAgICAgICBhdi5zY2FsZShhZCwgYXYpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50KTsgLy8gTGVhcCBmcm9nCiAgICAgIC8vIHZuZXcgPSB2ICsgaCpmL20KICAgICAgLy8geG5ldyA9IHggKyBoKnZuZXcKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHN0ZXBudW1iZXIgPSB0aGlzLnN0ZXBudW1iZXI7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemUgPSBzdGVwbnVtYmVyICUgKHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgKyAxKSA9PT0gMDsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZUZhc3QgPSB0aGlzLnF1YXROb3JtYWxpemVGYXN0OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgYm9kaWVzW2ldLmludGVncmF0ZShkdCwgcXVhdE5vcm1hbGl6ZSwgcXVhdE5vcm1hbGl6ZUZhc3QpOwogICAgICB9CgogICAgICB0aGlzLmNsZWFyRm9yY2VzKCk7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5kaXJ0eSA9IHRydWU7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmludGVncmF0ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gVXBkYXRlIHN0ZXAgbnVtYmVyCgoKICAgICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQpOyAvLyBTbGVlcGluZyB1cGRhdGUKCiAgICAgIGxldCBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwoKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IGZhbHNlOwoKICAgICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmkuc2xlZXBUaWNrKHRoaXMudGltZSk7CgogICAgICAgICAgaWYgKGJpLnNsZWVwU3RhdGUgIT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gaGFzQWN0aXZlQm9kaWVzOwogICAgfQoKICAgIGVtaXRDb250YWN0RXZlbnRzKCkgewogICAgICBjb25zdCBoYXNCZWdpbkNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luQ29udGFjdCcpOwogICAgICBjb25zdCBoYXNFbmRDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0IHx8IGhhc0VuZENvbnRhY3QpIHsKICAgICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7CiAgICAgIH0KCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgYWRkaXRpb25zLmxlbmd0aCA9IHJlbW92YWxzLmxlbmd0aCA9IDA7CiAgICAgIGNvbnN0IGhhc0JlZ2luU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpblNoYXBlQ29udGFjdCcpOwogICAgICBjb25zdCBoYXNFbmRTaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZFNoYXBlQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0IHx8IGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7CiAgICAgIH0KCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgY29uc3Qgc2hhcGVBID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpICsgMV0pOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IHNoYXBlQjsKICAgICAgICAgIGlmIChzaGFwZUEpIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpblNoYXBlQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgY29uc3Qgc2hhcGVBID0gdGhpcy5nZXRTaGFwZUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQocmVtb3ZhbHNbaSArIDFdKTsKICAgICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IHNoYXBlQjsKICAgICAgICAgIGlmIChzaGFwZUEpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZFNoYXBlQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgYWxsIGJvZHkgZm9yY2VzIGluIHRoZSB3b3JsZCB0byB6ZXJvLgogICAgICovCgoKICAgIGNsZWFyRm9yY2VzKCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBiLmZvcmNlOwogICAgICAgIGIudG9ycXVlOwogICAgICAgIGIuZm9yY2Uuc2V0KDAsIDAsIDApOwogICAgICAgIGIudG9ycXVlLnNldCgwLCAwLCAwKTsKICAgICAgfQogICAgfQoKICB9IC8vIFRlbXAgc3R1ZmYKCiAgbmV3IEFBQkIoKTsKICBjb25zdCB0bXBSYXkgPSBuZXcgUmF5KCk7IC8vIHBlcmZvcm1hbmNlLm5vdygpIGZhbGxiYWNrIG9uIERhdGUubm93KCkKCiAgY29uc3QgcGVyZm9ybWFuY2UgPSBnbG9iYWxUaGlzLnBlcmZvcm1hbmNlIHx8IHt9OwoKICBpZiAoIXBlcmZvcm1hbmNlLm5vdykgewogICAgbGV0IG5vd09mZnNldCA9IERhdGUubm93KCk7CgogICAgaWYgKHBlcmZvcm1hbmNlLnRpbWluZyAmJiBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0KSB7CiAgICAgIG5vd09mZnNldCA9IHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7CiAgICB9CgogICAgcGVyZm9ybWFuY2Uubm93ID0gKCkgPT4gRGF0ZS5ub3coKSAtIG5vd09mZnNldDsKICB9CgogIG5ldyBWZWMzKCk7IC8vIERpc3BhdGNoZWQgYWZ0ZXIgdGhlIHdvcmxkIGhhcyBzdGVwcGVkIGZvcndhcmQgaW4gdGltZS4KICAvLyBSZXVzYWJsZSBldmVudCBvYmplY3RzIHRvIHNhdmUgbWVtb3J5LgoKICBjb25zdCBXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncG9zdFN0ZXAnCiAgfTsgLy8gRGlzcGF0Y2hlZCBiZWZvcmUgdGhlIHdvcmxkIHN0ZXBzIGZvcndhcmQgaW4gdGltZS4KCiAgY29uc3QgV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncHJlU3RlcCcKICB9OwogIGNvbnN0IFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50ID0gewogICAgdHlwZTogQm9keS5DT0xMSURFX0VWRU5UX05BTUUsCiAgICBib2R5OiBudWxsLAogICAgY29udGFjdDogbnVsbAogIH07IC8vIFBvb2xzIGZvciB1bnVzZWQgb2JqZWN0cwoKICBjb25zdCBXb3JsZF9zdGVwX29sZENvbnRhY3RzID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlycwoKICBjb25zdCBXb3JsZF9zdGVwX3AxID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9wMiA9IFtdOyAvLyBTdHVmZiBmb3IgZW1pdENvbnRhY3RFdmVudHMKCiAgY29uc3QgYWRkaXRpb25zID0gW107CiAgY29uc3QgcmVtb3ZhbHMgPSBbXTsKICBjb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpbkNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgZW5kQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZENvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgYmVnaW5TaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpblNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKICBjb25zdCBlbmRTaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CgogIGNvbnN0IGFkZENvbnRhY3RNYXRlcmlhbCA9ICh3b3JsZCwgY3JlYXRlTWF0ZXJpYWwsIF9yZWYsIHV1aWQpID0+IHsKICAgIGxldCBbbWF0ZXJpYWxBLCBtYXRlcmlhbEIsIG9wdGlvbnNdID0gX3JlZjsKICAgIGNvbnN0IG1hdEEgPSBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbEEpOwogICAgY29uc3QgbWF0QiA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsQik7CiAgICBjb25zdCBjb250YWN0TWF0ZXJpYWwgPSBuZXcgQ29udGFjdE1hdGVyaWFsKG1hdEEsIG1hdEIsIG9wdGlvbnMpOwogICAgY29udGFjdE1hdGVyaWFsLnV1aWQgPSB1dWlkOwogICAgd29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKGNvbnRhY3RNYXRlcmlhbCk7CiAgfTsKICBjb25zdCByZW1vdmVDb250YWN0TWF0ZXJpYWwgPSAod29ybGQsIGNtVVVJRCkgPT4gewogICAgY29uc3QgaW5kZXggPSB3b3JsZC5jb250YWN0bWF0ZXJpYWxzLmZpbmRJbmRleChfcmVmMiA9PiB7CiAgICAgIGxldCB7CiAgICAgICAgdXVpZAogICAgICB9ID0gX3JlZjI7CiAgICAgIHJldHVybiB1dWlkID09PSBjbVVVSUQ7CiAgICB9KTsKICAgIGNvbnN0IFt7CiAgICAgIGlkOiBpCiAgICB9LCB7CiAgICAgIGlkOiBqCiAgICB9XSA9IHdvcmxkLmNvbnRhY3RtYXRlcmlhbHNbaW5kZXhdLm1hdGVyaWFsczsKICAgIHdvcmxkLmNvbnRhY3RtYXRlcmlhbHMuc3BsaWNlKGluZGV4LCAxKTsKICAgIGRlbGV0ZSB3b3JsZC5jb250YWN0TWF0ZXJpYWxUYWJsZS5kYXRhW2kgPCBqID8gYCR7aX0tJHtqfWAgOiBgJHtqfS0ke2l9YF07CiAgfTsKCiAgbGV0IG1hdGVyaWFsSWQgPSAwOwogIGNvbnN0IGNyZWF0ZU1hdGVyaWFsRmFjdG9yeSA9IG1hdGVyaWFscyA9PiBmdW5jdGlvbiAobmFtZU9yT3B0aW9ucykgewogICAgaWYgKG5hbWVPck9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICBuYW1lT3JPcHRpb25zID0ge307CiAgICB9CgogICAgY29uc3QgbWF0ZXJpYWxPcHRpb25zID0gdHlwZW9mIG5hbWVPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiBuYW1lT3JPcHRpb25zCiAgICB9IDogewogICAgICBuYW1lOiBTeW1ib2wuZm9yKGBNYXRlcmlhbCR7bWF0ZXJpYWxJZCsrfWApLAogICAgICAuLi5uYW1lT3JPcHRpb25zCiAgICB9OwogICAgY29uc3QgewogICAgICBuYW1lCiAgICB9ID0gbWF0ZXJpYWxPcHRpb25zOwogICAgbWF0ZXJpYWxzW25hbWVdID0gbWF0ZXJpYWxzW25hbWVdIHx8IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpOwogICAgcmV0dXJuIG1hdGVyaWFsc1tuYW1lXTsKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnY2Fubm9uLWVzJykuTWF0ZXJpYWxPcHRpb25zIH0gTWF0ZXJpYWxPcHRpb25zCiAgICovCgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwoKICBjb25zdCBwcmVwYXJlU3BoZXJlID0gYXJncyA9PiBBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXTsKCiAgY29uc3QgcHJlcGFyZUNvbnZleFBvbHloZWRyb24gPSBfcmVmMiA9PiB7CiAgICBsZXQgW3YsIGZhY2VzLCBuLCBhLCBib3VuZGluZ1NwaGVyZVJhZGl1c10gPSBfcmVmMjsKICAgIHJldHVybiBbewogICAgICBheGVzOiBhID8gYS5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgICBib3VuZGluZ1NwaGVyZVJhZGl1cywKICAgICAgZmFjZXMsCiAgICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIHZlcnRpY2VzOiB2ID8gdi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkCiAgICB9XTsKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCgogICAgICBjYXNlICdDb252ZXhQb2x5aGVkcm9uJzoKICAgICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpOwoKICAgICAgY2FzZSAnQ3lsaW5kZXInOgogICAgICAgIHJldHVybiBuZXcgQ3lsaW5kZXIoLi4uYXJncyk7CiAgICAgIC8vIFsgcmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ1BhcnRpY2xlJzoKICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCk7CiAgICAgIC8vIG5vIGFyZ3MKCiAgICAgIGNhc2UgJ1BsYW5lJzoKICAgICAgICByZXR1cm4gbmV3IFBsYW5lKCk7CiAgICAgIC8vIG5vIGFyZ3MsIGluZmluaXRlIHggYW5kIHkKCiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKCiAgICAgIGNhc2UgJ1RyaW1lc2gnOgogICAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKTsKICAgICAgLy8gW3ZlcnRpY2VzLCBpbmRpY2VzXSA9IGFyZ3MKICAgIH0KICB9CiAgLyoqCiAgICogQGZ1bmN0aW9uCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51dWlkCiAgICogQHBhcmFtIHtCb2R5UHJvcHN9IG9wdGlvbnMucHJvcHMKICAgKiBAcGFyYW0ge0JvZHlTaGFwZVR5cGV9IG9wdGlvbnMudHlwZQogICAqIEBwYXJhbSB7KG1hdGVyaWFsT3B0aW9uczogTWF0ZXJpYWxPcHRpb25zKSA9PiBNYXRlcmlhbCA9fSBvcHRpb25zLmNyZWF0ZU1hdGVyaWFsCiAgICogQHJldHVybnMge0JvZHl9CiAgICovCgoKICBjb25zdCBwcm9wc1RvQm9keSA9IG9wdGlvbnMgPT4gewogICAgY29uc3QgewogICAgICB1dWlkLAogICAgICBwcm9wcywKICAgICAgdHlwZSwKICAgICAgY3JlYXRlTWF0ZXJpYWwgPSBtYXRlcmlhbE9wdGlvbnMgPT4gbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucykKICAgIH0gPSBvcHRpb25zOwogICAgY29uc3QgewogICAgICBhbmd1bGFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBhbmd1bGFyVmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIGFyZ3MgPSBbXSwKICAgICAgY29sbGlzaW9uUmVzcG9uc2UsCiAgICAgIGxpbmVhckZhY3RvciA9IFsxLCAxLCAxXSwKICAgICAgbWFzcywKICAgICAgbWF0ZXJpYWwsCiAgICAgIG9uQ29sbGlkZSwKICAgICAgcG9zaXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLAogICAgICBzaGFwZXMsCiAgICAgIHR5cGU6IGJvZHlUeXBlLAogICAgICB2ZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgLi4uZXh0cmEKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IGJvZHkgPSBuZXcgQm9keSh7IC4uLmV4dHJhLAogICAgICBtYXNzOiBib2R5VHlwZSA9PT0gJ1N0YXRpYycgPyAwIDogbWFzcywKICAgICAgbWF0ZXJpYWw6IG1hdGVyaWFsID8gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWwpIDogdW5kZWZpbmVkLAogICAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQKICAgIH0pOwogICAgYm9keS51dWlkID0gdXVpZDsKCiAgICBpZiAoY29sbGlzaW9uUmVzcG9uc2UgIT09IHVuZGVmaW5lZCkgewogICAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2U7CiAgICB9CgogICAgaWYgKHR5cGUgPT09ICdDb21wb3VuZCcpIHsKICAgICAgc2hhcGVzLmZvckVhY2goX3JlZjMgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYXJncywKICAgICAgICAgIHBvc2l0aW9uLAogICAgICAgICAgcm90YXRpb24sCiAgICAgICAgICBtYXRlcmlhbCwKICAgICAgICAgIC4uLmV4dHJhCiAgICAgICAgfSA9IF9yZWYzOwogICAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncyksIHBvc2l0aW9uID8gbmV3IFZlYzMoLi4ucG9zaXRpb24pIDogdW5kZWZpbmVkLCByb3RhdGlvbiA/IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKC4uLnJvdGF0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICAgICAgaWYgKG1hdGVyaWFsKSBzaGFwZUJvZHkubWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbCk7CiAgICAgICAgT2JqZWN0LmFzc2lnbihzaGFwZUJvZHksIGV4dHJhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBib2R5LmFkZFNoYXBlKGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpKTsKICAgIH0KCiAgICBib2R5LnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKTsKICAgIGJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocm90YXRpb25bMF0sIHJvdGF0aW9uWzFdLCByb3RhdGlvblsyXSk7CiAgICBib2R5LnZlbG9jaXR5LnNldCh2ZWxvY2l0eVswXSwgdmVsb2NpdHlbMV0sIHZlbG9jaXR5WzJdKTsKICAgIGJvZHkuYW5ndWxhclZlbG9jaXR5LnNldChhbmd1bGFyVmVsb2NpdHlbMF0sIGFuZ3VsYXJWZWxvY2l0eVsxXSwgYW5ndWxhclZlbG9jaXR5WzJdKTsKICAgIGJvZHkubGluZWFyRmFjdG9yLnNldChsaW5lYXJGYWN0b3JbMF0sIGxpbmVhckZhY3RvclsxXSwgbGluZWFyRmFjdG9yWzJdKTsKICAgIGJvZHkuYW5ndWxhckZhY3Rvci5zZXQoYW5ndWxhckZhY3RvclswXSwgYW5ndWxhckZhY3RvclsxXSwgYW5ndWxhckZhY3RvclsyXSk7CiAgICByZXR1cm4gYm9keTsKICB9OwoKICBjb25zdCBhZGRCb2RpZXMgPSAoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wcywKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IGJvZHkgPSBwcm9wc1RvQm9keSh7CiAgICAgICAgY3JlYXRlTWF0ZXJpYWwsCiAgICAgICAgcHJvcHM6IHByb3BzW2ldLAogICAgICAgIHR5cGUsCiAgICAgICAgdXVpZDogdXVpZFtpXQogICAgICB9KTsKICAgICAgc3RhdGUud29ybGQuYWRkQm9keShib2R5KTsKICAgICAgaWYgKHByb3BzW2ldLm9uQ29sbGlkZSkgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaWRlJywgX3JlZjIgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYm9keSwKICAgICAgICAgIHRhcmdldCwKICAgICAgICAgIGNvbnRhY3QKICAgICAgICB9ID0gX3JlZjI7CiAgICAgICAgaWYgKCFib2R5LnV1aWQgfHwgIXRhcmdldC51dWlkKSByZXR1cm47CiAgICAgICAgY29uc3QgewogICAgICAgICAgbmksCiAgICAgICAgICByaSwKICAgICAgICAgIHJqLAogICAgICAgICAgYmksCiAgICAgICAgICBiaiwKICAgICAgICAgIGlkCiAgICAgICAgfSA9IGNvbnRhY3Q7CiAgICAgICAgY29uc3QgY29udGFjdFBvaW50ID0gYmkucG9zaXRpb24udmFkZChyaSk7CiAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbCA9IGJpID09PSBib2R5ID8gbmkgOiBuaS5zY2FsZSgtMSk7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBib2R5OiBib2R5LnV1aWQsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJzOiB7CiAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgYm9keUZpbHRlck1hc2s6IGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyR3JvdXA6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAgICAgIH0sCiAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogdXNlIGlkIGluc3RlYWQgb2YgdXVpZAogICAgICAgICAgICBiaTogYmkudXVpZCwKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJqOiBiai51dWlkLAogICAgICAgICAgICAvLyBOb3JtYWwgb2YgdGhlIGNvbnRhY3QsIHJlbGF0aXZlIHRvIHRoZSBjb2xsaWRpbmcgYm9keQogICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSwKICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3QKICAgICAgICAgICAgY29udGFjdFBvaW50OiBjb250YWN0UG9pbnQudG9BcnJheSgpLAogICAgICAgICAgICBpZCwKICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLAogICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLAogICAgICAgICAgICByaTogcmkudG9BcnJheSgpLAogICAgICAgICAgICByajogcmoudG9BcnJheSgpCiAgICAgICAgICB9LAogICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICB0YXJnZXQ6IHRhcmdldC51dWlkLAogICAgICAgICAgdHlwZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9OwoKICBjb25zdCB0cmlwbGV0VG9WZWMzID0gdCA9PiB0ID8gbmV3IFZlYzMoLi4udCkgOiB1bmRlZmluZWQ7CgogIGNvbnN0IGFkZENvbnN0cmFpbnQgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiBbYm9keUEsIGJvZHlCLCB7CiAgICAgICAgYW5nbGUsCiAgICAgICAgYXhpc0EsCiAgICAgICAgYXhpc0IsCiAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICBkaXN0YW5jZSwKICAgICAgICBtYXhGb3JjZSwKICAgICAgICBtYXhNdWx0aXBsaWVyLAogICAgICAgIHBpdm90QSwKICAgICAgICBwaXZvdEIsCiAgICAgICAgdHdpc3RBbmdsZSwKICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgfV0sCiAgICAgIHR5cGUsCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgbGV0IGNvbnN0cmFpbnQ7CgogICAgc3dpdGNoICh0eXBlKSB7CiAgICAgIGNhc2UgJ1BvaW50VG9Qb2ludCc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgdHJpcGxldFRvVmVjMyhwaXZvdEIpLCBtYXhGb3JjZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdDb25lVHdpc3QnOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBhbmdsZSwKICAgICAgICAgIGF4aXNBOiB0cmlwbGV0VG9WZWMzKGF4aXNBKSwKICAgICAgICAgIGF4aXNCOiB0cmlwbGV0VG9WZWMzKGF4aXNCKSwKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICBtYXhGb3JjZSwKICAgICAgICAgIHBpdm90QTogdHJpcGxldFRvVmVjMyhwaXZvdEEpLAogICAgICAgICAgcGl2b3RCOiB0cmlwbGV0VG9WZWMzKHBpdm90QiksCiAgICAgICAgICB0d2lzdEFuZ2xlCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdIaW5nZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnRGlzdGFuY2UnOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgRGlzdGFuY2VDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIGRpc3RhbmNlLCBtYXhGb3JjZSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdMb2NrJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IExvY2tDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIG1heEZvcmNlCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgd2FrZVVwQm9kaWVzCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgY29uc3RyYWludC51dWlkID0gdXVpZDsKICAgIHN0YXRlLndvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludCk7CgogICAgaWYgKG1heE11bHRpcGxpZXIgIT09IHVuZGVmaW5lZCkgewogICAgICBjb25zdCBwb3N0U3RlcENvbnN0cmFpbnQgPSAoKSA9PiB7CiAgICAgICAgLy8gVGhlIG11bHRpcGxpZXIgaXMgcHJvcG9ydGlvbmFsIHRvIGhvdyBtdWNoIGZvcmNlIGlzIGFkZGVkIHRvIHRoZSBib2RpZXMgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgICAgLy8gSWYgdGhpcyBleGNlZWRzIGEgbGltaXQgdGhlIGNvbnN0cmFpbnQgaXMgZGlzYWJsZWQuCiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IE1hdGguYWJzKGNvbnN0cmFpbnQuZXF1YXRpb25zWzBdLm11bHRpcGxpZXIpOwoKICAgICAgICBpZiAobXVsdGlwbGllciA+IG1heE11bHRpcGxpZXIpIHsKICAgICAgICAgIGNvbnN0cmFpbnQuZGlzYWJsZSgpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdID0gcG9zdFN0ZXBDb25zdHJhaW50OwogICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdKTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiB0b1VwcGVyY2FzZShzdHIpIHsKICAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKTsKICB9CgogIGNvbnN0IGFkZFJheSA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IHsKICAgICAgICBmcm9tLAogICAgICAgIG1vZGUsCiAgICAgICAgdG8sCiAgICAgICAgLi4ucmF5T3B0aW9ucwogICAgICB9LAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKICAgIGNvbnN0IHJheSA9IG5ldyBSYXkodHJpcGxldFRvVmVjMyhmcm9tKSwgdHJpcGxldFRvVmVjMyh0bykpOwogICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgbW9kZTogUkFZX01PREVTW3RvVXBwZXJjYXNlKG1vZGUpXSwKICAgICAgcmVzdWx0OiBuZXcgUmF5Y2FzdFJlc3VsdCgpLAogICAgICAuLi5yYXlPcHRpb25zCiAgICB9OwoKICAgIHN0YXRlLnJheXNbdXVpZF0gPSAoKSA9PiB7CiAgICAgIHJheS5pbnRlcnNlY3RXb3JsZChzdGF0ZS53b3JsZCwgb3B0aW9ucyk7CiAgICAgIGlmICghb3B0aW9ucy5yZXN1bHQgfHwgIW9wdGlvbnMucmVzdWx0LmJvZHkpIHJldHVybjsKICAgICAgY29uc3QgewogICAgICAgIGJvZHksCiAgICAgICAgc2hhcGUsCiAgICAgICAgcmF5RnJvbVdvcmxkLAogICAgICAgIHJheVRvV29ybGQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQsCiAgICAgICAgaGl0UG9pbnRXb3JsZCwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSBvcHRpb25zLnJlc3VsdDsKICAgICAgY29uc3QgYm9keVVVSUQgPSBib2R5LnV1aWQ7CiAgICAgIGlmICghYm9keVVVSUQpIHJldHVybjsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgYm9keTogYm9keVVVSUQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICByYXk6IHsKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgIGRpcmVjdGlvbjogcmF5LmRpcmVjdGlvbi50b0FycmF5KCksCiAgICAgICAgICBmcm9tLAogICAgICAgICAgdG8sCiAgICAgICAgICB1dWlkCiAgICAgICAgfSwKICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksCiAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksCiAgICAgICAgc2hhcGU6IHNoYXBlID8geyAuLi5zaGFwZSwKICAgICAgICAgIGJvZHk6IGJvZHlVVUlECiAgICAgICAgfSA6IG51bGwsCiAgICAgICAgdHlwZTogJ3JheWhpdCcsCiAgICAgICAgLi4ucmVzdAogICAgICB9KTsKICAgIH07CgogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pOwogIH07CgogIGNvbnN0IGFkZFJheWNhc3RWZWhpY2xlID0gKHN0YXRlLCBkYXRhKSA9PiB7CiAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IGRhdGEucHJvcHM7CiAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHsKICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sCiAgICAgIGluZGV4Rm9yd2FyZEF4aXMsCiAgICAgIGluZGV4UmlnaHRBeGlzLAogICAgICBpbmRleFVwQXhpcwogICAgfSk7CiAgICB2ZWhpY2xlLndvcmxkID0gc3RhdGUud29ybGQ7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBheGxlTG9jYWwsCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLAogICAgICAgIGRpcmVjdGlvbkxvY2FsLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IHdoZWVsSW5mb3NbaV07CiAgICAgIHZlaGljbGUuYWRkV2hlZWwoewogICAgICAgIGF4bGVMb2NhbDogdHJpcGxldFRvVmVjMyhheGxlTG9jYWwpLAogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogdHJpcGxldFRvVmVjMyhjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiB0cmlwbGV0VG9WZWMzKGRpcmVjdGlvbkxvY2FsKSwKICAgICAgICAuLi5yZXN0CiAgICAgIH0pOwogICAgfQoKICAgIGNvbnN0IHByZVN0ZXAgPSAoKSA9PiB7CiAgICAgIHZlaGljbGUudXBkYXRlVmVoaWNsZShzdGF0ZS53b3JsZC5kdCk7CiAgICB9OwoKICAgIGNvbnN0IHBvc3RTdGVwID0gKCkgPT4gewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlaGljbGUud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZlaGljbGUudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgICAgY29uc3QgdCA9IHZlaGljbGUud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgIH0KICAgIH07CgogICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXSA9IHsKICAgICAgcG9zdFN0ZXAsCiAgICAgIHByZVN0ZXAsCiAgICAgIHZlaGljbGUKICAgIH07CiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgcHJlU3RlcCk7CiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHBvc3RTdGVwKTsKICB9OwoKICBjb25zdCBhZGRTcHJpbmcgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiBbYm9keUEsIGJvZHlCLCB7CiAgICAgICAgZGFtcGluZywKICAgICAgICBsb2NhbEFuY2hvckEsCiAgICAgICAgbG9jYWxBbmNob3JCLAogICAgICAgIHJlc3RMZW5ndGgsCiAgICAgICAgc3RpZmZuZXNzLAogICAgICAgIHdvcmxkQW5jaG9yQSwKICAgICAgICB3b3JsZEFuY2hvckIKICAgICAgfV0sCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgIGRhbXBpbmcsCiAgICAgIGxvY2FsQW5jaG9yQTogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckEpLAogICAgICBsb2NhbEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMobG9jYWxBbmNob3JCKSwKICAgICAgcmVzdExlbmd0aCwKICAgICAgc3RpZmZuZXNzLAogICAgICB3b3JsZEFuY2hvckE6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JBKSwKICAgICAgd29ybGRBbmNob3JCOiB0cmlwbGV0VG9WZWMzKHdvcmxkQW5jaG9yQikKICAgIH0pOwogICAgc3ByaW5nLnV1aWQgPSB1dWlkOwoKICAgIGNvbnN0IHBvc3RTdGVwU3ByaW5nID0gKCkgPT4gc3ByaW5nLmFwcGx5Rm9yY2UoKTsKCiAgICBzdGF0ZS5zcHJpbmdzW3V1aWRdID0gcG9zdFN0ZXBTcHJpbmc7CiAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0gPSBzcHJpbmc7IC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAoKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuc3ByaW5nc1t1dWlkXSk7CiAgfTsKCiAgZnVuY3Rpb24gZW1pdEJlZ2luQ29udGFjdChfcmVmKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmOwogICAgaWYgKCEoYm9keUEgIT0gbnVsbCAmJiBib2R5QS51dWlkKSB8fCAhKGJvZHlCICE9IG51bGwgJiYgYm9keUIudXVpZCkpIHJldHVybjsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBib2R5QTogYm9keUEudXVpZCwKICAgICAgYm9keUI6IGJvZHlCLnV1aWQsCiAgICAgIG9wOiAnZXZlbnQnLAogICAgICB0eXBlOiAnY29sbGlkZUJlZ2luJwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBlbWl0RW5kQ29udGFjdChfcmVmMikgewogICAgbGV0IHsKICAgICAgYm9keUEsCiAgICAgIGJvZHlCCiAgICB9ID0gX3JlZjI7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJwogICAgfSk7CiAgfQoKICBjb25zdCBpbml0ID0gKHdvcmxkLCBfcmVmMykgPT4gewogICAgbGV0IHsKICAgICAgYWxsb3dTbGVlcCwKICAgICAgYXhpc0luZGV4ID0gMCwKICAgICAgYnJvYWRwaGFzZSwKICAgICAgZGVmYXVsdENvbnRhY3RNYXRlcmlhbCwKICAgICAgZ3Jhdml0eSwKICAgICAgaXRlcmF0aW9ucywKICAgICAgcXVhdE5vcm1hbGl6ZUZhc3QsCiAgICAgIHF1YXROb3JtYWxpemVTa2lwLAogICAgICBzb2x2ZXIsCiAgICAgIHRvbGVyYW5jZQogICAgfSA9IF9yZWYzOwogICAgd29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXA7CiAgICB3b3JsZC5ncmF2aXR5LnNldCguLi5ncmF2aXR5KTsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVGYXN0ID0gcXVhdE5vcm1hbGl6ZUZhc3Q7CiAgICB3b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwOwoKICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHsKICAgICAgd29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKTsKICAgIH0KCiAgICBpZiAod29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgd29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZTsKICAgICAgd29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgfQoKICAgIHdvcmxkLmJyb2FkcGhhc2UgPSBicm9hZHBoYXNlID09PSAnU0FQJyA/IG5ldyBTQVBCcm9hZHBoYXNlKHdvcmxkKSA6IG5ldyBOYWl2ZUJyb2FkcGhhc2UoKTsKCiAgICBpZiAod29ybGQuYnJvYWRwaGFzZSBpbnN0YW5jZW9mIFNBUEJyb2FkcGhhc2UpIHsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBheGlzSW5kZXg7CiAgICB9CgogICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0JywgZW1pdEJlZ2luQ29udGFjdCk7CiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpOwogICAgT2JqZWN0LmFzc2lnbih3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKTsKICB9OwoKICBjb25zdCBpc1FvclYgPSB2ID0+IHYgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uIHx8IHYgaW5zdGFuY2VvZiBWZWMzOwoKICBjb25zdCBzdGVwID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwb3NpdGlvbnMsCiAgICAgIHByb3BzOiB7CiAgICAgICAgbWF4U3ViU3RlcHMsCiAgICAgICAgc3RlcFNpemUsCiAgICAgICAgdGltZVNpbmNlTGFzdENhbGxlZAogICAgICB9LAogICAgICBxdWF0ZXJuaW9ucwogICAgfSA9IF9yZWY7CiAgICBzdGF0ZS53b3JsZC5zdGVwKHN0ZXBTaXplLCB0aW1lU2luY2VMYXN0Q2FsbGVkLCBtYXhTdWJTdGVwcyk7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS53b3JsZC5ib2RpZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgY29uc3QgcCA9IHN0YXRlLndvcmxkLmJvZGllc1tpXS5wb3NpdGlvbjsKICAgICAgY29uc3QgcSA9IHN0YXRlLndvcmxkLmJvZGllc1tpXS5xdWF0ZXJuaW9uOwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueDsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMV0gPSBwLnk7CiAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDFdID0gcS55OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56OwogICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53OwogICAgfQoKICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwoKICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoc3RhdGUuc3Vic2NyaXB0aW9ucykpIHsKICAgICAgY29uc3QgW3V1aWQsIHR5cGUsIHRhcmdldCA9ICdib2RpZXMnXSA9IHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdOwogICAgICBjb25zdCB7CiAgICAgICAgYm9kaWVzLAogICAgICAgIHZlaGljbGVzCiAgICAgIH0gPSBzdGF0ZTsKICAgICAgY29uc3QgdmFsdWUgPSB0YXJnZXQgPT09ICd2ZWhpY2xlcycgPyAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICB2ZWhpY2xlc1t1dWlkXS52ZWhpY2xlW3R5cGVdIDogLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBEaWZmZXJlbnRpYXRlIHRoZXNlICJ0eXBlcyIKICAgICAgYm9kaWVzW3V1aWRdW3R5cGVdOwogICAgICBjb25zdCBzZXJpYWxpemFibGVWYWx1ZSA9IGlzUW9yVih2YWx1ZSkgPyB2YWx1ZS50b0FycmF5KCkgOiB2YWx1ZTsKICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW051bWJlcihpZCksIHNlcmlhbGl6YWJsZVZhbHVlLCAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICB0eXBlXSk7CiAgICB9CgogICAgY29uc3QgbWVzc2FnZSA9IHsKICAgICAgYWN0aXZlOiBzdGF0ZS53b3JsZC5oYXNBY3RpdmVCb2RpZXMsCiAgICAgIG9ic2VydmF0aW9ucywKICAgICAgb3A6ICdmcmFtZScsCiAgICAgIHBvc2l0aW9ucywKICAgICAgcXVhdGVybmlvbnMKICAgIH07CgogICAgaWYgKHN0YXRlLmJvZGllc05lZWRTeW5jaW5nKSB7CiAgICAgIG1lc3NhZ2UuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiB7CiAgICAgICAgaWYgKGJvZHkudXVpZCkgYm9kaWVzLnB1c2goYm9keS51dWlkKTsKICAgICAgICByZXR1cm4gYm9kaWVzOwogICAgICB9LCBbXSk7CiAgICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gZmFsc2U7CiAgICB9CgogICAgc2VsZi5wb3N0TWVzc2FnZShtZXNzYWdlLCBbcG9zaXRpb25zLmJ1ZmZlciwgcXVhdGVybmlvbnMuYnVmZmVyXSk7CiAgfTsKCiAgY29uc3Qgc3RhdGUgPSB7CiAgICBib2RpZXM6IHt9LAogICAgYm9kaWVzTmVlZFN5bmNpbmc6IGZhbHNlLAogICAgY29uc3RyYWludHM6IHt9LAogICAgbWF0ZXJpYWxzOiB7fSwKICAgIHJheXM6IHt9LAogICAgc3ByaW5nSW5zdGFuY2VzOiB7fSwKICAgIHNwcmluZ3M6IHt9LAogICAgc3Vic2NyaXB0aW9uczoge30sCiAgICB2ZWhpY2xlczoge30sCiAgICB3b3JsZDogbmV3IFdvcmxkKCkKICB9OwoKICAvLy8gPHJlZmVyZW5jZSBuby1kZWZhdWx0LWxpYj0idHJ1ZSIvPgoKICBjb25zdCBpc0hpbmdlQ29uc3RyYWludCA9IGMgPT4gYyBpbnN0YW5jZW9mIEhpbmdlQ29uc3RyYWludDsKCiAgZnVuY3Rpb24gc3luY0JvZGllcygpIHsKICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gdHJ1ZTsKICAgIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGJvZGllcywgYm9keSkgPT4gYm9keS51dWlkID8geyAuLi5ib2RpZXMsCiAgICAgIFtib2R5LnV1aWRdOiBib2R5CiAgICB9IDogYm9kaWVzLCB7fSk7CiAgfQoKICBjb25zdCBicm9hZHBoYXNlcyA9IHsKICAgIE5haXZlQnJvYWRwaGFzZSwKICAgIFNBUEJyb2FkcGhhc2UKICB9OwogIGNvbnN0IGNyZWF0ZU1hdGVyaWFsID0gY3JlYXRlTWF0ZXJpYWxGYWN0b3J5KHN0YXRlLm1hdGVyaWFscyk7CgogIHNlbGYub25tZXNzYWdlID0gX3JlZiA9PiB7CiAgICBsZXQgewogICAgICBkYXRhCiAgICB9ID0gX3JlZjsKCiAgICBzd2l0Y2ggKGRhdGEub3ApIHsKICAgICAgY2FzZSAnaW5pdCc6CiAgICAgICAgewogICAgICAgICAgaW5pdChzdGF0ZS53b3JsZCwgZGF0YS5wcm9wcyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzdGVwJzoKICAgICAgICB7CiAgICAgICAgICBzdGVwKHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FkZEJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgYWRkQm9kaWVzKHN0YXRlLCBjcmVhdGVNYXRlcmlhbCwgZGF0YSk7CiAgICAgICAgICBzeW5jQm9kaWVzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS51dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUJvZHkoc3RhdGUuYm9kaWVzW2RhdGEudXVpZFtpXV0pOwogICAgICAgICAgfQoKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBpZCwKICAgICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgICB0eXBlCiAgICAgICAgICB9ID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdID0gW2RhdGEudXVpZCwgdHlwZSwgdGFyZ2V0XTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBkZWxldGUgc3RhdGUuc3Vic2NyaXB0aW9uc1tkYXRhLnByb3BzXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFBvc2l0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5wb3NpdGlvbi5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRRdWF0ZXJuaW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5xdWF0ZXJuaW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdLCBkYXRhLnByb3BzWzNdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS52ZWxvY2l0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbmd1bGFyVmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJWZWxvY2l0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmxpbmVhckZhY3Rvci5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbmd1bGFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldE1hc3MnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLm1hc3MgPSBkYXRhLnByb3BzOwogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRNYXRlcmlhbCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWF0ZXJpYWwgPSBkYXRhLnByb3BzID8gY3JlYXRlTWF0ZXJpYWwoZGF0YS5wcm9wcykgOiBudWxsOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TGluZWFyRGFtcGluZyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbmd1bGFyRGFtcGluZyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhckRhbXBpbmcgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYWxsb3dTbGVlcCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTbGVlcFNwZWVkTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTbGVlcFRpbWVMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBUaW1lTGltaXQgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlck1hc2snOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uUmVzcG9uc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvblJlc3BvbnNlID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmZpeGVkUm90YXRpb24gPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0SXNUcmlnZ2VyJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5pc1RyaWdnZXIgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0R3Jhdml0eSc6CiAgICAgICAgc3RhdGUud29ybGQuZ3Jhdml0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRUb2xlcmFuY2UnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IGRhdGEucHJvcHM7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEl0ZXJhdGlvbnMnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRCcm9hZHBoYXNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlID0gbmV3IChicm9hZHBoYXNlc1tgJHtkYXRhLnByb3BzfUJyb2FkcGhhc2VgXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgaW5zdGFuY2VvZiBTQVBCcm9hZHBoYXNlKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGRhdGEucHJvcHMgPT09IHVuZGVmaW5lZCB8fCBkYXRhLnByb3BzID09PSBudWxsID8gMCA6IGRhdGEucHJvcHM7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5Rm9yY2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5SW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUxvY2FsRm9yY2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseVRvcnF1ZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkQ29uc3RyYWludCc6CiAgICAgICAgewogICAgICAgICAgYWRkQ29uc3RyYWludChzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoX3JlZjIgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgdXVpZAogICAgICAgICAgfSA9IF9yZWYyOwogICAgICAgICAgcmV0dXJuIHV1aWQgPT09IGRhdGEudXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBzdGF0ZS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpKTsKCiAgICAgICAgaWYgKHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXSk7CiAgICAgICAgICBkZWxldGUgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLm1hcChjID0+IGMuZW5hYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmRpc2FibGUoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdlbmFibGVDb25zdHJhaW50TW90b3InOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5maWx0ZXIoaXNIaW5nZUNvbnN0cmFpbnQpLm1hcChjID0+IGMuZW5hYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdkaXNhYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmRpc2FibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yU3BlZWQoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yTWF4Rm9yY2UnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5maWx0ZXIoaXNIaW5nZUNvbnN0cmFpbnQpLm1hcChjID0+IGMuc2V0TW90b3JNYXhGb3JjZShkYXRhLnByb3BzKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhZGRTcHJpbmcnOgogICAgICAgIHsKICAgICAgICAgIGFkZFNwcmluZyhzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdTdGlmZm5lc3MnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLnN0aWZmbmVzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdSZXN0TGVuZ3RoJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5yZXN0TGVuZ3RoID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFNwcmluZ0RhbXBpbmcnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLmRhbXBpbmcgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbZGF0YS51dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXknOgogICAgICAgIHsKICAgICAgICAgIGFkZFJheShzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVSYXknOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnJheXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FkZFJheWNhc3RWZWhpY2xlJzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXljYXN0VmVoaWNsZShzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0ucHJlU3RlcCk7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLndvcmxkID0gbnVsbDsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FwcGx5UmF5Y2FzdFZlaGljbGVFbmdpbmVGb3JjZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRDb250YWN0TWF0ZXJpYWwnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnRhY3RNYXRlcmlhbChzdGF0ZS53b3JsZCwgY3JlYXRlTWF0ZXJpYWwsIGRhdGEucHJvcHMsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVDb250YWN0TWF0ZXJpYWwnOgogICAgICAgIHsKICAgICAgICAgIHJlbW92ZUNvbnRhY3RNYXRlcmlhbChzdGF0ZS53b3JsZCwgZGF0YS51dWlkKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3dha2VVcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ud2FrZVVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzbGVlcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICB9OwoKfSkoKTsKCg==",null,!1),GA=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n);var l=e.allowSleep,a=void 0!==l&&l,r=e.axisIndex,o=void 0===r?0:r,g=e.broadphase,s=void 0===g?"Naive":g,I=e.defaultContactMaterial,u=void 0===I?{contactEquationStiffness:1e6}:I,c=e.gravity,C=void 0===c?[0,-9.81,0]:c,d=e.iterations,h=void 0===d?5:d,A=e.quatNormalizeFast,m=void 0!==A&&A,p=e.quatNormalizeSkip,v=void 0===p?0:p,b=e.size,y=void 0===b?1e3:b,G=e.solver,B=void 0===G?"GS":G,Z=e.tolerance,q=void 0===Z?.001:Z;return(i=t.call(this)).messageQueue=[],i.worker=null,i.config={allowSleep:a,axisIndex:o,broadphase:s,defaultContactMaterial:u,gravity:C,iterations:h,quatNormalizeFast:m,quatNormalizeSkip:v,size:y,solver:B,tolerance:q},i.buffers={positions:new Float32Array(3*y),quaternions:new Float32Array(4*y)},i}return y(n,[{key:"axisIndex",get:function(){return this.config.axisIndex},set:function(e){this.config.axisIndex=e,this.postMessage({op:"setAxisIndex",props:e})}},{key:"broadphase",get:function(){return this.config.broadphase},set:function(e){this.config.broadphase=e,this.postMessage({op:"setBroadphase",props:e})}},{key:"gravity",get:function(){return this.config.gravity},set:function(e){this.config.gravity=e,this.postMessage({op:"setGravity",props:e})}},{key:"iterations",get:function(){return this.config.iterations},set:function(e){this.config.iterations=e,this.postMessage({op:"setIterations",props:e})}},{key:"tolerance",get:function(){return this.config.tolerance},set:function(e){this.config.tolerance=e,this.postMessage({op:"setTolerance",props:e})}},{key:"addBodies",value:function(e){var t=e.props,n=e.type,i=e.uuid;this.postMessage({op:"addBodies",props:t,type:n,uuid:i})}},{key:"addConstraint",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],l=t[2],a=e.type,r=e.uuid;this.postMessage({op:"addConstraint",props:[n,i,l],type:a,uuid:r})}},{key:"addContactMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addContactMaterial",props:t,uuid:n})}},{key:"addRay",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addRay",props:t,uuid:n})}},{key:"addRaycastVehicle",value:function(e){var t=c(e.props,6),n=t[0],i=t[1],l=t[2],a=t[3],r=t[4],o=t[5],g=e.uuid;this.postMessage({op:"addRaycastVehicle",props:[n,i,l,a,r,o],uuid:g})}},{key:"addSpring",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],l=t[2],a=e.uuid;this.postMessage({op:"addSpring",props:[n,i,l],uuid:a})}},{key:"applyForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyForce",props:t,uuid:n})}},{key:"applyImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyImpulse",props:t,uuid:n})}},{key:"applyLocalForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalForce",props:t,uuid:n})}},{key:"applyLocalImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalImpulse",props:t,uuid:n})}},{key:"applyRaycastVehicleEngineForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyRaycastVehicleEngineForce",props:t,uuid:n})}},{key:"applyTorque",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyTorque",props:t,uuid:n})}},{key:"connect",value:function(){var e=this;this.worker=new yA,this.worker.onmessage=function(t){if("frame"===t.data.op)return e.buffers.positions=t.data.positions,e.buffers.quaternions=t.data.quaternions,void e.emit(t.data.op,t.data);e.emit(t.data.type,t.data)};var t,n=d(this.messageQueue);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.worker.postMessage(i)}}catch(l){n.e(l)}finally{n.f()}this.messageQueue.length=0}},{key:"disableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraint",uuid:t})}},{key:"disableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraintMotor",uuid:t})}},{key:"disconnect",value:function(){this.worker&&(this.worker.onmessage=null)}},{key:"enableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraint",uuid:t})}},{key:"enableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraintMotor",uuid:t})}},{key:"init",value:function(){var e=this.config,t=e.allowSleep,n=e.axisIndex,i=e.broadphase,l=e.defaultContactMaterial,a=e.gravity,r=e.iterations,o=e.quatNormalizeFast,g=e.quatNormalizeSkip,s=e.solver,I=e.tolerance;this.postMessage({op:"init",props:{allowSleep:t,axisIndex:n,broadphase:i,defaultContactMaterial:l,gravity:a,iterations:r,quatNormalizeFast:o,quatNormalizeSkip:g,solver:s,tolerance:I}})}},{key:"removeBodies",value:function(e){var t=e.uuid;this.postMessage({op:"removeBodies",uuid:t})}},{key:"removeConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"removeConstraint",uuid:t})}},{key:"removeContactMaterial",value:function(e){var t=e.uuid;this.postMessage({op:"removeContactMaterial",uuid:t})}},{key:"removeRay",value:function(e){var t=e.uuid;this.postMessage({op:"removeRay",uuid:t})}},{key:"removeRaycastVehicle",value:function(e){var t=e.uuid;this.postMessage({op:"removeRaycastVehicle",uuid:t})}},{key:"removeSpring",value:function(e){var t=e.uuid;this.postMessage({op:"removeSpring",uuid:t})}},{key:"setAllowSleep",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAllowSleep",props:t,uuid:n})}},{key:"setAngularDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularDamping",props:t,uuid:n})}},{key:"setAngularFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularFactor",props:t,uuid:n})}},{key:"setAngularVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularVelocity",props:t,uuid:n})}},{key:"setCollisionFilterGroup",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterGroup",props:t,uuid:n})}},{key:"setCollisionFilterMask",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterMask",props:t,uuid:n})}},{key:"setCollisionResponse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionResponse",props:t,uuid:n})}},{key:"setConstraintMotorMaxForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorMaxForce",props:t,uuid:n})}},{key:"setConstraintMotorSpeed",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorSpeed",props:t,uuid:n})}},{key:"setFixedRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setFixedRotation",props:t,uuid:n})}},{key:"setIsTrigger",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setIsTrigger",props:t,uuid:n})}},{key:"setLinearDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearDamping",props:t,uuid:n})}},{key:"setLinearFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearFactor",props:t,uuid:n})}},{key:"setMass",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMass",props:t,uuid:n})}},{key:"setMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMaterial",props:t,uuid:n})}},{key:"setPosition",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setPosition",props:t,uuid:n})}},{key:"setQuaternion",value:function(e){var t=c(e.props,4),n=t[0],i=t[1],l=t[2],a=t[3],r=e.uuid;this.postMessage({op:"setQuaternion",props:[n,i,l,a],uuid:r})}},{key:"setRaycastVehicleBrake",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleBrake",props:t,uuid:n})}},{key:"setRaycastVehicleSteeringValue",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleSteeringValue",props:t,uuid:n})}},{key:"setRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRotation",props:t,uuid:n})}},{key:"setSleepSpeedLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepSpeedLimit",props:t,uuid:n})}},{key:"setSleepTimeLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepTimeLimit",props:t,uuid:n})}},{key:"setSpringDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringDamping",props:t,uuid:n})}},{key:"setSpringRestLength",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringRestLength",props:t,uuid:n})}},{key:"setSpringStiffness",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringStiffness",props:t,uuid:n})}},{key:"setUserData",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setUserData",props:t,uuid:n})}},{key:"setVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setVelocity",props:t,uuid:n})}},{key:"sleep",value:function(e){var t=e.uuid;this.postMessage({op:"sleep",uuid:t})}},{key:"step",value:function(e){var t,n=this.buffers,i=n.positions,l=n.quaternions;(i.byteLength||l.byteLength)&&(null==(t=this.worker)||t.postMessage({op:"step",positions:i,props:e,quaternions:l},[i.buffer,l.buffer]))}},{key:"subscribe",value:function(e){var t=e.props,n=t.id,i=t.target,l=t.type,a=e.uuid;this.postMessage({op:"subscribe",props:{id:n,target:i,type:l},uuid:a})}},{key:"terminate",value:function(){var e;null==(e=this.worker)||e.terminate(),this.worker=null}},{key:"unsubscribe",value:function(e){var t=e.props;this.postMessage({op:"unsubscribe",props:t})}},{key:"wakeUp",value:function(e){var t=e.uuid;this.postMessage({op:"wakeUp",uuid:t})}},{key:"postMessage",value:function(e){if(this.worker)return this.worker.postMessage(e);this.messageQueue.push(e)}}]),n}(fA),BA=function(){function e(t){f(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return y(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new qA);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new qA);var n=this.elements,i=e.x,l=e.y,a=e.z;return t.x=n[0]*i+n[1]*l+n[2]*a,t.y=n[3]*i+n[4]*l+n[5]*a,t.z=n[6]*i+n[7]*l+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,l=t.elements,a=n.elements,r=i[0],o=i[1],g=i[2],s=i[3],I=i[4],u=i[5],c=i[6],C=i[7],d=i[8],h=l[0],A=l[1],m=l[2],p=l[3],v=l[4],f=l[5],b=l[6],y=l[7],G=l[8];return a[0]=r*h+o*p+g*b,a[1]=r*A+o*v+g*y,a[2]=r*m+o*f+g*G,a[3]=s*h+I*p+u*b,a[4]=s*A+I*v+u*y,a[5]=s*m+I*f+u*G,a[6]=c*h+C*p+d*b,a[7]=c*A+C*v+d*y,a[8]=c*m+C*f+d*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,l=n.elements,a=0;3!==a;a++)l[3*a+0]=t.x*i[3*a+0],l[3*a+1]=t.y*i[3*a+1],l[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new qA);var n,i,l=[];for(n=0;n<12;n++)l.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)l[n+4*i]=this.elements[n+3*i];l[3]=e.x,l[7]=e.y,l[11]=e.z;var a,r,o=3,g=o;do{if(0===l[(n=g-o)+4*n])for(i=n+1;i<g;i++)if(0!==l[n+4*i]){a=4;do{l[(r=4-a)+4*n]+=l[r+4*i]}while(--a);break}if(0!==l[n+4*n])for(i=n+1;i<g;i++){var s=l[n+4*i]/l[n+4*n];a=4;do{l[(r=4-a)+4*i]=r<=n?0:l[r+4*i]-l[r+4*n]*s}while(--a)}}while(--o);if(t.z=l[11]/l[10],t.y=(l[7]-l[6]*t.z)/l[5],t.x=(l[3]-l[2]*t.z-l[1]*t.y)/l[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,l=ZA;for(n=0;n<3;n++)for(i=0;i<3;i++)l[n+6*i]=this.elements[n+3*i];l[3]=1,l[9]=0,l[15]=0,l[4]=0,l[10]=1,l[16]=0,l[5]=0,l[11]=0,l[17]=1;var a,r,o=3,g=o;do{if(0===l[(n=g-o)+6*n])for(i=n+1;i<g;i++)if(0!==l[n+6*i]){a=6;do{l[(r=6-a)+6*n]+=l[r+6*i]}while(--a);break}if(0!==l[n+6*n])for(i=n+1;i<g;i++){var s=l[n+6*i]/l[n+6*n];a=6;do{l[(r=6-a)+6*i]=r<=n?0:l[r+6*i]-l[r+6*n]*s}while(--a)}}while(--o);n=2;do{i=n-1;do{var I=l[n+6*i]/l[n+6*n];a=6;do{l[(r=6-a)+6*i]=l[r+6*i]-l[r+6*n]*I}while(--a)}while(i--)}while(--n);n=2;do{var u=1/l[n+6*n];a=6;do{l[(r=6-a)+6*n]=l[r+6*n]*u}while(--a)}while(n--);n=2;do{i=2;do{if(r=l[3+i+6*n],isNaN(r)||r===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,r)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,l=e.w,a=t+t,r=n+n,o=i+i,g=t*a,s=t*r,I=t*o,u=n*r,c=n*o,C=i*o,d=l*a,h=l*r,A=l*o,m=this.elements;return m[0]=1-(u+C),m[1]=s-A,m[2]=I+h,m[3]=s+A,m[4]=1-(g+C),m[5]=c-d,m[6]=I-h,m[7]=c+d,m[8]=1-(g+u),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,l=t.elements;return l[0]=i[0],l[4]=i[4],l[8]=i[8],n=i[1],l[1]=i[3],l[3]=n,n=i[2],l[2]=i[6],l[6]=n,n=i[5],l[5]=i[7],l[7]=n,t}}]),e}(),ZA=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qA=function(){function e(t,n,i){f(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return y(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,l=t.y,a=t.z,r=this.x,o=this.y,g=this.z;return n.x=o*a-g*l,n.y=g*i-r*a,n.z=r*l-o*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new BA([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var l=1/i;this.x*=l,this.y*=l,this.z*=l}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,l=this.z,a=Math.sqrt(n*n+i*i+l*l);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=l*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.x,a=e.y,r=e.z;return Math.sqrt((l-t)*(l-t)+(a-n)*(a-n)+(r-i)*(r-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.x,a=e.y,r=e.z;return(l-t)*(l-t)+(a-n)*(a-n)+(r-i)*(r-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,l=this.y,a=this.z;return n.x=t*i,n.y=t*l,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=xA,l=1/n;i.set(this.x*l,this.y*l,this.z*l);var a=wA;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,l=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=l+(e.y-l)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(WA),WA.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();qA.ZERO=new qA(0,0,0),qA.UNIT_X=new qA(1,0,0),qA.UNIT_Y=new qA(0,1,0),qA.UNIT_Z=new qA(0,0,1);var xA=new qA,wA=new qA,WA=new qA,SA=function(){function e(t){f(this,e),void 0===t&&(t={}),this.lowerBound=new qA,this.upperBound=new qA,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return y(e,[{key:"setFromPoints",value:function(e,t,n,i){var l=this.lowerBound,a=this.upperBound,r=n;l.copy(e[0]),r&&r.vmult(l,l),a.copy(l);for(var o=1;o<e.length;o++){var g=e[o];r&&(r.vmult(g,RA),g=RA),g.x>a.x&&(a.x=g.x),g.x<l.x&&(l.x=g.x),g.y>a.y&&(a.y=g.y),g.y<l.y&&(l.y=g.y),g.z>a.z&&(a.z=g.z),g.z<l.z&&(l.z=g.z)}return t&&(t.vadd(l,l),t.vadd(a,a)),i&&(l.x-=i,l.y-=i,l.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,l=e.upperBound,a=i.x<=n.x&&n.x<=l.x||t.x<=l.x&&l.x<=n.x,r=i.y<=n.y&&n.y<=l.y||t.y<=l.y&&l.y<=n.y,o=i.z<=n.z&&n.z<=l.z||t.z<=l.z&&l.z<=n.z;return a&&r&&o}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,l=e.upperBound;return t.x<=i.x&&n.x>=l.x&&t.y<=i.y&&n.y>=l.y&&t.z<=i.z&&n.z>=l.z}},{key:"getCorners",value:function(e,t,n,i,l,a,r,o){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),l.set(s.x,g.y,s.z),a.set(g.x,s.y,g.z),r.set(g.x,g.y,s.z),o.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=VA,i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=n[5],s=n[6],I=n[7];this.getCorners(i,l,a,r,o,g,s,I);for(var u=0;8!==u;u++){var c=n[u];e.pointToLocal(c,c)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=VA,i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=n[5],s=n[6],I=n[7];this.getCorners(i,l,a,r,o,g,s,I);for(var u=0;8!==u;u++){var c=n[u];e.pointToWorld(c,c)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,l=1/t.y,a=1/t.z,r=(this.lowerBound.x-n.x)*i,o=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*l,s=(this.upperBound.y-n.y)*l,I=(this.lowerBound.z-n.z)*a,u=(this.upperBound.z-n.z)*a,c=Math.max(Math.max(Math.min(r,o),Math.min(g,s)),Math.min(I,u)),C=Math.min(Math.min(Math.max(r,o),Math.max(g,s)),Math.max(I,u));return!(C<0)&&!(c>C)}}]),e}(),RA=new qA,VA=[new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA],kA=function(){function e(){f(this,e)}return y(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}},{key:"hasAnyEventListener",value:function(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var i=n[e].indexOf(t);return-1!==i&&n[e].splice(i,1),this}},{key:"dispatchEvent",value:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}return this}}]),e}(),XA=function(){function e(t,n,i,l){f(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===l&&(l=1),this.x=t,this.y=n,this.z=i,this.w=l}return y(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new qA),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=YA,i=HA;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var l=e.cross(t);this.x=l.x,this.y=l.y,this.z=l.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,l=this.y,a=this.z,r=this.w,o=t.x,g=t.y,s=t.z,I=t.w;return n.x=i*I+r*o+l*s-a*g,n.y=l*I+r*g+a*o-i*s,n.z=a*I+r*s+i*g-l*o,n.w=r*I-i*o-l*g-a*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,l=this.z,a=this.w;this.conjugate(t);var r=1/(n*n+i*i+l*l+a*a);return t.x*=r,t.y*=r,t.z*=r,t.w*=r,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new qA);var n=e.x,i=e.y,l=e.z,a=this.x,r=this.y,o=this.z,g=this.w,s=g*n+r*l-o*i,I=g*i+o*n-a*l,u=g*l+a*i-r*n,c=-a*n-r*i-o*l;return t.x=s*g+c*-a+I*-o-u*-r,t.y=I*g+c*-r+u*-a-s*-o,t.z=u*g+c*-o+s*-r-I*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,l;void 0===t&&(t="YZX");var a=this.x,r=this.y,o=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=a*r+o*g;if(s>.499&&(n=2*Math.atan2(a,g),i=Math.PI/2,l=0),s<-.499&&(n=-2*Math.atan2(a,g),i=-Math.PI/2,l=0),void 0===n){var I=a*a,u=r*r,c=o*o;n=Math.atan2(2*r*g-2*a*o,1-2*u-2*c),i=Math.asin(2*s),l=Math.atan2(2*a*g-2*r*o,1-2*I-2*c)}e.y=n,e.z=i,e.x=l}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var l=Math.cos(e/2),a=Math.cos(t/2),r=Math.cos(n/2),o=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r-o*g*s):"YXZ"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r+o*g*s):"ZXY"===i?(this.x=o*a*r-l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r-o*g*s):"ZYX"===i?(this.x=o*a*r-l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r+o*g*s):"YZX"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r-o*g*s):"XZY"===i&&(this.x=o*a*r-l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r+o*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var l,a,r,o,g,s=this.x,I=this.y,u=this.z,c=this.w,C=t.x,d=t.y,h=t.z,A=t.w;return(a=s*C+I*d+u*h+c*A)<0&&(a=-a,C=-C,d=-d,h=-h,A=-A),1-a>1e-6?(l=Math.acos(a),r=Math.sin(l),o=Math.sin((1-n)*l)/r,g=Math.sin(n*l)/r):(o=1-n,g=n),i.x=o*s+g*C,i.y=o*I+g*d,i.z=o*u+g*h,i.w=o*c+g*A,i}},{key:"integrate",value:function(t,n,i,l){void 0===l&&(l=new e);var a=t.x*i.x,r=t.y*i.y,o=t.z*i.z,g=this.x,s=this.y,I=this.z,u=this.w,c=.5*n;return l.x+=c*(a*u+r*I-o*s),l.y+=c*(r*u+o*g-a*I),l.z+=c*(o*u+a*s-r*g),l.w+=c*(-a*g-r*s-o*I),l}}]),e}(),YA=new qA,HA=new qA,KA=function(){function e(t){f(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return y(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();KA.idCounter=0,KA.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var FA=function(){function e(t){f(this,e),void 0===t&&(t={}),this.position=new qA,this.quaternion=new XA,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return y(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new qA),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new qA),n.vsub(e,i),t.conjugate(NA),NA.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new qA),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new qA),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new qA),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),NA=new XA,zA=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n),void 0===e&&(e={});var l=e,a=l.vertices,r=void 0===a?[]:a,o=l.faces,g=void 0===o?[]:o,s=l.normals,I=void 0===s?[]:s,u=l.axes,c=l.boundingSphereRadius;return(i=t.call(this,{type:KA.types.CONVEXPOLYHEDRON})).vertices=r,i.faces=g,i.faceNormals=I,0===i.faceNormals.length&&i.computeNormals(),c?i.boundingSphereRadius=c:i.updateBoundingSphereRadius(),i.worldVertices=[],i.worldVerticesNeedsUpdate=!0,i.worldFaceNormals=[],i.worldFaceNormalsNeedsUpdate=!0,i.uniqueAxes=u?u.slice():null,i.uniqueEdges=[],i.computeEdges(),i}return y(n,[{key:"computeEdges",value:function(){var e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;for(var i=new qA,l=0;l!==e.length;l++)for(var a=e[l],r=a.length,o=0;o!==r;o++){var g=(o+1)%r;t[a[o]].vsub(t[a[g]],i),i.normalize();for(var s=!1,I=0;I!==n.length;I++)if(n[I].almostEquals(i)||n[I].almostEquals(i)){s=!0;break}s||n.push(i.clone())}}},{key:"computeNormals",value:function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex ".concat(this.faces[e][t]," not found!"));var n=this.faceNormals[e]||new qA;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var i=this.vertices[this.faces[e][0]];if(n.dot(i)<0){console.error(".faceNormals[".concat(e,"] = Vec3(").concat(n.toString(),") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."));for(var l=0;l<this.faces[e].length;l++)console.warn(".vertices[".concat(this.faces[e][l],"] = Vec3(").concat(this.vertices[this.faces[e][l]].toString(),")"))}}}},{key:"getFaceNormal",value:function(e,t){var i=this.faces[e],l=this.vertices[i[0]],a=this.vertices[i[1]],r=this.vertices[i[2]];n.computeNormal(l,a,r,t)}},{key:"clipAgainstHull",value:function(e,t,n,i,l,a,r,o,g){for(var s=new qA,I=-1,u=-Number.MAX_VALUE,c=0;c<n.faces.length;c++){s.copy(n.faceNormals[c]),l.vmult(s,s);var C=s.dot(a);C>u&&(u=C,I=c)}for(var d=[],h=0;h<n.faces[I].length;h++){var A=n.vertices[n.faces[I][h]],m=new qA;m.copy(A),l.vmult(m,m),i.vadd(m,m),d.push(m)}I>=0&&this.clipFaceAgainstHull(a,e,t,d,r,o,g)}},{key:"findSeparatingAxis",value:function(e,t,n,i,l,a,r,o){var g=new qA,s=new qA,I=new qA,u=new qA,c=new qA,C=new qA,d=Number.MAX_VALUE,h=this;if(h.uniqueAxes)for(var A=0;A!==h.uniqueAxes.length;A++){n.vmult(h.uniqueAxes[A],g);var m=h.testSepAxis(g,e,t,n,i,l);if(!1===m)return!1;m<d&&(d=m,a.copy(g))}else for(var p=r?r.length:h.faces.length,v=0;v<p;v++){var f=r?r[v]:v;g.copy(h.faceNormals[f]),n.vmult(g,g);var b=h.testSepAxis(g,e,t,n,i,l);if(!1===b)return!1;b<d&&(d=b,a.copy(g))}if(e.uniqueAxes)for(var y=0;y!==e.uniqueAxes.length;y++){l.vmult(e.uniqueAxes[y],s);var G=h.testSepAxis(s,e,t,n,i,l);if(!1===G)return!1;G<d&&(d=G,a.copy(s))}else for(var B=o?o.length:e.faces.length,Z=0;Z<B;Z++){var q=o?o[Z]:Z;s.copy(e.faceNormals[q]),l.vmult(s,s);var x=h.testSepAxis(s,e,t,n,i,l);if(!1===x)return!1;x<d&&(d=x,a.copy(s))}for(var w=0;w!==h.uniqueEdges.length;w++){n.vmult(h.uniqueEdges[w],u);for(var W=0;W!==e.uniqueEdges.length;W++)if(l.vmult(e.uniqueEdges[W],c),u.cross(c,C),!C.almostZero()){C.normalize();var S=h.testSepAxis(C,e,t,n,i,l);if(!1===S)return!1;S<d&&(d=S,a.copy(C))}}return i.vsub(t,I),I.dot(a)>0&&a.negate(a),!0}},{key:"testSepAxis",value:function(e,t,i,l,a,r){n.project(this,e,i,l,MA),n.project(t,e,a,r,LA);var o=MA[0],g=MA[1],s=LA[0],I=LA[1];if(o<I||s<g)return!1;var u=o-I,c=s-g;return u<c?u:c}},{key:"calculateLocalInertia",value:function(e,t){var n=new qA,i=new qA;this.computeLocalAABB(i,n);var l=n.x-i.x,a=n.y-i.y,r=n.z-i.z;t.x=1/12*e*(2*a*2*a+2*r*2*r),t.y=1/12*e*(2*l*2*l+2*r*2*r),t.z=1/12*e*(2*a*2*a+2*l*2*l)}},{key:"getPlaneConstantOfFace",value:function(e){var t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}},{key:"clipFaceAgainstHull",value:function(e,t,n,i,l,a,r){for(var o=new qA,g=new qA,s=new qA,I=new qA,u=new qA,c=new qA,C=new qA,d=new qA,h=this,A=i,m=[],p=-1,v=Number.MAX_VALUE,f=0;f<h.faces.length;f++){o.copy(h.faceNormals[f]),n.vmult(o,o);var b=o.dot(e);b<v&&(v=b,p=f)}if(!(p<0)){var y=h.faces[p];y.connectedFaces=[];for(var G=0;G<h.faces.length;G++)for(var B=0;B<h.faces[G].length;B++)-1!==y.indexOf(h.faces[G][B])&&G!==p&&-1===y.connectedFaces.indexOf(G)&&y.connectedFaces.push(G);for(var Z=y.length,q=0;q<Z;q++){var x=h.vertices[y[q]],w=h.vertices[y[(q+1)%Z]];x.vsub(w,g),s.copy(g),n.vmult(s,s),t.vadd(s,s),I.copy(this.faceNormals[p]),n.vmult(I,I),t.vadd(I,I),s.cross(I,u),u.negate(u),c.copy(x),n.vmult(c,c),t.vadd(c,c);var W=y.connectedFaces[q];C.copy(this.faceNormals[W]);var S=this.getPlaneConstantOfFace(W);d.copy(C),n.vmult(d,d);var R=S-d.dot(t);for(this.clipFaceAgainstPlane(A,m,d,R);A.length;)A.shift();for(;m.length;)A.push(m.shift())}C.copy(this.faceNormals[p]);var V=this.getPlaneConstantOfFace(p);d.copy(C),n.vmult(d,d);for(var k=V-d.dot(t),X=0;X<A.length;X++){var Y=d.dot(A[X])+k;if(Y<=l&&(console.log("clamped: depth=".concat(Y," to minDist=").concat(l)),Y=l),Y<=a){var H=A[X];if(Y<=1e-6){var K={point:H,normal:d,depth:Y};r.push(K)}}}}}},{key:"clipFaceAgainstPlane",value:function(e,t,n,i){var l,a,r=e.length;if(r<2)return t;var o=e[e.length-1],g=e[0];l=n.dot(o)+i;for(var s=0;s<r;s++){if(g=e[s],a=n.dot(g)+i,l<0)if(a<0){var I=new qA;I.copy(g),t.push(I)}else{var u=new qA;o.lerp(g,l/(l-a),u),t.push(u)}else if(a<0){var c=new qA;o.lerp(g,l/(l-a),c),t.push(c),t.push(g)}o=g,l=a}return t}},{key:"computeWorldVertices",value:function(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new qA);for(var n=this.vertices,i=this.worldVertices,l=0;l!==this.vertices.length;l++)t.vmult(n[l],i[l]),e.vadd(i[l],i[l]);this.worldVerticesNeedsUpdate=!1}},{key:"computeLocalAABB",value:function(e,t){var n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<this.vertices.length;i++){var l=n[i];l.x<e.x?e.x=l.x:l.x>t.x&&(t.x=l.x),l.y<e.y?e.y=l.y:l.y>t.y&&(t.y=l.y),l.z<e.z?e.z=l.z:l.z>t.z&&(t.z=l.z)}}},{key:"computeWorldFaceNormals",value:function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new qA);for(var n=this.faceNormals,i=this.worldFaceNormals,l=0;l!==t;l++)e.vmult(n[l],i[l]);this.worldFaceNormalsNeedsUpdate=!1}},{key:"updateBoundingSphereRadius",value:function(){for(var e=0,t=this.vertices,n=0;n!==t.length;n++){var i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}},{key:"calculateWorldAABB",value:function(e,t,n,i){for(var l,a,r,o,g,s,I=this.vertices,u=new qA,c=0;c<I.length;c++){u.copy(I[c]),t.vmult(u,u),e.vadd(u,u);var C=u;(void 0===l||C.x<l)&&(l=C.x),(void 0===o||C.x>o)&&(o=C.x),(void 0===a||C.y<a)&&(a=C.y),(void 0===g||C.y>g)&&(g=C.y),(void 0===r||C.z<r)&&(r=C.z),(void 0===s||C.z>s)&&(s=C.z)}n.set(l,a,r),i.set(o,g,s)}},{key:"volume",value:function(){return 4*Math.PI*this.boundingSphereRadius/3}},{key:"getAveragePointLocal",value:function(e){void 0===e&&(e=new qA);for(var t=this.vertices,n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}},{key:"transformAllPoints",value:function(e,t){var n=this.vertices.length,i=this.vertices;if(t){for(var l=0;l<n;l++){var a=i[l];t.vmult(a,a)}for(var r=0;r<this.faceNormals.length;r++){var o=this.faceNormals[r];t.vmult(o,o)}}if(e)for(var g=0;g<n;g++){var s=i[g];s.vadd(e,s)}}},{key:"pointIsInside",value:function(e){var t=this.vertices,n=this.faces,i=this.faceNormals,l=new qA;this.getAveragePointLocal(l);for(var a=0;a<this.faces.length;a++){var r=i[a],o=t[n[a][0]],g=new qA;e.vsub(o,g);var s=r.dot(g),I=new qA;l.vsub(o,I);var u=r.dot(I);if(s<0&&u>0||s>0&&u<0)return!1}return-1}}],[{key:"computeNormal",value:function(e,t,n,i){var l=new qA,a=new qA;t.vsub(e,a),n.vsub(t,l),l.cross(a,i),i.isZero()||i.normalize()}},{key:"project",value:function(e,t,n,i,l){var a=e.vertices.length,r=_A,o=0,g=0,s=TA,I=e.vertices;s.setZero(),FA.vectorToLocalFrame(n,i,t,r),FA.pointToLocalFrame(n,i,s,s);var u=s.dot(r);g=o=I[0].dot(r);for(var c=1;c<a;c++){var C=I[c].dot(r);C>o&&(o=C),C<g&&(g=C)}if((g-=u)>(o-=u)){var d=g;g=o,o=d}l[0]=o,l[1]=g}}]),n}(KA),MA=[],LA=[];new qA;var _A=new qA,TA=new qA,EA=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,{type:KA.types.BOX})).halfExtents=e,i.convexPolyhedronRepresentation=null,i.updateConvexPolyhedronRepresentation(),i.updateBoundingSphereRadius(),i}return y(n,[{key:"updateConvexPolyhedronRepresentation",value:function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=qA,l=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],r=new zA({vertices:l,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=r,r.material=this.material}},{key:"calculateLocalInertia",value:function(e,t){return void 0===t&&(t=new qA),n.calculateInertia(this.halfExtents,e,t),t}},{key:"getSideNormals",value:function(e,t){var n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==t)for(var l=0;l!==n.length;l++)t.vmult(n[l],n[l]);return n}},{key:"volume",value:function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}},{key:"updateBoundingSphereRadius",value:function(){this.boundingSphereRadius=this.halfExtents.length()}},{key:"forEachWorldCorner",value:function(e,t,n){for(var i=this.halfExtents,l=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],a=0;a<l.length;a++)JA.set(l[a][0],l[a][1],l[a][2]),t.vmult(JA,JA),e.vadd(JA,JA),n(JA.x,JA.y,JA.z)}},{key:"calculateWorldAABB",value:function(e,t,n,i){var l=this.halfExtents;UA[0].set(l.x,l.y,l.z),UA[1].set(-l.x,l.y,l.z),UA[2].set(-l.x,-l.y,l.z),UA[3].set(-l.x,-l.y,-l.z),UA[4].set(l.x,-l.y,-l.z),UA[5].set(l.x,l.y,-l.z),UA[6].set(-l.x,l.y,-l.z),UA[7].set(l.x,-l.y,l.z);var a=UA[0];t.vmult(a,a),e.vadd(a,a),i.copy(a),n.copy(a);for(var r=1;r<8;r++){var o=UA[r];t.vmult(o,o),e.vadd(o,o);var g=o.x,s=o.y,I=o.z;g>i.x&&(i.x=g),s>i.y&&(i.y=s),I>i.z&&(i.z=I),g<n.x&&(n.x=g),s<n.y&&(n.y=s),I<n.z&&(n.z=I)}}}],[{key:"calculateInertia",value:function(e,t,n){var i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}}]),n}(KA),JA=new qA,UA=[new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA],DA=1,QA=2,PA=4,OA=0,jA=1,$A=2,em=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n),void 0===e&&(e={}),(i=t.call(this)).id=n.idCounter++,i.index=-1,i.world=null,i.vlambda=new qA,i.collisionFilterGroup="number"===typeof e.collisionFilterGroup?e.collisionFilterGroup:1,i.collisionFilterMask="number"===typeof e.collisionFilterMask?e.collisionFilterMask:-1,i.collisionResponse="boolean"!==typeof e.collisionResponse||e.collisionResponse,i.position=new qA,i.previousPosition=new qA,i.interpolatedPosition=new qA,i.initPosition=new qA,e.position&&(i.position.copy(e.position),i.previousPosition.copy(e.position),i.interpolatedPosition.copy(e.position),i.initPosition.copy(e.position)),i.velocity=new qA,e.velocity&&i.velocity.copy(e.velocity),i.initVelocity=new qA,i.force=new qA;var l="number"===typeof e.mass?e.mass:0;return i.mass=l,i.invMass=l>0?1/l:0,i.material=e.material||null,i.linearDamping="number"===typeof e.linearDamping?e.linearDamping:.01,i.type=l<=0?n.STATIC:n.DYNAMIC,typeof e.type===typeof n.STATIC&&(i.type=e.type),i.allowSleep="undefined"===typeof e.allowSleep||e.allowSleep,i.sleepState=n.AWAKE,i.sleepSpeedLimit="undefined"!==typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,i.sleepTimeLimit="undefined"!==typeof e.sleepTimeLimit?e.sleepTimeLimit:1,i.timeLastSleepy=0,i.wakeUpAfterNarrowphase=!1,i.torque=new qA,i.quaternion=new XA,i.initQuaternion=new XA,i.previousQuaternion=new XA,i.interpolatedQuaternion=new XA,e.quaternion&&(i.quaternion.copy(e.quaternion),i.initQuaternion.copy(e.quaternion),i.previousQuaternion.copy(e.quaternion),i.interpolatedQuaternion.copy(e.quaternion)),i.angularVelocity=new qA,e.angularVelocity&&i.angularVelocity.copy(e.angularVelocity),i.initAngularVelocity=new qA,i.shapes=[],i.shapeOffsets=[],i.shapeOrientations=[],i.inertia=new qA,i.invInertia=new qA,i.invInertiaWorld=new BA,i.invMassSolve=0,i.invInertiaSolve=new qA,i.invInertiaWorldSolve=new BA,i.fixedRotation="undefined"!==typeof e.fixedRotation&&e.fixedRotation,i.angularDamping="undefined"!==typeof e.angularDamping?e.angularDamping:.01,i.linearFactor=new qA(1,1,1),e.linearFactor&&i.linearFactor.copy(e.linearFactor),i.angularFactor=new qA(1,1,1),e.angularFactor&&i.angularFactor.copy(e.angularFactor),i.aabb=new SA,i.aabbNeedsUpdate=!0,i.boundingRadius=0,i.wlambda=new qA,i.isTrigger=Boolean(e.isTrigger),e.shape&&i.addShape(e.shape),i.updateMassProperties(),i}return y(n,[{key:"wakeUp",value:function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.wakeUpAfterNarrowphase=!1,e===n.SLEEPING&&this.dispatchEvent(n.wakeupEvent)}},{key:"sleep",value:function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}},{key:"sleepTick",value:function(e){if(this.allowSleep){var t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),l=Math.pow(this.sleepSpeedLimit,2);t===n.AWAKE&&i<l?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):t===n.SLEEPY&&i>l?this.wakeUp():t===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}}},{key:"updateSolveMassProperties",value:function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}},{key:"pointToLocalFrame",value:function(e,t){return void 0===t&&(t=new qA),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}},{key:"vectorToLocalFrame",value:function(e,t){return void 0===t&&(t=new qA),this.quaternion.conjugate().vmult(e,t),t}},{key:"pointToWorldFrame",value:function(e,t){return void 0===t&&(t=new qA),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new qA),this.quaternion.vmult(e,t),t}},{key:"addShape",value:function(e,t,n){var i=new qA,l=new XA;return t&&i.copy(t),n&&l.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(l),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}},{key:"removeShape",value:function(e){var t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}},{key:"updateBoundingRadius",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,l=0;l!==n;l++){var a=e[l];a.updateBoundingSphereRadius();var r=t[l].length(),o=a.boundingSphereRadius;r+o>i&&(i=r+o)}this.boundingRadius=i}},{key:"updateAABB",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,l=tm,a=nm,r=this.quaternion,o=this.aabb,g=im,s=0;s!==i;s++){var I=e[s];r.vmult(t[s],l),l.vadd(this.position,l),r.mult(n[s],a),I.calculateWorldAABB(l,a,g.lowerBound,g.upperBound),0===s?o.copy(g):o.extend(g)}this.aabbNeedsUpdate=!1}},{key:"updateInertiaWorld",value:function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=lm,i=am;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}else;}},{key:"applyForce",value:function(e,t){if(void 0===t&&(t=new qA),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=rm;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}}},{key:"applyLocalForce",value:function(e,t){if(void 0===t&&(t=new qA),this.type===n.DYNAMIC){var i=om,l=gm;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,l),this.applyForce(i,l)}}},{key:"applyTorque",value:function(e){this.type===n.DYNAMIC&&(this.sleepState===n.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}},{key:"applyImpulse",value:function(e,t){if(void 0===t&&(t=new qA),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=t,l=sm;l.copy(e),l.scale(this.invMass,l),this.velocity.vadd(l,this.velocity);var a=Im;i.cross(e,a),this.invInertiaWorld.vmult(a,a),this.angularVelocity.vadd(a,this.angularVelocity)}}},{key:"applyLocalImpulse",value:function(e,t){if(void 0===t&&(t=new qA),this.type===n.DYNAMIC){var i=um,l=cm;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,l),this.applyImpulse(i,l)}}},{key:"updateMassProperties",value:function(){var e=Cm;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),EA.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}},{key:"getVelocityAtWorldPoint",value:function(e,t){var n=new qA;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},{key:"integrate",value:function(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===n.DYNAMIC||this.type===n.KINEMATIC)&&this.sleepState!==n.SLEEPING){var l=this.velocity,a=this.angularVelocity,r=this.position,o=this.force,g=this.torque,s=this.quaternion,I=this.invMass,u=this.invInertiaWorld,c=this.linearFactor,C=I*e;l.x+=o.x*C*c.x,l.y+=o.y*C*c.y,l.z+=o.z*C*c.z;var d=u.elements,h=this.angularFactor,A=g.x*h.x,m=g.y*h.y,p=g.z*h.z;a.x+=e*(d[0]*A+d[1]*m+d[2]*p),a.y+=e*(d[3]*A+d[4]*m+d[5]*p),a.z+=e*(d[6]*A+d[7]*m+d[8]*p),r.x+=l.x*e,r.y+=l.y*e,r.z+=l.z*e,s.integrate(this.angularVelocity,e,this.angularFactor,s),t&&(i?s.normalizeFast():s.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}}]),n}(kA);em.idCounter=0,em.COLLIDE_EVENT_NAME="collide",em.DYNAMIC=DA,em.STATIC=QA,em.KINEMATIC=PA,em.AWAKE=OA,em.SLEEPY=jA,em.SLEEPING=$A,em.wakeupEvent={type:"wakeup"},em.sleepyEvent={type:"sleepy"},em.sleepEvent={type:"sleep"};var tm=new qA,nm=new XA,im=new SA,lm=new BA,am=new BA;new BA;var rm=new qA,om=new qA,gm=new qA,sm=new qA,Im=new qA,um=new qA,cm=new qA,Cm=new qA;new qA,new qA,new XA,new qA,new qA,new qA,new qA;var dm=function(){function e(){f(this,e),this.rayFromWorld=new qA,this.rayToWorld=new qA,this.hitNormalWorld=new qA,this.hitPointWorld=new qA,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return y(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,l,a,r){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=l,this.body=a,this.distance=r}}]),e}(),hm=1,Am=2,mm=4,pm=function(e,t,n,i,l,a,r){function o(e,t){f(this,o),void 0===e&&(e=new qA),void 0===t&&(t=new qA),this.from=e.clone(),this.to=t.clone(),this.direction=new qA,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=o.ANY,this.result=new dm,this.hasHit=!1,this.callback=function(e){}}return y(o,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:l,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:r,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||o.ANY,this.result=t.result||new dm,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(vm),fm.length=0,e.broadphase.aabbQuery(e,vm,fm),this.intersectBodies(fm),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=Gm,l=Bm,a=0,r=e.shapes.length;a<r;a++){var o=e.shapes[a];if((!n||o.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],l),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(o,l,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var l=function(e,t,n){n.vsub(e,Em);var i=Em.dot(t);return t.scale(i,Jm),Jm.vadd(e,Jm),n.distanceTo(Jm)}(this.from,this.direction,n);if(!(l>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,l){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,l)}},{key:"_intersectPlane",value:function(e,t,n,i,l){var a=this.from,r=this.to,o=this.direction,g=new qA(0,0,1);t.vmult(g,g);var s=new qA;a.vsub(n,s);var I=s.dot(g);if(r.vsub(n,s),!(I*s.dot(g)>0)&&!(a.distanceTo(r)<I)){var u=g.dot(o);if(!(Math.abs(u)<this.precision)){var c=new qA,C=new qA,d=new qA;a.vsub(n,c);var h=-g.dot(c)/u;o.scale(h,C),a.vadd(C,d),this.reportIntersection(g,d,l,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,l=this.from;t.x=Math.min(i.x,l.x),t.y=Math.min(i.y,l.y),t.z=Math.min(i.z,l.z),n.x=Math.max(i.x,l.x),n.y=Math.max(i.y,l.y),n.z=Math.max(i.z,l.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,l){e.data,e.elementSize;var a=Rm;a.from.copy(this.from),a.to.copy(this.to),FA.pointToLocalFrame(n,t,a.from,a.from),FA.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var r,o,g,s,I=Vm;r=o=0,g=s=e.data.length-1;var u=new SA;a.getAABB(u),e.getIndexOfPosition(u.lowerBound.x,u.lowerBound.y,I,!0),r=Math.max(r,I[0]),o=Math.max(o,I[1]),e.getIndexOfPosition(u.upperBound.x,u.upperBound.y,I,!0),g=Math.min(g,I[0]+1),s=Math.min(s,I[1]+1);for(var c=r;c<g;c++)for(var C=o;C<s;C++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(c,C,u),u.overlapsRay(a)){if(e.getConvexTrianglePillar(c,C,!1),FA.pointToWorldFrame(n,t,e.pillarOffset,Sm),this._intersectConvex(e.pillarConvex,t,Sm,i,l,Wm),this.result.shouldStop)return;e.getConvexTrianglePillar(c,C,!0),FA.pointToWorldFrame(n,t,e.pillarOffset,Sm),this._intersectConvex(e.pillarConvex,t,Sm,i,l,Wm)}}}},{key:"_intersectSphere",value:function(e,t,n,i,l){var a=this.from,r=this.to,o=e.radius,g=Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)+Math.pow(r.z-a.z,2),s=2*((r.x-a.x)*(a.x-n.x)+(r.y-a.y)*(a.y-n.y)+(r.z-a.z)*(a.z-n.z)),I=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(o,2),u=Math.pow(s,2)-4*g*I,c=km,C=Xm;if(!(u<0))if(0===u)a.lerp(r,u,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1);else{var d=(-s-Math.sqrt(u))/(2*g),h=(-s+Math.sqrt(u))/(2*g);if(d>=0&&d<=1&&(a.lerp(r,d,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(a.lerp(r,h,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,l,a){for(var r=Ym,g=Hm,s=a&&a.faceList||null,I=e.faces,u=e.vertices,c=e.faceNormals,C=this.direction,d=this.from,h=this.to,A=d.distanceTo(h),m=s?s.length:I.length,p=this.result,v=0;!p.shouldStop&&v<m;v++){var f=s?s[v]:v,b=I[f],y=c[f],G=t,B=n;g.copy(u[b[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(d,g),G.vmult(y,r);var Z=C.dot(r);if(!(Math.abs(Z)<this.precision)){var q=r.dot(g)/Z;if(!(q<0)){C.scale(q,Zm),Zm.vadd(d,Zm),qm.copy(u[b[0]]),G.vmult(qm,qm),B.vadd(qm,qm);for(var x=1;!p.shouldStop&&x<b.length-1;x++){xm.copy(u[b[x]]),wm.copy(u[b[x+1]]),G.vmult(xm,xm),G.vmult(wm,wm),B.vadd(xm,xm),B.vadd(wm,wm);var w=Zm.distanceTo(d);!o.pointInTriangle(Zm,qm,xm,wm)&&!o.pointInTriangle(Zm,xm,qm,wm)||w>A||this.reportIntersection(r,Zm,l,i,f)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,l,a){var r=Km,g=_m,s=Tm,I=Hm,u=Fm,c=Nm,C=zm,d=Lm,h=Mm,A=e.indices;e.vertices;var m=this.from,p=this.to,v=this.direction;s.position.copy(n),s.quaternion.copy(t),FA.vectorToLocalFrame(n,t,v,u),FA.pointToLocalFrame(n,t,m,c),FA.pointToLocalFrame(n,t,p,C),C.x*=e.scale.x,C.y*=e.scale.y,C.z*=e.scale.z,c.x*=e.scale.x,c.y*=e.scale.y,c.z*=e.scale.z,C.vsub(c,u),u.normalize();var f=c.distanceSquared(C);e.tree.rayQuery(this,s,g);for(var b=0,y=g.length;!this.result.shouldStop&&b!==y;b++){var G=g[b];e.getNormal(G,r),e.getVertex(A[3*G],qm),qm.vsub(c,I);var B=u.dot(r),Z=r.dot(I)/B;if(!(Z<0)){u.scale(Z,Zm),Zm.vadd(c,Zm),e.getVertex(A[3*G+1],xm),e.getVertex(A[3*G+2],wm);var q=Zm.distanceSquared(c);!o.pointInTriangle(Zm,xm,qm,wm)&&!o.pointInTriangle(Zm,qm,xm,wm)||q>f||(FA.vectorToWorldFrame(t,r,h),FA.pointToWorldFrame(n,t,Zm,d),this.reportIntersection(h,d,l,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,l){var a=this.from,r=this.to,g=a.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof l?l:-1,this.mode){case o.ALL:this.hasHit=!0,s.set(a,r,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case o.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(a,r,e,t,n,i,g));break;case o.ANY:this.hasHit=!0,s.hasHit=!0,s.set(a,r,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,Em),n.vsub(t,bm),e.vsub(t,ym);var l,a,r=Em.dot(Em),o=Em.dot(bm),g=Em.dot(ym),s=bm.dot(bm),I=bm.dot(ym);return(l=s*g-o*I)>=0&&(a=r*I-o*g)>=0&&l+a<r*s-o*o}}]),o}(KA.types.SPHERE,KA.types.PLANE,KA.types.BOX,KA.types.CYLINDER,KA.types.CONVEXPOLYHEDRON,KA.types.HEIGHTFIELD,KA.types.TRIMESH);pm.CLOSEST=hm,pm.ANY=Am,pm.ALL=mm;var vm=new SA,fm=[],bm=new qA,ym=new qA,Gm=new qA,Bm=new XA,Zm=new qA,qm=new qA,xm=new qA,wm=new qA;new qA,new dm;var Wm={faceList:[0]},Sm=new qA,Rm=new pm,Vm=[],km=new qA,Xm=new qA,Ym=new qA;new qA,new qA;var Hm=new qA,Km=new qA,Fm=new qA,Nm=new qA,zm=new qA,Mm=new qA,Lm=new qA;new SA;var _m=[],Tm=new FA,Em=new qA,Jm=new qA;new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA;var Um=y((function e(t){f(this,e),void 0===t&&(t={});var n="";"string"===typeof t&&(n=t,t={}),this.name=n,this.id=e.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}));Um.idCounter=0,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new pm,new qA,new qA,new qA,new qA(1,0,0),new qA(0,1,0),new qA(0,0,1),new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA;new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA;new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA;new qA,new SA,new qA,new SA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new SA,new qA,new FA,new SA;KA.types.SPHERE,KA.types.SPHERE,KA.types.PLANE,KA.types.BOX,KA.types.BOX,KA.types.SPHERE,KA.types.BOX,KA.types.PLANE,KA.types.BOX,KA.types.CONVEXPOLYHEDRON,KA.types.SPHERE,KA.types.CONVEXPOLYHEDRON,KA.types.PLANE,KA.types.CONVEXPOLYHEDRON,KA.types.BOX,KA.types.CONVEXPOLYHEDRON,KA.types.SPHERE,KA.types.HEIGHTFIELD,KA.types.BOX,KA.types.HEIGHTFIELD,KA.types.CONVEXPOLYHEDRON,KA.types.HEIGHTFIELD,KA.types.PARTICLE,KA.types.SPHERE,KA.types.PLANE,KA.types.PARTICLE,KA.types.BOX,KA.types.PARTICLE,KA.types.PARTICLE,KA.types.CONVEXPOLYHEDRON,KA.types.CYLINDER,KA.types.SPHERE,KA.types.CYLINDER,KA.types.PLANE,KA.types.CYLINDER,KA.types.BOX,KA.types.CYLINDER,KA.types.CONVEXPOLYHEDRON,KA.types.CYLINDER,KA.types.HEIGHTFIELD,KA.types.CYLINDER,KA.types.PARTICLE,KA.types.CYLINDER,KA.types.SPHERE,KA.types.TRIMESH,KA.types.PLANE,KA.types.TRIMESH,new qA,new qA,new qA,new qA,new qA,new XA,new XA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new SA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new XA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new qA,new SA,new pm;var Dm=globalThis.performance||{};if(!Dm.now){var Qm=Date.now();Dm.timing&&Dm.timing.navigationStart&&(Qm=Dm.timing.navigationStart),Dm.now=function(){return Date.now()-Qm}}new qA;var Pm=function(){function e(t){f(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return y(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new jm);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new jm);var n=this.elements,i=e.x,l=e.y,a=e.z;return t.x=n[0]*i+n[1]*l+n[2]*a,t.y=n[3]*i+n[4]*l+n[5]*a,t.z=n[6]*i+n[7]*l+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,l=t.elements,a=n.elements,r=i[0],o=i[1],g=i[2],s=i[3],I=i[4],u=i[5],c=i[6],C=i[7],d=i[8],h=l[0],A=l[1],m=l[2],p=l[3],v=l[4],f=l[5],b=l[6],y=l[7],G=l[8];return a[0]=r*h+o*p+g*b,a[1]=r*A+o*v+g*y,a[2]=r*m+o*f+g*G,a[3]=s*h+I*p+u*b,a[4]=s*A+I*v+u*y,a[5]=s*m+I*f+u*G,a[6]=c*h+C*p+d*b,a[7]=c*A+C*v+d*y,a[8]=c*m+C*f+d*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,l=n.elements,a=0;3!==a;a++)l[3*a+0]=t.x*i[3*a+0],l[3*a+1]=t.y*i[3*a+1],l[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new jm);var n,i,l=[];for(n=0;n<12;n++)l.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)l[n+4*i]=this.elements[n+3*i];l[3]=e.x,l[7]=e.y,l[11]=e.z;var a,r,o=3,g=o;do{if(0===l[(n=g-o)+4*n])for(i=n+1;i<g;i++)if(0!==l[n+4*i]){a=4;do{l[(r=4-a)+4*n]+=l[r+4*i]}while(--a);break}if(0!==l[n+4*n])for(i=n+1;i<g;i++){var s=l[n+4*i]/l[n+4*n];a=4;do{l[(r=4-a)+4*i]=r<=n?0:l[r+4*i]-l[r+4*n]*s}while(--a)}}while(--o);if(t.z=l[11]/l[10],t.y=(l[7]-l[6]*t.z)/l[5],t.x=(l[3]-l[2]*t.z-l[1]*t.y)/l[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,l=Om;for(n=0;n<3;n++)for(i=0;i<3;i++)l[n+6*i]=this.elements[n+3*i];l[3]=1,l[9]=0,l[15]=0,l[4]=0,l[10]=1,l[16]=0,l[5]=0,l[11]=0,l[17]=1;var a,r,o=3,g=o;do{if(0===l[(n=g-o)+6*n])for(i=n+1;i<g;i++)if(0!==l[n+6*i]){a=6;do{l[(r=6-a)+6*n]+=l[r+6*i]}while(--a);break}if(0!==l[n+6*n])for(i=n+1;i<g;i++){var s=l[n+6*i]/l[n+6*n];a=6;do{l[(r=6-a)+6*i]=r<=n?0:l[r+6*i]-l[r+6*n]*s}while(--a)}}while(--o);n=2;do{i=n-1;do{var I=l[n+6*i]/l[n+6*n];a=6;do{l[(r=6-a)+6*i]=l[r+6*i]-l[r+6*n]*I}while(--a)}while(i--)}while(--n);n=2;do{var u=1/l[n+6*n];a=6;do{l[(r=6-a)+6*n]=l[r+6*n]*u}while(--a)}while(n--);n=2;do{i=2;do{if(r=l[3+i+6*n],isNaN(r)||r===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,r)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,l=e.w,a=t+t,r=n+n,o=i+i,g=t*a,s=t*r,I=t*o,u=n*r,c=n*o,C=i*o,d=l*a,h=l*r,A=l*o,m=this.elements;return m[0]=1-(u+C),m[1]=s-A,m[2]=I+h,m[3]=s+A,m[4]=1-(g+C),m[5]=c-d,m[6]=I-h,m[7]=c+d,m[8]=1-(g+u),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,l=t.elements;return l[0]=i[0],l[4]=i[4],l[8]=i[8],n=i[1],l[1]=i[3],l[3]=n,n=i[2],l[2]=i[6],l[6]=n,n=i[5],l[5]=i[7],l[7]=n,t}}]),e}(),Om=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],jm=function(){function e(t,n,i){f(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return y(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,l=t.y,a=t.z,r=this.x,o=this.y,g=this.z;return n.x=o*a-g*l,n.y=g*i-r*a,n.z=r*l-o*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new Pm([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var l=1/i;this.x*=l,this.y*=l,this.z*=l}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,l=this.z,a=Math.sqrt(n*n+i*i+l*l);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=l*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.x,a=e.y,r=e.z;return Math.sqrt((l-t)*(l-t)+(a-n)*(a-n)+(r-i)*(r-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,l=e.x,a=e.y,r=e.z;return(l-t)*(l-t)+(a-n)*(a-n)+(r-i)*(r-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,l=this.y,a=this.z;return n.x=t*i,n.y=t*l,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=$m,l=1/n;i.set(this.x*l,this.y*l,this.z*l);var a=ep;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,l=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=l+(e.y-l)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(tp),tp.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();jm.ZERO=new jm(0,0,0),jm.UNIT_X=new jm(1,0,0),jm.UNIT_Y=new jm(0,1,0),jm.UNIT_Z=new jm(0,0,1);var $m=new jm,ep=new jm,tp=new jm,np=function(){function e(t){f(this,e),void 0===t&&(t={}),this.lowerBound=new jm,this.upperBound=new jm,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return y(e,[{key:"setFromPoints",value:function(e,t,n,i){var l=this.lowerBound,a=this.upperBound,r=n;l.copy(e[0]),r&&r.vmult(l,l),a.copy(l);for(var o=1;o<e.length;o++){var g=e[o];r&&(r.vmult(g,ip),g=ip),g.x>a.x&&(a.x=g.x),g.x<l.x&&(l.x=g.x),g.y>a.y&&(a.y=g.y),g.y<l.y&&(l.y=g.y),g.z>a.z&&(a.z=g.z),g.z<l.z&&(l.z=g.z)}return t&&(t.vadd(l,l),t.vadd(a,a)),i&&(l.x-=i,l.y-=i,l.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,l=e.upperBound,a=i.x<=n.x&&n.x<=l.x||t.x<=l.x&&l.x<=n.x,r=i.y<=n.y&&n.y<=l.y||t.y<=l.y&&l.y<=n.y,o=i.z<=n.z&&n.z<=l.z||t.z<=l.z&&l.z<=n.z;return a&&r&&o}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,l=e.upperBound;return t.x<=i.x&&n.x>=l.x&&t.y<=i.y&&n.y>=l.y&&t.z<=i.z&&n.z>=l.z}},{key:"getCorners",value:function(e,t,n,i,l,a,r,o){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),l.set(s.x,g.y,s.z),a.set(g.x,s.y,g.z),r.set(g.x,g.y,s.z),o.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=lp,i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=n[5],s=n[6],I=n[7];this.getCorners(i,l,a,r,o,g,s,I);for(var u=0;8!==u;u++){var c=n[u];e.pointToLocal(c,c)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=lp,i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=n[5],s=n[6],I=n[7];this.getCorners(i,l,a,r,o,g,s,I);for(var u=0;8!==u;u++){var c=n[u];e.pointToWorld(c,c)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,l=1/t.y,a=1/t.z,r=(this.lowerBound.x-n.x)*i,o=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*l,s=(this.upperBound.y-n.y)*l,I=(this.lowerBound.z-n.z)*a,u=(this.upperBound.z-n.z)*a,c=Math.max(Math.max(Math.min(r,o),Math.min(g,s)),Math.min(I,u)),C=Math.min(Math.min(Math.max(r,o),Math.max(g,s)),Math.max(I,u));return!(C<0)&&!(c>C)}}]),e}(),ip=new jm,lp=[new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm],ap=function(){function e(t,n,i,l){f(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===l&&(l=1),this.x=t,this.y=n,this.z=i,this.w=l}return y(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new jm),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=rp,i=op;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var l=e.cross(t);this.x=l.x,this.y=l.y,this.z=l.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,l=this.y,a=this.z,r=this.w,o=t.x,g=t.y,s=t.z,I=t.w;return n.x=i*I+r*o+l*s-a*g,n.y=l*I+r*g+a*o-i*s,n.z=a*I+r*s+i*g-l*o,n.w=r*I-i*o-l*g-a*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,l=this.z,a=this.w;this.conjugate(t);var r=1/(n*n+i*i+l*l+a*a);return t.x*=r,t.y*=r,t.z*=r,t.w*=r,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new jm);var n=e.x,i=e.y,l=e.z,a=this.x,r=this.y,o=this.z,g=this.w,s=g*n+r*l-o*i,I=g*i+o*n-a*l,u=g*l+a*i-r*n,c=-a*n-r*i-o*l;return t.x=s*g+c*-a+I*-o-u*-r,t.y=I*g+c*-r+u*-a-s*-o,t.z=u*g+c*-o+s*-r-I*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,l;void 0===t&&(t="YZX");var a=this.x,r=this.y,o=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=a*r+o*g;if(s>.499&&(n=2*Math.atan2(a,g),i=Math.PI/2,l=0),s<-.499&&(n=-2*Math.atan2(a,g),i=-Math.PI/2,l=0),void 0===n){var I=a*a,u=r*r,c=o*o;n=Math.atan2(2*r*g-2*a*o,1-2*u-2*c),i=Math.asin(2*s),l=Math.atan2(2*a*g-2*r*o,1-2*I-2*c)}e.y=n,e.z=i,e.x=l}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var l=Math.cos(e/2),a=Math.cos(t/2),r=Math.cos(n/2),o=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r-o*g*s):"YXZ"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r+o*g*s):"ZXY"===i?(this.x=o*a*r-l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r-o*g*s):"ZYX"===i?(this.x=o*a*r-l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r+o*g*s):"YZX"===i?(this.x=o*a*r+l*g*s,this.y=l*g*r+o*a*s,this.z=l*a*s-o*g*r,this.w=l*a*r-o*g*s):"XZY"===i&&(this.x=o*a*r-l*g*s,this.y=l*g*r-o*a*s,this.z=l*a*s+o*g*r,this.w=l*a*r+o*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var l,a,r,o,g,s=this.x,I=this.y,u=this.z,c=this.w,C=t.x,d=t.y,h=t.z,A=t.w;return(a=s*C+I*d+u*h+c*A)<0&&(a=-a,C=-C,d=-d,h=-h,A=-A),1-a>1e-6?(l=Math.acos(a),r=Math.sin(l),o=Math.sin((1-n)*l)/r,g=Math.sin(n*l)/r):(o=1-n,g=n),i.x=o*s+g*C,i.y=o*I+g*d,i.z=o*u+g*h,i.w=o*c+g*A,i}},{key:"integrate",value:function(t,n,i,l){void 0===l&&(l=new e);var a=t.x*i.x,r=t.y*i.y,o=t.z*i.z,g=this.x,s=this.y,I=this.z,u=this.w,c=.5*n;return l.x+=c*(a*u+r*I-o*s),l.y+=c*(r*u+o*g-a*I),l.z+=c*(o*u+a*s-r*g),l.w+=c*(-a*g-r*s-o*I),l}}]),e}(),rp=new jm,op=new jm,gp=function(){function e(t){f(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return y(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();gp.idCounter=0,gp.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var sp=function(){function e(t){f(this,e),void 0===t&&(t={}),this.position=new jm,this.quaternion=new ap,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return y(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new jm),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new jm),n.vsub(e,i),t.conjugate(Ip),Ip.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new jm),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new jm),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new jm),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),Ip=new ap;new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new ap,new np,new Pm,new Pm,new Pm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new ap,new jm,new jm,new jm,new jm;var up=function(){function e(){f(this,e),this.rayFromWorld=new jm,this.rayToWorld=new jm,this.hitNormalWorld=new jm,this.hitPointWorld=new jm,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return y(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,l,a,r){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=l,this.body=a,this.distance=r}}]),e}(),cp=1,Cp=2,dp=4,hp=function(e,t,n,i,l,a,r){function o(e,t){f(this,o),void 0===e&&(e=new jm),void 0===t&&(t=new jm),this.from=e.clone(),this.to=t.clone(),this.direction=new jm,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=o.ANY,this.result=new up,this.hasHit=!1,this.callback=function(e){}}return y(o,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:l,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:r,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||o.ANY,this.result=t.result||new up,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Ap),mp.length=0,e.broadphase.aabbQuery(e,Ap,mp),this.intersectBodies(mp),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=fp,l=bp,a=0,r=e.shapes.length;a<r;a++){var o=e.shapes[a];if((!n||o.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],l),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(o,l,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var l=function(e,t,n){n.vsub(e,Lp);var i=Lp.dot(t);return t.scale(i,_p),_p.vadd(e,_p),n.distanceTo(_p)}(this.from,this.direction,n);if(!(l>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,l){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,l)}},{key:"_intersectPlane",value:function(e,t,n,i,l){var a=this.from,r=this.to,o=this.direction,g=new jm(0,0,1);t.vmult(g,g);var s=new jm;a.vsub(n,s);var I=s.dot(g);if(r.vsub(n,s),!(I*s.dot(g)>0)&&!(a.distanceTo(r)<I)){var u=g.dot(o);if(!(Math.abs(u)<this.precision)){var c=new jm,C=new jm,d=new jm;a.vsub(n,c);var h=-g.dot(c)/u;o.scale(h,C),a.vadd(C,d),this.reportIntersection(g,d,l,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,l=this.from;t.x=Math.min(i.x,l.x),t.y=Math.min(i.y,l.y),t.z=Math.min(i.z,l.z),n.x=Math.max(i.x,l.x),n.y=Math.max(i.y,l.y),n.z=Math.max(i.z,l.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,l){e.data,e.elementSize;var a=wp;a.from.copy(this.from),a.to.copy(this.to),sp.pointToLocalFrame(n,t,a.from,a.from),sp.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var r,o,g,s,I=Wp;r=o=0,g=s=e.data.length-1;var u=new np;a.getAABB(u),e.getIndexOfPosition(u.lowerBound.x,u.lowerBound.y,I,!0),r=Math.max(r,I[0]),o=Math.max(o,I[1]),e.getIndexOfPosition(u.upperBound.x,u.upperBound.y,I,!0),g=Math.min(g,I[0]+1),s=Math.min(s,I[1]+1);for(var c=r;c<g;c++)for(var C=o;C<s;C++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(c,C,u),u.overlapsRay(a)){if(e.getConvexTrianglePillar(c,C,!1),sp.pointToWorldFrame(n,t,e.pillarOffset,xp),this._intersectConvex(e.pillarConvex,t,xp,i,l,qp),this.result.shouldStop)return;e.getConvexTrianglePillar(c,C,!0),sp.pointToWorldFrame(n,t,e.pillarOffset,xp),this._intersectConvex(e.pillarConvex,t,xp,i,l,qp)}}}},{key:"_intersectSphere",value:function(e,t,n,i,l){var a=this.from,r=this.to,o=e.radius,g=Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2)+Math.pow(r.z-a.z,2),s=2*((r.x-a.x)*(a.x-n.x)+(r.y-a.y)*(a.y-n.y)+(r.z-a.z)*(a.z-n.z)),I=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(o,2),u=Math.pow(s,2)-4*g*I,c=Sp,C=Rp;if(!(u<0))if(0===u)a.lerp(r,u,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1);else{var d=(-s-Math.sqrt(u))/(2*g),h=(-s+Math.sqrt(u))/(2*g);if(d>=0&&d<=1&&(a.lerp(r,d,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(a.lerp(r,h,c),c.vsub(n,C),C.normalize(),this.reportIntersection(C,c,l,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,l,a){for(var r=Vp,g=kp,s=a&&a.faceList||null,I=e.faces,u=e.vertices,c=e.faceNormals,C=this.direction,d=this.from,h=this.to,A=d.distanceTo(h),m=s?s.length:I.length,p=this.result,v=0;!p.shouldStop&&v<m;v++){var f=s?s[v]:v,b=I[f],y=c[f],G=t,B=n;g.copy(u[b[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(d,g),G.vmult(y,r);var Z=C.dot(r);if(!(Math.abs(Z)<this.precision)){var q=r.dot(g)/Z;if(!(q<0)){C.scale(q,yp),yp.vadd(d,yp),Gp.copy(u[b[0]]),G.vmult(Gp,Gp),B.vadd(Gp,Gp);for(var x=1;!p.shouldStop&&x<b.length-1;x++){Bp.copy(u[b[x]]),Zp.copy(u[b[x+1]]),G.vmult(Bp,Bp),G.vmult(Zp,Zp),B.vadd(Bp,Bp),B.vadd(Zp,Zp);var w=yp.distanceTo(d);!o.pointInTriangle(yp,Gp,Bp,Zp)&&!o.pointInTriangle(yp,Bp,Gp,Zp)||w>A||this.reportIntersection(r,yp,l,i,f)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,l,a){var r=Xp,g=zp,s=Mp,I=kp,u=Yp,c=Hp,C=Kp,d=Np,h=Fp,A=e.indices;e.vertices;var m=this.from,p=this.to,v=this.direction;s.position.copy(n),s.quaternion.copy(t),sp.vectorToLocalFrame(n,t,v,u),sp.pointToLocalFrame(n,t,m,c),sp.pointToLocalFrame(n,t,p,C),C.x*=e.scale.x,C.y*=e.scale.y,C.z*=e.scale.z,c.x*=e.scale.x,c.y*=e.scale.y,c.z*=e.scale.z,C.vsub(c,u),u.normalize();var f=c.distanceSquared(C);e.tree.rayQuery(this,s,g);for(var b=0,y=g.length;!this.result.shouldStop&&b!==y;b++){var G=g[b];e.getNormal(G,r),e.getVertex(A[3*G],Gp),Gp.vsub(c,I);var B=u.dot(r),Z=r.dot(I)/B;if(!(Z<0)){u.scale(Z,yp),yp.vadd(c,yp),e.getVertex(A[3*G+1],Bp),e.getVertex(A[3*G+2],Zp);var q=yp.distanceSquared(c);!o.pointInTriangle(yp,Bp,Gp,Zp)&&!o.pointInTriangle(yp,Gp,Bp,Zp)||q>f||(sp.vectorToWorldFrame(t,r,h),sp.pointToWorldFrame(n,t,yp,d),this.reportIntersection(h,d,l,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,l){var a=this.from,r=this.to,g=a.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof l?l:-1,this.mode){case o.ALL:this.hasHit=!0,s.set(a,r,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case o.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(a,r,e,t,n,i,g));break;case o.ANY:this.hasHit=!0,s.hasHit=!0,s.set(a,r,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,Lp),n.vsub(t,pp),e.vsub(t,vp);var l,a,r=Lp.dot(Lp),o=Lp.dot(pp),g=Lp.dot(vp),s=pp.dot(pp),I=pp.dot(vp);return(l=s*g-o*I)>=0&&(a=r*I-o*g)>=0&&l+a<r*s-o*o}}]),o}(gp.types.SPHERE,gp.types.PLANE,gp.types.BOX,gp.types.CYLINDER,gp.types.CONVEXPOLYHEDRON,gp.types.HEIGHTFIELD,gp.types.TRIMESH);hp.CLOSEST=cp,hp.ANY=Cp,hp.ALL=dp;var Ap=new np,mp=[],pp=new jm,vp=new jm,fp=new jm,bp=new ap,yp=new jm,Gp=new jm,Bp=new jm,Zp=new jm;new jm,new up;var qp={faceList:[0]},xp=new jm,wp=new hp,Wp=[],Sp=new jm,Rp=new jm,Vp=new jm;new jm,new jm;var kp=new jm,Xp=new jm,Yp=new jm,Hp=new jm,Kp=new jm,Fp=new jm,Np=new jm;new np;var zp=[],Mp=new sp,Lp=new jm,_p=new jm;new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new hp,new jm,new jm,new jm,new jm(1,0,0),new jm(0,1,0),new jm(0,0,1),new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new np,new jm,new np,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new np,new jm,new sp,new np,gp.types.SPHERE,gp.types.SPHERE,gp.types.PLANE,gp.types.BOX,gp.types.BOX,gp.types.SPHERE,gp.types.BOX,gp.types.PLANE,gp.types.BOX,gp.types.CONVEXPOLYHEDRON,gp.types.SPHERE,gp.types.CONVEXPOLYHEDRON,gp.types.PLANE,gp.types.CONVEXPOLYHEDRON,gp.types.BOX,gp.types.CONVEXPOLYHEDRON,gp.types.SPHERE,gp.types.HEIGHTFIELD,gp.types.BOX,gp.types.HEIGHTFIELD,gp.types.CONVEXPOLYHEDRON,gp.types.HEIGHTFIELD,gp.types.PARTICLE,gp.types.SPHERE,gp.types.PLANE,gp.types.PARTICLE,gp.types.BOX,gp.types.PARTICLE,gp.types.PARTICLE,gp.types.CONVEXPOLYHEDRON,gp.types.CYLINDER,gp.types.SPHERE,gp.types.CYLINDER,gp.types.PLANE,gp.types.CYLINDER,gp.types.BOX,gp.types.CYLINDER,gp.types.CONVEXPOLYHEDRON,gp.types.CYLINDER,gp.types.HEIGHTFIELD,gp.types.CYLINDER,gp.types.PARTICLE,gp.types.CYLINDER,gp.types.SPHERE,gp.types.TRIMESH,gp.types.PLANE,gp.types.TRIMESH,new jm,new jm,new jm,new jm,new jm,new ap,new ap,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new np,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new ap,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new jm,new np,new hp;var Tp=globalThis.performance||{};if(!Tp.now){var Ep=Date.now();Tp.timing&&Tp.timing.navigationStart&&(Ep=Tp.timing.navigationStart),Tp.now=function(){return Date.now()-Ep}}new jm;var Jp=(0,i.createContext)(null),Up=(0,i.createContext)(null),Dp=function(){var e=(0,i.useContext)(Up);if(!e)throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider");return e};new Hi,new Ki(1,1,1),new Ki,new dl;var Qp=new Nl;function Pp(e){var t=(0,i.useRef)(null);return e&&"function"!==typeof e?e:t}function Op(e){return e.charAt(0).toUpperCase()+e.slice(1)}function jp(e,t){var n=void 0===t?"":"/".concat(t);return"function"===typeof e?null:e&&e.current&&"".concat(e.current.uuid).concat(n)}var $p=new Bl,ev=new Hi,tv=0;function nv(e,t,n,i,l,r){return void 0===r&&(r="bodies"),function(o){var g=tv++;n[g]=a({},i,o);var s=jp(e,l);return s&&t.subscribe({props:{id:g,target:r,type:i},uuid:s}),function(){delete n[g],t.unsubscribe({props:g})}}}function iv(e,t){var n,i,l=t.position,a=void 0===l?[0,0,0]:l,r=t.rotation,o=void 0===r?[0,0,0]:r,g=t.userData,s=void 0===g?{}:g;e.userData=s,(n=e.position).set.apply(n,v(a)),(i=e.rotation).set.apply(i,v(o)),e.updateMatrix()}function lv(e,t,n){var i=t.onCollide,l=t.onCollideBegin,a=t.onCollideEnd;e[n]={collide:i,collideBegin:l,collideEnd:a}}function av(e,t,n,l,r){void 0===l&&(l=null),void 0===r&&(r=[]);var g=Pp(l),s=Dp(),I=s.events,u=s.refs,c=s.scaleOverrides,d=s.subscriptions,h=s.worker,A=(0,i.useContext)(Jp);(0,i.useLayoutEffect)((function(){g.current||(g.current=new Nl);var i=g.current,l=h,a=i instanceof xs?(i.instanceMatrix.setUsage(Hn),i.count):1,r=i instanceof xs?new Array(a).fill(0).map((function(e,t){return"".concat(i.uuid,"/").concat(t)})):[i.uuid],s=i instanceof xs?r.map((function(l,a){var r=t(a);return iv(Qp,r),i.setMatrixAt(a,Qp.matrix),i.instanceMatrix.needsUpdate=!0,u[l]=i,null==A||A.add(l,r,e),lv(I,r,l),o(o({},r),{},{args:n(r.args)})})):r.map((function(l,a){var r=t(a);return iv(i,r),u[l]=i,null==A||A.add(l,r,e),lv(I,r,l),o(o({},r),{},{args:n(r.args)})}));return l.addBodies({props:s.map((function(e){var t=e.onCollide,n=(e.onCollideBegin,e.onCollideEnd,C(e,eA));return o({onCollide:Boolean(t)},n)})),type:e,uuid:r}),function(){r.forEach((function(e){delete u[e],null==A||A.remove(e),delete I[e]})),l.removeBodies({uuid:r})}}),r);var p=(0,i.useMemo)((function(){var e=function(e,t){var n="set".concat(Op(e));return{set:function(e){var i=jp(g,t);i&&h[n]({props:e,uuid:i})},subscribe:nv(g,h,d,e,t)}},t=function(e){return{copy:function(t){var n=t.w,i=t.x,l=t.y,a=t.z,r=jp(g,e);r&&h.setQuaternion({props:[i,l,a,n],uuid:r})},set:function(t,n,i,l){var a=jp(g,e);a&&h.setQuaternion({props:[t,n,i,l],uuid:a})},subscribe:nv(g,h,d,"quaternion",e)}},n=function(e){return{copy:function(t){var n=t.x,i=t.y,l=t.z,a=jp(g,e);a&&h.setRotation({props:[n,i,l],uuid:a})},set:function(t,n,i){var l=jp(g,e);l&&h.setRotation({props:[t,n,i],uuid:l})},subscribe:function(t){var n=tv++,i="quaternion",l=jp(g,e);return d[n]=a({},i,function(e){return function(t){return e($p.setFromQuaternion(ev.fromArray(t)).toArray())}}(t)),l&&h.subscribe({props:{id:n,target:"bodies",type:i},uuid:l}),function(){delete d[n],h.unsubscribe({props:n})}}}},i=function(e,t){var n="set".concat(Op(e));return{copy:function(e){var i=e.x,l=e.y,a=e.z,r=jp(g,t);r&&h[n]({props:[i,l,a],uuid:r})},set:function(e,i,l){var a=jp(g,t);a&&h[n]({props:[e,i,l],uuid:a})},subscribe:nv(g,h,d,e,t)}};function l(l){return{allowSleep:e("allowSleep",l),angularDamping:e("angularDamping",l),angularFactor:i("angularFactor",l),angularVelocity:i("angularVelocity",l),applyForce:function(e,t){var n=jp(g,l);n&&h.applyForce({props:[e,t],uuid:n})},applyImpulse:function(e,t){var n=jp(g,l);n&&h.applyImpulse({props:[e,t],uuid:n})},applyLocalForce:function(e,t){var n=jp(g,l);n&&h.applyLocalForce({props:[e,t],uuid:n})},applyLocalImpulse:function(e,t){var n=jp(g,l);n&&h.applyLocalImpulse({props:[e,t],uuid:n})},applyTorque:function(e){var t=jp(g,l);t&&h.applyTorque({props:[e],uuid:t})},collisionFilterGroup:e("collisionFilterGroup",l),collisionFilterMask:e("collisionFilterMask",l),collisionResponse:e("collisionResponse",l),fixedRotation:e("fixedRotation",l),isTrigger:e("isTrigger",l),linearDamping:e("linearDamping",l),linearFactor:i("linearFactor",l),mass:e("mass",l),material:e("material",l),position:i("position",l),quaternion:t(l),rotation:n(l),scaleOverride:function(e){var t=jp(g,l);t&&(c[t]=m(Ki,v(e)))},sleep:function(){var e=jp(g,l);e&&h.sleep({uuid:e})},sleepSpeedLimit:e("sleepSpeedLimit",l),sleepTimeLimit:e("sleepTimeLimit",l),userData:e("userData",l),velocity:i("velocity",l),wakeUp:function(){var e=jp(g,l);e&&h.wakeUp({uuid:e})}}}var r={};return o(o({},l(void 0)),{},{at:function(e){return r[e]||(r[e]=l(e))}})}),[]);return[g,p]}function rv(e){return"string"===typeof e}var ov=new Ki,gv=new Ki(1,1,1),sv=new Hi,Iv=new dl;function uv(e,t,n,i,l){return void 0===i&&(i=gv),void 0!==e?(Iv.compose(ov.fromArray(t,3*e),sv.fromArray(n,4*e),i),l&&(l.matrixAutoUpdate=!1,l.matrix.copy(Iv)),Iv):Iv.identity()}function cv(e){var t=e.allowSleep,n=void 0!==t&&t,l=e.axisIndex,a=void 0===l?0:l,r=e.broadphase,g=void 0===r?"Naive":r,s=e.children,I=e.defaultContactMaterial,u=void 0===I?{contactEquationStiffness:1e6}:I,d=e.gravity,h=void 0===d?[0,-9.81,0]:d,A=e.isPaused,m=void 0!==A&&A,p=e.iterations,v=void 0===p?5:p,f=e.maxSubSteps,b=void 0===f?10:f,y=e.quatNormalizeFast,G=void 0!==y&&y,B=e.quatNormalizeSkip,Z=void 0===B?0:B,q=e.shouldInvalidate,x=void 0===q||q,w=e.size,W=void 0===w?1e3:w,S=e.solver,R=void 0===S?"GS":S,V=e.stepSize,k=void 0===V?1/60:V,X=e.tolerance,Y=void 0===X?.001:X,H=Bh().invalidate,K=c((0,i.useState)((function(){return{bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new GA({allowSleep:n,axisIndex:a,broadphase:g,defaultContactMaterial:u,gravity:h,iterations:v,quatNormalizeFast:G,quatNormalizeSkip:Z,size:W,solver:R,tolerance:Y})}})),1)[0],F=K.bodies,N=K.events,z=K.refs,M=K.scaleOverrides,L=K.subscriptions,_=K.worker,T=0,E=(0,i.useCallback)((function(e,t){m||(T+=t,_.step({maxSubSteps:b,stepSize:k,timeSinceLastCalled:T}),T=0)}),[m,b,k]),J=function(e){var t,n=e.body,i=e.contact,l=i.bi,a=i.bj,r=C(i,tA),g=e.target,s=C(e,nA),I=null==(t=N[g])?void 0:t.collide;I&&I(o({body:z[n],contact:o({bi:z[l],bj:z[a]},r),target:z[g]},s))},U=function(e){var t,n,i=e.bodyA,l=e.bodyB,a=null==(t=N[i])?void 0:t.collideBegin;a&&a({body:z[l],op:"event",target:z[i],type:"collideBegin"});var r=null==(n=N[l])?void 0:n.collideBegin;r&&r({body:z[i],op:"event",target:z[l],type:"collideBegin"})},D=function(e){var t,n,i=e.bodyA,l=e.bodyB,a=null==(t=N[i])?void 0:t.collideEnd;a&&a({body:z[l],op:"event",target:z[i],type:"collideEnd"});var r=null==(n=N[l])?void 0:n.collideEnd;r&&r({body:z[i],op:"event",target:z[l],type:"collideEnd"})},Q=function(e){for(var t=e.active,n=e.bodies,i=void 0===n?[]:n,l=e.observations,a=e.positions,r=e.quaternions,o=0;o<i.length;o++)F[i[o]]=o;if(l.forEach((function(e){var t=c(e,3),n=t[0],i=t[1],l=t[2],a=(L[n]||{})[l];a&&a(i)})),t){for(var g=0,s=Object.values(z);g<s.length;g++){var I=s[g];if(I instanceof xs)for(var u=0;u<I.count;u++){var C="".concat(I.uuid,"/").concat(u),d=F[C];void 0!==d&&(I.setMatrixAt(u,uv(d,a,r,M[C])),I.instanceMatrix.needsUpdate=!0)}else{var h=M[I.uuid]||I.scale;uv(F[I.uuid],a,r,h,I)}}x&&H()}},P=function(e){var t,n=e.body,i=e.ray,l=i.uuid,a=C(i,iA),r=C(e,lA),g=null==(t=N[l])?void 0:t.rayhit;g&&g(o({body:n?z[n]:null,ray:o({uuid:l},a)},r))};Zh(E),(0,i.useEffect)((function(){return _.connect(),_.init(),_.on("collide",J),_.on("collideBegin",U),_.on("collideEnd",D),_.on("frame",Q),_.on("rayhit",P),function(){_.terminate(),_.removeAllListeners()}}),[]),(0,i.useEffect)((function(){_.axisIndex=a}),[a]),(0,i.useEffect)((function(){_.broadphase=g}),[g]),(0,i.useEffect)((function(){_.gravity=h}),[h]),(0,i.useEffect)((function(){_.iterations=v}),[v]),(0,i.useEffect)((function(){_.tolerance=Y}),[Y]);var O=(0,i.useMemo)((function(){return{bodies:F,events:N,refs:z,scaleOverrides:M,subscriptions:L,worker:_}}),[F,N,z,L,_]);return(0,$h.jsx)(Up.Provider,{value:O,children:s})}var Cv=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).type=ot,i}return y(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var i=e.pos,l=-1,a=0,r="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));0>(l=o.indexOf("\n"))&&a<t&&i<e.byteLength;)r+=o,a+=o.length,i+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<l&&(!1!==n&&(e.pos+=a+l+1),r+o.slice(0,l))},i=function(e,t,n,i){var l=e[t+3],a=Math.pow(2,l-128)/255;n[i+0]=e[t+0]*a,n[i+1]=e[t+1]*a,n[i+2]=e[t+2]*a,n[i+3]=1},l=function(e,t,n,i){var l=e[t+3],a=Math.pow(2,l-128)/255;n[i+0]=Cd.toHalfFloat(Math.min(e[t+0]*a,65504)),n[i+1]=Cd.toHalfFloat(Math.min(e[t+1]*a,65504)),n[i+2]=Cd.toHalfFloat(Math.min(e[t+2]*a,65504)),n[i+3]=Cd.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;var r=function(e){var i,l,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,g=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(i=n(e)))return t(1,"no header found");if(!(l=i.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=l[1],s.string+=i+"\n";!1!==(i=n(e));)if(s.string+=i+"\n","#"!==i.charAt(0)){if((l=i.match(a))&&(s.gamma=parseFloat(l[1])),(l=i.match(r))&&(s.exposure=parseFloat(l[1])),(l=i.match(o))&&(s.valid|=2,s.format=l[1]),(l=i.match(g))&&(s.valid|=4,s.height=parseInt(l[1],10),s.width=parseInt(l[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=i+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==r){var o=r.width,g=r.height,s=function(e,n,i){var l=n;if(l<8||l>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(l!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var a=new Uint8Array(4*n*i);if(!a.length)return t(4,"unable to allocate buffer space");for(var r=0,o=0,g=4*l,s=new Uint8Array(4),I=new Uint8Array(g),u=i;u>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(s[0]=e[o++],s[1]=e[o++],s[2]=e[o++],s[3]=e[o++],2!=s[0]||2!=s[1]||(s[2]<<8|s[3])!=l)return t(3,"bad rgbe scanline format");for(var c=0,C=void 0;c<g&&o<e.byteLength;){var d=(C=e[o++])>128;if(d&&(C-=128),0===C||c+C>g)return t(3,"bad scanline data");if(d)for(var h=e[o++],A=0;A<C;A++)I[c++]=h;else I.set(e.subarray(o,o+C),c),c+=C,o+=C}for(var m=l,p=0;p<m;p++){var v=0;a[r]=I[p+v],v+=l,a[r+1]=I[p+v],v+=l,a[r+2]=I[p+v],v+=l,a[r+3]=I[p+v],r+=4}u--}return a}(a.subarray(a.pos),o,g);if(-1!==s){var I,u,c;switch(this.type){case rt:c=s.length/4;for(var C=new Float32Array(4*c),d=0;d<c;d++)i(s,4*d,C,4*d);I=C,u=rt;break;case ot:c=s.length/4;for(var h=new Uint16Array(4*c),A=0;A<c;A++)l(s,4*A,h,4*A);I=h,u=ot;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:o,height:g,data:I,header:r.string,gamma:r.gamma,exposure:r.exposure,format:undefined,type:u}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,i,l){return V(B(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case rt:case ot:e.encoding=In,e.minFilter=Qe,e.magFilter=Qe,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),i,l)}}]),n}(nc),dv={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},hv=["args","children"];function Av(e){var t=e+"BufferGeometry";return i.forwardRef((function(e,n){var l=e.args,a=e.children,r=C(e,hv);return i.createElement("mesh",Mh({ref:n},r),i.createElement(t,{attach:"geometry",args:l}),a)}))}Av("box"),Av("circle"),Av("cone"),Av("cylinder"),Av("sphere"),Av("plane"),Av("tube"),Av("torus"),Av("torusKnot"),Av("tetrahedron"),Av("ring"),Av("polyhedron");var mv=Av("icosahedron"),pv=(Av("octahedron"),Av("dodecahedron"),Av("extrude"),Av("lathe"),Av("capsule"),["background","scene"]),vv=function(e){return(t=e).current&&t.current.isScene?e.current:e;var t};function fv(e){var t=e.scene,n=e.background,l=void 0!==n&&n,a=e.map,r=Bh((function(e){return e.scene}));return i.useLayoutEffect((function(){if(a){var e=vv(t||r),n=e.background,i=e.environment;return"only"!==l&&(e.environment=a),l&&(e.background=a),function(){"only"!==l&&(e.environment=i),l&&(e.background=n)}}}),[r,t,a,l]),null}function bv(e){var t=e.files,n=void 0===t?["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"]:t,i=e.path,l=void 0===i?"":i,a=e.preset,r=void 0===a?void 0:a,o=e.encoding,g=void 0===o?void 0:o,s=e.extensions;if(r){if(!(r in dv))throw new Error("Preset must be one of: "+Object.keys(dv).join(", "));n=dv[r],l="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}var I=Array.isArray(n),u=xh(I?tc:Cv,I?[n]:n,(function(e){e.setPath(l),s&&s(e)})),c=I?u[0]:u;return c.mapping=I?He:Fe,c.encoding=(null!==g&&void 0!==g?g:I)?un:In,c}function yv(e){var t=e.background,n=void 0!==t&&t,l=e.scene,a=bv(C(e,pv)),r=Bh((function(e){return e.scene}));return i.useLayoutEffect((function(){var e=vv(l||r),t=e.background,i=e.environment;return"only"!==n&&(e.environment=a),n&&(e.background=a),function(){"only"!==n&&(e.environment=i),n&&(e.background=t)}}),[a,n,l,r]),null}function Gv(e){var t=e.children,n=e.near,l=void 0===n?1:n,a=e.far,r=void 0===a?1e3:a,o=e.resolution,g=void 0===o?256:o,s=e.frames,I=void 0===s?1:s,u=e.map,C=e.background,d=void 0!==C&&C,h=e.scene,A=e.files,m=e.path,p=e.preset,v=void 0===p?void 0:p,f=e.extensions,b=Bh((function(e){return e.gl})),y=Bh((function(e){return e.scene})),G=i.useRef(null),B=c(i.useState((function(){return new _g})),1)[0],Z=i.useMemo((function(){var e=new Pa(g);return e.texture.type=ot,e}),[g]);i.useLayoutEffect((function(){1===I&&G.current.update(b,B);var e=vv(h||y),t=e.background,n=e.environment;return"only"!==d&&(e.environment=Z.texture),d&&(e.background=Z.texture),function(){"only"!==d&&(e.environment=n),d&&(e.background=t)}}),[t,B,Z.texture,h,y,d,I,b]);var q=1;return Zh((function(){(I===1/0||q<I)&&(G.current.update(b,B),q++)})),i.createElement(i.Fragment,null,function(e,t,n){return i.createElement(zh,{key:t.uuid,children:e,container:t,state:n})}(i.createElement(i.Fragment,null,t,i.createElement("cubeCamera",{ref:G,args:[l,r,Z]}),A||v?i.createElement(yv,{background:!0,files:A,preset:v,path:m,extensions:f}):u?i.createElement(fv,{background:!0,map:u,extensions:f}):null),B))}function Bv(e){var t,n,l,a,r,o=bv(e),g=e.map||o,s=(r=g)&&r.isCubeTexture,I=i.useMemo((function(){var e,t,n=(null!==(e=s?null==(t=g.image[0])?void 0:t.width:g.image.width)&&void 0!==e?e:1024)/4,i=Math.floor(Math.log2(n)),l=Math.pow(2,i),a=3*Math.max(l,112),r=4*l;return[s?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/a),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/r),"#define CUBEUV_MAX_MIP ".concat(i,".0"),""]}),[]),u=i.useMemo((function(){return I.join("\n")+"#define GLSLIFY 1\n#define ENVMAP_TYPE_CUBE_UV\nvarying vec3 vWorldPosition;uniform float radius;uniform float height;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube cubemap;\n#else\nuniform sampler2D cubemap;\n#endif\nfloat diskIntersectWithBackFaceCulling(in vec3 ro,in vec3 rd,vec3 c,vec3 n,float r){float d=dot(rd,n);if(d>0.0)return 1e6;vec3 o=ro-c;float t=-dot(n,o)/d;vec3 q=o+rd*t;return(dot(q,q)<r*r)? t : 1e6;}float sphereIntersect(in vec3 ro,in vec3 rd,in vec3 ce,float ra){vec3 oc=ro-ce;float b=dot(oc,rd);float c=dot(oc,oc)-ra*ra;float h=b*b-c;if(h<0.0)-1.0;h=sqrt(h);return-b+h;}vec3 project(){vec3 p=normalize(vWorldPosition);vec3 camPos=cameraPosition;camPos.y-=height;float intersection=sphereIntersect(camPos,p,vec3(0.),radius);if(intersection>0.){vec3 h=vec3(0.0,-height,0.0);float intersection2=diskIntersectWithBackFaceCulling(camPos,p,h,vec3(0.0,1.0,0.0),radius);p=(camPos+min(intersection,intersection2)*p)/radius;}else{p=vec3(0.0,1.0,0.0);}return p;}\n#include <common>\n#include <cube_uv_reflection_fragment>\nvoid main(){vec3 projectedWorldPosition=project();\n#ifdef ENVMAP_TYPE_CUBE\nvec3 outcolor=textureCube(cubemap,projectedWorldPosition).rgb;\n#else\nvec3 direction=normalize(projectedWorldPosition);vec2 uv=equirectUv(direction);vec3 outcolor=texture2D(cubemap,uv).rgb;\n#endif\ngl_FragColor=vec4(outcolor,1.0);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}"}),[I]),c=i.useMemo((function(){return{cubemap:{value:null},height:{value:15},radius:{value:60}}}),[]),C=i.useRef(null),d=null==(t=e.ground)?void 0:t.height,h=null==(n=e.ground)?void 0:n.radius,A=null!==(l=null==(a=e.ground)?void 0:a.scale)&&void 0!==l?l:1e3;return i.useEffect((function(){d&&(C.current.uniforms.height.value=d)}),[d]),i.useEffect((function(){h&&(C.current.uniforms.radius.value=h)}),[h]),i.useEffect((function(){C.current.uniforms.cubemap.value=g}),[g]),i.createElement(i.Fragment,null,i.createElement(fv,Mh({},e,{map:g})),i.createElement(mv,{scale:A,args:[1,16]},i.createElement("shaderMaterial",{ref:C,side:J,vertexShader:"#define GLSLIFY 1\nvarying vec3 vWorldPosition;void main(){vec4 worldPosition=modelMatrix*vec4(position,1.0);vWorldPosition=worldPosition.xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragmentShader:u,uniforms:c})))}function Zv(e){return e.ground?i.createElement(Bv,e):e.map?i.createElement(fv,e):e.children?i.createElement(Gv,e):i.createElement(yv,e)}var qv,xv=function(e,t){return(e%t+t)%t},wv=function(e){G(n,e);var t=w(n);function n(e,i){var l;f(this,n),a(q(l=t.call(this)),"object",void 0),a(q(l),"domElement",void 0),a(q(l),"enabled",!0),a(q(l),"target",new Ki),a(q(l),"minDistance",0),a(q(l),"maxDistance",1/0),a(q(l),"minZoom",0),a(q(l),"maxZoom",1/0),a(q(l),"minPolarAngle",0),a(q(l),"maxPolarAngle",Math.PI),a(q(l),"minAzimuthAngle",-1/0),a(q(l),"maxAzimuthAngle",1/0),a(q(l),"enableDamping",!1),a(q(l),"dampingFactor",.05),a(q(l),"enableZoom",!0),a(q(l),"zoomSpeed",1),a(q(l),"enableRotate",!0),a(q(l),"rotateSpeed",1),a(q(l),"enablePan",!0),a(q(l),"panSpeed",1),a(q(l),"screenSpacePanning",!0),a(q(l),"keyPanSpeed",7),a(q(l),"autoRotate",!1),a(q(l),"autoRotateSpeed",2),a(q(l),"reverseOrbit",!1),a(q(l),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),a(q(l),"mouseButtons",{LEFT:Y.ROTATE,MIDDLE:Y.DOLLY,RIGHT:Y.PAN}),a(q(l),"touches",{ONE:H.ROTATE,TWO:H.DOLLY_PAN}),a(q(l),"target0",void 0),a(q(l),"position0",void 0),a(q(l),"zoom0",void 0),a(q(l),"_domElementKeyEvents",null),a(q(l),"getPolarAngle",void 0),a(q(l),"getAzimuthalAngle",void 0),a(q(l),"setPolarAngle",void 0),a(q(l),"setAzimuthalAngle",void 0),a(q(l),"getDistance",void 0),a(q(l),"listenToKeyEvents",void 0),a(q(l),"saveState",void 0),a(q(l),"reset",void 0),a(q(l),"update",void 0),a(q(l),"connect",void 0),a(q(l),"dispose",void 0),l.object=e,l.domElement=i,l.target0=l.target.clone(),l.position0=l.object.position.clone(),l.zoom0=l.object instanceof Ja?l.object.zoom:1,l.getPolarAngle=function(){return C.phi},l.getAzimuthalAngle=function(){return C.theta},l.setPolarAngle=function(e){var t=xv(e,2*Math.PI),n=C.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.phi=t-n,r.update()},l.setAzimuthalAngle=function(e){var t=xv(e,2*Math.PI),n=C.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.theta=t-n,r.update()},l.getDistance=function(){return r.object.position.distanceTo(r.target)},l.listenToKeyEvents=function(e){e.addEventListener("keydown",ee),l._domElementKeyEvents=e},l.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof Ja?r.object.zoom:1},l.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof Ja&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(o),r.update(),u=I.NONE},l.update=function(){var t=new Ki,n=(new Hi).setFromUnitVectors(e.up,new Ki(0,1,0)),i=n.clone().invert(),l=new Ki,a=new Hi,g=2*Math.PI;return function(){var e=r.object.position;t.copy(e).sub(r.target),t.applyQuaternion(n),C.setFromVector3(t),r.autoRotate&&u===I.NONE&&V(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(C.theta+=d.theta*r.dampingFactor,C.phi+=d.phi*r.dampingFactor):(C.theta+=d.theta,C.phi+=d.phi);var s=r.minAzimuthAngle,p=r.maxAzimuthAngle;return isFinite(s)&&isFinite(p)&&(s<-Math.PI?s+=g:s>Math.PI&&(s-=g),p<-Math.PI?p+=g:p>Math.PI&&(p-=g),C.theta=s<=p?Math.max(s,Math.min(p,C.theta)):C.theta>(s+p)/2?Math.max(s,C.theta):Math.min(p,C.theta)),C.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,C.phi)),C.makeSafe(),C.radius*=h,C.radius=Math.max(r.minDistance,Math.min(r.maxDistance,C.radius)),!0===r.enableDamping?r.target.addScaledVector(A,r.dampingFactor):r.target.add(A),t.setFromSpherical(C),t.applyQuaternion(i),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,A.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),A.set(0,0,0)),h=1,!!(m||l.distanceToSquared(r.object.position)>c||8*(1-a.dot(r.object.quaternion))>c)&&(r.dispatchEvent(o),l.copy(r.object.position),a.copy(r.object.quaternion),m=!1,!0)}}(),l.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=e,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",te),r.domElement.addEventListener("pointerdown",Q),r.domElement.addEventListener("pointercancel",j),r.domElement.addEventListener("wheel",$)},l.dispose=function(){var e,t,n,i,l,a;null===(e=r.domElement)||void 0===e||e.removeEventListener("contextmenu",te),null===(t=r.domElement)||void 0===t||t.removeEventListener("pointerdown",Q),null===(n=r.domElement)||void 0===n||n.removeEventListener("pointercancel",j),null===(i=r.domElement)||void 0===i||i.removeEventListener("wheel",$),null===(l=r.domElement)||void 0===l||l.ownerDocument.removeEventListener("pointermove",P),null===(a=r.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointerup",O),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",ee)};var r=q(l),o={type:"change"},g={type:"start"},s={type:"end"},I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},u=I.NONE,c=1e-6,C=new vC,d=new vC,h=1,A=new Ki,m=!1,p=new ri,v=new ri,b=new ri,y=new ri,G=new ri,B=new ri,Z=new ri,x=new ri,w=new ri,W=[],S={};function R(){return Math.pow(.95,r.zoomSpeed)}function V(e){r.reverseOrbit?d.theta+=e:d.theta-=e}function k(e){r.reverseOrbit?d.phi+=e:d.phi-=e}var X=function(){var e=new Ki;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),A.add(e)}}(),K=function(){var e=new Ki;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),A.add(e)}}(),F=function(){var e=new Ki;return function(t,n){var i=r.domElement;if(i&&r.object instanceof Ja&&r.object.isPerspectiveCamera){var l=r.object.position;e.copy(l).sub(r.target);var a=e.length();a*=Math.tan(r.object.fov/2*Math.PI/180),X(2*t*a/i.clientHeight,r.object.matrix),K(2*n*a/i.clientHeight,r.object.matrix)}else i&&r.object instanceof Ar&&r.object.isOrthographicCamera?(X(t*(r.object.right-r.object.left)/r.object.zoom/i.clientWidth,r.object.matrix),K(n*(r.object.top-r.object.bottom)/r.object.zoom/i.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function N(e){r.object instanceof Ja&&r.object.isPerspectiveCamera?h/=e:r.object instanceof Ar&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function z(e){r.object instanceof Ja&&r.object.isPerspectiveCamera?h*=e:r.object instanceof Ar&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function M(e){p.set(e.clientX,e.clientY)}function L(e){y.set(e.clientX,e.clientY)}function _(){if(1==W.length)p.set(W[0].pageX,W[0].pageY);else{var e=.5*(W[0].pageX+W[1].pageX),t=.5*(W[0].pageY+W[1].pageY);p.set(e,t)}}function T(){if(1==W.length)y.set(W[0].pageX,W[0].pageY);else{var e=.5*(W[0].pageX+W[1].pageX),t=.5*(W[0].pageY+W[1].pageY);y.set(e,t)}}function E(){var e=W[0].pageX-W[1].pageX,t=W[0].pageY-W[1].pageY,n=Math.sqrt(e*e+t*t);Z.set(0,n)}function J(e){if(1==W.length)v.set(e.pageX,e.pageY);else{var t=le(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}b.subVectors(v,p).multiplyScalar(r.rotateSpeed);var l=r.domElement;l&&(V(2*Math.PI*b.x/l.clientHeight),k(2*Math.PI*b.y/l.clientHeight)),p.copy(v)}function U(e){if(1==W.length)G.set(e.pageX,e.pageY);else{var t=le(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);G.set(n,i)}B.subVectors(G,y).multiplyScalar(r.panSpeed),F(B.x,B.y),y.copy(G)}function D(e){var t=le(e),n=e.pageX-t.x,i=e.pageY-t.y,l=Math.sqrt(n*n+i*i);x.set(0,l),w.set(0,Math.pow(x.y/Z.y,r.zoomSpeed)),N(w.y),Z.copy(x)}function Q(e){if(!1!==r.enabled){var t,n;if(0===W.length)null===(t=r.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",P),null===(n=r.domElement)||void 0===n||n.ownerDocument.addEventListener("pointerup",O);!function(e){W.push(e)}(e),"touch"===e.pointerType?function(e){switch(ie(e),W.length){case 1:switch(r.touches.ONE){case H.ROTATE:if(!1===r.enableRotate)return;_(),u=I.TOUCH_ROTATE;break;case H.PAN:if(!1===r.enablePan)return;T(),u=I.TOUCH_PAN;break;default:u=I.NONE}break;case 2:switch(r.touches.TWO){case H.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&E(),r.enablePan&&T(),u=I.TOUCH_DOLLY_PAN;break;case H.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&E(),r.enableRotate&&_(),u=I.TOUCH_DOLLY_ROTATE;break;default:u=I.NONE}break;default:u=I.NONE}u!==I.NONE&&r.dispatchEvent(g)}(e):function(e){var t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Y.DOLLY:if(!1===r.enableZoom)return;!function(e){Z.set(e.clientX,e.clientY)}(e),u=I.DOLLY;break;case Y.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;L(e),u=I.PAN}else{if(!1===r.enableRotate)return;M(e),u=I.ROTATE}break;case Y.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;M(e),u=I.ROTATE}else{if(!1===r.enablePan)return;L(e),u=I.PAN}break;default:u=I.NONE}u!==I.NONE&&r.dispatchEvent(g)}(e)}}function P(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(ie(e),u){case I.TOUCH_ROTATE:if(!1===r.enableRotate)return;J(e),r.update();break;case I.TOUCH_PAN:if(!1===r.enablePan)return;U(e),r.update();break;case I.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&D(e),r.enablePan&&U(e)}(e),r.update();break;case I.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&D(e),r.enableRotate&&J(e)}(e),r.update();break;default:u=I.NONE}}(e):function(e){if(!1===r.enabled)return;switch(u){case I.ROTATE:if(!1===r.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),b.subVectors(v,p).multiplyScalar(r.rotateSpeed);var t=r.domElement;t&&(V(2*Math.PI*b.x/t.clientHeight),k(2*Math.PI*b.y/t.clientHeight)),p.copy(v),r.update()}(e);break;case I.DOLLY:if(!1===r.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,Z),w.y>0?N(R()):w.y<0&&z(R()),Z.copy(x),r.update()}(e);break;case I.PAN:if(!1===r.enablePan)return;!function(e){G.set(e.clientX,e.clientY),B.subVectors(G,y).multiplyScalar(r.panSpeed),F(B.x,B.y),y.copy(G),r.update()}(e)}}(e))}function O(e){var t,n,i;(ne(e),0===W.length)&&(null===(t=r.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(n=r.domElement)||void 0===n||n.ownerDocument.removeEventListener("pointermove",P),null===(i=r.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",O));r.dispatchEvent(s),u=I.NONE}function j(e){ne(e)}function $(e){!1===r.enabled||!1===r.enableZoom||u!==I.NONE&&u!==I.ROTATE||(e.preventDefault(),r.dispatchEvent(g),function(e){e.deltaY<0?z(R()):e.deltaY>0&&N(R()),r.update()}(e),r.dispatchEvent(s))}function ee(e){!1!==r.enabled&&!1!==r.enablePan&&function(e){var t=!1;switch(e.code){case r.keys.UP:F(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:F(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:F(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:F(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function te(e){!1!==r.enabled&&e.preventDefault()}function ne(e){delete S[e.pointerId];for(var t=0;t<W.length;t++)if(W[t].pointerId==e.pointerId)return void W.splice(t,1)}function ie(e){var t=S[e.pointerId];void 0===t&&(t=new ri,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function le(e){var t=e.pointerId===W[0].pointerId?W[1]:W[0];return S[t.pointerId]}return void 0!==i&&l.connect(i),l.update(),l}return y(n)}(Un),Wv=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],Sv=i.forwardRef((function(e,t){var n=e.makeDefault,l=e.camera,a=e.regress,r=e.domElement,o=e.enableDamping,g=void 0===o||o,s=e.onChange,I=e.onStart,u=e.onEnd,c=C(e,Wv),d=Bh((function(e){return e.invalidate})),h=Bh((function(e){return e.camera})),A=Bh((function(e){return e.gl})),m=Bh((function(e){return e.events})),p=Bh((function(e){return e.set})),v=Bh((function(e){return e.get})),f=Bh((function(e){return e.performance})),b=l||h,y=r||m.connected||A.domElement,G=i.useMemo((function(){return new wv(b)}),[b]);return Zh((function(){G.enabled&&G.update()}),-1),i.useEffect((function(){return G.connect(y),function(){G.dispose()}}),[y,a,G,d]),i.useEffect((function(){var e=function(e){d(),a&&f.regress(),s&&s(e)};return G.addEventListener("change",e),I&&G.addEventListener("start",I),u&&G.addEventListener("end",u),function(){I&&G.removeEventListener("start",I),u&&G.removeEventListener("end",u),G.removeEventListener("change",e)}}),[s,I,u,G,d]),i.useEffect((function(){if(n){var e=v().controls;return p({controls:G}),function(){return p({controls:e})}}}),[n,G]),i.createElement("primitive",Mh({ref:t,object:G,enableDamping:g},c))})),Rv=new WeakMap,Vv=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return y(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:l.defaultAttributeIDs,attributeTypes:l.defaultAttributeTypes,useUniqueIDs:!1};l.decodeGeometry(e,n).then(t).catch(i)}),n,i)}},{key:"decodeDracoFile",value:function(e,t,n,i){var l={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,l).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var i in t.attributeTypes){var l=t.attributeTypes[i];void 0!==l.BYTES_PER_ELEMENT&&(t.attributeTypes[i]=l.name)}var a,r=JSON.stringify(t);if(Rv.has(e)){var o=Rv.get(e);if(o.key===r)return o.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var g=this.workerNextTaskID++,s=e.byteLength,I=this._getWorker(g,s).then((function(n){return a=n,new Promise((function(n,i){a._callbacks[g]={resolve:n,reject:i},a.postMessage({type:"decode",id:g,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return I.catch((function(){return!0})).then((function(){a&&g&&n._releaseTask(a,g)})),Rv.set(e,{key:r,promise:I}),I}},{key:"_createGeometry",value:function(e){var t=new fa;e.index&&t.setIndex(new na(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],l=i.name,a=i.array,r=i.itemSize;t.setAttribute(l,new na(a,r))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new Ou(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,i){n.load(e,t,void 0,i)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var i=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var l=kv.toString(),a=["/* draco decoder */",i,"","/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var i=new Worker(n.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:n.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(i)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var l=n.workerPool[n.workerPool.length-1];return l._taskCosts[e]=t,l._taskLoad+=t,l}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(Qu);function kv(){var e,t;function n(e,t,n,i,l,a){var r=a.num_components(),o=n.num_points()*r,g=o*l.BYTES_PER_ELEMENT,s=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,l),I=e._malloc(g);t.GetAttributeDataArrayForAllPoints(n,a,s,g,I);var u=new l(e.HEAPF32.buffer,I,o).slice();return e._free(I),{name:i,array:u,itemSize:r}}onmessage=function(i){var l=i.data;switch(l.type){case"init":e=l.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=l.buffer,r=l.taskConfig;t.then((function(e){var t=e.draco,i=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(a),a.byteLength);try{var g=function(e,t,i,l){var a,r,o=l.attributeIDs,g=l.attributeTypes,s=t.GetEncodedGeometryType(i);if(s===e.TRIANGULAR_MESH)a=new e.Mesh,r=t.DecodeBufferToMesh(i,a);else{if(s!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,r=t.DecodeBufferToPointCloud(i,a)}if(!r.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+r.error_msg());var I={index:null,attributes:[]};for(var u in o){var c=self[g[u]],C=void 0,d=void 0;if(l.useUniqueIDs)d=o[u],C=t.GetAttributeByUniqueId(a,d);else{if(-1===(d=t.GetAttributeId(a,e[o[u]])))continue;C=t.GetAttribute(a,d)}I.attributes.push(n(e,t,a,u,c,C))}s===e.TRIANGULAR_MESH&&(I.index=function(e,t,n){var i=3*n.num_faces(),l=4*i,a=e._malloc(l);t.GetTrianglesUInt32Array(n,l,a);var r=new Uint32Array(e.HEAPF32.buffer,a,i).slice();return e._free(a),{array:r,itemSize:1}}(e,t,a));return e.destroy(a),I}(t,i,o,r),s=g.attributes.map((function(e){return e.array.buffer}));g.index&&s.push(g.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:g},s)}catch(I){console.error(I),self.postMessage({type:"error",id:l.id,error:I.message})}finally{t.destroy(o),t.destroy(i)}}))}}}var Xv=function(){if(qv)return qv;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var l=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var l=e.charCodeAt(i);n[i]=l>96?l-71:l>64?l-65:l>47?l+4:l>46?63:62}for(var a=0,r=0;r<e.length;++r)n[a++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,a)}(i),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function a(e,t,i,l,a,r){var o=n.exports.sbrk,g=i+3&-4,s=o(g*l),I=o(a.length),u=new Uint8Array(n.exports.memory.buffer);u.set(a,I);var c=e(s,i,l,I,a.length);if(0===c&&r&&r(s,g,l),t.set(u.subarray(s,s+i*l)),o(s-o(0)),0!==c)throw new Error("Malformed buffer data: ".concat(c))}var r={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return qv={ready:l,supported:!0,decodeVertexBuffer:function(e,t,i,l,o){a(n.exports.meshopt_decodeVertexBuffer,e,t,i,l,n.exports[r[o]])},decodeIndexBuffer:function(e,t,i,l){a(n.exports.meshopt_decodeIndexBuffer,e,t,i,l)},decodeIndexSequence:function(e,t,i,l){a(n.exports.meshopt_decodeIndexSequence,e,t,i,l)},decodeGltfBuffer:function(e,t,i,l,g,s){a(n.exports[o[g]],e,t,i,l,n.exports[r[s]])}}},Yv=function(e){G(n,e);var t=w(n);function n(e){var i;return f(this,n),(i=t.call(this,e)).dracoLoader=null,i.ktx2Loader=null,i.meshoptDecoder=null,i.pluginCallbacks=[],i.register((function(e){return new zv(e)})),i.register((function(e){return new Jv(e)})),i.register((function(e){return new Uv(e)})),i.register((function(e){return new Mv(e)})),i.register((function(e){return new Lv(e)})),i.register((function(e){return new _v(e)})),i.register((function(e){return new Tv(e)})),i.register((function(e){return new Ev(e)})),i.register((function(e){return new Fv(e)})),i.register((function(e){return new Dv(e)})),i}return y(n,[{key:"load",value:function(e,t,n,i){var l,a=this;l=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Bc.extractUrlBase(e),this.manager.itemStart(e);var r=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},o=new Ou(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{a.parse(n,l,(function(n){t(n),a.manager.itemEnd(e)}),r)}catch($p){r($p)}}),n,r)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,i){var l,a={},r={};if("string"===typeof e)l=e;else if(Bc.decodeText(new Uint8Array(e,0,4))===Qv){try{a[Kv.KHR_BINARY_GLTF]=new jv(e)}catch(d){return void(i&&i(d))}l=a[Kv.KHR_BINARY_GLTF].content}else l=Bc.decodeText(new Uint8Array(e));var o=JSON.parse(l);if(void 0===o.asset||o.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var g=new Rf(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});g.fileLoader.setRequestHeader(this.requestHeader);for(var s=0;s<this.pluginCallbacks.length;s++){var I=this.pluginCallbacks[s](g);r[I.name]=I,a[I.name]=!0}if(o.extensionsUsed)for(var u=0;u<o.extensionsUsed.length;++u){var c=o.extensionsUsed[u],C=o.extensionsRequired||[];switch(c){case Kv.KHR_MATERIALS_UNLIT:a[c]=new Nv;break;case Kv.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[c]=new nf;break;case Kv.KHR_DRACO_MESH_COMPRESSION:a[c]=new $v(o,this.dracoLoader);break;case Kv.KHR_TEXTURE_TRANSFORM:a[c]=new ef;break;case Kv.KHR_MESH_QUANTIZATION:a[c]=new lf;break;default:C.indexOf(c)>=0&&void 0===r[c]&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}g.setExtensions(a),g.setPlugins(r),g.parse(n,i)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(i,l){n.parse(e,t,i,l)}))}}]),n}(Qu);function Hv(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Kv={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},Fv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return y(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var l=t[n];l.extensions&&l.extensions[this.name]&&void 0!==l.extensions[this.name].light&&e._addNodeRef(this.cache,l.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var l,a=t.json,r=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],o=new Gi(16777215);void 0!==r.color&&o.fromArray(r.color);var g=void 0!==r.range?r.range:0;switch(r.type){case"directional":(l=new pc(o)).target.position.set(0,0,-1),l.add(l.target);break;case"point":(l=new Ac(o)).distance=g;break;case"spot":(l=new uc(o)).distance=g,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,l.angle=r.spot.outerConeAngle,l.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return l.position.set(0,0,0),l.decay=2,void 0!==r.intensity&&(l.intensity=r.intensity),l.name=t.createUniqueName(r.name||"light_"+e),i=Promise.resolve(l),t.cache.add(n,i),i}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,i=n.json.nodes[e],l=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===l?null:this._loadLight(l).then((function(e){return n._getNodeRef(t.cache,l,e)}))}}]),e}(),Nv=function(){function e(){f(this,e),this.name=Kv.KHR_MATERIALS_UNLIT}return y(e,[{key:"getMaterialType",value:function(){return $l}},{key:"extendParams",value:function(e,t,n){var i=[];e.color=new Gi(1,1,1),e.opacity=1;var l=t.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){var a=l.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==l.baseColorTexture&&i.push(n.assignTexture(e,"map",l.baseColorTexture))}return Promise.all(i)}}]),e}(),zv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_CLEARCOAT}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var l=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&l.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&l.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(l.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var r=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ri(r,r)}return Promise.all(l)}}]),e}(),Mv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_SHEEN}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var l=[];t.sheenColor=new Gi(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&l.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),void 0!==a.sheenRoughnessTexture&&l.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(l)}}]),e}(),Lv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_TRANSMISSION}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var l=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&l.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(l)}}]),e}(),_v=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_VOLUME}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var l=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&l.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;var r=a.attenuationColor||[1,1,1];return t.attenuationColor=new Gi(r[0],r[1],r[2]),Promise.all(l)}}]),e}(),Tv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_IOR}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}]),e}(),Ev=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_MATERIALS_SPECULAR}return y(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Gu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var l=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&l.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var r=a.specularColorFactor||[1,1,1];return t.specularColor=new Gi(r[0],r[1],r[2]),void 0!==a.specularColorTexture&&l.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture).then((function(e){e.encoding=un}))),Promise.all(l)}}]),e}(),Jv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.KHR_TEXTURE_BASISU}return y(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var l=i.extensions[this.name],a=n.images[l.source],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,r)}}]),e}(),Uv=function(){function e(t){f(this,e),this.parser=t,this.name=Kv.EXT_TEXTURE_WEBP,this.isSupported=null}return y(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,l=i.textures[e];if(!l.extensions||!l.extensions[t])return null;var a=l.extensions[t],r=i.images[a.source],o=n.textureLoader;if(r.uri){var g=n.options.manager.getHandler(r.uri);null!==g&&(o=g)}return this.detectSupport().then((function(l){if(l)return n.loadTextureImage(e,r,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Dv=function(){function e(t){f(this,e),this.name=Kv.EXT_MESHOPT_COMPRESSION,this.parser=t}return y(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],l=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([l,a.ready]).then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,l=i.count,r=i.byteStride,o=new ArrayBuffer(l*r),g=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(o),l,r,g,i.mode,i.filter),o}))}return null}}]),e}(),Qv="glTF",Pv=1313821514,Ov=5130562,jv=y((function e(t){f(this,e),this.name=Kv.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Bc.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Qv)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,l=new DataView(t,12),a=0;a<i;){var r=l.getUint32(a,!0);a+=4;var o=l.getUint32(a,!0);if(a+=4,o===Pv){var g=new Uint8Array(t,12+a,r);this.content=Bc.decodeText(g)}else if(o===Ov){var s=12+a;this.body=t.slice(s,s+r)}a+=r}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),$v=function(){function e(t,n){if(f(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Kv.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return y(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,i=this.dracoLoader,l=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,r={},o={},g={};for(var s in a){var I=vf[s]||s.toLowerCase();r[I]=a[s]}for(var u in e.attributes){var c=vf[u]||u.toLowerCase();if(void 0!==a[u]){var C=n.accessors[e.attributes[u]],d=hf[C.componentType];g[c]=d,o[c]=!0===C.normalized}}return t.getDependency("bufferView",l).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],l=o[n];void 0!==l&&(i.normalized=l)}t(e)}),r,g)}))}))}}]),e}(),ef=function(){function e(){f(this,e),this.name=Kv.KHR_TEXTURE_TRANSFORM}return y(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),tf=function(e){G(n,e);var t=w(n);function n(e){var i;f(this,n),(i=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var l=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),g=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new Gi).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return i._extraUniforms=s,i.onBeforeCompile=function(e){for(var t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",l).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",g)},Object.defineProperties(q(i),{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete i.metalness,delete i.roughness,delete i.metalnessMap,delete i.roughnessMap,i.setValues(e),i}return y(n,[{key:"copy",value:function(e){return V(B(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(yu),nf=function(){function e(){f(this,e),this.name=Kv.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return y(e,[{key:"getMaterialType",value:function(){return tf}},{key:"extendParams",value:function(e,t,n){var i=t.extensions[this.name];e.color=new Gi(1,1,1),e.opacity=1;var l=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==i.diffuseTexture&&l.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new Gi(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new Gi(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var r=i.specularGlossinessTexture;l.push(n.assignTexture(e,"glossinessMap",r)),l.push(n.assignTexture(e,"specularMap",r))}return Promise.all(l)}},{key:"createMaterial",value:function(e){var t=new tf(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=dn,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),lf=y((function e(){f(this,e),this.name=Kv.KHR_MESH_QUANTIZATION})),af=function(e){G(n,e);var t=w(n);function n(e,i,l,a){return f(this,n),t.call(this,e,i,l,a)}return y(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,l=e*i*3+i,a=0;a!==i;a++)t[a]=n[l+a];return t}}]),n}(Ru);af.prototype.beforeStart_=af.prototype.copySampleValue_,af.prototype.afterEnd_=af.prototype.copySampleValue_,af.prototype.interpolate_=function(e,t,n,i){for(var l=this.resultBuffer,a=this.sampleValues,r=this.valueSize,o=2*r,g=3*r,s=i-t,I=(n-t)/s,u=I*I,c=u*I,C=e*g,d=C-g,h=-2*c+3*u,A=c-u,m=1-h,p=A-u+I,v=0;v!==r;v++){var f=a[d+v+r],b=a[d+v+o]*s,y=a[C+v+r],G=a[C+v]*s;l[v]=m*f+p*b+h*y+A*G}return l};var rf=new Hi,of=function(e){G(n,e);var t=w(n);function n(){return f(this,n),t.apply(this,arguments)}return y(n,[{key:"interpolate_",value:function(e,t,i,l){var a=V(B(n.prototype),"interpolate_",this).call(this,e,t,i,l);return rf.fromArray(a).normalize().toArray(a),a}}]),n}(af),gf=0,sf=1,If=2,uf=3,cf=4,Cf=5,df=6,hf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Af={9728:Te,9729:Qe,9984:Ee,9985:Pe,9986:Ue,9987:je},mf={33071:Le,33648:_e,10497:Me},pf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vf={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ff={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},bf={CUBICSPLINE:void 0,LINEAR:$t,STEP:jt},yf="OPAQUE",Gf="MASK",Bf="BLEND";function Zf(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function qf(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function xf(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var l=t.extras.targetNames;if(e.morphTargetInfluences.length===l.length){e.morphTargetDictionary={};for(var a=0,r=l.length;a<r;a++)e.morphTargetDictionary[l[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function wf(e){var t=e.extensions&&e.extensions[Kv.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+Wf(t.attributes):e.indices+":"+Wf(e.attributes)+":"+e.mode}function Wf(e){for(var t="",n=Object.keys(e).sort(),i=0,l=n.length;i<l;i++)t+=n[i]+":"+e[n[i]]+";";return t}function Sf(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var Rf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Hv,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new Rc(this.options.manager):this.textureLoader=new ic(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ou(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return y(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,i=this.json,l=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};Zf(l,a,i),qf(a,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,l=t.length;i<l;i++)for(var a=t[i].joints,r=0,o=a.length;r<o;r++)e[a[r]].isBone=!0;for(var g=0,s=e.length;g<s;g++){var I=e[g];void 0!==I.mesh&&(this._addNodeRef(this.meshCache,I.mesh),void 0!==I.skin&&(n[I.mesh].isSkinnedMesh=!0)),void 0!==I.camera&&this._addNodeRef(this.cameraCache,I.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var i=this;if(e.refs[t]<=1)return n;var l=n.clone();return function e(t,n){var l=i.associations.get(t);null!=l&&i.associations.set(n,l);var a,r=d(t.children.entries());try{for(r.s();!(a=r.n()).done;){var o=c(a.value,2),g=o[0];e(o[1],n.children[g])}}catch(s){r.e(s)}finally{r.f()}}(n,l),l.name+="_instance_"+e.uses[t]++,l}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var l=e(t[i]);l&&n.push(l)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Kv.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,l){n.load(Bc.resolveURL(t.uri,i.path),e,void 0,(function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var l=[];return void 0!==i.bufferView?l.push(this.getDependency("bufferView",i.bufferView)):l.push(null),void 0!==i.sparse&&(l.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(l).then((function(e){var l,a,r=e[0],o=pf[i.type],g=hf[i.componentType],s=g.BYTES_PER_ELEMENT,I=s*o,u=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,C=!0===i.normalized;if(c&&c!==I){var d=Math.floor(u/c),h="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+d+":"+i.count,A=t.cache.get(h);A||(l=new g(r,d*c,i.count*c/s),A=new Tg(l,c/s),t.cache.add(h,A)),a=new Jg(A,o,u%c/s,C)}else l=null===r?new g(i.count*o):new g(r,u,i.count*o),a=new na(l,o,C);if(void 0!==i.sparse){var m=pf.SCALAR,p=hf[i.sparse.indices.componentType],v=i.sparse.indices.byteOffset||0,f=i.sparse.values.byteOffset||0,b=new p(e[1],v,i.sparse.count*m),y=new g(e[2],f,i.sparse.count*o);null!==r&&(a=new na(a.array.slice(),a.itemSize,a.normalized));for(var G=0,B=b.length;G<B;G++){var Z=b[G];if(a.setX(Z,y[G*o]),o>=2&&a.setY(Z,y[G*o+1]),o>=3&&a.setZ(Z,y[G*o+2]),o>=4&&a.setW(Z,y[G*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,i=t.textures[e],l=t.images[i.source],a=this.textureLoader;if(l.uri){var r=n.manager.getHandler(l.uri);null!==r&&(a=r)}return this.loadTextureImage(e,l,a)}},{key:"loadTextureImage",value:function(e,t,n){var i=this,l=this.json,a=this.options,r=l.textures[e],o=(t.uri||t.bufferView)+":"+r.sampler;if(this.textureCache[o])return this.textureCache[o];var g=self.URL||self.webkitURL,s=t.uri||"",I=!1;if(void 0!==t.bufferView)s=i.getDependency("bufferView",t.bufferView).then((function(e){I=!0;var n=new Blob([e],{type:t.mimeType});return s=g.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(s).then((function(e){return new Promise((function(t,i){var l=t;!0===n.isImageBitmapLoader&&(l=function(e){var n=new wi(e);n.needsUpdate=!0,t(n)}),n.load(Bc.resolveURL(e,a.path),l,void 0,i)}))})).then((function(t){!0===I&&g.revokeObjectURL(s),t.flipY=!1,r.name&&(t.name=r.name);var n=(l.samplers||{})[r.sampler]||{};return t.magFilter=Af[n.magFilter]||Qe,t.minFilter=Af[n.minFilter]||je,t.wrapS=mf[n.wrapS]||Me,t.wrapT=mf[n.wrapT]||Me,i.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",s),null}));return this.textureCache[o]=u,u}},{key:"assignTexture",value:function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(l){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[Kv.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[Kv.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var r=i.associations.get(l);l=i.extensions[Kv.KHR_TEXTURE_TRANSFORM].extendTexture(l,a),i.associations.set(l,r)}}return e[t]=l,l}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,l=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var r="PointsMaterial:"+n.uuid,o=this.cache.get(r);o||(o=new Ns,jl.prototype.copy.call(o,n),o.color.copy(n.color),o.map=n.map,o.sizeAttenuation=!1,this.cache.add(r,o)),n=o}else if(e.isLine){var g="LineBasicMaterial:"+n.uuid,s=this.cache.get(g);s||(s=new ws,jl.prototype.copy.call(s,n),s.color.copy(n.color),this.cache.add(g,s)),n=s}if(i||l||a){var I="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(I+="specular-glossiness:"),i&&(I+="derivative-tangents:"),l&&(I+="vertex-colors:"),a&&(I+="flat-shading:");var u=this.cache.get(I);u||(u=n.clone(),l&&(u.vertexColors=!0),a&&(u.flatShading=!0),i&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(I,u),this.associations.set(u,this.associations.get(n))),n=u}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return yu}},{key:"loadMaterial",value:function(e){var t,n=this,i=this.json,l=this.extensions,a=i.materials[e],r={},o=a.extensions||{},g=[];if(o[Kv.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var s=l[Kv.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=s.getMaterialType(),g.push(s.extendParams(r,a,n))}else if(o[Kv.KHR_MATERIALS_UNLIT]){var I=l[Kv.KHR_MATERIALS_UNLIT];t=I.getMaterialType(),g.push(I.extendParams(r,a,n))}else{var u=a.pbrMetallicRoughness||{};if(r.color=new Gi(1,1,1),r.opacity=1,Array.isArray(u.baseColorFactor)){var c=u.baseColorFactor;r.color.fromArray(c),r.opacity=c[3]}void 0!==u.baseColorTexture&&g.push(n.assignTexture(r,"map",u.baseColorTexture)),r.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,r.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(g.push(n.assignTexture(r,"metalnessMap",u.metallicRoughnessTexture)),g.push(n.assignTexture(r,"roughnessMap",u.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),g.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,r)}))))}!0===a.doubleSided&&(r.side=U);var C=a.alphaMode||yf;if(C===Bf?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,C===Gf&&(r.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==$l&&(g.push(n.assignTexture(r,"normalMap",a.normalTexture)),r.normalScale=new ri(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;r.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==$l&&(g.push(n.assignTexture(r,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(r.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==$l&&(r.emissive=(new Gi).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==$l&&g.push(n.assignTexture(r,"emissiveMap",a.emissiveTexture)),Promise.all(g).then((function(){var i;return i=t===tf?l[Kv.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):new t(r),a.name&&(i.name=a.name),i.map&&(i.map.encoding=un),i.emissiveMap&&(i.emissiveMap.encoding=un),qf(i,a),n.associations.set(i,{materials:e}),a.extensions&&Zf(l,i,a),i}))}},{key:"createUniqueName",value:function(e){for(var t=gC.sanitizeNodeName(e||""),n=t,i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,i=this.primitiveCache;function l(e){return n[Kv.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return kf(n,e,t)}))}for(var a=[],r=0,o=e.length;r<o;r++){var g=e[r],s=wf(g),I=i[s];if(I)a.push(I.promise);else{var u=void 0;u=g.extensions&&g.extensions[Kv.KHR_DRACO_MESH_COMPRESSION]?l(g):kf(new fa,g,t),i[s]={primitive:g,promise:u},a.push(u)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t,n=this,i=this.json,l=this.extensions,a=i.meshes[e],r=a.primitives,o=[],g=0,s=r.length;g<s;g++){var I=void 0===r[g].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new yu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:E})),t.DefaultMaterial):this.getDependency("material",r[g].material);o.push(I)}return o.push(n.loadGeometries(r)),Promise.all(o).then((function(t){for(var i=t.slice(0,t.length-1),o=t[t.length-1],g=[],s=0,I=o.length;s<I;s++){var u=o[s],c=r[s],C=void 0,d=i[s];if(c.mode===cf||c.mode===Cf||c.mode===df||void 0===c.mode)!0!==(C=!0===a.isSkinnedMesh?new As(u,d):new Fa(u,d)).isSkinnedMesh||C.geometry.attributes.skinWeight.normalized||C.normalizeSkinWeights(),c.mode===Cf?C.geometry=Xf(C.geometry,gn):c.mode===df&&(C.geometry=Xf(C.geometry,sn));else if(c.mode===sf)C=new Ks(u,d);else if(c.mode===uf)C=new Xs(u,d);else if(c.mode===If)C=new Fs(u,d);else{if(c.mode!==gf)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);C=new Ts(u,d)}Object.keys(C.geometry.morphAttributes).length>0&&xf(C,a),C.name=n.createUniqueName(a.name||"mesh_"+e),qf(C,a),c.extensions&&Zf(l,C,c),n.assignFinalMaterial(C),g.push(C)}for(var h=0,A=g.length;h<A;h++)n.associations.set(g[h],{meshes:e,primitives:h});if(1===g.length)return g[0];var m=new Rg;n.associations.set(m,{meshes:e});for(var p=0,v=g.length;p<v;p++)m.add(g[p]);return m}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Ja(ai.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new Ar(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),qf(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],i=[],l=[],a=[],r=[],o=0,g=t.channels.length;o<g;o++){var s=t.channels[o],I=t.samplers[s.sampler],u=s.target,c=void 0!==u.node?u.node:u.id,C=void 0!==t.parameters?t.parameters[I.input]:I.input,d=void 0!==t.parameters?t.parameters[I.output]:I.output;n.push(this.getDependency("node",c)),i.push(this.getDependency("accessor",C)),l.push(this.getDependency("accessor",d)),a.push(I),r.push(u)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(l),Promise.all(a),Promise.all(r)]).then((function(n){for(var i=n[0],l=n[1],a=n[2],r=n[3],o=n[4],g=[],s=function(e,t){var n=i[e],s=l[e],I=a[e],u=r[e],c=o[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var C=void 0;switch(ff[c.path]){case ff.weights:C=Fu;break;case ff.rotation:C=zu;break;default:C=Lu}var d=n.name?n.name:n.uuid,h=void 0!==u.interpolation?bf[u.interpolation]:$t,A=[];ff[c.path]===ff.weights?n.traverse((function(e){e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)})):A.push(d);var m=I.array;if(I.normalized){for(var p=Sf(m.constructor),v=new Float32Array(m.length),f=0,b=m.length;f<b;f++)v[f]=m[f]*p;m=v}for(var y=0,G=A.length;y<G;y++){var B=new C(A[y]+"."+ff[c.path],s.array,m,h);"CUBICSPLINE"===u.interpolation&&(B.createInterpolant=function(e){return new(this instanceof zu?of:af)(this.times,this.values,this.getValueSize()/3,e)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(B)}},I=0,u=i.length;I<u;I++)s(I);var c=t.name?t.name:"animation_"+e;return new _u(c,void 0,g)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,i=this,l=t.nodes[e],a=l.name?i.createUniqueName(l.name):"";return function(){var t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==l.camera&&t.push(i.getDependency("camera",l.camera).then((function(e){return i._getNodeRef(i.cameraCache,l.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var r;if((r=!0===l.isBone?new ms:t.length>1?new Rg:1===t.length?t[0]:new Nl)!==t[0])for(var o=0,g=t.length;o<g;o++)r.add(t[o]);if(l.name&&(r.userData.name=l.name,r.name=a),qf(r,l),l.extensions&&Zf(n,r,l),void 0!==l.matrix){var s=new dl;s.fromArray(l.matrix),r.applyMatrix4(s)}else void 0!==l.translation&&r.position.fromArray(l.translation),void 0!==l.rotation&&r.quaternion.fromArray(l.rotation),void 0!==l.scale&&r.scale.fromArray(l.scale);return i.associations.has(r)||i.associations.set(r,{}),i.associations.get(r).nodes=e,r}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,i=this.json.scenes[e],l=this,a=new Rg;i.name&&(a.name=l.createUniqueName(i.name)),qf(a,i),i.extensions&&Zf(n,a,i);for(var r=i.nodes||[],o=[],g=0,s=r.length;g<s;g++)o.push(Vf(r[g],a,t,l));return Promise.all(o).then((function(){return l.associations=function(e){var t,n=new Map,i=d(l.associations);try{for(i.s();!(t=i.n()).done;){var a=c(t.value,2),r=a[0],o=a[1];(r instanceof jl||r instanceof wi)&&n.set(r,o)}}catch(g){i.e(g)}finally{i.f()}return e.traverse((function(e){var t=l.associations.get(e);null!=t&&n.set(e,t)})),n}(a),a}))}}]),e}();function Vf(e,t,n,i){var l=n.nodes[e];return i.getDependency("node",e).then((function(e){return void 0===l.skin?e:i.getDependency("skin",l.skin).then((function(e){for(var n=[],l=0,a=(t=e).joints.length;l<a;l++)n.push(i.getDependency("node",t.joints[l]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var i=[],l=[],a=0,r=n.length;a<r;a++){var o=n[a];if(o){i.push(o);var g=new dl;void 0!==t.inverseBindMatrices&&g.fromArray(t.inverseBindMatrices.array,16*a),l.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new bs(i,l),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var a=[];if(l.children)for(var r=l.children,o=0,g=r.length;o<g;o++){var s=r[o];a.push(Vf(s,e,n,i))}return Promise.all(a)}))}function kf(e,t,n){var i=t.attributes,l=[];function a(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var r in i){var o=vf[r]||r.toLowerCase();o in e.attributes||l.push(a(i[r],o))}if(void 0!==t.indices&&!e.index){var g=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));l.push(g)}return qf(e,t),function(e,t,n){var i=t.attributes,l=new zi;if(void 0!==i.POSITION){var a=n.json.accessors[i.POSITION],r=a.min,o=a.max;if(void 0!==r&&void 0!==o){if(l.set(new Ki(r[0],r[1],r[2]),new Ki(o[0],o[1],o[2])),a.normalized){var g=Sf(hf[a.componentType]);l.min.multiplyScalar(g),l.max.multiplyScalar(g)}var s=t.targets;if(void 0!==s){for(var I=new Ki,u=new Ki,c=0,C=s.length;c<C;c++){var d=s[c];if(void 0!==d.POSITION){var h=n.json.accessors[d.POSITION],A=h.min,m=h.max;if(void 0!==A&&void 0!==m){if(u.setX(Math.max(Math.abs(A[0]),Math.abs(m[0]))),u.setY(Math.max(Math.abs(A[1]),Math.abs(m[1]))),u.setZ(Math.max(Math.abs(A[2]),Math.abs(m[2]))),h.normalized){var p=Sf(hf[h.componentType]);u.multiplyScalar(p)}I.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}l.expandByVector(I)}e.boundingBox=l;var v=new al;l.getCenter(v.center),v.radius=l.min.distanceTo(l.max)/2,e.boundingSphere=v}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(l).then((function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,l=!1,a=0,r=t.length;a<r;a++){var o=t[a];if(void 0!==o.POSITION&&(i=!0),void 0!==o.NORMAL&&(l=!0),i&&l)break}if(!i&&!l)return Promise.resolve(e);for(var g=[],s=[],I=0,u=t.length;I<u;I++){var c=t[I];if(i){var C=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;g.push(C)}if(l){var d=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(d)}}return Promise.all([Promise.all(g),Promise.all(s)]).then((function(t){var n=t[0],a=t[1];return i&&(e.morphAttributes.position=n),l&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function Xf(e,t){var n=e.getIndex();if(null===n){var i=[],l=e.getAttribute("position");if(void 0===l)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<l.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var r=n.count-2,o=[];if(t===sn)for(var g=1;g<=r;g++)o.push(n.getX(0)),o.push(n.getX(g)),o.push(n.getX(g+1));else for(var s=0;s<r;s++)s%2===0?(o.push(n.getX(s)),o.push(n.getX(s+1)),o.push(n.getX(s+2))):(o.push(n.getX(s+2)),o.push(n.getX(s+1)),o.push(n.getX(s)));o.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var I=e.clone();return I.setIndex(o),I}var Yf=null;function Hf(e,t,n){return function(i){n&&n(i),e&&(Yf||(Yf=new Vv),Yf.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(Yf)),t&&i.setMeshoptDecoder(Xv())}}function Kf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,l=xh(Yv,e,Hf(t,n,i));return l}function Ff(e,t){(0,i.useEffect)((function(){var n=function(n){var i=n.key;return-1!==e.indexOf(i)&&t(!0)},i=function(n){var i=n.key;return-1!==e.indexOf(i)&&t(!1)};return window.addEventListener("keydown",n),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",i)}}),[])}Kf.preload=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;return xh.preload(Yv,e,Hf(t,n,i))},Kf.clear=function(e){return xh.clear(Yv,e)};var Nf=["args","mass"];Kf.preload("/Beetle.glb");var zf=(0,i.forwardRef)((function(e,t){var n=e.args,i=void 0===n?[1.7,1,4]:n,l=e.mass,a=void 0===l?500:l,r=C(e,Nf),g=Kf("/Beetle.glb"),s=g.nodes,I=g.materials,u=function(e,t,n){var i=[1,1,1];return av("Box",e,(function(e){return void 0===e&&(e=i),e}),t,n)}((function(){return o({mass:a,args:i,allowSleep:!1,onCollide:function(e){return console.log("bonk",e.body.userData)}},r)}),t),d=c(u,2)[1];return(0,$h.jsx)("mesh",{ref:t,api:d,children:(0,$h.jsxs)("group",{position:[0,-.6,0],children:[(0,$h.jsx)("mesh",{castShadow:!0,material:I["Black paint"],geometry:s.chassis_1.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Rubber,geometry:s.chassis_2.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Paint,geometry:s.chassis_3.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Underbody,geometry:s.chassis_4.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Chrom,geometry:s.chassis_5.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Interior (dark)"],geometry:s.chassis_6.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Interior (light)"],geometry:s.chassis_7.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Reflector,geometry:s.chassis_8.geometry}),(0,$h.jsx)("mesh",{material:I.Glass,geometry:s.chassis_9.geometry,"material-transparent":!1,"material-color":"black"}),(0,$h.jsx)("mesh",{castShadow:!0,material:I.Steel,geometry:s.chassis_10.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Black plastic"],geometry:s.chassis_11.geometry}),(0,$h.jsx)("mesh",{material:I.Headlight,geometry:s.chassis_12.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Reverse lights"],geometry:s.chassis_13.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Orange plastic"],geometry:s.chassis_14.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["Tail lights"],geometry:s.chassis_15.geometry}),(0,$h.jsx)("mesh",{castShadow:!0,material:I["License Plate"],geometry:s.chassis_16.geometry})]})})})),Mf=zf,Lf=["radius","leftSide"];Kf.preload("/Wheel.glb");var _f=(0,i.forwardRef)((function(e,t){var n,i=e.radius,l=void 0===i?.7:i,a=e.leftSide,r=C(e,Lf),g=Kf("/wheel.glb"),s=g.nodes,I=g.materials;return av("Cylinder",(function(){return o({mass:1,type:"Kinematic",material:"wheel",collisionFilterGroup:0,args:[l,l,.5,16]},r)}),(function(e){return void 0===e&&(e=[]),e}),t,n),(0,$h.jsx)("mesh",{ref:t,children:(0,$h.jsxs)("mesh",{rotation:[0,0,(a?1:-1)*Math.PI/2],children:[(0,$h.jsx)("mesh",{material:I.Rubber,geometry:s.wheel_1.geometry}),(0,$h.jsx)("mesh",{material:I.Steel,geometry:s.wheel_2.geometry}),(0,$h.jsx)("mesh",{material:I.Chrom,geometry:s.wheel_3.geometry})]})})})),Tf=_f,Ef=["radius","width","height","front","back","steer","force","maxBrake"];var Jf=function(e){var t=e.radius,n=void 0===t?.7:t,l=e.width,a=void 0===l?1.2:l,r=e.height,g=void 0===r?-.04:r,s=e.front,I=void 0===s?1.3:s,u=e.back,d=void 0===u?-1.15:u,h=e.steer,A=void 0===h?.75:h,m=e.force,p=void 0===m?2e3:m,v=e.maxBrake,f=void 0===v?1e5:v,b=C(e,Ef),y=(0,i.useRef)(),G=(0,i.useRef)(),B=(0,i.useRef)(),Z=(0,i.useRef)(),q=(0,i.useRef)(),x=function(){var e=(0,i.useRef)({forward:!1,backward:!1,left:!1,right:!1,brake:!1,reset:!1});return Ff(["ArrowUp","w"],(function(t){return e.current.forward=t})),Ff(["ArrowDown","s"],(function(t){return e.current.backward=t})),Ff(["ArrowLeft","a"],(function(t){return e.current.left=t})),Ff(["ArrowRight","d"],(function(t){return e.current.right=t})),Ff([" "],(function(t){return e.current.brake=t})),Ff(["r"],(function(t){return e.current.reset=t})),e}(),w={radius:n,directionLocal:[0,-1,0],suspensionStiffness:30,suspensionRestLength:.3,maxSuspensionForce:1e4,maxSuspensionTravel:.3,dampingRelaxation:10,dampingCompression:4.4,axleLocal:[-1,0,0],chassisConnectionPointLocal:[1,0,1],useCustomSlidingRotationalSpeed:!0,customSlidingRotationalSpeed:-30,frictionSlip:2},W=o(o({},w),{},{isFrontWheel:!0,chassisConnectionPointLocal:[-a/2,g,I]}),S=o(o({},w),{},{isFrontWheel:!0,chassisConnectionPointLocal:[a/2,g,I]}),R=o(o({},w),{},{isFrontWheel:!1,chassisConnectionPointLocal:[-a/2,g,d]}),V=o(o({},w),{},{isFrontWheel:!1,chassisConnectionPointLocal:[a/2,g,d]}),k=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=[]);var l=Pp(t),a=Dp(),r=a.worker,o=a.subscriptions;(0,i.useLayoutEffect)((function(){l.current||(l.current=new Nl);var t=r,n=l.current.uuid,i=e(),a=i.chassisBody,o=i.indexForwardAxis,g=void 0===o?2:o,s=i.indexRightAxis,I=void 0===s?0:s,u=i.indexUpAxis,c=void 0===u?1:u,C=i.wheelInfos,d=i.wheels,h=jp(a),A=d.map((function(e){return jp(e)}));if(h&&A.every(rv))return t.addRaycastVehicle({props:[h,A,C,g,I,c],uuid:n}),function(){t.removeRaycastVehicle({uuid:n})}}),n);var g=(0,i.useMemo)((function(){return{applyEngineForce:function(e,t){var n=jp(l);n&&r.applyRaycastVehicleEngineForce({props:[e,t],uuid:n})},setBrake:function(e,t){var n=jp(l);n&&r.setRaycastVehicleBrake({props:[e,t],uuid:n})},setSteeringValue:function(e,t){var n=jp(l);n&&r.setRaycastVehicleSteeringValue({props:[e,t],uuid:n})},sliding:{subscribe:nv(l,r,o,"sliding",void 0,"vehicles")}}}),n);return[l,g]}((function(){return{chassisBody:y,wheels:[G,B,Z,q],wheelInfos:[W,S,R,V],indexForwardAxis:2,indexRightAxis:0,indexUpAxis:1}})),X=c(k,2),Y=X[0],H=X[1];return Zh((function(){for(var e=x.current,t=e.forward,n=e.backward,i=e.left,l=e.right,a=e.brake,r=e.reset,o=2;o<4;o++)H.applyEngineForce(t||n?p*(t&&!n?-1:1):0,2);for(var g=0;g<2;g++)H.setSteeringValue(i||l?A*(i&&!l?1:-1):0,g);for(var s=2;s<4;s++)H.setBrake(a?f:0,s);r&&(y.current.api.position.set(0,.5,0),y.current.api.velocity.set(0,0,0),y.current.api.angularVelocity.set(0,.5,0),y.current.api.rotation.set(0,-Math.PI/4,0))})),(0,$h.jsxs)("group",{ref:Y,position:[0,-.4,0],children:[(0,$h.jsx)(Mf,{ref:y,rotation:b.rotation,position:b.position,angularVelocity:b.angularVelocity}),(0,$h.jsx)(Tf,{ref:G,radius:n,leftSide:!0}),(0,$h.jsx)(Tf,{ref:B,radius:n}),(0,$h.jsx)(Tf,{ref:Z,radius:n,leftSide:!0}),(0,$h.jsx)(Tf,{ref:q,radius:n})]})},Uf=y((function e(t,n){f(this,e),this.val=t,this.priority=n})),Df=function(){function e(){f(this,e),this.values=[]}return y(e,[{key:"enqueue",value:function(e,t){var n=new Uf(e,t);this.values.push(n),this.bubbleUp()}},{key:"bubbleUp",value:function(){for(var e=this.values.length-1,t=this.values[e];e>0;){var n=Math.floor((e-1)/2),i=this.values[n];if(t.priority>=i.priority)break;this.values[n]=t,this.values[e]=i,e=n}}},{key:"dequeue",value:function(){var e=this.values[0],t=this.values.pop();return this.values.length>0&&(this.values[0]=t,this.sinkDown()),e}},{key:"sinkDown",value:function(){for(var e=0,t=this.values.length,n=this.values[0];;){var i=2*e+1,l=2*e+2,a=void 0,r=void 0,o=null;if(i<t&&(a=this.values[i]).priority<n.priority&&(o=i),l<t&&(r=this.values[l],(null===o&&r.priority<n.priority||null!==o&&r.priority<a.priority)&&(o=l)),null===o)break;this.values[e]=this.values[o],this.values[o]=n,e=o}}}]),e}(),Qf=function(){function e(){f(this,e),this.adjacencyList={}}return y(e,[{key:"addVertex",value:function(e){this.adjacencyList[e]||(this.adjacencyList[e]=[])}},{key:"addEdge",value:function(e,t,n){this.adjacencyList[e].push({node:t,weight:n}),this.adjacencyList[t].push({node:e,weight:n})}},{key:"Dijkstra",value:function(e,t){var n,i=new Df,l={},a={},r=[];for(var o in this.adjacencyList)o===e?(l[o]=0,i.enqueue(o,0)):(l[o]=1/0,i.enqueue(o,1/0)),a[o]=null;for(;i.values.length;){if((n=i.dequeue().val)===t){for(;a[n];)r.push(n),n=a[n];break}if(n||l[n]!==1/0)for(var g in this.adjacencyList[n]){var s=this.adjacencyList[n][g],I=l[n]+s.weight,u=s.node;I<l[u]&&(l[u]=I,a[u]=n,i.enqueue(u,I))}}return r.concat(n).reverse()}}]),e}();function Pf(e,t){var n=function(e,t){var n=new Qf;return n.addVertex("p1"),n.addVertex("p2"),n.addVertex("p3"),n.addVertex("p4"),n.addVertex("p5"),n.addVertex("p6"),n.addVertex("p7"),n.addEdge("p1","p2",8),n.addEdge("p1","p6",8),n.addEdge("p2","p3",3),n.addEdge("p3","p4",5),n.addEdge("p1","p4",4),n.addEdge("p4","p5",5),n.addEdge("p5","p6",5),n.Dijkstra(e,t)}(e,t);console.log(n);for(var i="",l={"p1 p2":"r_1","p2 p1":"r_1","p1 p4":"r_4","p1 p6":"r_7","p2 p3":"r_2","p3 p2":"r_2","p3 p4":"r_3","p4 p1":"r_4","p4 p3":"r_3","p4 p5":"r_5","p5 p6":"r_6","p5 p4":"r_5","p6 p5":"r_6","p6 p1":"r_7"},a=0;a<n.length-1;a++)i=i+" "+l[n[a]+" "+n[a+1]],console.log(i);return i}var Of=Symbol(),jf=Symbol(),$f=Symbol(),eb=Object.getPrototypeOf,tb=new WeakMap,nb=function(e){return e&&(tb.has(e)?tb.get(e):eb(e)===Object.prototype||eb(e)===Array.prototype)},ib=function(e){return"object"==typeof e&&null!==e},lb=function(e,t){var n=!1,i=function(t,i,l){if(!n){var a=t.a.get(e);a||(a=new Set,t.a.set(e,a)),l&&a.has(Of)||a.add(i)}},l={f:t,get:function(t,n){return n===$f?e:(i(this,n),rb(t[n],this.a,this.c))},has:function(t,l){return l===jf?(n=!0,this.a.delete(e),!0):(i(this,l),l in t)},getOwnPropertyDescriptor:function(e,t){return i(this,t,!0),Object.getOwnPropertyDescriptor(e,t)},ownKeys:function(e){return i(this,Of),Reflect.ownKeys(e)}};return t&&(l.set=l.deleteProperty=function(){return!1}),l},ab=function(e){return e[$f]||e},rb=function(e,t,n){if(!nb(e))return e;var i=ab(e),l=function(e){return Object.isFrozen(e)||Object.values(Object.getOwnPropertyDescriptors(e)).some((function(e){return!e.writable}))}(i),a=n&&n.get(i);return a&&a.f===l||(a=lb(i,l),a.p=new Proxy(l?function(e){if(Array.isArray(e))return Array.from(e);var t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach((function(e){e.configurable=!0})),Object.create(eb(e),t)}(i):i,a),n&&n.set(i,a)),a.a=t,a.c=n,a.p},ob=function(e,t){var n=Reflect.ownKeys(e),i=Reflect.ownKeys(t);return n.length!==i.length||n.some((function(e,t){return e!==i[t]}))},gb=function e(t,n,i,l){if(Object.is(t,n))return!1;if(!ib(t)||!ib(n))return!0;var a=i.get(ab(t));if(!a)return!0;if(l){var r=l.get(t);if(r&&r.n===n)return r.g;l.set(t,{n:n,g:!1})}var o,g=null,s=d(a);try{for(s.s();!(o=s.n()).done;){var I=o.value,u=I===Of?ob(t,n):e(t[I],n[I],i,l);if(!0!==u&&!1!==u||(g=u),g)break}}catch(c){s.e(c)}finally{s.f()}return null===g&&(g=!0),l&&l.set(t,{n:n,g:g}),g},sb=function(e){return nb(e)&&e[$f]||null},Ib=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];tb.set(e,t)},ub=n(276),cb=Symbol("VERSION"),Cb=Symbol("LISTENERS"),db=Symbol("SNAPSHOT"),hb=Symbol("HANDLER"),Ab=Symbol("PROMISE_RESULT"),mb=Symbol("PROMISE_ERROR"),pb=new WeakSet;var vb=function(e){return"object"===typeof e&&null!==e},fb=function(e){return vb(e)&&!pb.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)},bb=new WeakMap,yb=1,Gb=new WeakMap;function Bb(e){return(null==e?void 0:e[db])||console.warn("Please use proxy object"),e[db]}var Zb=ub.useSyncExternalStore,qb=function(e,t){var n=(0,i.useRef)();(0,i.useEffect)((function(){n.current=function(e,t){var n=[],i=new WeakSet;return function e(l,a){if(!i.has(l)){ib(l)&&i.add(l);var r=ib(l)&&t.get(ab(l));r?r.forEach((function(t){e(l[t],a?[].concat(v(a),[t]):[t])})):a&&n.push(a)}}(e),n}(e,t)})),(0,i.useDebugValue)(n.current)};function xb(e,t){var n=null==t?void 0:t.sync,l=(0,i.useRef)(),a=(0,i.useRef)(),r=!0,o=Zb((0,i.useCallback)((function(t){var i=function(e,t,n){var i;(null==e?void 0:e[Cb])||console.warn("Please use proxy object");var l=[],a=function(e){l.push(e),n?t(l.splice(0)):i||(i=Promise.resolve().then((function(){i=void 0,t(l.splice(0))})))};return e[Cb].add(a),function(){e[Cb].delete(a)}}(e,t,n);return t(),i}),[e,n]),(function(){var t=Bb(e);try{if(!r&&l.current&&a.current&&!gb(l.current,t,a.current,new WeakMap))return l.current}catch($p){}return t}),(function(){return Bb(e)}));r=!1;var g=new WeakMap;(0,i.useEffect)((function(){l.current=o,a.current=g})),qb(o,g);var s=(0,i.useMemo)((function(){return new WeakMap}),[]);return rb(o,g,s)}function wb(){var e,t=0,n=[],i=0,l=0;var a=c((function(e){l||o(1,e)})),r=c((function(e){l||o(-1,e)}));function o(n,i){l++;var a=0;try{i===h&&C();var r=n>0&&u(i);r?r.call(i,c((function(e){a++,o(1,e)})),c((function(e){a++,o(-1,e)}))):(t=n,e=i,g())}catch($p){t||a||o(-1,$p)}}function g(){i||(setTimeout(s,0),i=1)}function s(){var e=n;i=0,n=[],e.forEach(I)}function I(e){e()}function u(e){var t=e&&(d(e)||"object"===typeof e)&&e.then;return d(t)&&t}function c(e){var t=0;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];t++||e.apply(this,n)}}function C(){throw new TypeError("Chaining cycle detected")}var d=function(e){return"function"===typeof e},h={then:function(i,l){var a=wb();return n.push((function(){var n=t>0?i:l;if(d(n))try{var r=n(e);r===a&&C();var o=u(r);o?o.call(r,a.resolve,a.reject):a.resolve(r)}catch(g){a.reject(g)}else a[t>0?"resolve":"reject"](e)})),t&&g(),a},resolve:a,reject:r};return h}function Wb(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return{then:n.then.bind(n),resolve:e,reject:t}}wb.all=Wb.all=function(e){var t=0,n=[],i=Sb();return 0===e.length?i.resolve([]):e.forEach((function(l,a){var r=Sb();r.resolve(l),r.then((function(l){t++,n[a]=l,t===e.length&&i.resolve(n)}),i.reject)})),i};var Sb="function"===typeof Promise?Wb:wb;function Rb(){var e=Object.create(null);function t(i,l){var a=i.id,r=i.name,o=i.dependencies;void 0===o&&(o=[]);var g=i.init;void 0===g&&(g=function(){});var s=i.getTransferables;if(void 0===s&&(s=null),!e[a])try{o=o.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),g=n("<"+r+">.init",g),s&&(s=n("<"+r+">.getTransferables",s));var I=null;"function"===typeof g?I=g.apply(void 0,o):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:I,getTransferables:s},l(I)}catch(u){u&&u.noLog||console.error(u),l(u)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var i=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(l){console.error(l)}return URL.revokeObjectURL(i),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var i=n.data,l=i.messageId,a=i.action,r=i.data;try{"registerModule"===a&&t(r,(function(e){e instanceof Error?postMessage({messageId:l,success:!1,error:e.message}):postMessage({messageId:l,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===a&&function(t,n){var i,l=t.id,a=t.args;e[l]&&"function"===typeof e[l].value||n(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var r=(i=e[l]).value.apply(i,a);r&&"function"===typeof r.then?r.then(o,(function(e){return n(e instanceof Error?e:new Error(""+e))})):o(r)}catch(g){n(g)}function o(t){try{var i=e[l].getTransferables&&e[l].getTransferables(t);i&&Array.isArray(i)&&i.length||(i=void 0),n(t,i)}catch(g){console.error(g),n(g)}}}(r,(function(e,t){e instanceof Error?postMessage({messageId:l,success:!1,error:e.message}):postMessage({messageId:l,success:!0,result:e},t||void 0)}))}catch(o){postMessage({messageId:l,success:!1,error:o.stack})}}))}var Vb=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return Vb=function(){return e},e},kb=0,Xb=0,Yb=!1,Hb=Object.create(null),Kb=Object.create(null),Fb=Object.create(null);function Nb(e){if((!e||"function"!==typeof e.init)&&!Yb)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,i=e.getTransferables,l=e.workerId;if(!Vb())return function(e){var t=function e(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,i=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var l=Sb.all(n).then((function(e){return i.apply(null,e)}));return t._getInitResult=function(){return l},l},t}(e);null==l&&(l="#default");var a="workerModule"+ ++kb,r=e.name||a,o=null;function g(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!o){o=Mb(l,"registerModule",g.workerModuleData);var n=function e(){o=null,Kb[l].delete(e)};(Kb[l]||(Kb[l]=new Set)).add(n)}return o.then((function(t){if(t.isCallable)return Mb(l,"callModule",{id:a,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(Yb=!0,e=Nb({workerId:l,name:"<"+r+"> function dependency: "+e.name,init:"function(){return (\n"+zb(e)+"\n)}"}),Yb=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),g.workerModuleData={isWorkerModule:!0,id:a,name:r,dependencies:t,init:zb(n),getTransferables:i&&zb(i)},g}function zb(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Mb(e,t,n){var i=Sb(),l=++Xb;return Fb[l]=function(e){e.success?i.resolve(e.result):i.reject(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=Hb[e];if(!t){var n=zb(Rb);(t=Hb[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,i=Fb[n];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete Fb[n],i(t)}}return t}(e).postMessage({messageId:l,action:t,data:n}),i}var Lb=Nb({name:"Thenable",dependencies:[Sb],init:function(e){return e}});function _b(){var e=function(e){function t(e,t,n,i,l,a,r,o){var g=1-r;o.x=g*g*e+2*g*r*n+r*r*l,o.y=g*g*t+2*g*r*i+r*r*a}function n(e,t,n,i,l,a,r,o,g,s){var I=1-g;s.x=I*I*I*e+3*I*I*g*n+3*I*g*g*l+g*g*g*r,s.y=I*I*I*t+3*I*I*g*i+3*I*g*g*a+g*g*g*o}function i(e,t){for(var n,i,l,a,r,o=/([MLQCZ])([^MLQCZ]*)/g;n=o.exec(e);){var g=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":a=i=g[0],r=l=g[1];break;case"L":g[0]===a&&g[1]===r||t("L",a,r,a=g[0],r=g[1]);break;case"Q":t("Q",a,r,a=g[2],r=g[3],g[0],g[1]);break;case"C":t("C",a,r,a=g[4],r=g[5],g[0],g[1],g[2],g[3]);break;case"Z":a===i&&r===l||t("L",a,r,i,l)}}}function l(e,l,a){void 0===a&&(a=16);var r={x:0,y:0};i(e,(function(e,i,o,g,s,I,u,c,C){switch(e){case"L":l(i,o,g,s);break;case"Q":for(var d=i,h=o,A=1;A<a;A++)t(i,o,I,u,g,s,A/(a-1),r),l(d,h,r.x,r.y),d=r.x,h=r.y;break;case"C":for(var m=i,p=o,v=1;v<a;v++)n(i,o,I,u,c,C,g,s,v/(a-1),r),l(m,p,r.x,r.y),m=r.x,p=r.y}}))}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",r=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function g(e,t){var n=e.getContext?e.getContext("webgl",o):e,i=r.get(n);if(!i){var l=function(e){var t=I[e];if(!t&&!(t=I[e]=n.getExtension(e)))throw new Error(e+" not supported");return t},a=function(e,t){var i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i},g=function(){I={},u={},c={},C=-1,d.length=0},s="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,I={},u={},c={},C=-1,d=[];n.canvas.addEventListener("webglcontextlost",(function(e){g(),e.preventDefault()}),!1),r.set(n,i={gl:n,isWebGL2:s,getExtension:l,withProgram:function(e,t,i,r){if(!u[e]){var o={},g={},I=n.createProgram();n.attachShader(I,a(t,n.VERTEX_SHADER)),n.attachShader(I,a(i,n.FRAGMENT_SHADER)),n.linkProgram(I),u[e]={program:I,transaction:function(e){n.useProgram(I),e({setUniform:function(e,t){for(var i=[],l=arguments.length-2;l-- >0;)i[l]=arguments[l+2];var a=g[t]||(g[t]=n.getUniformLocation(I,t));n["uniform"+e].apply(n,[a].concat(i))},setAttribute:function(e,t,i,a,r){var g=o[e];g||(g=o[e]={buf:n.createBuffer(),loc:n.getAttribLocation(I,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,g.buf),n.vertexAttribPointer(g.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(g.loc),s?n.vertexAttribDivisor(g.loc,a):l("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(g.loc,a),r!==g.data&&(n.bufferData(n.ARRAY_BUFFER,r,i),g.data=r)}})}}}u[e].transaction(r)},withTexture:function(e,t){C++;try{n.activeTexture(n.TEXTURE0+C);var i=c[e];i||(i=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,i),t(i,C)}finally{C--}},withTextureFramebuffer:function(e,t,i){var l=n.createFramebuffer();d.push(l),n.bindFramebuffer(n.FRAMEBUFFER,l),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{i(l)}finally{n.deleteFramebuffer(l),n.bindFramebuffer(n.FRAMEBUFFER,d[--d.length-1]||null)}},handleContextLoss:g})}t(i)}function s(e,t,n,i,l,r,o,s){void 0===o&&(o=15),void 0===s&&(s=null),g(e,(function(e){var g=e.gl,I=e.withProgram;(0,e.withTexture)("copy",(function(e,u){g.texImage2D(g.TEXTURE_2D,0,g.RGBA,l,r,0,g.RGBA,g.UNSIGNED_BYTE,t),I("copy",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,g.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",u),g.bindFramebuffer(g.FRAMEBUFFER,s||null),g.disable(g.BLEND),g.colorMask(8&o,4&o,2&o,1&o),g.viewport(n,i,l,r),g.scissor(n,i,l,r),g.drawArrays(g.TRIANGLES,0,3)}))}))}))}var I=Object.freeze({__proto__:null,withWebGLContext:g,renderImageData:s,resizeWebGLCanvasWithoutClearing:function(e,t,n){var i=e.width,l=e.height;g(e,(function(a){var r=a.gl,o=new Uint8Array(i*l*4);r.readPixels(0,0,i,l,r.RGBA,r.UNSIGNED_BYTE,o),e.width=t,e.height=n,s(r,o,0,0,i,l)}))}});function u(e,t,n,i,a,r){void 0===r&&(r=1);var o=new Uint8Array(e*t),g=i[2]-i[0],s=i[3]-i[1],I=[];l(n,(function(e,t,n,i){I.push({x1:e,y1:t,x2:n,y2:i,minX:Math.min(e,n),minY:Math.min(t,i),maxX:Math.max(e,n),maxY:Math.max(t,i)})})),I.sort((function(e,t){return e.maxX-t.maxX}));for(var u=0;u<e;u++)for(var c=0;c<t;c++){var C=A(i[0]+g*(u+.5)/e,i[1]+s*(c+.5)/t),h=Math.pow(1-Math.abs(C)/a,r)/2;C<0&&(h=1-h),h=Math.max(0,Math.min(255,Math.round(255*h))),o[c*e+u]=h}return o;function A(e,t){for(var n=1/0,i=1/0,l=I.length;l--;){var a=I[l];if(a.maxX+i<=e)break;if(e+i>a.minX&&t-i<a.maxY&&t+i>a.minY){var r=d(e,t,a.x1,a.y1,a.x2,a.y2);r<n&&(n=r,i=Math.sqrt(n))}}return function(e,t){for(var n=0,i=I.length;i--;){var l=I[i];if(l.maxX<=e)break;l.y1>t!==l.y2>t&&e<(l.x2-l.x1)*(t-l.y1)/(l.y2-l.y1)+l.x1&&(n+=l.y1<l.y2?1:-1)}return 0!==n}(e,t)&&(i=-i),i}}function c(e,t,n,i,l,a,r,o,g,s){void 0===a&&(a=1),void 0===o&&(o=0),void 0===g&&(g=0),void 0===s&&(s=0),C(e,t,n,i,l,a,r,null,o,g,s)}function C(e,t,n,i,l,a,r,o,g,I,c){void 0===a&&(a=1),void 0===g&&(g=0),void 0===I&&(I=0),void 0===c&&(c=0);for(var C=u(e,t,n,i,l,a),d=new Uint8Array(4*C.length),h=0;h<C.length;h++)d[4*h+c]=C[h];s(r,d,g,I,e,t,1<<3-c,o)}function d(e,t,n,i,l,a){var r=l-n,o=a-i,g=r*r+o*o,s=g?Math.max(0,Math.min(1,((e-n)*r+(t-i)*o)/g)):0,I=e-(n+s*r),u=t-(i+s*o);return I*I+u*u}var h=Object.freeze({__proto__:null,generate:u,generateIntoCanvas:c,generateIntoFramebuffer:C}),A=new Float32Array([0,0,2,0,0,2]),m=null,p=!1,v={},f=new WeakMap;function b(e){if(!p&&!Z(e))throw new Error("WebGL generation not supported")}function y(e,t,n,i,l,a,r){if(void 0===a&&(a=1),void 0===r&&(r=null),!r&&!(r=m)){var o="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!o)throw new Error("OffscreenCanvas or DOM canvas not supported");r=m=o.getContext("webgl",{depth:!1})}b(r);var s=new Uint8Array(e*t*4);g(r,(function(r){var o=r.gl,g=r.withTexture,I=r.withTextureFramebuffer;g("readable",(function(r,g){o.texImage2D(o.TEXTURE_2D,0,o.RGBA,e,t,0,o.RGBA,o.UNSIGNED_BYTE,null),I(r,g,(function(r){B(e,t,n,i,l,a,o,r,0,0,0),o.readPixels(0,0,e,t,o.RGBA,o.UNSIGNED_BYTE,s)}))}))}));for(var I=new Uint8Array(e*t),u=0,c=0;u<s.length;u+=4)I[c++]=s[u];return I}function G(e,t,n,i,l,a,r,o,g,s){void 0===a&&(a=1),void 0===o&&(o=0),void 0===g&&(g=0),void 0===s&&(s=0),B(e,t,n,i,l,a,r,null,o,g,s)}function B(e,t,n,i,r,o,s,I,u,c,C){void 0===o&&(o=1),void 0===u&&(u=0),void 0===c&&(c=0),void 0===C&&(C=0),b(s);var d=[];l(n,(function(e,t,n,i){d.push(e,t,n,i)})),d=new Float32Array(d),g(s,(function(n){var l=n.gl,g=n.isWebGL2,s=n.getExtension,h=n.withProgram,m=n.withTexture,p=n.withTextureFramebuffer,v=n.handleContextLoss;if(m("rawDistances",(function(n,m){e===n._lastWidth&&t===n._lastHeight||l.texImage2D(l.TEXTURE_2D,0,l.RGBA,n._lastWidth=e,n._lastHeight=t,0,l.RGBA,l.UNSIGNED_BYTE,null),h("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(a){var I=a.setAttribute,u=a.setUniform,c=!g&&s("ANGLE_instanced_arrays"),C=!g&&s("EXT_blend_minmax");I("aUV",2,l.STATIC_DRAW,0,A),I("aLineSegment",4,l.DYNAMIC_DRAW,1,d),u.apply(void 0,["4f","uGlyphBounds"].concat(i)),u("1f","uMaxDistance",r),u("1f","uExponent",o),p(n,m,(function(n){l.enable(l.BLEND),l.colorMask(!0,!0,!0,!0),l.viewport(0,0,e,t),l.scissor(0,0,e,t),l.blendFunc(l.ONE,l.ONE),l.blendEquationSeparate(l.FUNC_ADD,g?l.MAX:C.MAX_EXT),l.clear(l.COLOR_BUFFER_BIT),g?l.drawArraysInstanced(l.TRIANGLES,0,3,d.length/4):c.drawArraysInstancedANGLE(l.TRIANGLES,0,3,d.length/4)}))})),h("post",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,l.STATIC_DRAW,0,A),n.setUniform("1i","tex",m),l.bindFramebuffer(l.FRAMEBUFFER,I),l.disable(l.BLEND),l.colorMask(0===C,1===C,2===C,3===C),l.viewport(u,c,e,t),l.scissor(u,c,e,t),l.drawArrays(l.TRIANGLES,0,3)}))})),l.isContextLost())throw v(),new Error("webgl context lost")}))}function Z(e){var t=e&&e!==m?e.canvas||e:v,n=f.get(t);if(void 0===n){p=!0;var i=null;try{var l=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=a&&l.length===a.length&&a.every((function(e,t){return e===l[t]})),n||(i="bad trial run results",console.info(l,a))}catch(r){n=!1,i=r.message}i&&console.warn("WebGL SDF generation not supported:",i),p=!1,f.set(t,n)}return n}var q=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:G,generateIntoFramebuffer:B,isSupported:Z});return e.forEachPathCommand=i,e.generate=function(e,t,n,i,l,a){void 0===l&&(l=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1);try{return y.apply(q,arguments)}catch($p){return console.info("WebGL SDF generation failed, falling back to JS",$p),u.apply(h,arguments)}},e.generateIntoCanvas=function(e,t,n,i,l,a,r,o,g,s){void 0===l&&(l=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1),void 0===o&&(o=0),void 0===g&&(g=0),void 0===s&&(s=0);try{return G.apply(q,arguments)}catch($p){return console.info("WebGL SDF generation failed, falling back to JS",$p),c.apply(h,arguments)}},e.javascript=h,e.pathToLineSegments=l,e.webgl=q,e.webglUtils=I,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var Tb=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,i[n[e]]=e})),Object.freeze(n);var l=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,r=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,o=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,g=n.S|n.WS|n.B|l|n.PDI|o,s=null;function I(e){return function(){if(!s){s=new Map;var e=function(e){if(t.hasOwnProperty(e)){var i=0;t[e].split(",").forEach((function(t){var l=t.split("+"),a=l[0],r=l[1];a=parseInt(a,36),r=r?parseInt(r,36):0,s.set(i+=a,n[e]);for(var o=0;o<r;o++)s.set(++i,n[e])}))}};for(var i in t)e(i)}}(),s.get(e.codePointAt(0))||n.L}var u,c,C,d="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",h="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function A(e,t){var n,i=0,l=new Map,a=t&&new Map;return e.split(",").forEach((function e(r){if(-1!==r.indexOf("+"))for(var o=+r;o--;)e(n);else{n=r;var g=r.split(">"),s=g[0],I=g[1];s=String.fromCodePoint(i+=parseInt(s,36)),I=String.fromCodePoint(i+=parseInt(I,36)),l.set(s,I),t&&a.set(I,s)}})),{map:l,reverseMap:a}}function m(){if(!u){var e=A(d,!0),t=e.map,n=e.reverseMap;u=t,c=n,C=A(h,!1).map}}function p(e){return m(),u.get(e)||null}function v(e){return m(),c.get(e)||null}function f(e){return m(),C.get(e)||null}var b=n.L,y=n.R,G=n.EN,B=n.ES,Z=n.ET,q=n.AN,x=n.CS,w=n.B,W=n.S,S=n.ON,R=n.BN,V=n.NSM,k=n.AL,X=n.LRO,Y=n.RLO,H=n.LRE,K=n.RLE,F=n.PDF,N=n.LRI,z=n.RLI,M=n.FSI,L=n.PDI;var _;function T(e){return function(){if(!_){var e=A("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),_=t}}(),_.get(e)||null}function E(e,t,n,i){var l=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(l-1,null==i?l-1:+i);var a=[];return t.paragraphs.forEach((function(l){var r=Math.max(n,l.start),o=Math.min(i,l.end);if(r<o){for(var s=t.levels.slice(r,o+1),u=o;u>=r&&I(e[u])&g;u--)s[u]=l.level;for(var c=l.level,C=1/0,d=0;d<s.length;d++){var h=s[d];h>c&&(c=h),h<C&&(C=1|h)}for(var A=c;A>=C;A--)for(var m=0;m<s.length;m++)if(s[m]>=A){for(var p=m;m+1<s.length&&s[m+1]>=A;)m++;m>p&&a.push([p+n,m+n])}}})),a}function J(e,t,n,i){for(var l=E(e,t,n,i),a=[],r=0;r<e.length;r++)a[r]=r;return l.forEach((function(e){for(var t=e[0],n=e[1],i=a.slice(t,n+1),l=i.length;l--;)a[n-l]=i[l]})),a}return e.closingToOpeningBracket=v,e.getBidiCharType=I,e.getBidiCharTypeName=function(e){return i[I(e)]},e.getCanonicalBracket=f,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),i=0;i<e.length;i++)n[i]=I(e[i]);var s=new Map;function u(e,t){var i=n[e];n[e]=t,s.set(i,s.get(i)-1),i&r&&s.set(r,s.get(r)-1),s.set(t,(s.get(t)||0)+1),t&r&&s.set(r,(s.get(r)||0)+1)}for(var c=new Uint8Array(e.length),C=new Map,d=[],h=null,A=0;A<e.length;A++)h||d.push(h={start:A,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Mt(A,!1)}),n[A]&w&&(h.end=A,h=null);for(var m=K|H|Y|X|l|L|F|w,_=function(e){return e+(1&e?1:2)},T=function(e){return e+(1&e?2:1)},E=0;E<d.length;E++){var J=[{_level:(h=d[E]).level,_override:0,_isolate:0}],U=void 0,D=0,Q=0,P=0;s.clear();for(var O=h.start;O<=h.end;O++){var j=n[O];if(U=J[J.length-1],s.set(j,(s.get(j)||0)+1),j&r&&s.set(r,(s.get(r)||0)+1),j&m)if(j&(K|H)){c[O]=U._level;var $=(j===K?T:_)(U._level);$<=125&&!D&&!Q?J.push({_level:$,_override:0,_isolate:0}):D||Q++}else if(j&(Y|X)){c[O]=U._level;var ee=(j===Y?T:_)(U._level);ee<=125&&!D&&!Q?J.push({_level:ee,_override:j&Y?y:b,_isolate:0}):D||Q++}else if(j&l){j&M&&(j=1===Mt(O+1,!0)?z:N),c[O]=U._level,U._override&&u(O,U._override);var te=(j===z?T:_)(U._level);te<=125&&0===D&&0===Q?(P++,J.push({_level:te,_override:0,_isolate:1,_isolInitIndex:O})):D++}else if(j&L){if(D>0)D--;else if(P>0){for(Q=0;!J[J.length-1]._isolate;)J.pop();var ne=J[J.length-1]._isolInitIndex;null!=ne&&(C.set(ne,O),C.set(O,ne)),J.pop(),P--}U=J[J.length-1],c[O]=U._level,U._override&&u(O,U._override)}else j&F?(0===D&&(Q>0?Q--:!U._isolate&&J.length>1&&(J.pop(),U=J[J.length-1])),c[O]=U._level):j&w&&(c[O]=h.level);else c[O]=U._level,U._override&&j!==R&&u(O,U._override)}for(var ie=[],le=null,ae=h.start;ae<=h.end;ae++){var re=n[ae];if(!(re&o)){var oe=c[ae],ge=re&l,se=re===L;le&&oe===le._level?(le._end=ae,le._endsWithIsolInit=ge):ie.push(le={_start:ae,_end:ae,_level:oe,_startsWithPDI:se,_endsWithIsolInit:ge})}}for(var Ie=[],ue=0;ue<ie.length;ue++){var ce=ie[ue];if(!ce._startsWithPDI||ce._startsWithPDI&&!C.has(ce._start)){for(var Ce=[le=ce],de=void 0;le&&le._endsWithIsolInit&&null!=(de=C.get(le._end));)for(var he=ue+1;he<ie.length;he++)if(ie[he]._start===de){Ce.push(le=ie[he]);break}for(var Ae=[],me=0;me<Ce.length;me++)for(var pe=Ce[me],ve=pe._start;ve<=pe._end;ve++)Ae.push(ve);for(var fe=c[Ae[0]],be=h.level,ye=Ae[0]-1;ye>=0;ye--)if(!(n[ye]&o)){be=c[ye];break}var Ge=Ae[Ae.length-1],Be=c[Ge],Ze=h.level;if(!(n[Ge]&l))for(var qe=Ge+1;qe<=h.end;qe++)if(!(n[qe]&o)){Ze=c[qe];break}Ie.push({_seqIndices:Ae,_sosType:Math.max(be,fe)%2?y:b,_eosType:Math.max(Ze,Be)%2?y:b})}}for(var xe=0;xe<Ie.length;xe++){var we=Ie[xe],We=we._seqIndices,Se=we._sosType,Re=we._eosType;if(s.get(V))for(var Ve=0;Ve<We.length;Ve++){var ke=We[Ve];if(n[ke]&V){for(var Xe=Se,Ye=Ve-1;Ye>=0;Ye--)if(!(n[We[Ye]]&o)){Xe=n[We[Ye]];break}u(ke,Xe&(l|L)?S:Xe)}}if(s.get(G))for(var He=0;He<We.length;He++){var Ke=We[He];if(n[Ke]&G)for(var Fe=He-1;Fe>=-1;Fe--){var Ne=-1===Fe?Se:n[We[Fe]];if(Ne&a){Ne===k&&u(Ke,q);break}}}if(s.get(k))for(var ze=0;ze<We.length;ze++){var Me=We[ze];n[Me]&k&&u(Me,y)}if(s.get(B)||s.get(x))for(var Le=1;Le<We.length-1;Le++){var _e=We[Le];if(n[_e]&(B|x)){for(var Te=0,Ee=0,Je=Le-1;Je>=0&&(Te=n[We[Je]])&o;Je--);for(var Ue=Le+1;Ue<We.length&&(Ee=n[We[Ue]])&o;Ue++);Te===Ee&&(n[_e]===B?Te===G:Te&(G|q))&&u(_e,Te)}}if(s.get(G))for(var De=0;De<We.length;De++){var Qe=We[De];if(n[Qe]&G){for(var Pe=De-1;Pe>=0&&n[We[Pe]]&(Z|o);Pe--)u(We[Pe],G);for(var Oe=De+1;Oe<We.length&&n[We[Oe]]&(Z|o);Oe++)u(We[Oe],G)}}if(s.get(Z)||s.get(B)||s.get(x))for(var je=0;je<We.length;je++){var $e=We[je];if(n[$e]&(Z|B|x)){u($e,S);for(var et=je-1;et>=0&&n[We[et]]&o;et--)u(We[et],S);for(var tt=je+1;tt<We.length&&n[We[tt]]&o;tt++)u(We[tt],S)}}if(s.get(G))for(var nt=0,it=Se;nt<We.length;nt++){var lt=We[nt],at=n[lt];at&G?it===b&&u(lt,b):at&a&&(it=at)}if(s.get(r)){for(var rt=y|G|q,ot=rt|b,gt=[],st=[],It=0;It<We.length;It++)if(n[We[It]]&r){var ut=e[We[It]],ct=void 0;if(null!==p(ut)){if(!(st.length<63))break;st.push({char:ut,seqIndex:It})}else if(null!==(ct=v(ut)))for(var Ct=st.length-1;Ct>=0;Ct--){var dt=st[Ct].char;if(dt===ct||dt===v(f(ut))||p(f(dt))===ut){gt.push([st[Ct].seqIndex,It]),st.length=Ct;break}}}gt.sort((function(e,t){return e[0]-t[0]}));for(var ht=0;ht<gt.length;ht++){for(var At=gt[ht],mt=At[0],pt=At[1],vt=!1,ft=0,bt=mt+1;bt<pt;bt++){var yt=We[bt];if(n[yt]&ot){vt=!0;var Gt=n[yt]&rt?y:b;if(Gt===_t(yt)){ft=Gt;break}}}if(vt&&!ft){ft=Se;for(var Bt=mt-1;Bt>=0;Bt--){var Zt=We[Bt];if(n[Zt]&ot){var qt=n[Zt]&rt?y:b;ft=qt!==_t(Zt)?qt:_t(Zt);break}}}if(ft){if(n[We[mt]]=n[We[pt]]=ft,ft!==_t(We[mt]))for(var xt=mt+1;xt<We.length;xt++)if(!(n[We[xt]]&o)){I(e[We[xt]])&V&&(n[We[xt]]=ft);break}if(ft!==_t(We[pt]))for(var wt=pt+1;wt<We.length;wt++)if(!(n[We[wt]]&o)){I(e[We[wt]])&V&&(n[We[wt]]=ft);break}}}for(var Wt=0;Wt<We.length;Wt++)if(n[We[Wt]]&r){for(var St=Wt,Rt=Wt,Vt=Se,kt=Wt-1;kt>=0;kt--){if(!(n[We[kt]]&o)){Vt=n[We[kt]]&rt?y:b;break}St=kt}for(var Xt=Re,Yt=Wt+1;Yt<We.length;Yt++){if(!(n[We[Yt]]&(r|o))){Xt=n[We[Yt]]&rt?y:b;break}Rt=Yt}for(var Ht=St;Ht<=Rt;Ht++)n[We[Ht]]=Vt===Xt?Vt:_t(We[Ht]);Wt=Rt}}}for(var Kt=h.start;Kt<=h.end;Kt++){var Ft=c[Kt],Nt=n[Kt];if(1&Ft?Nt&(b|G|q)&&c[Kt]++:Nt&y?c[Kt]++:Nt&(q|G)&&(c[Kt]+=2),Nt&o&&(c[Kt]=0===Kt?h.level:c[Kt-1]),Kt===h.end||I(e[Kt])&(W|w))for(var zt=Kt;zt>=0&&I(e[zt])&g;zt--)c[zt]=h.level}}return{levels:c,paragraphs:d};function Mt(t,i){for(var a=t;a<e.length;a++){var r=n[a];if(r&(y|k))return 1;if(r&(w|b)||i&&r===L)return 0;if(r&l){var o=Lt(a);a=-1===o?e.length:o}}return 0}function Lt(t){for(var i=1,a=t+1;a<e.length;a++){var r=n[a];if(r&w)break;if(r&L){if(0===--i)return a}else r&l&&i++}return-1}function _t(e){return 1&c[e]?y:b}},e.getMirroredCharacter=T,e.getMirroredCharactersMap=function(e,t,n,i){var l=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(l-1,null==i?l-1:+i);for(var a=new Map,r=n;r<=i;r++)if(1&t[r]){var o=T(e[r]);null!==o&&a.set(r,o)}return a},e.getReorderSegments=E,e.getReorderedIndices=J,e.getReorderedString=function(e,t,n,i){var l=J(e,t,n,i),a=[].concat(e);return l.forEach((function(n,i){a[i]=(1&t.levels[n]?T(e[n]):null)||e[n]})),a.join("")},e.openingToClosingBracket=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e},Eb=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Jb(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=or[t];return n?Jb(n):e}))}for(var Ub=[],Db=0;Db<256;Db++)Ub[Db]=(Db<16?"0":"")+Db.toString(16);var Qb=Object.assign||function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++){var i=arguments[t];if(i)for(var l in i)i.hasOwnProperty(l)&&(e[l]=i[l])}return e},Pb=Date.now(),Ob=new WeakMap,jb=new Map,$b=1e10;function ey(e,t){var n=function(e){var t=JSON.stringify(e,ny),n=ly.get(t);null==n&&ly.set(t,n=++iy);return n}(t),i=Ob.get(e);if(i||Ob.set(e,i=Object.create(null)),i[n])return new i[n];var l="_onBeforeCompile".concat(n),a=function(i){e.onBeforeCompile.call(this,i);var a=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader,r=jb[a];if(!r){var o=function(e,t,n){var i=e.vertexShader,l=e.fragmentShader,a=t.vertexDefs,r=t.vertexMainIntro,o=t.vertexMainOutro,g=t.vertexTransform,s=t.fragmentDefs,I=t.fragmentMainIntro,u=t.fragmentMainOutro,c=t.fragmentColorTransform,C=t.customRewriter,d=t.timeUniform;a=a||"",r=r||"",o=o||"",s=s||"",I=I||"",u=u||"",(g||C)&&(i=Jb(i));(c||C)&&(l=Jb(l=l.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(C){var h=C({vertexShader:i,fragmentShader:l});i=h.vertexShader,l=h.fragmentShader}if(c){var A=[];l=l.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(function(e){return A.push(e),""})),u="".concat(c,"\n").concat(A.join("\n"),"\n").concat(u)}if(d){var m="\nuniform float ".concat(d,";\n");a=m+a,s=m+s}g&&(i="vec3 troika_position_".concat(n,";\nvec3 troika_normal_").concat(n,";\nvec2 troika_uv_").concat(n,";\n").concat(i,"\n"),a="".concat(a,"\nvoid troikaVertexTransform").concat(n,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(g,"\n}\n"),r="\ntroika_position_".concat(n," = vec3(position);\ntroika_normal_").concat(n," = vec3(normal);\ntroika_uv_").concat(n," = vec2(uv);\ntroikaVertexTransform").concat(n,"(troika_position_").concat(n,", troika_normal_").concat(n,", troika_uv_").concat(n,");\n").concat(r,"\n"),i=i.replace(/\b(position|normal|uv)\b/g,(function(e,t,i,l){return/\battribute\s+vec[23]\s+$/.test(l.substr(0,i))?t:"troika_".concat(t,"_").concat(n)})));return i=ty(i,n,a,r,o),l=ty(l,n,s,I,u),{vertexShader:i,fragmentShader:l}}(i,t,n);r=jb[a]=o}i.vertexShader=r.vertexShader,i.fragmentShader=r.fragmentShader,Qb(i.uniforms,this.uniforms),t.timeUniform&&(i.uniforms[t.timeUniform]={get value(){return Date.now()-Pb}}),this[l]&&this[l](i)},r=function(){return o(t.chained?e:e.clone())},o=function(i){var l=Object.create(i,g);return Object.defineProperty(l,"baseMaterial",{value:e}),Object.defineProperty(l,"id",{value:$b++}),l.uuid=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Ub[255&e]+Ub[e>>8&255]+Ub[e>>16&255]+Ub[e>>24&255]+"-"+Ub[255&t]+Ub[t>>8&255]+"-"+Ub[t>>16&15|64]+Ub[t>>24&255]+"-"+Ub[63&n|128]+Ub[n>>8&255]+"-"+Ub[n>>16&255]+Ub[n>>24&255]+Ub[255&i]+Ub[i>>8&255]+Ub[i>>16&255]+Ub[i>>24&255]).toUpperCase()}(),l.uniforms=Qb({},i.uniforms,t.uniforms),l.defines=Qb({},i.defines,t.defines),l.defines["TROIKA_DERIVED_MATERIAL_".concat(n)]="",l.extensions=Qb({},i.extensions,t.extensions),l._listeners=void 0,l},g={constructor:{value:r},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:function(){return a},set:function(e){this[l]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(Qb(this.extensions,t.extensions),Qb(this.defines,t.defines),Qb(this.uniforms,_a.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){var t=new e.constructor;return o(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){var n=this._depthMaterial;return n||((n=this._depthMaterial=ey(e.isDerivedMaterial?e.getDepthMaterial():new Bg({depthPacking:Cn}),t)).defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){var n=this._distanceMaterial;return n||((n=this._distanceMaterial=ey(e.isDerivedMaterial?e.getDistanceMaterial():new Zg,t)).defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value:function(){var t=this._depthMaterial,n=this._distanceMaterial;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=r,new r}function ty(e,t,n,i,l){return(i||l||n)&&(e=e.replace(Eb,"\n".concat(n,"\nvoid troikaOrigMain").concat(t,"() {")),e+="\nvoid main() {\n  ".concat(i,"\n  troikaOrigMain").concat(t,"();\n  ").concat(l,"\n}")),e}function ny(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}var iy=0,ly=new Map;var ay,ry=function(){return(self.performance||Date).now()},oy=_b();var gy=function(){var e=[],t=0;function n(){for(var i=ry();e.length&&ry()-i<5;)e.shift()();t=e.length?setTimeout(n,0):0}return function(){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];var r=Sb();return e.push((function(){var e=ry();try{var t;(t=oy.webgl).generateIntoCanvas.apply(t,l),r.resolve({timing:ry()-e})}catch(n){r.reject(n)}})),t||(t=setTimeout(n,0)),r}}(),sy=function(){var e={},t=0;return function(n,i,l,a,r,o,g,s,I,u){var c="TroikaTextSDFGenerator_JS_"+t++%4,C=e[c];return C||(C=e[c]={workerModule:Nb({name:c,workerId:c,dependencies:[_b,ry],init:function(e,t){var n=e().javascript.generate;return function(){var e=t(),i=n.apply(void 0,arguments);return{textureData:i,timing:t()-e}}},getTransferables:function(e){return[e.textureData.buffer]}}),requests:0,idleTimer:null}),C.requests++,clearTimeout(C.idleTimer),C.workerModule(n,i,l,a,r,o).then((function(e){for(var t=e.textureData,l=e.timing,a=ry(),r=new Uint8Array(4*t.length),o=0;o<t.length;o++)r[4*o+u]=t[o];return oy.webglUtils.renderImageData(g,r,s,I,n,i,1<<3-u),l+=ry()-a,0===--C.requests&&(C.idleTimer=setTimeout((function(){!function(e){Kb[e]&&Kb[e].forEach((function(e){e()})),Hb[e]&&(Hb[e].terminate(),delete Hb[e])}(c)}),2e3)),{timing:l}}))}}();var Iy=oy.webglUtils.resizeWebGLCanvasWithoutClearing;var uy=Nb({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,i=new Uint8Array(e);if("ttcf"==n.readASCII(i,0,4)){var l=4;n.readUshort(i,l),l+=2,n.readUshort(i,l),l+=2;var a=n.readUint(i,l);l+=4;for(var r=[],o=0;o<a;o++){var g=n.readUint(i,l);l+=4,r.push(t._readFont(i,g))}return r}return[t._readFont(i,0)]},_readFont:function(e,n){var i=t._bin,l=n;i.readFixed(e,n),n+=4;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var r=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],o={_data:e,_offset:l},g={},s=0;s<a;s++){var I=i.readASCII(e,n,4);n+=4,i.readUint(e,n),n+=4;var u=i.readUint(e,n);n+=4;var c=i.readUint(e,n);n+=4,g[I]={offset:u,length:c}}for(s=0;s<r.length;s++){var C=r[s];g[C]&&(o[C.trim()]=t[C.trim()].parse(e,g[C].offset,g[C].length,o))}return o},_tabOffset:function(e,n,i){for(var l=t._bin,a=l.readUshort(e,i+4),r=i+12,o=0;o<a;o++){var g=l.readASCII(e,r,4);r+=4,l.readUint(e,r),r+=4;var s=l.readUint(e,r);if(r+=4,l.readUint(e,r),r+=4,g==n)return s}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,i){for(var l=[],a=0;a<i;a++)l.push(t._bin.readUshort(e,n+2*a));return l},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var i="",l=0;l<n;l++)i+=String.fromCharCode(e[t+l]);return i},readUnicode:function(e,t,n){for(var i="",l=0;l<n;l++){var a=e[t++]<<8|e[t++];i+=String.fromCharCode(a)}return i},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,i){var l=t._bin._tdec;return l&&0==n&&i==e.length?l.decode(e):t._bin.readASCII(e,n,i)},readBytes:function(e,t,n){for(var i=[],l=0;l<n;l++)i.push(e[t+l]);return i},readASCIIArray:function(e,t,n){for(var i=[],l=0;l<n;l++)i.push(String.fromCharCode(e[t+l]));return i},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,i,l,a){var r=t._bin,o={},g=n;r.readFixed(e,n),n+=4;var s=r.readUshort(e,n);n+=2;var I=r.readUshort(e,n);n+=2;var u=r.readUshort(e,n);return n+=2,o.scriptList=t._lctf.readScriptList(e,g+s),o.featureList=t._lctf.readFeatureList(e,g+I),o.lookupList=t._lctf.readLookupList(e,g+u,a),o},t._lctf.readLookupList=function(e,n,i){var l=t._bin,a=n,r=[],o=l.readUshort(e,n);n+=2;for(var g=0;g<o;g++){var s=l.readUshort(e,n);n+=2;var I=t._lctf.readLookupTable(e,a+s,i);r.push(I)}return r},t._lctf.readLookupTable=function(e,n,i){var l=t._bin,a=n,r={tabs:[]};r.ltype=l.readUshort(e,n),n+=2,r.flag=l.readUshort(e,n),n+=2;var o=l.readUshort(e,n);n+=2;for(var g=r.ltype,s=0;s<o;s++){var I=l.readUshort(e,n);n+=2;var u=i(e,g,a+I,r);r.tabs.push(u)}return r},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var i=t._bin,l=[],a=i.readUshort(e,n);if(n+=2,1==a){var r=i.readUshort(e,n);n+=2;var o=i.readUshort(e,n);n+=2;for(var g=0;g<o;g++)l.push(r+g),l.push(r+g),l.push(i.readUshort(e,n)),n+=2}if(2==a){var s=i.readUshort(e,n);for(n+=2,g=0;g<s;g++)l.push(i.readUshort(e,n)),n+=2,l.push(i.readUshort(e,n)),n+=2,l.push(i.readUshort(e,n)),n+=2}return l},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var i=e[n],l=e[n+1];if(e[n+2],i<=t&&t<=l)return n}return-1},t._lctf.readCoverage=function(e,n){var i=t._bin,l={};l.fmt=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,1==l.fmt&&(l.tab=i.readUshorts(e,n,a)),2==l.fmt&&(l.tab=i.readUshorts(e,n,3*a)),l},t._lctf.coverageIndex=function(e,n){var i=e.tab;if(1==e.fmt)return i.indexOf(n);if(2==e.fmt){var l=t._lctf.getInterval(i,n);if(-1!=l)return i[l+2]+(n-i[l])}return-1},t._lctf.readFeatureList=function(e,n){var i=t._bin,l=n,a=[],r=i.readUshort(e,n);n+=2;for(var o=0;o<r;o++){var g=i.readASCII(e,n,4);n+=4;var s=i.readUshort(e,n);n+=2;var I=t._lctf.readFeatureTable(e,l+s);I.tag=g.trim(),a.push(I)}return a},t._lctf.readFeatureTable=function(e,n){var i=t._bin,l=n,a={},r=i.readUshort(e,n);n+=2,r>0&&(a.featureParams=l+r);var o=i.readUshort(e,n);n+=2,a.tab=[];for(var g=0;g<o;g++)a.tab.push(i.readUshort(e,n+2*g));return a},t._lctf.readScriptList=function(e,n){var i=t._bin,l=n,a={},r=i.readUshort(e,n);n+=2;for(var o=0;o<r;o++){var g=i.readASCII(e,n,4);n+=4;var s=i.readUshort(e,n);n+=2,a[g.trim()]=t._lctf.readScriptTable(e,l+s)}return a},t._lctf.readScriptTable=function(e,n){var i=t._bin,l=n,a={},r=i.readUshort(e,n);n+=2,a.default=t._lctf.readLangSysTable(e,l+r);var o=i.readUshort(e,n);n+=2;for(var g=0;g<o;g++){var s=i.readASCII(e,n,4);n+=4;var I=i.readUshort(e,n);n+=2,a[s.trim()]=t._lctf.readLangSysTable(e,l+I)}return a},t._lctf.readLangSysTable=function(e,n){var i=t._bin,l={};i.readUshort(e,n),n+=2,l.reqFeature=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,l.features=i.readUshorts(e,n,a),l},t.CFF={},t.CFF.parse=function(e,n,i){var l=t._bin;(e=new Uint8Array(e.buffer,n,i))[n=0],e[++n],e[++n],e[++n],n++;var a=[];n=t.CFF.readIndex(e,n,a);for(var r=[],o=0;o<a.length-1;o++)r.push(l.readASCII(e,n+a[o],a[o+1]-a[o]));n+=a[a.length-1];var g=[];n=t.CFF.readIndex(e,n,g);var s=[];for(o=0;o<g.length-1;o++)s.push(t.CFF.readDict(e,n+g[o],n+g[o+1]));n+=g[g.length-1];var I=s[0],u=[];n=t.CFF.readIndex(e,n,u);var c=[];for(o=0;o<u.length-1;o++)c.push(l.readASCII(e,n+u[o],u[o+1]-u[o]));if(n+=u[u.length-1],t.CFF.readSubrs(e,n,I),I.CharStrings){n=I.CharStrings,u=[],n=t.CFF.readIndex(e,n,u);var C=[];for(o=0;o<u.length-1;o++)C.push(l.readBytes(e,n+u[o],u[o+1]-u[o]));I.CharStrings=C}if(I.ROS){n=I.FDArray;var d=[];for(n=t.CFF.readIndex(e,n,d),I.FDArray=[],o=0;o<d.length-1;o++){var h=t.CFF.readDict(e,n+d[o],n+d[o+1]);t.CFF._readFDict(e,h,c),I.FDArray.push(h)}n+=d[d.length-1],n=I.FDSelect,I.FDSelect=[];var A=e[n];if(n++,3!=A)throw A;var m=l.readUshort(e,n);for(n+=2,o=0;o<m+1;o++)I.FDSelect.push(l.readUshort(e,n),e[n+2]),n+=3}return I.Encoding&&(I.Encoding=t.CFF.readEncoding(e,I.Encoding,I.CharStrings.length)),I.charset&&(I.charset=t.CFF.readCharset(e,I.charset,I.CharStrings.length)),t.CFF._readFDict(e,I,c),I},t.CFF._readFDict=function(e,n,i){var l;for(var a in n.Private&&(l=n.Private[1],n.Private=t.CFF.readDict(e,l,l+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,l+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(n[a]=i[n[a]-426+35])},t.CFF.readSubrs=function(e,n,i){var l=t._bin,a=[];n=t.CFF.readIndex(e,n,a);var r,o=a.length;r=o<1240?107:o<33900?1131:32768,i.Bias=r,i.Subrs=[];for(var g=0;g<a.length-1;g++)i.Subrs.push(l.readBytes(e,n+a[g],a[g+1]-a[g]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,i){t._bin;var l=[".notdef"],a=e[n];if(n++,0!=a)throw"error: unknown encoding format: "+a;var r=e[n];n++;for(var o=0;o<r;o++)l.push(e[n+o]);return l},t.CFF.readCharset=function(e,n,i){var l=t._bin,a=[".notdef"],r=e[n];if(n++,0==r)for(var o=0;o<i;o++){var g=l.readUshort(e,n);n+=2,a.push(g)}else{if(1!=r&&2!=r)throw"error: format: "+r;for(;a.length<i;){g=l.readUshort(e,n),n+=2;var s=0;for(1==r?(s=e[n],n++):(s=l.readUshort(e,n),n+=2),o=0;o<=s;o++)a.push(g),g++}}return a},t.CFF.readIndex=function(e,n,i){var l=t._bin,a=l.readUshort(e,n)+1,r=e[n+=2];if(n++,1==r)for(var o=0;o<a;o++)i.push(e[n+o]);else if(2==r)for(o=0;o<a;o++)i.push(l.readUshort(e,n+2*o));else if(3==r)for(o=0;o<a;o++)i.push(16777215&l.readUint(e,n+3*o-1));else if(1!=a)throw"unsupported offset size: "+r+", count: "+a;return(n+=a*r)-1},t.CFF.getCharString=function(e,n,i){var l=t._bin,a=e[n],r=e[n+1];e[n+2],e[n+3],e[n+4];var o=1,g=null,s=null;a<=20&&(g=a,o=1),12==a&&(g=100*a+r,o=2),21<=a&&a<=27&&(g=a,o=1),28==a&&(s=l.readShort(e,n+1),o=3),29<=a&&a<=31&&(g=a,o=1),32<=a&&a<=246&&(s=a-139,o=1),247<=a&&a<=250&&(s=256*(a-247)+r+108,o=2),251<=a&&a<=254&&(s=256*-(a-251)-r-108,o=2),255==a&&(s=l.readInt(e,n+1)/65535,o=5),i.val=null!=s?s:"o"+g,i.size=o},t.CFF.readCharString=function(e,n,i){for(var l=n+i,a=t._bin,r=[];n<l;){var o=e[n],g=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,I=null,u=null;o<=20&&(I=o,s=1),12==o&&(I=100*o+g,s=2),19!=o&&20!=o||(I=o,s=2),21<=o&&o<=27&&(I=o,s=1),28==o&&(u=a.readShort(e,n+1),s=3),29<=o&&o<=31&&(I=o,s=1),32<=o&&o<=246&&(u=o-139,s=1),247<=o&&o<=250&&(u=256*(o-247)+g+108,s=2),251<=o&&o<=254&&(u=256*-(o-251)-g-108,s=2),255==o&&(u=a.readInt(e,n+1)/65535,s=5),r.push(null!=u?u:"o"+I),n+=s}return r},t.CFF.readDict=function(e,n,i){for(var l=t._bin,a={},r=[];n<i;){var o=e[n],g=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,I=null,u=null;if(28==o&&(u=l.readShort(e,n+1),s=3),29==o&&(u=l.readInt(e,n+1),s=5),32<=o&&o<=246&&(u=o-139,s=1),247<=o&&o<=250&&(u=256*(o-247)+g+108,s=2),251<=o&&o<=254&&(u=256*-(o-251)-g-108,s=2),255==o)throw u=l.readInt(e,n+1)/65535,s=5,"unknown number";if(30==o){var c=[];for(s=1;;){var C=e[n+s];s++;var d=C>>4,h=15&C;if(15!=d&&c.push(d),15!=h&&c.push(h),15==h)break}for(var A="",m=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],p=0;p<c.length;p++)A+=m[c[p]];u=parseFloat(A)}o<=21&&(I=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][o],s=1,12==o&&(I=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],s=2)),null!=I?(a[I]=1==r.length?r[0]:r,r=[]):r.push(u),n+=s}return a},t.cmap={},t.cmap.parse=function(e,n,i){e=new Uint8Array(e.buffer,n,i),n=0;var l=t._bin,a={};l.readUshort(e,n),n+=2;var r=l.readUshort(e,n);n+=2;var o=[];a.tables=[];for(var g=0;g<r;g++){var s=l.readUshort(e,n);n+=2;var I=l.readUshort(e,n);n+=2;var u=l.readUint(e,n);n+=4;var c="p"+s+"e"+I,C=o.indexOf(u);if(-1==C){var d;C=a.tables.length,o.push(u);var h=l.readUshort(e,u);0==h?d=t.cmap.parse0(e,u):4==h?d=t.cmap.parse4(e,u):6==h?d=t.cmap.parse6(e,u):12==h?d=t.cmap.parse12(e,u):console.debug("unknown format: "+h,s,I,u),a.tables.push(d)}if(null!=a[c])throw"multiple tables for one platform+encoding";a[c]=C}return a},t.cmap.parse0=function(e,n){var i=t._bin,l={};l.format=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,l.map=[];for(var r=0;r<a-6;r++)l.map.push(e[n+r]);return l},t.cmap.parse4=function(e,n){var i=t._bin,l=n,a={};a.format=i.readUshort(e,n),n+=2;var r=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2;var g=o/2;a.searchRange=i.readUshort(e,n),n+=2,a.entrySelector=i.readUshort(e,n),n+=2,a.rangeShift=i.readUshort(e,n),n+=2,a.endCount=i.readUshorts(e,n,g),n+=2*g,n+=2,a.startCount=i.readUshorts(e,n,g),n+=2*g,a.idDelta=[];for(var s=0;s<g;s++)a.idDelta.push(i.readShort(e,n)),n+=2;for(a.idRangeOffset=i.readUshorts(e,n,g),n+=2*g,a.glyphIdArray=[];n<l+r;)a.glyphIdArray.push(i.readUshort(e,n)),n+=2;return a},t.cmap.parse6=function(e,n){var i=t._bin,l={};l.format=i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,l.firstCode=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,l.glyphIdArray=[];for(var r=0;r<a;r++)l.glyphIdArray.push(i.readUshort(e,n)),n+=2;return l},t.cmap.parse12=function(e,n){var i=t._bin,l={};l.format=i.readUshort(e,n),n+=2,n+=2,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4;var a=i.readUint(e,n);n+=4,l.groups=[];for(var r=0;r<a;r++){var o=n+12*r,g=i.readUint(e,o+0),s=i.readUint(e,o+4),I=i.readUint(e,o+8);l.groups.push([g,s,I])}return l},t.glyf={},t.glyf.parse=function(e,t,n,i){for(var l=[],a=0;a<i.maxp.numGlyphs;a++)l.push(null);return l},t.glyf._parseGlyf=function(e,n){var i=t._bin,l=e._data,a=t._tabOffset(l,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var r={};if(r.noc=i.readShort(l,a),a+=2,r.xMin=i.readShort(l,a),a+=2,r.yMin=i.readShort(l,a),a+=2,r.xMax=i.readShort(l,a),a+=2,r.yMax=i.readShort(l,a),a+=2,r.xMin>=r.xMax||r.yMin>=r.yMax)return null;if(r.noc>0){r.endPts=[];for(var o=0;o<r.noc;o++)r.endPts.push(i.readUshort(l,a)),a+=2;var g=i.readUshort(l,a);if(a+=2,l.length-a<g)return null;r.instructions=i.readBytes(l,a,g),a+=g;var s=r.endPts[r.noc-1]+1;for(r.flags=[],o=0;o<s;o++){var I=l[a];if(a++,r.flags.push(I),0!=(8&I)){var u=l[a];a++;for(var c=0;c<u;c++)r.flags.push(I),o++}}for(r.xs=[],o=0;o<s;o++){var C=0!=(2&r.flags[o]),d=0!=(16&r.flags[o]);C?(r.xs.push(d?l[a]:-l[a]),a++):d?r.xs.push(0):(r.xs.push(i.readShort(l,a)),a+=2)}for(r.ys=[],o=0;o<s;o++)C=0!=(4&r.flags[o]),d=0!=(32&r.flags[o]),C?(r.ys.push(d?l[a]:-l[a]),a++):d?r.ys.push(0):(r.ys.push(i.readShort(l,a)),a+=2);var h=0,A=0;for(o=0;o<s;o++)h+=r.xs[o],A+=r.ys[o],r.xs[o]=h,r.ys[o]=A}else{var m;r.parts=[];do{m=i.readUshort(l,a),a+=2;var p={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(r.parts.push(p),p.glyphIndex=i.readUshort(l,a),a+=2,1&m){var v=i.readShort(l,a);a+=2;var f=i.readShort(l,a);a+=2}else v=i.readInt8(l,a),a++,f=i.readInt8(l,a),a++;2&m?(p.m.tx=v,p.m.ty=f):(p.p1=v,p.p2=f),8&m?(p.m.a=p.m.d=i.readF2dot14(l,a),a+=2):64&m?(p.m.a=i.readF2dot14(l,a),a+=2,p.m.d=i.readF2dot14(l,a),a+=2):128&m&&(p.m.a=i.readF2dot14(l,a),a+=2,p.m.b=i.readF2dot14(l,a),a+=2,p.m.c=i.readF2dot14(l,a),a+=2,p.m.d=i.readF2dot14(l,a),a+=2)}while(32&m);if(256&m){var b=i.readUshort(l,a);for(a+=2,r.instr=[],o=0;o<b;o++)r.instr.push(l[a]),a++}}return r},t.GPOS={},t.GPOS.parse=function(e,n,i,l){return t._lctf.parse(e,n,i,l,t.GPOS.subt)},t.GPOS.subt=function(e,n,i,l){var a=t._bin,r=i,o={};if(o.fmt=a.readUshort(e,i),i+=2,1==n||2==n||3==n||7==n||8==n&&o.fmt<=2){var g=a.readUshort(e,i);i+=2,o.coverage=t._lctf.readCoverage(e,g+r)}if(1==n&&1==o.fmt){var s=a.readUshort(e,i);i+=2;var I=t._lctf.numOfOnes(s);0!=s&&(o.pos=t.GPOS.readValueRecord(e,i,s))}else if(2==n&&o.fmt>=1&&o.fmt<=2){s=a.readUshort(e,i),i+=2;var u=a.readUshort(e,i);i+=2,I=t._lctf.numOfOnes(s);var c=t._lctf.numOfOnes(u);if(1==o.fmt){o.pairsets=[];var C=a.readUshort(e,i);i+=2;for(var d=0;d<C;d++){var h=r+a.readUshort(e,i);i+=2;var A=a.readUshort(e,h);h+=2;for(var m=[],p=0;p<A;p++){var v=a.readUshort(e,h);h+=2,0!=s&&(Z=t.GPOS.readValueRecord(e,h,s),h+=2*I),0!=u&&(q=t.GPOS.readValueRecord(e,h,u),h+=2*c),m.push({gid2:v,val1:Z,val2:q})}o.pairsets.push(m)}}if(2==o.fmt){var f=a.readUshort(e,i);i+=2;var b=a.readUshort(e,i);i+=2;var y=a.readUshort(e,i);i+=2;var G=a.readUshort(e,i);for(i+=2,o.classDef1=t._lctf.readClassDef(e,r+f),o.classDef2=t._lctf.readClassDef(e,r+b),o.matrix=[],d=0;d<y;d++){var B=[];for(p=0;p<G;p++){var Z=null,q=null;0!=s&&(Z=t.GPOS.readValueRecord(e,i,s),i+=2*I),0!=u&&(q=t.GPOS.readValueRecord(e,i,u),i+=2*c),B.push({val1:Z,val2:q})}o.matrix.push(B)}}}else{if(9==n&&1==o.fmt){var x=a.readUshort(e,i);i+=2;var w=a.readUint(e,i);if(i+=4,9==l.ltype)l.ltype=x;else if(l.ltype!=x)throw"invalid extension substitution";return t.GPOS.subt(e,l.ltype,r+w)}console.debug("unsupported GPOS table LookupType",n,"format",o.fmt)}return o},t.GPOS.readValueRecord=function(e,n,i){var l=t._bin,a=[];return a.push(1&i?l.readShort(e,n):0),n+=1&i?2:0,a.push(2&i?l.readShort(e,n):0),n+=2&i?2:0,a.push(4&i?l.readShort(e,n):0),n+=4&i?2:0,a.push(8&i?l.readShort(e,n):0),n+=8&i?2:0,a},t.GSUB={},t.GSUB.parse=function(e,n,i,l){return t._lctf.parse(e,n,i,l,t.GSUB.subt)},t.GSUB.subt=function(e,n,i,l){var a=t._bin,r=i,o={};if(o.fmt=a.readUshort(e,i),i+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&o.fmt<=2||6==n&&o.fmt<=2){var g=a.readUshort(e,i);i+=2,o.coverage=t._lctf.readCoverage(e,r+g)}if(1==n&&o.fmt>=1&&o.fmt<=2){if(1==o.fmt)o.delta=a.readShort(e,i),i+=2;else if(2==o.fmt){var s=a.readUshort(e,i);i+=2,o.newg=a.readUshorts(e,i,s),i+=2*o.newg.length}}else if(4==n){o.vals=[],s=a.readUshort(e,i),i+=2;for(var I=0;I<s;I++){var u=a.readUshort(e,i);i+=2,o.vals.push(t.GSUB.readLigatureSet(e,r+u))}}else if(5==n&&2==o.fmt){if(2==o.fmt){var c=a.readUshort(e,i);i+=2,o.cDef=t._lctf.readClassDef(e,r+c),o.scset=[];var C=a.readUshort(e,i);for(i+=2,I=0;I<C;I++){var d=a.readUshort(e,i);i+=2,o.scset.push(0==d?null:t.GSUB.readSubClassSet(e,r+d))}}}else if(6==n&&3==o.fmt){if(3==o.fmt){for(I=0;I<3;I++){s=a.readUshort(e,i),i+=2;for(var h=[],A=0;A<s;A++)h.push(t._lctf.readCoverage(e,r+a.readUshort(e,i+2*A)));i+=2*s,0==I&&(o.backCvg=h),1==I&&(o.inptCvg=h),2==I&&(o.ahedCvg=h)}s=a.readUshort(e,i),i+=2,o.lookupRec=t.GSUB.readSubstLookupRecords(e,i,s)}}else{if(7==n&&1==o.fmt){var m=a.readUshort(e,i);i+=2;var p=a.readUint(e,i);if(i+=4,9==l.ltype)l.ltype=m;else if(l.ltype!=m)throw"invalid extension substitution";return t.GSUB.subt(e,l.ltype,r+p)}console.debug("unsupported GSUB table LookupType",n,"format",o.fmt)}return o},t.GSUB.readSubClassSet=function(e,n){var i=t._bin.readUshort,l=n,a=[],r=i(e,n);n+=2;for(var o=0;o<r;o++){var g=i(e,n);n+=2,a.push(t.GSUB.readSubClassRule(e,l+g))}return a},t.GSUB.readSubClassRule=function(e,n){var i=t._bin.readUshort,l={},a=i(e,n),r=i(e,n+=2);n+=2,l.input=[];for(var o=0;o<a-1;o++)l.input.push(i(e,n)),n+=2;return l.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,r),l},t.GSUB.readSubstLookupRecords=function(e,n,i){for(var l=t._bin.readUshort,a=[],r=0;r<i;r++)a.push(l(e,n),l(e,n+2)),n+=4;return a},t.GSUB.readChainSubClassSet=function(e,n){var i=t._bin,l=n,a=[],r=i.readUshort(e,n);n+=2;for(var o=0;o<r;o++){var g=i.readUshort(e,n);n+=2,a.push(t.GSUB.readChainSubClassRule(e,l+g))}return a},t.GSUB.readChainSubClassRule=function(e,n){for(var i=t._bin,l={},a=["backtrack","input","lookahead"],r=0;r<a.length;r++){var o=i.readUshort(e,n);n+=2,1==r&&o--,l[a[r]]=i.readUshorts(e,n,o),n+=2*l[a[r]].length}return o=i.readUshort(e,n),n+=2,l.subst=i.readUshorts(e,n,2*o),n+=2*l.subst.length,l},t.GSUB.readLigatureSet=function(e,n){var i=t._bin,l=n,a=[],r=i.readUshort(e,n);n+=2;for(var o=0;o<r;o++){var g=i.readUshort(e,n);n+=2,a.push(t.GSUB.readLigature(e,l+g))}return a},t.GSUB.readLigature=function(e,n){var i=t._bin,l={chain:[]};l.nglyph=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;for(var r=0;r<a-1;r++)l.chain.push(i.readUshort(e,n)),n+=2;return l},t.head={},t.head.parse=function(e,n,i){var l=t._bin,a={};return l.readFixed(e,n),n+=4,a.fontRevision=l.readFixed(e,n),n+=4,l.readUint(e,n),n+=4,l.readUint(e,n),n+=4,a.flags=l.readUshort(e,n),n+=2,a.unitsPerEm=l.readUshort(e,n),n+=2,a.created=l.readUint64(e,n),n+=8,a.modified=l.readUint64(e,n),n+=8,a.xMin=l.readShort(e,n),n+=2,a.yMin=l.readShort(e,n),n+=2,a.xMax=l.readShort(e,n),n+=2,a.yMax=l.readShort(e,n),n+=2,a.macStyle=l.readUshort(e,n),n+=2,a.lowestRecPPEM=l.readUshort(e,n),n+=2,a.fontDirectionHint=l.readShort(e,n),n+=2,a.indexToLocFormat=l.readShort(e,n),n+=2,a.glyphDataFormat=l.readShort(e,n),n+=2,a},t.hhea={},t.hhea.parse=function(e,n,i){var l=t._bin,a={};return l.readFixed(e,n),n+=4,a.ascender=l.readShort(e,n),n+=2,a.descender=l.readShort(e,n),n+=2,a.lineGap=l.readShort(e,n),n+=2,a.advanceWidthMax=l.readUshort(e,n),n+=2,a.minLeftSideBearing=l.readShort(e,n),n+=2,a.minRightSideBearing=l.readShort(e,n),n+=2,a.xMaxExtent=l.readShort(e,n),n+=2,a.caretSlopeRise=l.readShort(e,n),n+=2,a.caretSlopeRun=l.readShort(e,n),n+=2,a.caretOffset=l.readShort(e,n),n+=2,n+=8,a.metricDataFormat=l.readShort(e,n),n+=2,a.numberOfHMetrics=l.readUshort(e,n),n+=2,a},t.hmtx={},t.hmtx.parse=function(e,n,i,l){for(var a=t._bin,r={aWidth:[],lsBearing:[]},o=0,g=0,s=0;s<l.maxp.numGlyphs;s++)s<l.hhea.numberOfHMetrics&&(o=a.readUshort(e,n),n+=2,g=a.readShort(e,n),n+=2),r.aWidth.push(o),r.lsBearing.push(g);return r},t.kern={},t.kern.parse=function(e,n,i,l){var a=t._bin,r=a.readUshort(e,n);if(n+=2,1==r)return t.kern.parseV1(e,n-2,i,l);var o=a.readUshort(e,n);n+=2;for(var g={glyph1:[],rval:[]},s=0;s<o;s++){n+=2,i=a.readUshort(e,n),n+=2;var I=a.readUshort(e,n);n+=2;var u=I>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,g)}return g},t.kern.parseV1=function(e,n,i,l){var a=t._bin;a.readFixed(e,n),n+=4;var r=a.readUint(e,n);n+=4;for(var o={glyph1:[],rval:[]},g=0;g<r;g++){a.readUint(e,n),n+=4;var s=a.readUshort(e,n);n+=2,a.readUshort(e,n),n+=2;var I=s>>>8;if(0!=(I&=15))throw"unknown kern table format: "+I;n=t.kern.readFormat0(e,n,o)}return o},t.kern.readFormat0=function(e,n,i){var l=t._bin,a=-1,r=l.readUshort(e,n);n+=2,l.readUshort(e,n),n+=2,l.readUshort(e,n),n+=2,l.readUshort(e,n),n+=2;for(var o=0;o<r;o++){var g=l.readUshort(e,n);n+=2;var s=l.readUshort(e,n);n+=2;var I=l.readShort(e,n);n+=2,g!=a&&(i.glyph1.push(g),i.rval.push({glyph2:[],vals:[]}));var u=i.rval[i.rval.length-1];u.glyph2.push(s),u.vals.push(I),a=g}return n},t.loca={},t.loca.parse=function(e,n,i,l){var a=t._bin,r=[],o=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(0==o)for(var s=0;s<g;s++)r.push(a.readUshort(e,n+(s<<1))<<1);if(1==o)for(s=0;s<g;s++)r.push(a.readUint(e,n+(s<<2)));return r},t.maxp={},t.maxp.parse=function(e,n,i){var l=t._bin,a={},r=l.readUint(e,n);return n+=4,a.numGlyphs=l.readUshort(e,n),n+=2,65536==r&&(a.maxPoints=l.readUshort(e,n),n+=2,a.maxContours=l.readUshort(e,n),n+=2,a.maxCompositePoints=l.readUshort(e,n),n+=2,a.maxCompositeContours=l.readUshort(e,n),n+=2,a.maxZones=l.readUshort(e,n),n+=2,a.maxTwilightPoints=l.readUshort(e,n),n+=2,a.maxStorage=l.readUshort(e,n),n+=2,a.maxFunctionDefs=l.readUshort(e,n),n+=2,a.maxInstructionDefs=l.readUshort(e,n),n+=2,a.maxStackElements=l.readUshort(e,n),n+=2,a.maxSizeOfInstructions=l.readUshort(e,n),n+=2,a.maxComponentElements=l.readUshort(e,n),n+=2,a.maxComponentDepth=l.readUshort(e,n),n+=2),a},t.name={},t.name.parse=function(e,n,i){var l=t._bin,a={};l.readUshort(e,n),n+=2;var r=l.readUshort(e,n);n+=2,l.readUshort(e,n);for(var o,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],s=n+=2,I=0;I<r;I++){var u=l.readUshort(e,n);n+=2;var c=l.readUshort(e,n);n+=2;var C=l.readUshort(e,n);n+=2;var d=l.readUshort(e,n);n+=2;var h=l.readUshort(e,n);n+=2;var A=l.readUshort(e,n);n+=2;var m,p=g[d],v=s+12*r+A;if(0==u)m=l.readUnicode(e,v,h/2);else if(3==u&&0==c)m=l.readUnicode(e,v,h/2);else if(0==c)m=l.readASCII(e,v,h);else if(1==c)m=l.readUnicode(e,v,h/2);else if(3==c)m=l.readUnicode(e,v,h/2);else{if(1!=u)throw"unknown encoding "+c+", platformID: "+u;m=l.readASCII(e,v,h),console.debug("reading unknown MAC encoding "+c+" as ASCII")}var f="p"+u+","+C.toString(16);null==a[f]&&(a[f]={}),a[f][void 0!==p?p:d]=m,a[f]._lang=C}for(var b in a)if(null!=a[b].postScriptName&&1033==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&0==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&3084==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName)return a[b];for(var b in a){o=b;break}return console.debug("returning name table with languageID "+a[o]._lang),a[o]},t["OS/2"]={},t["OS/2"].parse=function(e,n,i){var l=t._bin.readUshort(e,n);n+=2;var a={};if(0==l)t["OS/2"].version0(e,n,a);else if(1==l)t["OS/2"].version1(e,n,a);else if(2==l||3==l||4==l)t["OS/2"].version2(e,n,a);else{if(5!=l)throw"unknown OS/2 table version: "+l;t["OS/2"].version5(e,n,a)}return a},t["OS/2"].version0=function(e,n,i){var l=t._bin;return i.xAvgCharWidth=l.readShort(e,n),n+=2,i.usWeightClass=l.readUshort(e,n),n+=2,i.usWidthClass=l.readUshort(e,n),n+=2,i.fsType=l.readUshort(e,n),n+=2,i.ySubscriptXSize=l.readShort(e,n),n+=2,i.ySubscriptYSize=l.readShort(e,n),n+=2,i.ySubscriptXOffset=l.readShort(e,n),n+=2,i.ySubscriptYOffset=l.readShort(e,n),n+=2,i.ySuperscriptXSize=l.readShort(e,n),n+=2,i.ySuperscriptYSize=l.readShort(e,n),n+=2,i.ySuperscriptXOffset=l.readShort(e,n),n+=2,i.ySuperscriptYOffset=l.readShort(e,n),n+=2,i.yStrikeoutSize=l.readShort(e,n),n+=2,i.yStrikeoutPosition=l.readShort(e,n),n+=2,i.sFamilyClass=l.readShort(e,n),n+=2,i.panose=l.readBytes(e,n,10),n+=10,i.ulUnicodeRange1=l.readUint(e,n),n+=4,i.ulUnicodeRange2=l.readUint(e,n),n+=4,i.ulUnicodeRange3=l.readUint(e,n),n+=4,i.ulUnicodeRange4=l.readUint(e,n),n+=4,i.achVendID=[l.readInt8(e,n),l.readInt8(e,n+1),l.readInt8(e,n+2),l.readInt8(e,n+3)],n+=4,i.fsSelection=l.readUshort(e,n),n+=2,i.usFirstCharIndex=l.readUshort(e,n),n+=2,i.usLastCharIndex=l.readUshort(e,n),n+=2,i.sTypoAscender=l.readShort(e,n),n+=2,i.sTypoDescender=l.readShort(e,n),n+=2,i.sTypoLineGap=l.readShort(e,n),n+=2,i.usWinAscent=l.readUshort(e,n),n+=2,i.usWinDescent=l.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,i){var l=t._bin;return n=t["OS/2"].version0(e,n,i),i.ulCodePageRange1=l.readUint(e,n),n+=4,i.ulCodePageRange2=l.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,i){var l=t._bin;return n=t["OS/2"].version1(e,n,i),i.sxHeight=l.readShort(e,n),n+=2,i.sCapHeight=l.readShort(e,n),n+=2,i.usDefault=l.readUshort(e,n),n+=2,i.usBreak=l.readUshort(e,n),n+=2,i.usMaxContext=l.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,i){var l=t._bin;return n=t["OS/2"].version2(e,n,i),i.usLowerOpticalPointSize=l.readUshort(e,n),n+=2,i.usUpperOpticalPointSize=l.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,i){var l=t._bin,a={};return a.version=l.readFixed(e,n),n+=4,a.italicAngle=l.readFixed(e,n),n+=4,a.underlinePosition=l.readShort(e,n),n+=2,a.underlineThickness=l.readShort(e,n),n+=2,a},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,i=-1;if(null!=n.p0e4?i=n.p0e4:null!=n.p3e1?i=n.p3e1:null!=n.p1e0?i=n.p1e0:null!=n.p0e3&&(i=n.p0e3),-1==i)throw"no familiar platform and encoding!";var l=n.tables[i];if(0==l.format)return t>=l.map.length?0:l.map[t];if(4==l.format){for(var a=-1,r=0;r<l.endCount.length;r++)if(t<=l.endCount[r]){a=r;break}return-1==a||l.startCount[a]>t?0:65535&(0!=l.idRangeOffset[a]?l.glyphIdArray[t-l.startCount[a]+(l.idRangeOffset[a]>>1)-(l.idRangeOffset.length-a)]:t+l.idDelta[a])}if(12==l.format){if(t>l.groups[l.groups.length-1][1])return 0;for(r=0;r<l.groups.length;r++){var o=l.groups[r];if(o[0]<=t&&t<=o[1])return o[2]+(t-o[0])}return 0}throw"unknown cmap table format "+l.format},t.U.glyphToPath=function(e,n){var i={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var l=e.SVG.entries[n];return null==l?i:("string"==typeof l&&(l=t.SVG.toPath(l),e.SVG.entries[n]=l),l)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},r=e.CFF,o=e.CFF.Private;if(r.ROS){for(var g=0;r.FDSelect[g+2]<=n;)g+=2;o=r.FDArray[r.FDSelect[g+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],a,r,o,i)}else e.glyf&&t.U._drawGlyf(n,e,i);return i},t.U._drawGlyf=function(e,n,i){var l=n.glyf[e];null==l&&(l=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=l&&(l.noc>-1?t.U._simpleGlyph(l,i):t.U._compoGlyph(l,n,i))},t.U._simpleGlyph=function(e,n){for(var i=0;i<e.noc;i++){for(var l=0==i?0:e.endPts[i-1]+1,a=e.endPts[i],r=l;r<=a;r++){var o=r==l?a:r-1,g=r==a?l:r+1,s=1&e.flags[r],I=1&e.flags[o],u=1&e.flags[g],c=e.xs[r],C=e.ys[r];if(r==l)if(s){if(!I){t.U.P.moveTo(n,c,C);continue}t.U.P.moveTo(n,e.xs[o],e.ys[o])}else I?t.U.P.moveTo(n,e.xs[o],e.ys[o]):t.U.P.moveTo(n,(e.xs[o]+c)/2,(e.ys[o]+C)/2);s?I&&t.U.P.lineTo(n,c,C):u?t.U.P.qcurveTo(n,c,C,e.xs[g],e.ys[g]):t.U.P.qcurveTo(n,c,C,(c+e.xs[g])/2,(C+e.ys[g])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,i){for(var l=0;l<e.parts.length;l++){var a={cmds:[],crds:[]},r=e.parts[l];t.U._drawGlyf(r.glyphIndex,n,a);for(var o=r.m,g=0;g<a.crds.length;g+=2){var s=a.crds[g],I=a.crds[g+1];i.crds.push(s*o.a+I*o.b+o.tx),i.crds.push(s*o.c+I*o.d+o.ty)}for(g=0;g<a.cmds.length;g++)i.cmds.push(a.cmds[g])}},t.U._getGlyphClass=function(e,n){var i=t._lctf.getInterval(n,e);return-1==i?0:n[i+2]},t.U.getPairAdjustment=function(e,n,i){var l=0,a=!1;if(e.GPOS)for(var r=e.GPOS,o=r.lookupList,g=r.featureList,s=[],I=0;I<g.length;I++){var u=g[I];if("kern"==u.tag){a=!0;for(var c=0;c<u.tab.length;c++)if(!s[u.tab[c]]){s[u.tab[c]]=!0;for(var C=o[u.tab[c]],d=0;d<C.tabs.length;d++)if(null!=C.tabs[d]){var h,A=C.tabs[d];if(!A.coverage||-1!=(h=t._lctf.coverageIndex(A.coverage,n)))if(1==C.ltype);else if(2==C.ltype){var m;if(1==A.fmt){var p=A.pairsets[h];for(I=0;I<p.length;I++)p[I].gid2==i&&(m=p[I])}else if(2==A.fmt){var v=t.U._getGlyphClass(n,A.classDef1),f=t.U._getGlyphClass(i,A.classDef2);m=A.matrix[v][f]}m&&m.val1&&m.val1[2]&&(l+=m.val1[2]),m&&m.val2&&m.val2[0]&&(l+=m.val2[0])}}}}}if(e.kern&&!a){var b=e.kern.glyph1.indexOf(n);if(-1!=b){var y=e.kern.rval[b].glyph2.indexOf(i);-1!=y&&(l+=e.kern.rval[b].vals[y])}}return l},t.U._applySubs=function(e,n,i,l){for(var a=e.length-n-1,r=0;r<i.tabs.length;r++)if(null!=i.tabs[r]){var o,g=i.tabs[r];if(!g.coverage||-1!=(o=t._lctf.coverageIndex(g.coverage,e[n])))if(1==i.ltype)e[n],1==g.fmt?e[n]=e[n]+g.delta:e[n]=g.newg[o];else if(4==i.ltype)for(var s=g.vals[o],I=0;I<s.length;I++){var u=s[I],c=u.chain.length;if(!(c>a)){for(var C=!0,d=0,h=0;h<c;h++){for(;-1==e[n+d+(1+h)];)d++;u.chain[h]!=e[n+d+(1+h)]&&(C=!1)}if(C){for(e[n]=u.nglyph,h=0;h<c+d;h++)e[n+h+1]=-1;break}}}else if(5==i.ltype&&2==g.fmt)for(var A=t._lctf.getInterval(g.cDef,e[n]),m=g.cDef[A+2],p=g.scset[m],v=0;v<p.length;v++){var f=p[v],b=f.input;if(!(b.length>a)){for(C=!0,h=0;h<b.length;h++){var y=t._lctf.getInterval(g.cDef,e[n+1+h]);if(-1==A&&g.cDef[y+2]!=b[h]){C=!1;break}}if(C){var G=f.substLookupRecords;for(I=0;I<G.length;I+=2)G[I],G[I+1]}}}else if(6==i.ltype&&3==g.fmt){if(!t.U._glsCovered(e,g.backCvg,n-g.backCvg.length))continue;if(!t.U._glsCovered(e,g.inptCvg,n))continue;if(!t.U._glsCovered(e,g.ahedCvg,n+g.inptCvg.length))continue;var B=g.lookupRec;for(v=0;v<B.length;v+=2){A=B[v];var Z=l[B[v+1]];t.U._applySubs(e,n+A,Z,l)}}}},t.U._glsCovered=function(e,n,i){for(var l=0;l<n.length;l++)if(-1==t._lctf.coverageIndex(n[l],e[i+l]))return!1;return!0},t.U.glyphsToPath=function(e,n,i){for(var l={cmds:[],crds:[]},a=0,r=0;r<n.length;r++){var o=n[r];if(-1!=o){for(var g=r<n.length-1&&-1!=n[r+1]?n[r+1]:0,s=t.U.glyphToPath(e,o),I=0;I<s.crds.length;I+=2)l.crds.push(s.crds[I]+a),l.crds.push(s.crds[I+1]);for(i&&l.cmds.push(i),I=0;I<s.cmds.length;I++)l.cmds.push(s.cmds[I]);i&&l.cmds.push("X"),a+=e.hmtx.aWidth[o],r<n.length-1&&(a+=t.U.getPairAdjustment(e,o,g))}}return l},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,i,l,a,r){e.cmds.push("C"),e.crds.push(t,n,i,l,a,r)},t.U.P.qcurveTo=function(e,t,n,i,l){e.cmds.push("Q"),e.crds.push(t,n,i,l)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,i,l,a){for(var r=n.stack,o=n.nStems,g=n.haveWidth,s=n.width,I=n.open,u=0,c=n.x,C=n.y,d=0,h=0,A=0,m=0,p=0,v=0,f=0,b=0,y=0,G=0,B={val:0,size:0};u<e.length;){t.CFF.getCharString(e,u,B);var Z=B.val;if(u+=B.size,"o1"==Z||"o18"==Z)r.length%2!=0&&!g&&(s=r.shift()+l.nominalWidthX),o+=r.length>>1,r.length=0,g=!0;else if("o3"==Z||"o23"==Z)r.length%2!=0&&!g&&(s=r.shift()+l.nominalWidthX),o+=r.length>>1,r.length=0,g=!0;else if("o4"==Z)r.length>1&&!g&&(s=r.shift()+l.nominalWidthX,g=!0),I&&t.U.P.closePath(a),C+=r.pop(),t.U.P.moveTo(a,c,C),I=!0;else if("o5"==Z)for(;r.length>0;)c+=r.shift(),C+=r.shift(),t.U.P.lineTo(a,c,C);else if("o6"==Z||"o7"==Z)for(var q=r.length,x="o6"==Z,w=0;w<q;w++){var W=r.shift();x?c+=W:C+=W,x=!x,t.U.P.lineTo(a,c,C)}else if("o8"==Z||"o24"==Z){q=r.length;for(var S=0;S+6<=q;)d=c+r.shift(),h=C+r.shift(),A=d+r.shift(),m=h+r.shift(),c=A+r.shift(),C=m+r.shift(),t.U.P.curveTo(a,d,h,A,m,c,C),S+=6;"o24"==Z&&(c+=r.shift(),C+=r.shift(),t.U.P.lineTo(a,c,C))}else{if("o11"==Z)break;if("o1234"==Z||"o1235"==Z||"o1236"==Z||"o1237"==Z)"o1234"==Z&&(h=C,A=(d=c+r.shift())+r.shift(),G=m=h+r.shift(),v=m,b=C,c=(f=(p=(y=A+r.shift())+r.shift())+r.shift())+r.shift(),t.U.P.curveTo(a,d,h,A,m,y,G),t.U.P.curveTo(a,p,v,f,b,c,C)),"o1235"==Z&&(d=c+r.shift(),h=C+r.shift(),A=d+r.shift(),m=h+r.shift(),y=A+r.shift(),G=m+r.shift(),p=y+r.shift(),v=G+r.shift(),f=p+r.shift(),b=v+r.shift(),c=f+r.shift(),C=b+r.shift(),r.shift(),t.U.P.curveTo(a,d,h,A,m,y,G),t.U.P.curveTo(a,p,v,f,b,c,C)),"o1236"==Z&&(d=c+r.shift(),h=C+r.shift(),A=d+r.shift(),G=m=h+r.shift(),v=m,f=(p=(y=A+r.shift())+r.shift())+r.shift(),b=v+r.shift(),c=f+r.shift(),t.U.P.curveTo(a,d,h,A,m,y,G),t.U.P.curveTo(a,p,v,f,b,c,C)),"o1237"==Z&&(d=c+r.shift(),h=C+r.shift(),A=d+r.shift(),m=h+r.shift(),y=A+r.shift(),G=m+r.shift(),p=y+r.shift(),v=G+r.shift(),f=p+r.shift(),b=v+r.shift(),Math.abs(f-c)>Math.abs(b-C)?c=f+r.shift():C=b+r.shift(),t.U.P.curveTo(a,d,h,A,m,y,G),t.U.P.curveTo(a,p,v,f,b,c,C));else if("o14"==Z){if(r.length>0&&!g&&(s=r.shift()+i.nominalWidthX,g=!0),4==r.length){var R=r.shift(),V=r.shift(),k=r.shift(),X=r.shift(),Y=t.CFF.glyphBySE(i,k),H=t.CFF.glyphBySE(i,X);t.U._drawCFF(i.CharStrings[Y],n,i,l,a),n.x=R,n.y=V,t.U._drawCFF(i.CharStrings[H],n,i,l,a)}I&&(t.U.P.closePath(a),I=!1)}else if("o19"==Z||"o20"==Z)r.length%2!=0&&!g&&(s=r.shift()+l.nominalWidthX),o+=r.length>>1,r.length=0,g=!0,u+=o+7>>3;else if("o21"==Z)r.length>2&&!g&&(s=r.shift()+l.nominalWidthX,g=!0),C+=r.pop(),c+=r.pop(),I&&t.U.P.closePath(a),t.U.P.moveTo(a,c,C),I=!0;else if("o22"==Z)r.length>1&&!g&&(s=r.shift()+l.nominalWidthX,g=!0),c+=r.pop(),I&&t.U.P.closePath(a),t.U.P.moveTo(a,c,C),I=!0;else if("o25"==Z){for(;r.length>6;)c+=r.shift(),C+=r.shift(),t.U.P.lineTo(a,c,C);d=c+r.shift(),h=C+r.shift(),A=d+r.shift(),m=h+r.shift(),c=A+r.shift(),C=m+r.shift(),t.U.P.curveTo(a,d,h,A,m,c,C)}else if("o26"==Z)for(r.length%2&&(c+=r.shift());r.length>0;)d=c,h=C+r.shift(),c=A=d+r.shift(),C=(m=h+r.shift())+r.shift(),t.U.P.curveTo(a,d,h,A,m,c,C);else if("o27"==Z)for(r.length%2&&(C+=r.shift());r.length>0;)h=C,A=(d=c+r.shift())+r.shift(),m=h+r.shift(),c=A+r.shift(),C=m,t.U.P.curveTo(a,d,h,A,m,c,C);else if("o10"==Z||"o29"==Z){var K="o10"==Z?l:i;if(0==r.length)console.debug("error: empty stack");else{var F=r.pop(),N=K.Subrs[F+K.Bias];n.x=c,n.y=C,n.nStems=o,n.haveWidth=g,n.width=s,n.open=I,t.U._drawCFF(N,n,i,l,a),c=n.x,C=n.y,o=n.nStems,g=n.haveWidth,s=n.width,I=n.open}}else if("o30"==Z||"o31"==Z){var z=r.length,M=(S=0,"o31"==Z);for(S+=z-(q=-3&z);S<q;)M?(h=C,A=(d=c+r.shift())+r.shift(),C=(m=h+r.shift())+r.shift(),q-S==5?(c=A+r.shift(),S++):c=A,M=!1):(d=c,h=C+r.shift(),A=d+r.shift(),m=h+r.shift(),c=A+r.shift(),q-S==5?(C=m+r.shift(),S++):C=m,M=!0),t.U.P.curveTo(a,d,h,A,m,c,C),S+=4}else{if("o"==(Z+"").charAt(0))throw console.debug("Unknown operation: "+Z,e),Z;r.push(Z)}}}n.x=c,n.y=C,n.nStems=o,n.haveWidth=g,n.width=s,n.open=I};var n=t,i={Typr:n};return e.Typr=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,i=Uint32Array,l=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(e,t){for(var l=new n(31),a=0;a<31;++a)l[a]=t+=1<<e[a-1];var r=new i(l[30]);for(a=1;a<30;++a)for(var o=l[a];o<l[a+1];++o)r[o]=o-l[a]<<5|a;return[l,r]},g=o(l,2),s=g[0],I=g[1];s[28]=258,I[258]=28;for(var u=o(a,0)[0],c=new n(32768),C=0;C<32768;++C){var d=(43690&C)>>>1|(21845&C)<<1;d=(61680&(d=(52428&d)>>>2|(13107&d)<<2))>>>4|(3855&d)<<4,c[C]=((65280&d)>>>8|(255&d)<<8)>>>1}var h=function(e,t,i){for(var l=e.length,a=0,r=new n(t);a<l;++a)++r[e[a]-1];var o,g=new n(t);for(a=0;a<t;++a)g[a]=g[a-1]+r[a-1]<<1;if(i){o=new n(1<<t);var s=15-t;for(a=0;a<l;++a)if(e[a])for(var I=a<<4|e[a],u=t-e[a],C=g[e[a]-1]++<<u,d=C|(1<<u)-1;C<=d;++C)o[c[C]>>>s]=I}else for(o=new n(l),a=0;a<l;++a)e[a]&&(o[a]=c[g[e[a]-1]++]>>>15-e[a]);return o},A=new t(288);for(C=0;C<144;++C)A[C]=8;for(C=144;C<256;++C)A[C]=9;for(C=256;C<280;++C)A[C]=7;for(C=280;C<288;++C)A[C]=8;var m=new t(32);for(C=0;C<32;++C)m[C]=5;var p=h(A,9,1),v=h(m,5,1),f=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},b=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},y=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},G=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],B=function e(t,n,i){var l=new Error(n||G[t]);if(l.code=t,Error.captureStackTrace&&Error.captureStackTrace(l,e),!i)throw l;return l},Z=function(e,o,g){var I=e.length;if(!I||g&&!g.l&&I<5)return o||new t(0);var c=!o||g,C=!g||g.i;g||(g={}),o||(o=new t(3*I));var d,A=function(e){var n=o.length;if(e>n){var i=new t(Math.max(2*n,e));i.set(o),o=i}},m=g.f||0,G=g.p||0,Z=g.b||0,q=g.l,x=g.d,w=g.m,W=g.n,S=8*I;do{if(!q){g.f=m=b(e,G,1);var R=b(e,G+1,3);if(G+=3,!R){var V=e[(_=((d=G)/8|0)+(7&d&&1)+4)-4]|e[_-3]<<8,k=_+V;if(k>I){C&&B(0);break}c&&A(Z+V),o.set(e.subarray(_,k),Z),g.b=Z+=V,g.p=G=8*k;continue}if(1==R)q=p,x=v,w=9,W=5;else if(2==R){var X=b(e,G,31)+257,Y=b(e,G+10,15)+4,H=X+b(e,G+5,31)+1;G+=14;for(var K=new t(H),F=new t(19),N=0;N<Y;++N)F[r[N]]=b(e,G+3*N,7);G+=3*Y;var z=f(F),M=(1<<z)-1,L=h(F,z,1);for(N=0;N<H;){var _,T=L[b(e,G,M)];if(G+=15&T,(_=T>>>4)<16)K[N++]=_;else{var E=0,J=0;for(16==_?(J=3+b(e,G,3),G+=2,E=K[N-1]):17==_?(J=3+b(e,G,7),G+=3):18==_&&(J=11+b(e,G,127),G+=7);J--;)K[N++]=E}}var U=K.subarray(0,X),D=K.subarray(X);w=f(U),W=f(D),q=h(U,w,1),x=h(D,W,1)}else B(1);if(G>S){C&&B(0);break}}c&&A(Z+131072);for(var Q=(1<<w)-1,P=(1<<W)-1,O=G;;O=G){var j=(E=q[y(e,G)&Q])>>>4;if((G+=15&E)>S){C&&B(0);break}if(E||B(2),j<256)o[Z++]=j;else{if(256==j){O=G,q=null;break}var $=j-254;if(j>264){var ee=l[N=j-257];$=b(e,G,(1<<ee)-1)+s[N],G+=ee}var te=x[y(e,G)&P],ne=te>>>4;if(te||B(3),G+=15&te,D=u[ne],ne>3&&(ee=a[ne],D+=y(e,G)&(1<<ee)-1,G+=ee),G>S){C&&B(0);break}c&&A(Z+131072);for(var ie=Z+$;Z<ie;Z+=4)o[Z]=o[Z-D],o[Z+1]=o[Z+1-D],o[Z+2]=o[Z+2-D],o[Z+3]=o[Z+3-D];Z=ie}}g.l=q,g.p=O,g.b=Z,q&&(m=1,g.m=w,g.d=x,g.n=W)}while(!m);return Z==o.length?o:function(e,l,a){(null==l||l<0)&&(l=0),(null==a||a>e.length)&&(a=e.length);var r=new(e instanceof n?n:e instanceof i?i:t)(a-l);return r.set(e.subarray(l,a)),r}(o,0,Z)},q=new t(0),x="undefined"!=typeof TextDecoder&&new TextDecoder;try{x.decode(q,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function i(){var e=t.getUint16(n);return n+=2,e}function l(){var e=t.getUint32(n);return n+=4,e}function a(e){m.setUint16(p,e),p+=2}function r(e){m.setUint32(p,e),p+=4}for(var o={signature:l(),flavor:l(),length:l(),numTables:i(),reserved:i(),totalSfntSize:l(),majorVersion:i(),minorVersion:i(),metaOffset:l(),metaLength:l(),metaOrigLength:l(),privOffset:l(),privLength:l()},g=0;Math.pow(2,g)<=o.numTables;)g++;g--;for(var s=16*Math.pow(2,g),I=16*o.numTables-s,u=12,c=[],C=0;C<o.numTables;C++)c.push({tag:l(),offset:l(),compLength:l(),origLength:l(),origChecksum:l()}),u+=16;var d,h=new Uint8Array(12+16*c.length+c.reduce((function(e,t){return e+t.origLength+4}),0)),A=h.buffer,m=new DataView(A),p=0;return r(o.flavor),a(o.numTables),a(s),a(g),a(I),c.forEach((function(e){r(e.tag),r(e.origChecksum),r(u),r(e.origLength),e.outOffset=u,(u+=e.origLength)%4!=0&&(u+=4-u%4)})),c.forEach((function(t){var n,i=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var l=new Uint8Array(t.origLength);n=new Uint8Array(i,2),Z(n,l)}else l=new Uint8Array(i);h.set(l,t.outOffset);var a=0;(u=t.outOffset+t.origLength)%4!=0&&(a=4-u%4),h.set(new Uint8Array(a).buffer,t.outOffset+t.origLength),d=u+a})),A.slice(0,d)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){var n,i={M:2,L:2,Q:4,C:6,Z:0},l={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=[null,"isol","init","fina","medi"];function r(e){for(var t,i=new Uint8Array(e.length),a=32,r=1,o=-1,g=0;g<e.length;g++){var s=e.codePointAt(g),I=0|(t=s,n||function(){var e={R:2,L:1,D:4,C:16,U:32,T:8};n=new Map;var t=function(t){var i=0;l[t].split(",").forEach((function(l){var a=c(l.split("+"),2),r=a[0],o=a[1];r=parseInt(r,36),o=o?parseInt(o,36):0,n.set(i+=r,e[t]);for(var g=o;g--;)n.set(++i,e[t])}))};for(var i in l)t(i)}(),n.get(t)||32),u=1;8&I||(21&a?22&I?(u=3,1!==r&&3!==r||i[o]++):33&I&&(2!==r&&4!==r||i[o]--):34&a&&(2!==r&&4!==r||i[o]--),r=i[g]=u,a=I,o=g,s>65535&&g++)}return i}function o(t){var n=Object.create(null),l={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph:function(o,g,s,I){var u=0,c=1/l.unitsPerEm*g,C=function(t,n){for(var i=[],l=0;l<n.length;l++){var o=n.codePointAt(l);o>65535&&l++,i.push(e.U.codeToGlyph(t,o))}var g=t.GSUB;if(g){var s,I=g.lookupList,u=g.featureList,c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,C=[];u.forEach((function(t){if(c.test(t.tag))for(var l=0;l<t.tab.length;l++)if(!C[t.tab[l]]){C[t.tab[l]]=!0;var o=I[t.tab[l]],g=/^(isol|init|fina|medi)$/.test(t.tag);g&&!s&&(s=r(n));for(var u=0;u<i.length;u++)s&&g&&a[s[u]]!==t.tag||e.U._applySubs(i,u,o,I)}}))}return i}(t,o),d=0,h=-1;return C.forEach((function(l,a){if(-1!==l){var r=n[l];if(!r){for(var C,A,m,p,v=e.U.glyphToPath(t,l),f=v.cmds,b=v.crds,y="",G=0,B=0,Z=f.length;B<Z;B++){var q=i[f[B]];y+=f[B];for(var x=1;x<=q;x++)y+=(x>1?",":"")+b[G++]}if(b.length){C=A=1/0,m=p=-1/0;for(var w=0,W=b.length;w<W;w+=2){var S=b[w],R=b[w+1];S<C&&(C=S),R<A&&(A=R),S>m&&(m=S),R>p&&(p=R)}}else C=m=A=p=0;r=n[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:C,yMin:A,xMax:m,yMax:p,path:y,pathCommandCount:f.length}}-1!==h&&(u+=e.U.getPairAdjustment(t,h,l)*c),I.call(null,r,u,d),r.advanceWidth&&(u+=r.advanceWidth*c),s&&(u+=s*g),h=l}d+=o.codePointAt(d)>65535?2:1})),u}};return l}return function(n){var i=new Uint8Array(n,0,4),l=e._bin.readASCII(i,0,4);if("wOFF"===l)n=t(n);else if("wOF2"===l)throw new Error("woff2 fonts not supported");return o(e.parse(n)[0])}}],init:function(e,t,n){return n(e(),t())}}),cy={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Cy=new Gi;function dy(){return(self.performance||Date).now()}var hy,Ay=Object.create(null);function my(e,t){!0,e=vy({},e);var n=dy();if(e.font=function(e){hy||(hy="undefined"===typeof document?{}:document.createElement("a"));return hy.href=e,hy.href}(e.font||cy.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||cy.sdfGlyphSize,null!=e.colorRanges){var i={};for(var l in e.colorRanges)if(e.colorRanges.hasOwnProperty(l)){var a=e.colorRanges[l];"number"!==typeof a&&(a=Cy.set(a).getHex()),i[l]=a}e.colorRanges=i}Object.freeze(e);var r=cy.textureWidth,o=cy.sdfExponent,g=e.sdfGlyphSize,s=r/g*4,I=Ay[g];if(!I){var u=document.createElement("canvas");u.width=r,u.height=256*g/s,(I=Ay[g]={glyphCount:0,sdfGlyphSize:g,sdfCanvas:u,sdfTexture:new wi(u,void 0,void 0,void 0,Qe,Qe),contextLost:!1,glyphsByFont:new Map}).sdfTexture.generateMipmaps=!1,function(e){var t=e.sdfCanvas;t.addEventListener("webglcontextlost",(function(t){console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(function(t){console.log("Context Restored",t),e.contextLost=!1;var n=[];e.glyphsByFont.forEach((function(t){t.forEach((function(t){n.push(py(t,e,!0))}))})),Sb.all(n).then((function(){fy(e),e.sdfTexture.needsUpdate=!0}))}))}(I)}var C=I,d=C.sdfTexture,h=C.sdfCanvas,A=I.glyphsByFont.get(e.font);A||I.glyphsByFont.set(e.font,A=new Map),yy(e).then((function(i){var l=i.glyphIds,a=i.glyphPositions,u=i.fontSize,C=i.unitsPerEm,m=i.timings,p=[],v=new Float32Array(4*l.length),f=u/C,b=0,y=0,G=dy();l.forEach((function(e,t){var n=A.get(e);if(!n){var r=i.glyphData[e],o=r.path,s=r.pathBounds,u=Math.max(s[2]-s[0],s[3]-s[1])/g*(cy.sdfMargin*g+.5),c=I.glyphCount++,C=[s[0]-u,s[1]-u,s[2]+u,s[3]+u];A.set(e,n={path:o,atlasIndex:c,sdfViewBox:C}),p.push(n)}var d=n.sdfViewBox,h=a[y++],m=a[y++];v[b++]=h+d[0]*f,v[b++]=m+d[1]*f,v[b++]=h+d[2]*f,v[b++]=m+d[3]*f,l[t]=n.atlasIndex})),m.quads=(m.quads||0)+(dy()-G);var B=dy();m.sdf={};var Z=h.height,q=Math.ceil(I.glyphCount/s),x=Math.pow(2,Math.ceil(Math.log2(q*g)));x>Z&&(console.info("Increasing SDF texture size ".concat(Z,"->").concat(x)),Iy(h,r,x),d.dispose()),Sb.all(p.map((function(t){return py(t,I,e.gpuAccelerateSDF).then((function(e){var n=e.timing;m.sdf[t.atlasIndex]=n}))}))).then((function(){p.length&&!I.contextLost&&(fy(I),d.needsUpdate=!0),m.sdfTotal=dy()-B,m.total=dy()-n,t(Object.freeze({parameters:e,sdfTexture:d,sdfGlyphSize:g,sdfExponent:o,glyphBounds:v,glyphAtlasIndices:l,glyphColors:i.glyphColors,caretPositions:i.caretPositions,caretHeight:i.caretHeight,chunkedBounds:i.chunkedBounds,ascender:i.ascender,descender:i.descender,lineHeight:i.lineHeight,topBaseline:i.topBaseline,blockBounds:i.blockBounds,visibleBounds:i.visibleBounds,timings:i.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),i.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");var e=c(i.blockBounds,4),t=e[0],n=e[1];return[e[2]-t,e[3]-n]}}))}))})),Sb.all([]).then((function(){I.contextLost||function(e){e._warm||(oy.webgl.isSupported(e),e._warm=!0)}(h)}))}function py(e,t,n){var i=e.path,l=e.atlasIndex,a=e.sdfViewBox,r=t.sdfGlyphSize,o=t.sdfCanvas;if(t.contextLost)return Promise.resolve({timing:-1});var g=cy.textureWidth,s=cy.sdfExponent,I=Math.max(a[2]-a[0],a[3]-a[1]),u=Math.floor(l/4);return function(e,t,n,i,l,a,r,o,g,s){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?sy(e,t,n,i,l,a,r,o,g,s):gy(e,t,n,i,l,a,r,o,g,s).then(null,(function(I){return ay||(console.warn("WebGL SDF generation failed, falling back to JS",I),ay=!0),sy(e,t,n,i,l,a,r,o,g,s)}))}(r,r,i,a,I,s,o,u%(g/r)*r,Math.floor(u/(g/r))*r,l%4,n)}function vy(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function fy(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");var t=e.sdfCanvas,n=e.sdfTexture,i=t.width,l=t.height,a=e.sdfCanvas.getContext("webgl"),r=n.image.data;r&&r.length===i*l*4||(r=new Uint8Array(i*l*4),n.image={width:i,height:l,data:r},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,i,l,a.RGBA,a.UNSIGNED_BYTE,r)}}var by=Nb({name:"Typesetter",dependencies:[cy,uy,function(e,t,n){var i=n.defaultFontURL,l=Object.create(null),a=1/0,r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,o=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function g(t,n){t||(t=i);var a=l[t];a?a.pending?a.pending.push(n):n(a):(l[t]={pending:[n]},function(t,n){!function l(){var a=function(e){console.error("Failure loading font ".concat(t).concat(t===i?"":"; trying fallback"),e),t!==i&&(t=i,l())};try{var r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)a(new Error(r.statusText));else if(r.status>0)try{var t=e(r.response);n(t)}catch($p){a($p)}},r.onerror=a,r.send()}catch(o){a(o)}}()}(t,(function(e){var n=l[t].pending;l[t]=e,n.forEach((function(t){return t(e)}))})))}function s(e,n){var l=e.text,s=void 0===l?"":l,h=e.font,A=void 0===h?i:h,m=(e.sdfGlyphSize,e.fontSize),p=void 0===m?1:m,v=e.letterSpacing,f=void 0===v?0:v,b=e.lineHeight,y=void 0===b?"normal":b,G=e.maxWidth,B=void 0===G?a:G,Z=e.direction,q=e.textAlign,x=void 0===q?"left":q,w=e.textIndent,W=void 0===w?0:w,S=e.whiteSpace,R=void 0===S?"normal":S,V=e.overflowWrap,k=void 0===V?"normal":V,X=e.anchorX,Y=void 0===X?0:X,H=e.anchorY,K=void 0===H?0:H,F=e.includeCaretPositions,N=void 0!==F&&F,z=e.chunkedBoundsSize,M=void 0===z?8192:z,L=e.colorRanges,_=void 0===L?null:L,T=arguments.length>2&&void 0!==arguments[2]&&arguments[2],E=C(),J={fontLoad:0,typesetting:0};s.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),s=s.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),p=+p,f=+f,B=+B,y=y||"normal",W=+W,g(A,(function(e){var i=isFinite(B),l=null,g=null,h=null,A=null,m=null,v=null,b=null,G=0,q=0,w="nowrap"!==R,S=e.ascender,V=e.descender,X=e.unitsPerEm;J.fontLoad=C()-E;var H=C(),F=p/X;"normal"===y&&(y=(S-V)/X);var z=((y*=p)-(S-V)*F)/2,L=-(S*F+z),U=Math.min(y,(S-V)*F),D=(S+V)/2*F-U/2,Q=W,P=new d,O=[P];e.forEachGlyph(s,p,f,(function(e,t,n){var l,a=s.charAt(n),g=e.advanceWidth*F,I=P.count;if("isEmpty"in e||(e.isWhitespace=!!a&&/\s/.test(a),e.canBreakAfter=!!a&&o.test(a),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax||r.test(a)),e.isWhitespace||e.isEmpty||q++,w&&i&&!e.isWhitespace&&t+g+Q>B&&I){if(P.glyphAt(I-1).glyphObj.canBreakAfter)l=new d,Q=-t;else for(var u=I;u--;){if(0===u&&"break-word"===k){l=new d,Q=-t;break}if(P.glyphAt(u).glyphObj.canBreakAfter){var c=(l=P.splitAt(u+1)).glyphAt(0).x;Q-=c;for(var C=l.count;C--;)l.glyphAt(C).x-=c;break}}l&&(P.isSoftWrapped=!0,P=l,O.push(P),G=B)}var h=P.glyphAt(P.count);h.glyphObj=e,h.x=t+Q,h.width=g,h.charIndex=n,"\n"===a&&(P=new d,O.push(P),Q=-(t+g+f*p)+W)})),O.forEach((function(e){for(var t=e.count;t--;){var n=e.glyphAt(t),i=n.glyphObj,l=n.x,a=n.width;if(!i.isWhitespace)return e.width=l+a,void(e.width>G&&(G=e.width))}}));var j=0,$=0;if(Y&&("number"===typeof Y?j=-Y:"string"===typeof Y&&(j=-G*("left"===Y?0:"center"===Y?.5:"right"===Y?1:I(Y)))),K)if("number"===typeof K)$=-K;else if("string"===typeof K){var ee=O.length*y;$="top"===K?0:"top-baseline"===K?-L:"middle"===K?ee/2:"bottom"===K?ee:"bottom-baseline"===K?ee-z+V*F:I(K)*ee}if(!T){var te=t.getEmbeddingLevels(s,Z);l=new Uint16Array(q),g=new Float32Array(2*q),h={},v=[a,a,-1/0,-1/0],b=[];var ne=L;N&&(m=new Float32Array(3*s.length)),_&&(A=new Uint8Array(3*q));var ie,le,ae=0,re=-1,oe=-1;if(O.forEach((function(n,i){var r=n.count,o=n.width;if(r>0){for(var I=0,C=r;C--&&n.glyphAt(C).glyphObj.isWhitespace;)I++;var d=0,p=0;if("center"===x)d=(G-o)/2;else if("right"===x)d=G-o;else if("justify"===x&&n.isSoftWrapped){for(var f=0,B=r-I;B--;)n.glyphAt(B).glyphObj.isWhitespace&&f++;p=(G-o)/f}if(p||d)for(var Z=0,q=0;q<r;q++){var w=n.glyphAt(q),W=w.glyphObj;w.x+=d+Z,0!==p&&W.isWhitespace&&q<r-I&&(Z+=p,w.width+=p)}for(var S,R=t.getReorderSegments(s,te,n.glyphAt(0).charIndex,n.glyphAt(n.count-1).charIndex),V=0;V<R.length;V++)for(var k=c(R[V],2),X=k[0],Y=k[1],H=1/0,K=-1/0,z=0;z<r;z++)if(n.glyphAt(z).charIndex>=X){for(var L=z,T=z;T<r;T++){var E=n.glyphAt(T);if(E.charIndex>Y)break;T<r-I&&(H=Math.min(H,E.x),K=Math.max(K,E.x+E.width))}for(var J=L;J<T;J++){var U=n.glyphAt(J);U.x=K-(U.x+U.width-H)}break}for(var Q=function(e){return S=e},P=0;P<r;P++){var O=n.glyphAt(P),ee=(S=O.glyphObj).index,ge=1&te.levels[O.charIndex];if(ge){var se=t.getMirroredCharacter(s[O.charIndex]);se&&e.forEachGlyph(se,0,0,Q)}if(N){var Ie=O.charIndex,ue=O.x+j,ce=O.x+O.width+j;m[3*Ie]=ge?ce:ue,m[3*Ie+1]=ge?ue:ce,m[3*Ie+2]=ne+D+$;var Ce=Ie-re;Ce>1&&u(m,re,Ce),re=Ie}if(_)for(var de=O.charIndex;de>oe;)oe++,_.hasOwnProperty(oe)&&(le=_[oe]);if(!S.isWhitespace&&!S.isEmpty){var he=ae++;h[ee]||(h[ee]={path:S.path,pathBounds:[S.xMin,S.yMin,S.xMax,S.yMax]});var Ae=O.x+j,me=ne+$;g[2*he]=Ae,g[2*he+1]=me;var pe=Ae+S.xMin*F,ve=me+S.yMin*F,fe=Ae+S.xMax*F,be=me+S.yMax*F;pe<v[0]&&(v[0]=pe),ve<v[1]&&(v[1]=ve),fe>v[2]&&(v[2]=fe),be>v[3]&&(v[3]=be),he%M===0&&(ie={start:he,end:he,rect:[a,a,-1/0,-1/0]},b.push(ie)),ie.end++;var ye=ie.rect;if(pe<ye[0]&&(ye[0]=pe),ve<ye[1]&&(ye[1]=ve),fe>ye[2]&&(ye[2]=fe),be>ye[3]&&(ye[3]=be),l[he]=ee,_){var Ge=3*he;A[Ge]=le>>16&255,A[Ge+1]=le>>8&255,A[Ge+2]=255&le}}}}ne-=y})),m){var ge=s.length-re;ge>1&&u(m,re,ge)}}J.typesetting=C()-H,n({glyphIds:l,glyphPositions:g,glyphData:h,caretPositions:m,caretHeight:U,glyphColors:A,chunkedBounds:b,fontSize:p,unitsPerEm:X,ascender:S*F,descender:V*F,lineHeight:y,topBaseline:L,blockBounds:[j,$-O.length*y,j+G,$],visibleBounds:v,timings:J})}))}function I(e){var t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function u(e,t,n){for(var i=e[3*t],l=e[3*t+1],a=e[3*t+2],r=(l-i)/n,o=0;o<n;o++){var g=3*(t+o);e[g]=i+r*o,e[g+1]=i+r*(o+1),e[g+2]=a}}function C(){return(self.performance||Date).now()}function d(){this.data=[]}var h=["glyphObj","x","width","charIndex"];return d.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt:function(e){var t=d.flyweight;return t.data=this.data,t.index=e,t},splitAt:function(e){var t=new d;return t.data=this.data.splice(e*h.length),t}},d.flyweight=h.reduce((function(e,t,n,i){return Object.defineProperty(e,t,{get:function(){return this.data[this.index*h.length+n]},set:function(e){this.data[this.index*h.length+n]=e}}),e}),{data:null,index:0}),{typeset:s,measure:function(e,t){s(e,(function(e){var n=c(e.blockBounds,4),i=n[0],l=n[1],a=n[2],r=n[3];t({width:a-i,height:r-l})}),{metricsOnly:!0})},loadFont:g}},Tb],init:function(e,t,n,i){var l=e.defaultFontURL;return n(t,i(),{defaultFontURL:l})}}),yy=Nb({name:"Typesetter",dependencies:[by,Lb],init:function(e,t){return function(n){var i=new t;return e.typeset(n,i.resolve),i}},getTransferables:function(e){var t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});var Gy=function(){var e={};var t="aTroikaGlyphIndex",n=function(n){G(r,n);var a=w(r);function r(){var e;return f(this,r),(e=a.call(this)).detail=1,e.curveRadius=0,e.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],e.boundingSphere=new al,e.boundingBox=new zi,e}return y(r,[{key:"computeBoundingSphere",value:function(){}},{key:"computeBoundingBox",value:function(){}},{key:"setSide",value:function(e){var t=this.getIndex().count;this.setDrawRange(e===J?t/2:0,e===U?t:t/2)}},{key:"detail",get:function(){return this._detail},set:function(t){var n=this;if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);var i=function(t){var n=e[t];if(!n){for(var i=new rr(1,1,t,t),l=i.clone(),a=i.attributes,r=l.attributes,o=new fa,g=a.uv.count,s=0;s<g;s++)r.position.array[3*s]*=-1,r.normal.array[3*s+2]*=-1;["position","normal","uv"].forEach((function(e){o.setAttribute(e,new ua([].concat(v(a[e].array),v(r[e].array)),a[e].itemSize))})),o.setIndex([].concat(v(i.index.array),v(l.index.array.map((function(e){return e+g}))))),o.translate(.5,.5,0),n=e[t]=o}return n}(t);["position","normal","uv"].forEach((function(e){n.attributes[e]=i.attributes[e].clone()})),this.setIndex(i.getIndex().clone())}}},{key:"curveRadius",get:function(){return this._curveRadius},set:function(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}},{key:"updateGlyphs",value:function(e,n,a,r,o){i(this,"aTroikaGlyphBounds",e,4),i(this,t,n,1),i(this,"aTroikaGlyphColor",o,3),this._blockBounds=a,this._chunkedBounds=r,l(this,n.length),this._updateBounds()}},{key:"_updateBounds",value:function(){var e=this._blockBounds;if(e){var t=this.curveRadius,n=this.boundingBox;if(t){var i=Math.PI,l=Math.floor,a=Math.min,r=Math.max,o=Math.sin,g=Math.cos,s=i/2,I=2*i,u=Math.abs(t),c=e[0]/u,C=e[2]/u,d=l((c+s)/I)!==l((C+s)/I)?-u:a(o(c)*u,o(C)*u),h=l((c-s)/I)!==l((C-s)/I)?u:r(o(c)*u,o(C)*u),A=l((c+i)/I)!==l((C+i)/I)?2*u:r(u-g(c)*u,u-g(C)*u);n.min.set(d,e[1],t<0?-A:0),n.max.set(h,e[3],t<0?0:A)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}},{key:"applyClipRect",value:function(e){var n=this.getAttribute(t).count,i=this._chunkedBounds;if(i)for(var a=i.length;a--;){n=i[a].end;var r=i[a].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}l(this,n)}}]),r}(Zc);function i(e,t,n,i){var l=e.getAttribute(t);n?l&&l.array.length===n.length?(l.array.set(n),l.needsUpdate=!0):(e.setAttribute(t,new ys(n,i)),delete e._maxInstanceCount,e.dispose()):l&&e.deleteAttribute(t)}function l(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return n.prototype.setAttribute||(n.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),n}(),By="\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n"),Zy="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n");var qy=function(){var e=new $l({color:16777215,side:U,transparent:!0}),t=8421504,n=new dl,i=new Ki,l=new Ki,a=[],r=new Ki,o="+x+y";function g(e){return Array.isArray(e)?e[0]:e}var s=function(){var t=new Fa(new rr(1,1),e);return s=function(){return t},t},I=function(){var t=new Fa(new rr(1,1,32,1),e);return I=function(){return t},t},u={type:"syncstart"},C={type:"synccomplete"},d=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],h=d.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),A=function(d){G(m,d);var A=w(m);function m(){var e;f(this,m);var n=new Gy;return(e=A.call(this,n,null)).text="",e.anchorX=0,e.anchorY=0,e.curveRadius=0,e.direction="auto",e.font=null,e.fontSize=.1,e.letterSpacing=0,e.lineHeight="normal",e.maxWidth=1/0,e.overflowWrap="normal",e.textAlign="left",e.textIndent=0,e.whiteSpace="normal",e.material=null,e.color=null,e.colorRanges=null,e.outlineWidth=0,e.outlineColor=0,e.outlineOpacity=1,e.outlineBlur=0,e.outlineOffsetX=0,e.outlineOffsetY=0,e.strokeWidth=0,e.strokeColor=t,e.strokeOpacity=1,e.fillOpacity=1,e.depthOffset=0,e.clipRect=null,e.orientation=o,e.glyphGeometryDetail=1,e.sdfGlyphSize=null,e.gpuAccelerateSDF=!0,e.debugSDF=!1,e}return y(m,[{key:"sync",value:function(e){var t=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(u),my({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(function(n){t._isSyncing=!1,t._textRenderInfo=n,t.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);var i=t._queuedSyncs;i&&(t._queuedSyncs=null,t._needsSync=!0,t.sync((function(){i.forEach((function(e){return e&&e()}))}))),t.dispatchEvent(C),e&&e()}))))}},{key:"onBeforeRender",value:function(e,t,n,i,l,a){this.sync(),l.isTroikaTextMaterial&&this._prepareForRender(l),l._hadOwnSide=l.hasOwnProperty("side"),this.geometry.setSide(l._actualSide=l.side),l.side=E}},{key:"onAfterRender",value:function(e,t,n,i,l,a){l._hadOwnSide?l.side=l._actualSide:delete l.side}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"textRenderInfo",get:function(){return this._textRenderInfo||null}},{key:"material",get:function(){var t=this._derivedMaterial,n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===n||(t=this._derivedMaterial=function(e){var t=ey(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ri},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Wi(0,0,0,0)},uTroikaClipRect:{value:new Wi(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ri},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Gi},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new oi},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:By,fragmentDefs:Zy,fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter:function(e){var t=e.vertexShader,n=e.fragmentShader,i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(Eb,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:n}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),t}(n),n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){var i=t._outlineMtl;return i||((i=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}})).isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,t.addEventListener("dispose",(function e(){t.removeEventListener("dispose",e),i.dispose()}))),[i,t]}return t},set:function(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}},{key:"glyphGeometryDetail",get:function(){return this.geometry.detail},set:function(e){this.geometry.detail=e}},{key:"curveRadius",get:function(){return this.geometry.curveRadius},set:function(e){this.geometry.curveRadius=e}},{key:"customDepthMaterial",get:function(){return g(this.material).getDepthMaterial()}},{key:"customDistanceMaterial",get:function(){return g(this.material).getDistanceMaterial()}},{key:"_prepareForRender",value:function(e){var a=e.isTextOutlineMaterial,g=e.uniforms,s=this.textRenderInfo;if(s){var I=s.sdfTexture,u=s.blockBounds;g.uTroikaSDFTexture.value=I,g.uTroikaSDFTextureSize.value.set(I.image.width,I.image.height),g.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,g.uTroikaSDFExponent.value=s.sdfExponent,g.uTroikaTotalBounds.value.fromArray(u),g.uTroikaUseGlyphColors.value=!a&&!!s.glyphColors;var C,d,h,A=0,m=0,p=0,v=0,f=0;if(a){var b=this.outlineWidth,y=this.outlineOffsetX,G=this.outlineOffsetY,B=this.outlineBlur,Z=this.outlineOpacity;A=this._parsePercent(b)||0,m=Math.max(0,this._parsePercent(B)||0),C=Z,v=this._parsePercent(y)||0,f=this._parsePercent(G)||0}else(p=Math.max(0,this._parsePercent(this.strokeWidth)||0))&&(h=this.strokeColor,g.uTroikaStrokeColor.value.set(null==h?t:h),null==(d=this.strokeOpacity)&&(d=1)),C=this.fillOpacity;g.uTroikaDistanceOffset.value=A,g.uTroikaPositionOffset.value.set(v,f),g.uTroikaBlurRadius.value=m,g.uTroikaStrokeWidth.value=p,g.uTroikaStrokeOpacity.value=d,g.uTroikaFillOpacity.value=null==C?1:C,g.uTroikaCurveRadius.value=this.curveRadius||0;var q=this.clipRect;if(q&&Array.isArray(q)&&4===q.length)g.uTroikaClipRect.value.fromArray(q);else{var x=100*(this.fontSize||.1);g.uTroikaClipRect.value.set(u[0]-x,u[1]-x,u[2]+x,u[3]+x)}this.geometry.applyClipRect(g.uTroikaClipRect.value)}g.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;var w=a?this.outlineColor||0:this.color;if(null==w)delete e.color;else{var W=e.hasOwnProperty("color")?e.color:e.color=new Gi;w===W._input&&"object"!==typeof w||W.set(W._input=w)}var S=this.orientation||o;if(S!==e._orientation){var R=g.uTroikaOrient.value,V=(S=S.replace(/[^-+xyz]/g,""))!==o&&S.match(/^([-+])([xyz])([-+])([xyz])$/);if(V){var k=c(V,5),X=k[1],Y=k[2],H=k[3],K=k[4];i.set(0,0,0)[Y]="-"===X?1:-1,l.set(0,0,0)[K]="-"===H?-1:1,n.lookAt(r,i.cross(l),l),R.setFromMatrix4(n)}else R.identity();e._orientation=S}}},{key:"_parsePercent",value:function(e){if("string"===typeof e){var t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}},{key:"localPositionToTextCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri;t.copy(e);var n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}},{key:"worldPositionToTextCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ri;return i.copy(e),this.localPositionToTextCoords(this.worldToLocal(i),t)}},{key:"raycast",value:function(e,t){var n=this.textRenderInfo,i=this.curveRadius;if(n){for(var l=n.blockBounds,r=i?I():s(),o=r.geometry,g=o.attributes,u=g.position,c=g.uv,C=0;C<c.count;C++){var d=l[0]+c.getX(C)*(l[2]-l[0]),h=l[1]+c.getY(C)*(l[3]-l[1]),A=0;i&&(A=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),u.setXYZ(C,d,h,A)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,a.length=0,r.raycast(e,a);for(var m=0;m<a.length;m++)a[m].object=this,t.push(a[m])}}},{key:"copy",value:function(e){var t=this,n=this.geometry;return V(B(m.prototype),"copy",this).call(this,e),this.geometry=n,h.forEach((function(n){t[n]=e[n]})),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),m}(Fa);d.forEach((function(e){var t="_private_"+e;Object.defineProperty(A.prototype,e,{get:function(){return this[t]},set:function(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));var m=!1;return Object.defineProperty(A.prototype,"anchor",{get:function(){return this._deprecated_anchor},set:function(e){this._deprecated_anchor=e,m||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),m=!0),Array.isArray(e)?(this.anchorX="".concat(100*(+e[0]||0),"%"),this.anchorY="".concat(100*(+e[1]||0),"%")):this.anchorX=this.anchorY=0}}),A}();new WeakMap;new WeakMap;var xy=["anchorX","anchorY","font","children","characters","onSync"],wy=i.forwardRef((function(e,t){var n=e.anchorX,l=void 0===n?"center":n,a=e.anchorY,r=void 0===a?"middle":a,o=e.font,g=e.children,s=e.characters,I=e.onSync,u=C(e,xy),d=Bh((function(e){return e.invalidate})),h=c(i.useState((function(){return new qy})),1)[0],A=i.useMemo((function(){var e=[],t="";return i.Children.forEach(g,(function(n){"string"===typeof n||"number"===typeof n?t+=n:e.push(n)})),[e,t]}),[g]),m=c(A,2),p=m[0],v=m[1];return Vd((function(){return new Promise((function(e){return function(e,t){var n=e.font,i=e.characters;my({font:n,sdfGlyphSize:e.sdfGlyphSize,text:Array.isArray(i)?i.join("\n"):""+i},t)}({font:o,characters:s},e)}))}),["troika-text",o,s]),i.useLayoutEffect((function(){h.sync((function(){d(),I&&I(h)}))})),i.useEffect((function(){return function(){return h.dispose()}}),[h]),i.createElement("primitive",Mh({object:h,ref:t,font:o,text:v,anchorX:l,anchorY:r},u),p)})),Wy=function(e){G(n,e);var t=w(n);function n(e){return f(this,n),t.call(this,e)}return y(n,[{key:"load",value:function(e,t,n,i){var l=this,a=new Ou(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(l.withCredentials),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch($p){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=l.parse(n);t&&t(i)}),n,i)}},{key:"parse",value:function(e){return new Sy(e)}}]),n}(Qu),Sy=function(){function e(t){f(this,e),this.isFont=!0,this.type="Font",this.data=t}return y(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],i=Ry(e,t,this.data),l=0,a=i.length;l<a;l++)n.push.apply(n,v(i[l].toShapes()));return n}}]),e}();function Ry(e,t,n){for(var i=Array.from(e),l=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*l,r=[],o=0,g=0,s=0;s<i.length;s++){var I=i[s];if("\n"===I)o=0,g-=a;else{var u=Vy(I,l,o,g,n);o+=u.offsetX,r.push(u.path)}}return r}function Vy(e,t,n,i,l){var a=l.glyphs[e]||l.glyphs["?"];if(a){var r,o,g,s,I,u,c,C,d=new id;if(a.o)for(var h=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),A=0,m=h.length;A<m;){switch(h[A++]){case"m":r=h[A++]*t+n,o=h[A++]*t+i,d.moveTo(r,o);break;case"l":r=h[A++]*t+n,o=h[A++]*t+i,d.lineTo(r,o);break;case"q":g=h[A++]*t+n,s=h[A++]*t+i,I=h[A++]*t+n,u=h[A++]*t+i,d.quadraticCurveTo(I,u,g,s);break;case"b":g=h[A++]*t+n,s=h[A++]*t+i,I=h[A++]*t+n,u=h[A++]*t+i,c=h[A++]*t+n,C=h[A++]*t+i,d.bezierCurveTo(I,u,c,C,g,s)}}return{offsetX:a.ha*t,path:d}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+l.familyName+".")}var ky=function(e){G(n,e);var t=w(n);function n(e){var i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,n);var a=l.font;if(void 0===a)i=t.call(this);else{var r=a.generateShapes(e,l.size);l.depth=void 0!==l.height?l.height:50,void 0===l.bevelThickness&&(l.bevelThickness=10),void 0===l.bevelSize&&(l.bevelSize=8),void 0===l.bevelEnabled&&(l.bevelEnabled=!1),i=t.call(this,r,l)}return i.type="TextGeometry",x(i)}return y(n)}(ru),Xy=JSON.parse('{"glyphs":{"0":{"ha":766,"x_min":102,"x_max":665,"o":"m 383 -10 q 173 64 245 -10 q 102 270 102 138 l 102 718 q 174 925 102 851 q 383 998 245 998 q 593 925 522 998 q 665 718 665 852 l 665 270 q 593 63 665 137 q 383 -10 521 -10 m 383 121 q 491 160 456 121 q 526 270 526 198 l 526 718 q 492 828 526 790 q 383 867 457 867 q 275 828 309 867 q 240 718 240 790 l 240 270 q 275 160 240 198 q 383 121 310 121 z "},"1":{"ha":462,"x_min":61,"x_max":340,"o":"m 340 0 l 201 0 l 201 836 l 61 749 l 61 892 l 201 986 l 340 986 l 340 0 z "},"2":{"ha":718,"x_min":75,"x_max":643,"o":"m 87 120 l 431 578 q 477 660 460 618 q 494 739 494 703 l 494 741 q 459 832 494 800 q 361 865 425 865 q 263 829 300 865 q 218 728 226 793 l 218 728 l 75 728 l 75 728 q 124 873 87 813 q 222 965 162 933 q 359 996 281 996 q 510 966 448 996 q 605 878 572 936 q 637 739 637 821 l 637 739 q 616 629 637 686 q 555 519 594 572 l 270 132 l 643 132 l 643 0 l 87 0 l 87 120 z "},"3":{"ha":734,"x_min":61,"x_max":640,"o":"m 357 -10 q 211 20 274 -10 q 110 107 148 50 q 61 245 71 165 l 61 245 l 202 245 l 202 245 q 229 176 208 203 q 281 136 249 149 q 357 123 313 123 q 463 159 425 123 q 501 262 501 196 l 501 292 q 465 407 501 366 q 363 447 429 447 l 294 447 l 294 578 l 363 578 q 453 613 421 578 q 485 711 485 648 l 485 741 q 451 831 485 800 q 356 863 418 863 q 293 850 321 863 q 246 809 265 837 q 218 741 227 782 l 218 741 l 77 741 l 77 741 q 129 879 91 821 q 224 966 166 937 q 356 996 281 996 q 553 929 484 996 q 623 740 623 862 l 623 724 q 583 595 623 650 q 470 515 543 540 q 595 435 551 497 q 640 278 640 374 l 640 262 q 606 115 640 176 q 510 22 573 54 q 357 -10 446 -10 z "},"4":{"ha":790,"x_min":88,"x_max":722,"o":"m 88 271 l 419 985 l 562 985 l 239 279 l 722 279 l 722 151 l 88 151 l 88 271 m 513 580 l 648 580 l 648 -1 l 513 -1 l 513 580 z "},"5":{"ha":756,"x_min":102,"x_max":654,"o":"m 377 -10 q 244 19 302 -10 q 150 104 186 48 q 102 237 114 159 l 102 238 l 240 238 l 240 237 q 283 153 248 183 q 377 123 319 123 q 480 167 444 123 q 516 292 516 212 l 516 375 q 480 499 516 455 q 377 544 444 544 q 308 524 341 544 q 250 467 275 503 l 123 467 l 123 986 l 626 986 l 626 854 l 262 854 l 262 633 q 319 665 288 654 q 385 677 351 677 q 531 642 470 677 q 623 538 591 606 q 654 375 654 471 l 654 292 q 622 129 654 197 q 527 25 589 61 q 377 -10 465 -10 z "},"6":{"ha":713,"x_min":81,"x_max":631,"o":"m 356 -10 q 208 25 269 -10 q 114 126 146 60 q 81 288 81 193 l 81 288 q 94 404 81 343 q 132 522 107 464 q 140 542 136 532 q 150 562 145 552 l 364 986 l 513 986 l 262 494 l 262 519 q 312 568 279 551 q 388 586 345 586 q 519 551 465 586 q 603 451 574 517 q 631 292 631 385 l 631 291 q 599 128 631 196 q 505 25 567 60 q 356 -10 443 -10 m 356 123 q 457 163 422 123 q 493 279 493 204 l 493 280 q 456 408 493 363 q 349 453 418 453 q 254 408 288 453 q 220 279 220 362 l 220 279 q 255 163 220 203 q 356 123 291 123 z "},"7":{"ha":699,"x_min":75,"x_max":611,"o":"m 611 863 l 356 0 l 209 0 l 464 854 l 213 854 l 213 713 l 75 713 l 75 986 l 611 986 l 611 863 z "},"8":{"ha":781,"x_min":92,"x_max":690,"o":"m 391 -10 q 233 24 301 -10 q 129 120 165 58 q 92 264 92 182 l 92 280 q 129 419 92 354 q 227 517 165 484 q 143 600 175 546 q 112 713 112 654 l 112 737 q 146 873 112 814 q 244 964 181 932 q 391 996 307 996 q 537 964 474 996 q 635 873 600 932 q 669 737 669 814 l 669 713 q 637 599 669 652 q 552 517 605 545 q 652 419 614 484 q 690 280 690 354 l 690 264 q 653 120 690 182 q 548 24 616 58 q 391 -10 480 -10 m 391 123 q 475 142 439 123 q 532 195 512 161 q 552 274 552 229 l 552 283 q 532 363 552 329 q 475 416 512 397 q 391 435 439 435 q 306 416 342 435 q 249 363 269 397 q 229 283 229 328 l 229 273 q 249 194 229 228 q 306 141 269 160 q 391 123 342 123 m 391 568 q 464 586 432 568 q 513 637 496 604 q 531 714 531 671 l 531 724 q 513 797 531 765 q 464 846 496 829 q 391 863 432 863 q 317 846 349 863 q 268 797 286 829 q 250 723 250 765 l 250 713 q 268 637 250 670 q 317 586 286 604 q 391 568 349 568 z "},"9":{"ha":713,"x_min":81,"x_max":631,"o":"m 451 490 l 450 465 q 399 419 433 434 q 318 405 365 405 q 194 441 248 405 q 111 542 140 477 q 81 694 81 608 l 81 694 q 114 858 81 790 q 208 961 146 926 q 357 996 270 996 q 505 960 444 996 q 599 856 567 924 q 631 691 631 787 l 631 690 q 618 577 631 637 q 579 458 604 517 q 571 440 575 450 q 562 422 567 431 l 352 0 l 203 0 l 451 490 m 357 531 q 457 575 422 531 q 493 699 493 619 l 493 700 q 457 821 493 778 q 357 863 422 863 q 255 821 291 863 q 220 699 220 778 l 220 699 q 255 575 220 618 q 357 531 291 531 z "}," ":{"ha":373,"x_min":0,"x_max":0,"o":""},"A":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 z "},"\xc1":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 386 1134 l 573 1300 l 663 1207 l 463 1054 l 386 1134 z "},"\u0102":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 z "},"\xc2":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 z "},"\xc4":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 519 1205 l 658 1205 l 658 1067 l 519 1067 l 519 1205 m 241 1205 l 380 1205 l 380 1067 l 241 1067 l 241 1205 z "},"\u1ea0":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 380 -149 l 519 -149 l 519 -288 l 380 -288 l 380 -149 z "},"\xc0":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 240 1200 l 323 1293 l 510 1127 l 433 1047 l 240 1200 z "},"\u0100":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 697 1202 l 697 1067 l 202 1067 l 202 1202 l 697 1202 z "},"\u0104":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 807 -285 q 654 -241 705 -285 q 603 -111 603 -198 q 653 27 603 -18 q 804 73 703 73 l 815 73 l 815 0 l 804 0 q 726 -91 726 0 q 807 -172 726 -172 l 869 -172 l 869 -285 l 807 -285 z "},"\xc5":{"ha":899,"x_min":27,"x_max":872,"o":"m 450 964 q 327 1005 370 964 q 283 1121 283 1046 q 327 1242 283 1200 q 450 1284 370 1284 q 572 1241 529 1284 q 616 1121 616 1198 q 572 1005 616 1046 q 450 964 529 964 m 450 1053 q 501 1072 483 1053 q 519 1124 519 1090 q 501 1178 519 1158 q 450 1197 483 1197 q 398 1178 416 1197 q 380 1124 380 1158 q 398 1072 380 1090 q 450 1053 416 1053 m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 z "},"\xc3":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 574 1057 q 534 1060 553 1057 q 498 1069 515 1063 q 465 1083 482 1075 l 463 1084 q 443 1094 452 1089 q 423 1105 433 1099 q 381 1127 398 1120 q 349 1134 365 1134 q 308 1119 321 1134 q 294 1073 294 1103 l 294 1059 l 187 1059 l 187 1076 q 222 1207 187 1164 q 326 1251 256 1251 q 393 1242 364 1251 q 457 1215 421 1232 l 459 1213 q 471 1207 465 1210 q 482 1200 477 1204 q 521 1180 506 1187 q 551 1174 536 1174 q 591 1190 578 1174 q 605 1240 605 1206 l 605 1253 l 712 1253 l 712 1237 q 678 1102 712 1147 q 574 1057 644 1057 z "},"\xc6":{"ha":1356,"x_min":0,"x_max":1282,"o":"m 547 986 l 696 986 l 154 0 l 0 0 l 547 986 m 241 347 l 719 347 l 719 215 l 241 215 l 241 347 m 648 986 l 787 986 l 787 0 l 648 0 l 648 986 m 715 132 l 1282 132 l 1282 0 l 715 0 l 715 132 m 715 555 l 1207 555 l 1207 424 l 715 424 l 715 555 m 715 986 l 1282 986 l 1282 854 l 715 854 l 715 986 z "},"B":{"ha":897,"x_min":122,"x_max":812,"o":"m 203 128 l 471 128 q 624 168 576 128 q 672 281 672 208 l 672 283 q 655 369 672 333 q 600 424 637 405 q 505 444 563 444 l 203 444 l 203 568 l 505 568 q 620 604 581 568 q 659 711 659 640 l 659 711 q 616 821 659 785 q 486 858 572 858 l 203 858 l 203 986 l 511 986 q 671 954 606 986 q 767 861 735 921 q 799 719 799 802 l 799 719 q 779 624 799 668 q 719 548 760 579 q 619 505 679 516 q 722 463 679 496 q 789 379 766 429 q 812 271 812 329 l 812 269 q 777 127 812 189 q 675 33 741 66 q 522 0 610 0 l 203 0 l 203 128 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0181":{"ha":1017,"x_min":-14,"x_max":932,"o":"m -14 821 q 35 943 -14 900 q 173 986 84 986 l 332 986 l 332 858 l 178 858 q 138 847 152 858 q 124 818 124 837 l 124 771 l -14 771 l -14 821 m 323 128 l 591 128 q 744 168 696 128 q 792 281 792 208 l 792 283 q 775 369 792 333 q 720 424 758 405 q 625 444 683 444 l 323 444 l 323 568 l 625 568 q 740 604 701 568 q 779 711 779 640 l 779 711 q 736 821 779 785 q 606 858 692 858 l 323 858 l 323 986 l 631 986 q 791 954 726 986 q 887 861 855 921 q 919 719 919 802 l 919 719 q 899 624 919 668 q 839 548 880 579 q 739 505 799 516 q 842 463 799 496 q 909 379 886 429 q 932 271 932 329 l 932 269 q 897 127 932 189 q 795 33 861 66 q 642 0 730 0 l 323 0 l 323 128 m 242 986 l 380 986 l 380 0 l 242 0 l 242 986 z "},"C":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u0106":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 m 382 1134 l 570 1300 l 659 1207 l 459 1054 l 382 1134 z "},"\u010c":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 m 237 1221 l 314 1303 l 446 1201 l 578 1303 l 656 1221 l 446 1059 l 237 1221 z "},"\xc7":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 m 431 -286 q 319 -274 363 -286 l 348 -179 q 412 -189 380 -189 q 468 -180 450 -189 q 486 -154 486 -172 q 462 -129 486 -137 q 387 -121 437 -121 l 446 -42 q 566 -72 526 -42 q 606 -163 606 -102 q 562 -256 606 -225 q 431 -286 519 -286 m 489 41 l 489 -122 l 376 -121 l 376 41 l 489 41 z "},"\u010a":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 m 377 1205 l 515 1205 l 515 1067 l 377 1067 l 377 1205 z "},"D":{"ha":911,"x_min":122,"x_max":810,"o":"m 216 132 l 439 132 q 608 188 548 132 q 668 348 668 245 l 668 638 q 608 798 668 741 q 439 854 548 854 l 216 854 l 216 986 l 435 986 q 637 945 553 986 q 766 824 722 903 q 810 633 810 745 l 810 353 q 766 162 810 241 q 637 41 722 83 q 434 0 553 0 l 216 0 l 216 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0189":{"ha":943,"x_min":53,"x_max":842,"o":"z "},"\xd0":{"ha":943,"x_min":53,"x_max":842,"o":"m 248 132 l 471 132 q 640 188 580 132 q 700 348 700 245 l 700 638 q 640 798 700 741 q 471 854 580 854 l 248 854 l 248 986 l 467 986 q 669 945 585 986 q 798 824 753 903 q 842 633 842 745 l 842 353 q 798 162 842 241 q 669 41 753 83 q 466 0 585 0 l 248 0 l 248 132 m 154 986 l 292 986 l 292 0 l 154 0 l 154 986 m 507 552 l 507 434 l 53 434 l 53 552 l 507 552 z "},"\u010e":{"ha":911,"x_min":122,"x_max":810,"o":"m 216 132 l 439 132 q 608 188 548 132 q 668 348 668 245 l 668 638 q 608 798 668 741 q 439 854 548 854 l 216 854 l 216 986 l 435 986 q 637 945 553 986 q 766 824 722 903 q 810 633 810 745 l 810 353 q 766 162 810 241 q 637 41 722 83 q 434 0 553 0 l 216 0 l 216 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 235 1221 l 313 1303 l 445 1201 l 577 1303 l 654 1221 l 445 1059 l 235 1221 z "},"\u0110":{"ha":943,"x_min":53,"x_max":842,"o":"m 248 132 l 471 132 q 640 188 580 132 q 700 348 700 245 l 700 638 q 640 798 700 741 q 471 854 580 854 l 248 854 l 248 986 l 467 986 q 669 945 585 986 q 798 824 753 903 q 842 633 842 745 l 842 353 q 798 162 842 241 q 669 41 753 83 q 466 0 585 0 l 248 0 l 248 132 m 154 986 l 292 986 l 292 0 l 154 0 l 154 986 m 507 552 l 507 434 l 53 434 l 53 552 l 507 552 z "},"\u018a":{"ha":1031,"x_min":-14,"x_max":930,"o":"m -14 821 q 35 943 -14 900 q 173 986 84 986 l 332 986 l 332 858 l 178 858 q 138 847 152 858 q 124 818 124 837 l 124 771 l -14 771 l -14 821 m 336 132 l 559 132 q 728 188 668 132 q 788 348 788 245 l 788 638 q 728 798 788 741 q 559 854 668 854 l 336 854 l 336 986 l 555 986 q 758 945 673 986 q 886 824 842 903 q 930 633 930 745 l 930 353 q 886 162 930 241 q 757 41 842 83 q 554 0 673 0 l 336 0 l 336 132 m 242 986 l 380 986 l 380 0 l 242 0 l 242 986 z "},"E":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 z "},"\xc9":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 387 1134 l 574 1300 l 664 1207 l 464 1054 l 387 1134 z "},"\u011a":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 241 1221 l 319 1303 l 451 1201 l 583 1303 l 661 1221 l 451 1059 l 241 1221 z "},"\xca":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 z "},"\xcb":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 521 1205 l 659 1205 l 659 1067 l 521 1067 l 521 1205 m 243 1205 l 381 1205 l 381 1067 l 243 1067 l 243 1205 z "},"\u0116":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 382 1205 l 520 1205 l 520 1067 l 382 1067 l 382 1205 z "},"\u1eb8":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 382 -149 l 520 -149 l 520 -288 l 382 -288 l 382 -149 z "},"\xc8":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 241 1200 l 324 1293 l 511 1127 l 435 1047 l 241 1200 z "},"\u0112":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 699 1202 l 699 1067 l 203 1067 l 203 1202 l 699 1202 z "},"\u0118":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 690 -285 q 537 -241 588 -285 q 486 -111 486 -198 q 536 27 486 -18 q 688 73 587 73 l 699 73 l 699 0 l 688 0 q 609 -91 609 0 q 690 -172 609 -172 l 753 -172 l 753 -285 l 690 -285 z "},"\u0190":{"ha":762,"x_min":95,"x_max":701,"o":"m 395 -10 q 228 20 294 -10 q 128 111 161 50 q 95 262 95 171 l 95 278 q 137 437 95 378 q 264 515 180 496 q 150 593 188 541 q 111 724 111 646 l 111 740 q 143 883 111 826 q 237 968 174 939 q 395 996 300 996 q 536 968 477 996 q 632 883 595 940 q 684 741 669 826 l 684 741 l 544 741 l 544 741 q 515 809 534 782 q 465 850 495 836 q 395 863 435 863 q 286 833 322 863 q 250 741 250 802 l 250 711 q 282 612 250 645 q 378 578 314 578 l 481 578 l 481 447 l 378 447 q 270 408 306 447 q 233 292 233 370 l 233 262 q 274 158 233 193 q 395 123 314 123 q 478 136 444 123 q 533 177 512 150 q 559 245 553 205 l 559 245 l 701 245 l 701 245 q 652 103 690 160 q 550 18 614 47 q 395 -10 486 -10 z "},"\u018e":{"ha":830,"x_min":75,"x_max":708,"o":"m 570 0 l 570 986 l 708 986 l 708 0 l 570 0 m 75 0 l 75 132 l 641 132 l 641 0 l 75 0 m 149 424 l 149 555 l 641 555 l 641 424 l 149 424 m 75 854 l 75 986 l 641 986 l 641 854 l 75 854 z "},"\u01b7":{"ha":755,"x_min":61,"x_max":660,"o":"m 363 -10 q 210 18 273 -10 q 110 103 146 47 q 61 245 73 160 l 61 245 l 202 245 l 202 245 q 252 153 212 184 q 363 123 292 123 q 482 158 443 123 q 522 262 522 193 l 522 292 q 482 408 522 370 q 363 447 443 447 l 253 447 l 253 578 l 363 578 q 528 546 463 578 q 627 448 594 513 q 660 285 660 383 l 660 269 q 627 113 660 175 q 528 21 594 52 q 363 -10 463 -10 m 253 578 l 473 854 l 100 854 l 100 986 l 640 986 l 640 867 l 366 521 l 253 578 z "},"F":{"ha":777,"x_min":122,"x_max":743,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 547 l 668 547 l 668 415 l 190 415 l 190 547 m 190 986 l 743 986 l 743 854 l 190 854 l 190 986 z "},"\u0191":{"ha":785,"x_min":14,"x_max":751,"o":"m 14 -131 l 91 -131 q 120 -117 110 -131 q 131 -77 131 -103 l 131 178 l 269 178 l 269 -76 q 226 -214 269 -165 q 104 -262 183 -262 l 14 -262 l 14 -131 m 131 986 l 269 986 l 269 0 l 131 0 l 131 986 m 199 547 l 677 547 l 677 415 l 199 415 l 199 547 m 199 986 l 751 986 l 751 854 l 199 854 l 199 986 z "},"G":{"ha":898,"x_min":102,"x_max":796,"o":"m 796 531 l 796 359 q 753 165 796 249 q 632 36 711 81 q 451 -10 554 -10 q 268 33 347 -10 q 145 155 189 76 q 102 337 102 233 l 102 628 q 144 821 102 738 q 266 950 187 905 q 447 996 344 996 q 603 960 532 996 q 723 857 675 924 q 788 703 771 791 l 788 703 l 638 703 l 638 703 q 597 788 626 753 q 528 843 568 824 q 447 861 489 861 q 340 832 386 861 q 269 750 294 803 q 243 628 243 698 l 243 337 q 269 225 243 273 q 342 151 295 178 q 451 125 389 125 q 558 152 512 125 q 629 232 604 180 q 654 356 654 284 l 654 399 l 454 399 l 454 531 l 796 531 z "},"\u011e":{"ha":898,"x_min":102,"x_max":796,"o":"m 796 531 l 796 359 q 753 165 796 249 q 632 36 711 81 q 451 -10 554 -10 q 268 33 347 -10 q 145 155 189 76 q 102 337 102 233 l 102 628 q 144 821 102 738 q 266 950 187 905 q 447 996 344 996 q 603 960 532 996 q 723 857 675 924 q 788 703 771 791 l 788 703 l 638 703 l 638 703 q 597 788 626 753 q 528 843 568 824 q 447 861 489 861 q 340 832 386 861 q 269 750 294 803 q 243 628 243 698 l 243 337 q 269 225 243 273 q 342 151 295 178 q 451 125 389 125 q 558 152 512 125 q 629 232 604 180 q 654 356 654 284 l 654 399 l 454 399 l 454 531 l 796 531 m 680 1263 q 621 1111 680 1164 q 454 1057 562 1057 l 448 1057 q 281 1111 340 1057 q 222 1263 222 1164 l 334 1262 q 364 1183 334 1211 q 448 1155 394 1155 l 454 1155 q 538 1183 508 1155 q 568 1262 568 1211 l 680 1263 z "},"\u0122":{"ha":898,"x_min":102,"x_max":796,"o":"m 796 531 l 796 359 q 753 165 796 249 q 632 36 711 81 q 451 -10 554 -10 q 268 33 347 -10 q 145 155 189 76 q 102 337 102 233 l 102 628 q 144 821 102 738 q 266 950 187 905 q 447 996 344 996 q 603 960 532 996 q 723 857 675 924 q 788 703 771 791 l 788 703 l 638 703 l 638 703 q 597 788 626 753 q 528 843 568 824 q 447 861 489 861 q 340 832 386 861 q 269 750 294 803 q 243 628 243 698 l 243 337 q 269 225 243 273 q 342 151 295 178 q 451 125 389 125 q 558 152 512 125 q 629 232 604 180 q 654 356 654 284 l 654 399 l 454 399 l 454 531 l 796 531 m 382 -100 l 520 -100 l 520 -239 l 382 -376 l 382 -100 z "},"\u0120":{"ha":898,"x_min":102,"x_max":796,"o":"m 796 531 l 796 359 q 753 165 796 249 q 632 36 711 81 q 451 -10 554 -10 q 268 33 347 -10 q 145 155 189 76 q 102 337 102 233 l 102 628 q 144 821 102 738 q 266 950 187 905 q 447 996 344 996 q 603 960 532 996 q 723 857 675 924 q 788 703 771 791 l 788 703 l 638 703 l 638 703 q 597 788 626 753 q 528 843 568 824 q 447 861 489 861 q 340 832 386 861 q 269 750 294 803 q 243 628 243 698 l 243 337 q 269 225 243 273 q 342 151 295 178 q 451 125 389 125 q 558 152 512 125 q 629 232 604 180 q 654 356 654 284 l 654 399 l 454 399 l 454 531 l 796 531 m 382 1205 l 520 1205 l 520 1067 l 382 1067 l 382 1205 z "},"H":{"ha":943,"x_min":122,"x_max":821,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u0126":{"ha":1051,"x_min":75,"x_max":977,"o":"m 75 823 l 977 823 l 977 691 l 75 691 l 75 823 m 736 986 l 875 986 l 875 0 l 736 0 l 736 986 m 176 986 l 315 986 l 315 0 l 176 0 l 176 986 m 262 551 l 810 551 l 810 420 l 262 420 l 262 551 z "},"I":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"\xcd":{"ha":382,"x_min":122,"x_max":404,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 127 1134 l 315 1300 l 404 1207 l 204 1054 l 127 1134 z "},"\xce":{"ha":382,"x_min":-24,"x_max":402,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 402 1127 l 321 1053 l 189 1154 l 57 1053 l -24 1127 l 189 1293 l 402 1127 z "},"\xcf":{"ha":382,"x_min":-17,"x_max":399,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 261 1205 l 399 1205 l 399 1067 l 261 1067 l 261 1205 m -17 1205 l 121 1205 l 121 1067 l -17 1067 l -17 1205 z "},"\u0130":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 122 1205 l 260 1205 l 260 1067 l 122 1067 l 122 1205 z "},"\u1eca":{"ha":382,"x_min":119,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 119 -149 l 257 -149 l 257 -288 l 119 -288 l 119 -149 z "},"\xcc":{"ha":382,"x_min":-18,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m -18 1200 l 64 1293 l 252 1127 l 175 1047 l -18 1200 z "},"\u012a":{"ha":382,"x_min":-56,"x_max":439,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 439 1202 l 439 1067 l -56 1067 l -56 1202 l 439 1202 z "},"\u012e":{"ha":382,"x_min":41,"x_max":307,"o":"m 245 -285 q 92 -241 142 -285 q 41 -111 41 -198 q 91 27 41 -18 q 242 73 141 73 l 242 0 q 163 -91 163 0 q 245 -172 163 -172 l 307 -172 l 307 -285 l 245 -285 m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"J":{"ha":702,"x_min":20,"x_max":580,"o":"m 272 -10 q 127 22 193 -10 q 20 111 62 54 l 134 193 q 189 141 153 159 q 272 123 224 123 q 397 173 353 123 q 441 314 441 223 l 441 986 l 580 986 l 580 313 q 544 138 580 211 q 439 28 508 66 q 272 -10 370 -10 z "},"K":{"ha":891,"x_min":122,"x_max":878,"o":"m 231 433 l 666 986 l 836 986 l 210 225 l 231 433 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 395 526 l 504 627 l 878 0 l 708 0 l 395 526 z "},"\u0136":{"ha":891,"x_min":122,"x_max":878,"o":"m 231 433 l 666 986 l 836 986 l 210 225 l 231 433 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 395 526 l 504 627 l 878 0 l 708 0 l 395 526 m 393 -100 l 532 -100 l 532 -239 l 393 -376 l 393 -100 z "},"\u0198":{"ha":891,"x_min":122,"x_max":878,"o":"m 231 437 l 614 923 q 653 961 632 945 q 696 983 673 976 q 746 991 720 991 l 837 991 l 837 859 l 760 859 q 727 846 745 859 q 688 806 709 833 l 209 224 l 231 437 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 395 526 l 504 627 l 878 0 l 708 0 l 395 526 z "},"L":{"ha":796,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 191 132 l 755 132 l 755 0 l 191 0 l 191 132 z "},"\u0139":{"ha":796,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 191 132 l 755 132 l 755 0 l 191 0 l 191 132 m 127 1134 l 315 1300 l 404 1207 l 204 1054 l 127 1134 z "},"\u013d":{"ha":796,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 191 132 l 755 132 l 755 0 l 191 0 l 191 132 m 614 985 l 732 985 l 732 813 l 614 703 l 614 985 z "},"\u013b":{"ha":796,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 191 132 l 755 132 l 755 0 l 191 0 l 191 132 m 340 -100 l 479 -100 l 479 -239 l 340 -376 l 340 -100 z "},"\u0141":{"ha":857,"x_min":81,"x_max":817,"o":"m 81 486 l 586 696 l 586 564 l 81 353 l 81 486 m 183 986 l 321 986 l 321 0 l 183 0 l 183 986 m 252 132 l 817 132 l 817 0 l 252 0 l 252 132 z "},"M":{"ha":1082,"x_min":122,"x_max":960,"o":"m 831 986 l 960 986 l 960 0 l 825 0 l 825 739 l 832 695 l 589 137 l 493 137 l 250 682 l 257 739 l 257 0 l 122 0 l 122 986 l 252 986 l 541 335 l 831 986 z "},"N":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 z "},"\u0143":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 433 1134 l 620 1300 l 709 1207 l 509 1054 l 433 1134 z "},"\u0147":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 287 1221 l 364 1303 l 496 1201 l 629 1303 l 706 1221 l 496 1059 l 287 1221 z "},"\u0145":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 427 -100 l 566 -100 l 566 -239 l 427 -376 l 427 -100 z "},"\u014a":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 116 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 595 -131 l 672 -131 q 702 -117 691 -131 q 712 -77 712 -103 l 712 178 l 850 178 l 850 -76 q 807 -214 850 -165 q 686 -262 764 -262 l 595 -262 l 595 -131 z "},"\xd1":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 621 1057 q 581 1060 600 1057 q 545 1069 562 1063 q 511 1083 529 1075 l 509 1084 q 489 1094 499 1089 q 470 1105 479 1099 q 428 1127 445 1120 q 395 1134 412 1134 q 355 1119 368 1134 q 341 1073 341 1103 l 341 1059 l 234 1059 l 234 1076 q 269 1207 234 1164 q 372 1251 303 1251 q 439 1242 411 1251 q 504 1215 468 1232 l 506 1213 q 518 1207 512 1210 q 529 1200 524 1204 q 568 1180 553 1187 q 597 1174 583 1174 q 638 1190 625 1174 q 652 1240 652 1206 l 652 1253 l 759 1253 l 759 1237 q 725 1102 759 1147 q 621 1057 690 1057 z "},"O":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\xd3":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 385 1134 l 572 1300 l 661 1207 l 461 1054 l 385 1134 z "},"\xd4":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 z "},"\xd6":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 518 1205 l 656 1205 l 656 1067 l 518 1067 l 518 1205 m 240 1205 l 378 1205 l 378 1067 l 240 1067 l 240 1205 z "},"\u1ecc":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 379 -149 l 517 -149 l 517 -288 l 379 -288 l 379 -149 z "},"\xd2":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 239 1200 l 321 1293 l 509 1127 l 432 1047 l 239 1200 z "},"\u01a0":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u0150":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 500 1127 l 653 1300 l 749 1207 l 583 1047 l 500 1127 m 229 1127 l 382 1300 l 478 1207 l 312 1047 l 229 1127 z "},"\u014c":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 696 1202 l 696 1067 l 201 1067 l 201 1202 l 696 1202 z "},"\u0186":{"ha":859,"x_min":75,"x_max":758,"o":"m 414 -10 q 259 26 330 -10 q 140 129 188 62 q 75 283 92 195 l 75 283 l 216 283 l 216 283 q 259 197 229 233 q 330 143 290 161 q 414 125 370 125 q 520 154 475 125 q 591 235 566 182 q 616 357 616 288 l 616 628 q 591 750 616 698 q 520 832 566 803 q 414 861 475 861 q 330 842 371 861 q 259 786 290 822 q 216 703 229 749 l 216 703 l 75 703 l 75 703 q 139 857 92 791 q 258 960 187 924 q 414 996 330 996 q 594 950 517 996 q 715 821 672 905 q 758 628 758 738 l 758 357 q 715 164 758 248 q 594 35 672 81 q 414 -10 517 -10 z "},"\xd8":{"ha":897,"x_min":102,"x_max":795,"o":"m 676 1083 l 781 1083 l 233 -89 l 127 -89 l 676 1083 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\xd5":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 573 1057 q 532 1060 551 1057 q 497 1069 513 1063 q 463 1083 481 1075 l 461 1084 q 441 1094 451 1089 q 422 1105 431 1099 q 380 1127 397 1120 q 347 1134 363 1134 q 307 1119 320 1134 q 293 1073 293 1103 l 293 1059 l 186 1059 l 186 1076 q 220 1207 186 1164 q 324 1251 255 1251 q 391 1242 363 1251 q 456 1215 420 1232 l 458 1213 q 470 1207 464 1210 q 481 1200 475 1204 q 519 1180 505 1187 q 549 1174 534 1174 q 590 1190 576 1174 q 604 1240 604 1206 l 604 1253 l 711 1253 l 711 1237 q 676 1102 711 1147 q 573 1057 642 1057 z "},"\u0152":{"ha":1392,"x_min":102,"x_max":1318,"o":"m 469 -10 q 276 35 359 -10 q 147 162 193 80 q 102 353 102 245 l 102 633 q 147 824 102 741 q 276 951 193 906 q 469 996 359 996 q 632 951 566 996 q 731 825 698 907 q 764 633 764 744 l 764 353 q 731 161 764 242 q 632 35 698 79 q 469 -10 566 -10 m 469 126 q 582 154 533 126 q 657 232 630 181 q 684 349 684 282 l 684 637 q 657 754 684 704 q 582 832 630 805 q 469 860 533 860 q 349 832 400 860 q 269 754 297 805 q 240 637 240 704 l 240 349 q 269 232 240 282 q 349 154 297 181 q 469 126 400 126 m 684 986 l 823 986 l 823 0 l 684 0 l 684 986 m 751 132 l 1318 132 l 1318 0 l 751 0 l 751 132 m 751 555 l 1243 555 l 1243 424 l 751 424 l 751 555 m 751 986 l 1318 986 l 1318 854 l 751 854 l 751 986 z "},"P":{"ha":865,"x_min":122,"x_max":800,"o":"m 193 514 l 509 514 q 587 535 553 514 q 640 595 621 556 q 659 684 659 633 l 659 684 q 640 773 659 734 q 587 833 621 812 q 509 854 553 854 l 193 854 l 193 986 l 504 986 q 659 948 592 986 q 763 842 726 911 q 800 684 800 774 l 800 684 q 763 525 800 593 q 659 420 726 457 q 504 382 592 382 l 193 382 l 193 514 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\xde":{"ha":865,"x_min":122,"x_max":800,"o":"m 193 338 l 509 338 q 587 359 553 338 q 640 418 621 380 q 659 507 659 457 l 659 507 q 640 597 659 558 q 587 657 621 635 q 509 678 553 678 l 193 678 l 193 810 l 504 810 q 659 772 592 810 q 763 666 726 734 q 800 507 800 597 l 800 507 q 763 349 800 417 q 659 243 726 281 q 504 206 592 206 l 193 206 l 193 338 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"Q":{"ha":913,"x_min":102,"x_max":886,"o":"m 446 273 l 518 365 l 886 76 l 814 -16 l 446 273 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"R":{"ha":905,"x_min":122,"x_max":841,"o":"m 182 549 l 519 549 q 589 568 558 549 q 636 622 619 587 q 652 702 652 656 l 652 702 q 636 782 652 747 q 589 836 619 817 q 519 855 559 855 l 182 855 l 182 987 l 513 987 q 664 951 599 987 q 764 851 728 916 q 800 702 800 787 l 800 702 q 764 552 800 617 q 663 452 728 488 q 513 417 598 417 l 182 417 l 182 549 m 122 987 l 260 987 l 260 0 l 122 0 l 122 987 m 451 448 l 589 479 l 841 0 l 677 0 l 451 448 z "},"\u0154":{"ha":905,"x_min":122,"x_max":841,"o":"m 182 549 l 519 549 q 589 568 558 549 q 636 622 619 587 q 652 702 652 656 l 652 702 q 636 782 652 747 q 589 836 619 817 q 519 855 559 855 l 182 855 l 182 987 l 513 987 q 664 951 599 987 q 764 851 728 916 q 800 702 800 787 l 800 702 q 764 552 800 617 q 663 452 728 488 q 513 417 598 417 l 182 417 l 182 549 m 122 987 l 260 987 l 260 0 l 122 0 l 122 987 m 451 448 l 589 479 l 841 0 l 677 0 l 451 448 m 376 1134 l 563 1300 l 652 1207 l 452 1054 l 376 1134 z "},"\u0158":{"ha":905,"x_min":122,"x_max":841,"o":"m 182 549 l 519 549 q 589 568 558 549 q 636 622 619 587 q 652 702 652 656 l 652 702 q 636 782 652 747 q 589 836 619 817 q 519 855 559 855 l 182 855 l 182 987 l 513 987 q 664 951 599 987 q 764 851 728 916 q 800 702 800 787 l 800 702 q 764 552 800 617 q 663 452 728 488 q 513 417 598 417 l 182 417 l 182 549 m 122 987 l 260 987 l 260 0 l 122 0 l 122 987 m 451 448 l 589 479 l 841 0 l 677 0 l 451 448 m 230 1221 l 307 1303 l 439 1201 l 572 1303 l 649 1221 l 439 1059 l 230 1221 z "},"\u0156":{"ha":905,"x_min":122,"x_max":841,"o":"m 182 549 l 519 549 q 589 568 558 549 q 636 622 619 587 q 652 702 652 656 l 652 702 q 636 782 652 747 q 589 836 619 817 q 519 855 559 855 l 182 855 l 182 987 l 513 987 q 664 951 599 987 q 764 851 728 916 q 800 702 800 787 l 800 702 q 764 552 800 617 q 663 452 728 488 q 513 417 598 417 l 182 417 l 182 549 m 122 987 l 260 987 l 260 0 l 122 0 l 122 987 m 451 448 l 589 479 l 841 0 l 677 0 l 451 448 m 370 -100 l 509 -100 l 509 -239 l 370 -376 l 370 -100 z "},"S":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 z "},"\u015a":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 m 371 1134 l 558 1300 l 648 1207 l 448 1054 l 371 1134 z "},"\u0160":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 m 225 1221 l 302 1303 l 435 1201 l 567 1303 l 644 1221 l 435 1059 l 225 1221 z "},"\u015e":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 m 433 -286 q 321 -274 366 -286 l 350 -179 q 414 -189 382 -189 q 470 -180 452 -189 q 488 -154 488 -172 q 464 -129 488 -137 q 389 -121 439 -121 l 448 -42 q 568 -72 528 -42 q 608 -163 608 -102 q 564 -256 608 -225 q 433 -286 521 -286 m 491 41 l 491 -122 l 378 -121 l 378 41 l 491 41 z "},"\u0218":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 m 366 -100 l 504 -100 l 504 -239 l 366 -376 l 366 -100 z "},"\u1e62":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 m 366 -149 l 504 -149 l 504 -288 l 366 -288 l 366 -149 z "},"\u018f":{"ha":869,"x_min":109,"x_max":767,"o":"m 441 -10 q 264 30 338 -10 q 153 144 191 69 q 115 326 115 220 l 115 538 l 667 538 l 667 407 l 256 407 l 256 328 q 304 179 256 232 q 441 126 353 126 q 577 179 529 126 q 625 328 625 232 l 625 665 q 573 809 625 758 q 427 860 522 860 q 301 830 359 860 q 206 746 243 800 l 206 746 l 109 844 l 109 844 q 254 956 170 916 q 427 996 337 996 q 611 957 534 996 q 727 842 687 917 q 767 660 767 766 l 767 326 q 729 144 767 220 q 617 30 690 69 q 441 -10 544 -10 z "},"T":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u0164":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 m 125 1221 l 202 1303 l 334 1201 l 467 1303 l 544 1221 l 334 1059 l 125 1221 z "},"\u0162":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 m 333 -286 q 221 -274 265 -286 l 250 -179 q 314 -189 282 -189 q 370 -180 351 -189 q 388 -154 388 -172 q 363 -129 388 -137 q 289 -121 339 -121 l 348 -42 q 468 -72 428 -42 q 507 -163 507 -102 q 464 -256 507 -225 q 333 -286 420 -286 m 391 41 l 391 -122 l 278 -121 l 278 41 l 391 41 z "},"\u021a":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 m 265 -100 l 404 -100 l 404 -239 l 265 -376 l 265 -100 z "},"U":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 z "},"\xda":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 391 1134 l 578 1300 l 668 1207 l 468 1054 l 391 1134 z "},"\u016c":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 684 1263 q 625 1111 684 1164 q 458 1057 566 1057 l 452 1057 q 286 1111 345 1057 q 227 1263 227 1164 l 338 1262 q 368 1183 338 1211 q 452 1155 398 1155 l 458 1155 q 542 1183 512 1155 q 572 1262 572 1211 l 684 1263 z "},"\xdb":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 666 1127 l 585 1053 l 453 1154 l 321 1053 l 240 1127 l 453 1293 l 666 1127 z "},"\xdc":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 525 1205 l 663 1205 l 663 1067 l 525 1067 l 525 1205 m 247 1205 l 385 1205 l 385 1067 l 247 1067 l 247 1205 z "},"\u1ee4":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 385 -149 l 524 -149 l 524 -288 l 385 -288 l 385 -149 z "},"\xd9":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 245 1200 l 328 1293 l 515 1127 l 439 1047 l 245 1200 z "},"\u01af":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 z "},"\u0170":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 507 1127 l 660 1300 l 756 1207 l 590 1047 l 507 1127 m 235 1127 l 389 1300 l 485 1207 l 319 1047 l 235 1127 z "},"\u016a":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 703 1202 l 703 1067 l 208 1067 l 208 1202 l 703 1202 z "},"\u0172":{"ha":910,"x_min":109,"x_max":802,"o":"m 551 -285 q 398 -241 449 -285 q 347 -111 347 -198 q 396 22 347 -22 q 542 66 444 66 l 542 0 q 470 -91 470 0 q 551 -172 470 -172 l 614 -172 l 614 -285 l 551 -285 m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 z "},"\u016e":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 455 1046 q 332 1086 375 1046 q 289 1202 289 1127 q 332 1323 289 1281 q 455 1366 375 1366 q 578 1323 534 1366 q 621 1202 621 1280 q 578 1086 621 1127 q 455 1046 534 1046 m 455 1141 q 502 1158 485 1141 q 518 1205 518 1175 q 502 1254 518 1236 q 455 1272 486 1272 q 408 1254 425 1272 q 392 1205 392 1237 q 408 1158 392 1175 q 455 1141 425 1141 z "},"V":{"ha":815,"x_min":20,"x_max":795,"o":"m 20 986 l 171 986 l 408 213 l 644 986 l 795 986 l 473 0 l 342 0 l 20 986 z "},"\u0194":{"ha":815,"x_min":20,"x_max":795,"o":"m 408 -286 q 290 -256 326 -286 q 253 -160 253 -227 q 279 -57 253 -119 q 364 102 306 5 l 451 102 q 536 -57 509 5 q 562 -160 562 -119 q 526 -256 562 -227 q 408 -286 489 -286 m 408 -175 q 433 -166 425 -175 q 441 -136 441 -157 q 433 -97 441 -121 q 408 -32 425 -72 q 374 -136 374 -115 q 382 -166 374 -157 q 408 -175 390 -175 m 20 986 l 171 986 l 408 213 l 644 986 l 795 986 l 473 0 l 342 0 l 20 986 z "},"\u01b2":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 735 l 802 735 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 663 801 q 653 841 663 827 q 623 854 642 854 l 546 854 l 546 986 l 637 986 q 759 937 715 986 q 802 800 802 888 l 802 579 l 663 579 l 663 801 z "},"W":{"ha":1176,"x_min":20,"x_max":1156,"o":"m 541 986 l 635 986 l 838 213 l 1012 986 l 1156 986 l 915 0 l 774 0 l 592 689 l 402 0 l 261 0 l 20 986 l 164 986 l 338 213 l 541 986 z "},"X":{"ha":788,"x_min":14,"x_max":774,"o":"m 363 433 l 342 467 l 22 986 l 177 986 l 415 585 l 437 548 l 774 0 l 619 0 l 363 433 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 z "},"Y":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 z "},"\xdd":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 286 1134 l 473 1300 l 562 1207 l 362 1054 l 286 1134 z "},"\u0178":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 419 1205 l 557 1205 l 557 1067 l 419 1067 l 419 1205 m 141 1205 l 279 1205 l 279 1067 l 141 1067 l 141 1205 z "},"\u01b3":{"ha":718,"x_min":-20,"x_max":748,"o":"m 280 401 l -20 986 l 134 986 l 382 471 l 418 469 l 418 0 l 280 0 l 280 401 m 326 494 l 477 804 q 496 845 490 830 q 539 927 522 899 q 585 973 557 956 q 656 991 613 991 l 748 991 l 748 859 l 683 859 q 652 846 665 859 q 625 806 639 832 l 382 329 l 326 494 z "},"Z":{"ha":755,"x_min":81,"x_max":694,"o":"m 681 867 l 252 132 l 694 132 l 694 0 l 81 0 l 81 119 l 514 854 l 94 854 l 94 986 l 681 986 l 681 867 z "},"\u0179":{"ha":755,"x_min":81,"x_max":694,"o":"m 681 867 l 252 132 l 694 132 l 694 0 l 81 0 l 81 119 l 514 854 l 94 854 l 94 986 l 681 986 l 681 867 m 328 1134 l 515 1300 l 604 1207 l 404 1054 l 328 1134 z "},"\u017d":{"ha":755,"x_min":81,"x_max":694,"o":"m 681 867 l 252 132 l 694 132 l 694 0 l 81 0 l 81 119 l 514 854 l 94 854 l 94 986 l 681 986 l 681 867 m 182 1221 l 259 1303 l 391 1201 l 524 1303 l 601 1221 l 391 1059 l 182 1221 z "},"\u017b":{"ha":755,"x_min":81,"x_max":694,"o":"m 681 867 l 252 132 l 694 132 l 694 0 l 81 0 l 81 119 l 514 854 l 94 854 l 94 986 l 681 986 l 681 867 m 322 1205 l 460 1205 l 460 1067 l 322 1067 l 322 1205 z "},"a":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 z "},"\xe1":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 291 909 l 485 1150 l 585 1067 l 378 840 l 291 909 z "},"\u0103":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 z "},"\xe2":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 z "},"\xe4":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 439 986 l 578 986 l 578 848 l 439 848 l 439 986 m 155 986 l 293 986 l 293 848 l 155 848 l 155 986 z "},"\u1ea1":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 297 -149 l 435 -149 l 435 -288 l 297 -288 l 297 -149 z "},"\xe0":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 143 1067 l 243 1150 l 437 909 l 350 840 l 143 1067 z "},"\u0101":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 614 985 l 614 848 l 119 848 l 119 985 l 614 985 z "},"\u0105":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 606 -285 q 471 -253 513 -285 q 429 -151 429 -222 q 475 -48 429 -94 q 604 32 520 -1 l 637 0 q 567 -60 589 -30 q 545 -125 545 -90 q 560 -161 545 -150 q 606 -172 574 -172 l 637 -172 l 637 -285 l 606 -285 z "},"\xe5":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 366 842 q 243 882 286 842 q 200 998 200 923 q 243 1119 200 1077 q 366 1162 286 1162 q 489 1119 446 1162 q 532 998 532 1076 q 489 882 532 923 q 366 842 446 842 m 366 930 q 418 949 399 930 q 436 1001 436 968 q 418 1055 436 1036 q 366 1074 399 1074 q 315 1055 333 1074 q 296 1001 296 1036 q 315 949 296 968 q 366 930 333 930 z "},"\xe3":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 464 846 q 421 854 443 846 q 379 877 400 863 l 372 882 q 364 887 368 884 q 357 892 360 890 q 315 920 330 911 q 286 929 299 929 q 250 918 262 929 q 238 882 238 906 l 238 848 l 131 848 l 131 878 q 165 1004 131 962 q 269 1046 200 1046 q 318 1036 295 1046 q 367 1008 342 1026 l 372 1004 l 380 998 q 418 972 404 981 q 447 963 433 963 q 483 976 471 963 q 494 1015 494 989 l 494 1042 l 602 1042 l 602 1019 q 567 889 602 932 q 464 846 533 846 z "},"\xe6":{"ha":1158,"x_min":75,"x_max":1077,"o":"m 513 446 q 474 554 513 515 q 364 592 435 592 q 283 579 323 592 q 212 543 243 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 525 654 467 714 q 583 486 583 595 l 583 329 l 513 329 l 513 446 m 313 -10 q 134 44 193 -10 q 75 208 75 98 q 134 362 75 311 q 312 413 193 413 l 559 413 l 569 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 235 133 205 157 q 328 109 266 109 q 430 138 389 109 q 490 213 471 167 q 509 311 509 259 l 581 311 l 581 143 q 474 27 541 65 q 313 -10 408 -10 m 810 -10 q 673 25 730 -10 q 586 126 616 60 q 556 288 556 193 l 556 415 q 585 576 556 509 q 668 679 613 644 q 798 714 722 714 q 949 670 886 714 q 1044 541 1011 625 q 1077 339 1077 457 l 1077 305 l 595 305 l 595 413 l 945 413 l 945 413 q 901 545 939 498 q 798 592 863 592 q 672 539 717 592 q 627 389 627 486 l 627 299 q 675 158 627 208 q 810 109 723 109 q 898 126 854 109 q 976 176 941 144 l 976 176 l 1059 95 l 1059 95 q 941 17 1006 45 q 810 -10 876 -10 z "},"b":{"ha":755,"x_min":109,"x_max":667,"o":"m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 z "},"\u0253":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 806 q 152 944 109 895 q 273 993 195 993 l 364 993 l 364 861 l 287 861 q 257 847 268 861 q 247 808 247 833 l 247 0 l 109 0 l 109 806 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"c":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 z "},"\u0107":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 m 297 909 l 491 1150 l 591 1067 l 384 840 l 297 909 z "},"\u010d":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 m 159 1046 l 237 1117 l 372 988 l 508 1117 l 585 1046 l 372 840 l 159 1046 z "},"\xe7":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 m 357 -286 q 245 -274 290 -286 l 274 -179 q 338 -189 307 -189 q 394 -180 376 -189 q 412 -154 412 -172 q 388 -129 412 -137 q 313 -121 363 -121 l 372 -42 q 492 -72 452 -42 q 532 -163 532 -102 q 488 -256 532 -225 q 357 -286 445 -286 m 302 62 l 415 62 l 415 -121 l 302 -121 l 302 62 z "},"\u010b":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 m 303 987 l 441 987 l 441 848 l 303 848 l 303 987 z "},"d":{"ha":749,"x_min":88,"x_max":647,"o":"m 509 986 l 647 986 l 647 0 l 509 0 l 509 986 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\xf0":{"ha":747,"x_min":88,"x_max":646,"o":"m 532 467 q 495 646 534 551 q 377 844 456 740 l 269 986 l 424 986 l 503 875 q 610 660 574 774 q 646 414 646 545 l 532 467 m 646 414 l 646 292 q 613 130 646 197 q 517 26 580 62 q 366 -10 454 -10 q 216 25 278 -10 q 121 129 153 61 q 88 292 88 196 l 88 416 q 116 576 88 509 q 197 679 144 643 q 323 714 250 714 q 451 669 399 714 q 549 530 503 624 l 646 414 m 514 414 q 366 589 514 589 q 256 546 293 589 q 220 416 220 502 l 220 292 q 366 115 220 115 q 477 159 441 115 q 514 292 514 203 l 514 414 m 613 983 l 633 879 l 186 796 l 166 901 l 613 983 z "},"\u010f":{"ha":891,"x_min":88,"x_max":872,"o":"m 509 986 l 647 986 l 647 0 l 509 0 l 509 986 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 m 754 996 l 872 996 l 872 824 l 754 714 l 754 996 z "},"\u0111":{"ha":749,"x_min":88,"x_max":728,"o":"m 274 913 l 728 913 l 728 781 l 274 781 l 274 913 m 509 986 l 647 986 l 647 0 l 509 0 l 509 986 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\u0257":{"ha":758,"x_min":88,"x_max":764,"o":"m 509 806 q 552 944 509 895 q 673 993 595 993 l 764 993 l 764 861 l 687 861 q 657 847 668 861 q 647 808 647 833 l 647 0 l 509 0 l 509 806 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\u0256":{"ha":758,"x_min":88,"x_max":764,"o":"m 673 -286 q 552 -237 595 -286 q 509 -100 509 -189 l 509 161 l 647 161 l 647 -101 q 657 -141 647 -127 q 687 -155 668 -155 l 764 -155 l 764 -286 l 673 -286 m 509 986 l 647 986 l 647 0 l 509 0 l 509 986 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"e":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 z "},"\xe9":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 301 909 l 495 1150 l 595 1067 l 388 840 l 301 909 z "},"\u011b":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 163 1046 l 241 1117 l 376 988 l 512 1117 l 589 1046 l 376 840 l 163 1046 z "},"\xea":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 z "},"\xeb":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 450 986 l 588 986 l 588 848 l 450 848 l 450 986 m 165 986 l 303 986 l 303 848 l 165 848 l 165 986 z "},"\u0117":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 307 987 l 446 987 l 446 848 l 307 848 l 307 987 z "},"\u1eb9":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 307 -149 l 446 -149 l 446 -288 l 307 -288 l 307 -149 z "},"\xe8":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 153 1067 l 253 1150 l 447 909 l 360 840 l 153 1067 z "},"\u0113":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 624 985 l 624 848 l 129 848 l 129 985 l 624 985 z "},"\u0119":{"ha":745,"x_min":88,"x_max":663,"o":"m 618 -278 q 465 -238 515 -278 q 414 -117 414 -198 q 463 11 414 -50 q 610 127 511 71 l 644 95 l 634 86 q 556 -4 582 40 q 530 -91 530 -47 q 552 -147 530 -128 q 618 -165 574 -165 l 642 -165 l 642 -278 l 618 -278 m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 z "},"\u025b":{"ha":653,"x_min":81,"x_max":609,"o":"m 357 -10 q 153 45 225 -10 q 81 201 81 100 l 81 201 q 96 272 81 237 q 138 330 111 306 q 203 360 166 354 q 126 427 154 380 q 98 531 98 474 l 98 532 q 165 667 98 619 q 358 714 233 714 q 510 686 448 714 q 609 600 573 657 l 609 600 l 509 518 l 509 518 q 440 571 477 553 q 358 588 402 588 q 268 568 300 588 q 236 512 236 549 l 236 511 q 255 448 236 471 q 310 426 275 426 l 427 426 l 427 291 l 310 291 q 243 271 267 291 q 220 216 220 252 l 220 215 q 256 142 220 168 q 357 116 292 116 q 436 136 394 116 q 515 194 477 156 l 515 194 l 609 101 l 609 101 q 503 18 566 45 q 357 -10 440 -10 z "},"\u01dd":{"ha":745,"x_min":81,"x_max":656,"o":"m 360 -10 q 210 33 272 -10 q 114 158 147 76 q 81 355 81 240 l 81 401 l 556 401 l 556 290 l 213 290 l 213 290 q 257 161 219 207 q 360 115 296 115 q 482 164 439 115 q 525 305 525 214 l 525 395 q 479 534 525 485 q 348 583 433 583 q 264 566 306 583 q 191 518 223 549 l 191 518 l 100 609 l 100 609 q 217 687 152 659 q 348 714 282 714 q 515 676 446 714 q 620 567 584 639 q 656 392 656 494 l 656 313 q 622 138 656 210 q 520 28 587 66 q 360 -10 454 -10 z "},"\u0259":{"ha":745,"x_min":81,"x_max":656,"o":"m 360 -10 q 210 33 272 -10 q 114 158 147 76 q 81 355 81 240 l 81 401 l 556 401 l 556 290 l 213 290 l 213 290 q 257 161 219 207 q 360 115 296 115 q 482 164 439 115 q 525 305 525 214 l 525 395 q 479 534 525 485 q 348 583 433 583 q 264 566 306 583 q 191 518 223 549 l 191 518 l 100 609 l 100 609 q 217 687 152 659 q 348 714 282 714 q 515 676 446 714 q 620 567 584 639 q 656 392 656 494 l 656 313 q 622 138 656 210 q 520 28 587 66 q 360 -10 454 -10 z "},"f":{"ha":440,"x_min":54,"x_max":406,"o":"m 129 800 q 172 940 129 893 q 304 986 215 986 l 406 986 l 406 854 l 307 854 q 277 840 288 854 q 267 801 267 825 l 267 0 l 129 0 l 129 800 m 54 704 l 406 704 l 406 586 l 54 586 l 54 704 z "},"g":{"ha":749,"x_min":88,"x_max":647,"o":"m 345 -286 q 202 -257 265 -286 q 105 -174 140 -227 l 105 -174 l 199 -89 l 199 -89 q 263 -146 226 -126 q 342 -167 301 -167 q 465 -123 422 -167 q 509 1 509 -79 l 509 704 l 647 704 l 647 21 q 611 -145 647 -76 q 508 -250 576 -214 q 345 -286 440 -286 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\u011f":{"ha":749,"x_min":88,"x_max":647,"o":"m 345 -286 q 202 -257 265 -286 q 105 -174 140 -227 l 105 -174 l 199 -89 l 199 -89 q 263 -146 226 -126 q 342 -167 301 -167 q 465 -123 422 -167 q 509 1 509 -79 l 509 704 l 647 704 l 647 21 q 611 -145 647 -76 q 508 -250 576 -214 q 345 -286 440 -286 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 m 369 838 q 217 898 268 838 q 167 1080 167 959 l 167 1080 l 278 1080 l 278 1080 q 301 979 278 1013 q 369 945 323 945 l 381 945 q 449 979 427 945 q 472 1080 472 1013 l 472 1080 l 583 1080 l 583 1080 q 533 898 583 959 q 381 838 482 838 l 369 838 z "},"\u0123":{"ha":749,"x_min":88,"x_max":647,"o":"m 290 1000 l 435 1151 l 435 848 l 290 848 l 290 1000 m 345 -286 q 202 -257 265 -286 q 105 -174 140 -227 l 105 -174 l 199 -89 l 199 -89 q 263 -146 226 -126 q 342 -167 301 -167 q 465 -123 422 -167 q 509 1 509 -79 l 509 704 l 647 704 l 647 21 q 611 -145 647 -76 q 508 -250 576 -214 q 345 -286 440 -286 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\u0121":{"ha":749,"x_min":88,"x_max":647,"o":"m 345 -286 q 202 -257 265 -286 q 105 -174 140 -227 l 105 -174 l 199 -89 l 199 -89 q 263 -146 226 -126 q 342 -167 301 -167 q 465 -123 422 -167 q 509 1 509 -79 l 509 704 l 647 704 l 647 21 q 611 -145 647 -76 q 508 -250 576 -214 q 345 -286 440 -286 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 m 306 987 l 444 987 l 444 848 l 306 848 l 306 987 z "},"h":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 448 247 512 l 233 583 q 318 680 265 646 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 z "},"\u0127":{"ha":791,"x_min":34,"x_max":690,"o":"m 488 926 l 488 795 l 34 795 l 34 926 l 488 926 m 124 986 l 262 986 l 262 0 l 124 0 l 124 986 m 551 427 q 513 542 551 501 q 404 583 474 583 q 299 547 336 583 q 262 448 262 512 l 248 583 q 333 680 281 646 q 450 714 386 714 q 627 639 564 714 q 690 427 690 564 l 690 0 l 551 0 l 551 427 z "},"i":{"ha":349,"x_min":109,"x_max":247,"o":"m 109 986 l 247 986 l 247 848 l 109 848 l 109 986 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\u0131":{"ha":349,"x_min":109,"x_max":247,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\xed":{"ha":349,"x_min":102,"x_max":396,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 102 909 l 296 1150 l 396 1067 l 189 840 l 102 909 z "},"\xee":{"ha":349,"x_min":-35,"x_max":391,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 391 911 l 313 840 l 178 968 l 42 840 l -35 911 l 178 1117 l 391 911 z "},"\xef":{"ha":349,"x_min":-34,"x_max":389,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 251 986 l 389 986 l 389 848 l 251 848 l 251 986 m -34 986 l 104 986 l 104 848 l -34 848 l -34 986 z "},"\u1ecb":{"ha":349,"x_min":109,"x_max":247,"o":"m 109 986 l 247 986 l 247 848 l 109 848 l 109 986 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 109 -149 l 247 -149 l 247 -288 l 109 -288 l 109 -149 z "},"\xec":{"ha":349,"x_min":-45,"x_max":248,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m -45 1067 l 54 1150 l 248 909 l 161 840 l -45 1067 z "},"\u012b":{"ha":349,"x_min":-70,"x_max":425,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 425 985 l 425 848 l -70 848 l -70 985 l 425 985 z "},"\u012f":{"ha":349,"x_min":39,"x_max":247,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 109 987 l 247 987 l 247 848 l 109 848 l 109 987 m 216 -285 q 81 -253 123 -285 q 39 -151 39 -222 q 84 -48 39 -94 q 213 32 130 -1 l 247 0 q 177 -60 199 -30 q 155 -125 155 -90 q 169 -161 155 -150 q 216 -172 184 -172 l 247 -172 l 247 -285 l 216 -285 z "},"j":{"ha":372,"x_min":14,"x_max":271,"o":"m 14 -155 l 91 -155 q 120 -141 110 -155 q 131 -101 131 -127 l 131 704 l 269 704 l 269 -100 q 226 -237 269 -189 q 104 -286 183 -286 l 14 -286 l 14 -155 m 130 986 l 271 986 l 271 848 l 130 848 l 130 986 z "},"k":{"ha":734,"x_min":109,"x_max":728,"o":"m 168 267 l 530 704 l 693 704 l 159 103 l 168 267 m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 m 332 406 l 420 498 l 728 0 l 577 0 l 332 406 z "},"\u0137":{"ha":734,"x_min":109,"x_max":728,"o":"m 168 267 l 530 704 l 693 704 l 159 103 l 168 267 m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 m 332 406 l 420 498 l 728 0 l 577 0 l 332 406 m 298 -100 l 437 -100 l 437 -239 l 298 -376 l 298 -100 z "},"\u0199":{"ha":734,"x_min":109,"x_max":728,"o":"m 168 267 l 530 704 l 693 704 l 159 103 l 168 267 m 332 406 l 420 498 l 728 0 l 577 0 l 332 406 m 109 806 q 152 944 109 895 q 273 993 195 993 l 364 993 l 364 861 l 287 861 q 257 847 268 861 q 247 808 247 833 l 247 0 l 109 0 l 109 806 z "},"l":{"ha":402,"x_min":109,"x_max":355,"o":"m 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 986 l 247 986 l 247 182 z "},"\u013a":{"ha":402,"x_min":109,"x_max":391,"o":"m 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 986 l 247 986 l 247 182 m 114 1134 l 301 1300 l 391 1207 l 191 1054 l 114 1134 z "},"\u013e":{"ha":511,"x_min":109,"x_max":472,"o":"m 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 986 l 247 986 l 247 182 m 354 996 l 472 996 l 472 823 l 354 713 l 354 996 z "},"\u013c":{"ha":402,"x_min":109,"x_max":355,"o":"m 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 986 l 247 986 l 247 182 m 130 -100 l 269 -100 l 269 -239 l 130 -376 l 130 -100 z "},"\u0142":{"ha":402,"x_min":20,"x_max":355,"o":"m 20 486 l 355 652 l 355 519 l 20 353 l 20 486 m 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 986 l 247 986 l 247 182 z "},"m":{"ha":1190,"x_min":109,"x_max":1088,"o":"m 949 427 q 911 542 949 501 q 802 583 872 583 q 703 543 738 583 q 667 432 667 504 l 640 568 q 727 676 673 637 q 848 714 782 714 q 978 681 924 714 q 1060 583 1031 647 q 1088 427 1088 518 l 1088 0 l 949 0 l 949 427 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 529 427 q 492 542 529 501 q 389 583 456 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 560 681 508 714 q 640 583 612 647 q 667 427 667 518 l 667 0 l 529 0 l 529 427 z "},"n":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 z "},"\u0144":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 m 313 909 l 507 1150 l 606 1067 l 399 840 l 313 909 z "},"\u0148":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 m 175 1046 l 252 1117 l 388 988 l 524 1117 l 601 1046 l 388 840 l 175 1046 z "},"\u0146":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 m 319 -100 l 457 -100 l 457 -239 l 319 -376 l 319 -100 z "},"\u014b":{"ha":776,"x_min":109,"x_max":674,"o":"m 418 -155 l 496 -155 q 525 -141 515 -155 q 536 -101 536 -127 l 536 94 l 674 94 l 674 -100 q 631 -237 674 -189 q 509 -286 588 -286 l 418 -286 l 418 -155 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 z "},"\xf1":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 m 486 846 q 443 854 465 846 q 401 877 422 863 l 393 882 q 386 887 390 884 q 378 892 382 890 q 336 920 352 911 q 307 929 321 929 q 272 918 283 929 q 260 882 260 906 l 260 848 l 153 848 l 153 878 q 187 1004 153 962 q 291 1046 222 1046 q 340 1036 317 1046 q 389 1008 363 1026 l 394 1004 l 401 998 q 440 972 425 981 q 469 963 455 963 q 504 976 492 963 q 516 1015 516 989 l 516 1042 l 623 1042 l 623 1019 q 589 889 623 932 q 486 846 555 846 z "},"o":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\xf3":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 304 909 l 498 1150 l 597 1067 l 391 840 l 304 909 z "},"\xf4":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 z "},"\xf6":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 452 986 l 591 986 l 591 848 l 452 848 l 452 986 m 168 986 l 306 986 l 306 848 l 168 848 l 168 986 z "},"\u1ecd":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 310 -149 l 448 -149 l 448 -288 l 310 -288 l 310 -149 z "},"\xf2":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 156 1067 l 256 1150 l 450 909 l 363 840 l 156 1067 z "},"\u01a1":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u0151":{"ha":757,"x_min":88,"x_max":673,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 431 896 l 557 1137 l 673 1064 l 534 836 l 431 896 m 159 896 l 286 1137 l 402 1064 l 263 836 l 159 896 z "},"\u014d":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 627 985 l 627 848 l 132 848 l 132 985 l 627 985 z "},"\u0254":{"ha":692,"x_min":44,"x_max":604,"o":"m 299 -10 q 150 19 217 -10 q 44 100 83 47 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 150 685 83 655 q 299 714 216 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 z "},"\xf8":{"ha":757,"x_min":88,"x_max":669,"o":"m 534 800 l 628 800 l 237 -96 l 143 -96 l 534 800 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\xf5":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 477 846 q 434 854 456 846 q 392 877 413 863 l 385 882 q 377 887 381 884 q 370 892 373 890 q 328 920 343 911 q 298 929 312 929 q 263 918 275 929 q 251 882 251 906 l 251 848 l 144 848 l 144 878 q 178 1004 144 962 q 282 1046 213 1046 q 331 1036 308 1046 q 380 1008 355 1026 l 385 1004 l 393 998 q 431 972 416 981 q 460 963 446 963 q 495 976 484 963 q 507 1015 507 989 l 507 1042 l 614 1042 l 614 1019 q 580 889 614 932 q 477 846 546 846 z "},"\u0153":{"ha":1180,"x_min":88,"x_max":1099,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 521 679 462 714 q 611 575 580 643 q 642 411 642 507 l 642 294 q 611 130 642 198 q 521 26 580 62 q 378 -10 462 -10 m 378 115 q 490 162 450 115 q 530 294 530 209 l 530 411 q 490 543 530 496 q 378 589 450 589 q 261 543 302 589 q 220 411 220 496 l 220 294 q 261 162 220 209 q 378 115 302 115 m 832 -10 q 680 26 743 -10 q 584 134 616 63 q 551 305 551 205 l 551 385 q 582 563 551 489 q 674 675 614 637 q 820 714 735 714 q 970 670 908 714 q 1066 543 1033 626 q 1099 342 1099 459 l 1099 296 l 631 296 l 631 404 l 974 404 l 974 404 q 927 546 967 495 q 820 596 887 596 q 693 543 739 596 q 648 392 648 489 l 648 302 q 696 163 648 212 q 832 115 745 115 q 917 132 876 115 q 993 179 959 149 l 993 179 l 1080 95 l 1080 95 q 963 17 1028 45 q 832 -10 898 -10 z "},"p":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 704 l 247 704 l 247 -286 l 109 -286 l 109 704 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"\xfe":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 986 l 247 986 l 247 -286 l 109 -286 l 109 986 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"q":{"ha":749,"x_min":88,"x_max":647,"o":"m 509 704 l 647 704 l 647 -286 l 509 -286 l 509 704 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"r":{"ha":593,"x_min":109,"x_max":586,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 496 537 q 450 571 477 559 q 385 583 422 583 q 283 546 319 583 q 247 446 247 510 l 233 581 q 317 679 265 644 q 431 714 368 714 q 518 700 479 714 q 586 659 557 686 l 496 537 z "},"\u0155":{"ha":593,"x_min":109,"x_max":586,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 496 537 q 450 571 477 559 q 385 583 422 583 q 283 546 319 583 q 247 446 247 510 l 233 581 q 317 679 265 644 q 431 714 368 714 q 518 700 479 714 q 586 659 557 686 l 496 537 m 262 909 l 456 1150 l 555 1067 l 349 840 l 262 909 z "},"\u0159":{"ha":593,"x_min":109,"x_max":586,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 496 537 q 450 571 477 559 q 385 583 422 583 q 283 546 319 583 q 247 446 247 510 l 233 581 q 317 679 265 644 q 431 714 368 714 q 518 700 479 714 q 586 659 557 686 l 496 537 m 124 1046 l 201 1117 l 337 988 l 473 1117 l 550 1046 l 337 840 l 124 1046 z "},"\u0157":{"ha":593,"x_min":109,"x_max":586,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 496 537 q 450 571 477 559 q 385 583 422 583 q 283 546 319 583 q 247 446 247 510 l 233 581 q 317 679 265 644 q 431 714 368 714 q 518 700 479 714 q 586 659 557 686 l 496 537 m 109 -100 l 247 -100 l 247 -239 l 109 -376 l 109 -100 z "},"s":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 z "},"\u015b":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 m 288 909 l 482 1150 l 582 1067 l 375 840 l 288 909 z "},"\u0161":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 m 151 1046 l 228 1117 l 363 988 l 499 1117 l 576 1046 l 363 840 l 151 1046 z "},"\u015f":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 m 355 -286 q 243 -274 288 -286 l 272 -179 q 336 -189 304 -189 q 392 -180 374 -189 q 410 -154 410 -172 q 386 -129 410 -137 q 311 -121 361 -121 l 370 -42 q 490 -72 450 -42 q 530 -163 530 -102 q 486 -256 530 -225 q 355 -286 443 -286 m 300 62 l 413 62 l 413 -121 l 300 -121 l 300 62 z "},"\u0219":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 m 288 -100 l 426 -100 l 426 -239 l 288 -376 l 288 -100 z "},"\u1e63":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 m 288 -149 l 426 -149 l 426 -288 l 288 -288 l 288 -149 z "},"\xdf":{"ha":771,"x_min":109,"x_max":669,"o":"m 109 699 q 142 860 109 793 q 240 961 176 926 q 395 996 304 996 q 544 969 482 996 q 637 888 605 941 q 669 762 669 836 l 669 761 q 637 654 669 696 q 547 599 605 612 q 637 549 605 588 q 669 449 669 509 l 669 157 q 615 34 669 77 q 462 -10 561 -10 l 397 -10 l 397 121 l 462 121 q 513 138 495 121 q 531 186 531 155 l 531 466 q 513 513 531 496 q 462 530 495 530 l 397 530 l 397 662 l 462 662 q 513 687 495 662 q 531 757 531 711 l 531 758 q 497 837 531 809 q 400 865 463 865 q 287 820 327 865 q 247 693 247 775 l 247 0 l 109 0 l 109 699 z "},"t":{"ha":453,"x_min":54,"x_max":372,"o":"m 292 -3 q 166 44 206 -3 q 127 183 127 91 l 127 909 l 265 909 l 265 182 q 275 142 265 156 q 305 128 286 128 l 372 128 l 372 -3 l 292 -3 m 54 704 l 372 704 l 372 579 l 54 579 l 54 704 z "},"\u0165":{"ha":534,"x_min":54,"x_max":517,"o":"m 292 -3 q 166 44 206 -3 q 127 183 127 91 l 127 909 l 265 909 l 265 182 q 275 142 265 156 q 305 128 286 128 l 372 128 l 372 -3 l 292 -3 m 54 704 l 372 704 l 372 579 l 54 579 l 54 704 m 399 1054 l 517 1054 l 517 882 l 399 772 l 399 1054 z "},"\u0163":{"ha":453,"x_min":54,"x_max":396,"o":"m 292 -3 q 166 44 206 -3 q 127 183 127 91 l 127 909 l 265 909 l 265 182 q 275 142 265 156 q 305 128 286 128 l 372 128 l 372 -3 l 292 -3 m 54 704 l 372 704 l 372 579 l 54 579 l 54 704 m 222 -286 q 110 -274 154 -286 l 138 -179 q 203 -189 171 -189 q 258 -180 240 -189 q 277 -154 277 -172 q 252 -129 277 -137 q 178 -121 228 -121 l 237 -42 q 356 -72 317 -42 q 396 -163 396 -102 q 353 -256 396 -225 q 222 -286 309 -286 m 167 62 l 279 62 l 279 -121 l 167 -121 l 167 62 z "},"\u021b":{"ha":453,"x_min":54,"x_max":372,"o":"m 292 -3 q 166 44 206 -3 q 127 183 127 91 l 127 909 l 265 909 l 265 182 q 275 142 265 156 q 305 128 286 128 l 372 128 l 372 -3 l 292 -3 m 54 704 l 372 704 l 372 579 l 54 579 l 54 704 m 154 -100 l 292 -100 l 292 -239 l 154 -376 l 154 -100 z "},"u":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 z "},"\xfa":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 311 909 l 505 1150 l 605 1067 l 398 840 l 311 909 z "},"\u016d":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 380 838 q 229 898 279 838 q 178 1080 178 959 l 178 1080 l 290 1080 l 290 1080 q 312 979 290 1013 q 380 945 335 945 l 393 945 q 461 979 438 945 q 484 1080 484 1013 l 484 1080 l 595 1080 l 595 1080 q 544 898 595 959 q 393 838 494 838 l 380 838 z "},"\xfb":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 600 911 l 522 840 l 387 968 l 251 840 l 174 911 l 387 1117 l 600 911 z "},"\xfc":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 460 986 l 598 986 l 598 848 l 460 848 l 460 986 m 175 986 l 313 986 l 313 848 l 175 848 l 175 986 z "},"\u1ee5":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 317 -149 l 456 -149 l 456 -288 l 317 -288 l 317 -149 z "},"\xf9":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 163 1067 l 263 1150 l 457 909 l 370 840 l 163 1067 z "},"\u01b0":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 z "},"\u0171":{"ha":772,"x_min":109,"x_max":681,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 438 896 l 564 1137 l 681 1064 l 542 836 l 438 896 m 167 896 l 293 1137 l 410 1064 l 271 836 l 167 896 z "},"\u016b":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 634 985 l 634 848 l 139 848 l 139 985 l 634 985 z "},"\u0173":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 640 -285 q 505 -253 547 -285 q 463 -151 463 -222 q 508 -48 463 -94 q 637 32 553 -1 l 671 0 q 601 -60 623 -30 q 578 -125 578 -90 q 593 -161 578 -150 q 640 -172 608 -172 l 671 -172 l 671 -285 l 640 -285 z "},"\u016f":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 387 842 q 263 882 307 842 q 220 998 220 923 q 263 1119 220 1077 q 387 1162 307 1162 q 509 1119 466 1162 q 553 998 553 1076 q 509 882 553 923 q 387 842 466 842 m 387 930 q 438 949 420 930 q 456 1001 456 968 q 438 1055 456 1036 q 387 1074 420 1074 q 335 1055 353 1074 q 317 1001 317 1036 q 335 949 317 968 q 387 930 353 930 z "},"v":{"ha":694,"x_min":34,"x_max":667,"o":"m 523 704 l 667 704 l 403 0 l 298 0 l 34 704 l 178 704 l 351 201 l 523 704 z "},"w":{"ha":1074,"x_min":47,"x_max":1034,"o":"m 47 704 l 192 704 l 317 201 l 492 704 l 589 704 l 764 201 l 889 704 l 1034 704 l 817 0 l 712 0 l 541 486 l 369 0 l 264 0 l 47 704 z "},"x":{"ha":718,"x_min":41,"x_max":674,"o":"m 311 320 l 52 704 l 205 704 l 408 389 l 674 0 l 521 0 l 311 320 m 307 389 l 373 261 l 194 0 l 41 0 l 307 389 m 355 454 l 509 704 l 663 704 l 414 324 l 355 454 z "},"y":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 z "},"\xfd":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 277 909 l 471 1150 l 571 1067 l 364 840 l 277 909 z "},"\xff":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 426 986 l 564 986 l 564 848 l 426 848 l 426 986 m 141 986 l 279 986 l 279 848 l 141 848 l 141 986 z "},"\u01b4":{"ha":713,"x_min":34,"x_max":699,"o":"m 127 -161 l 155 -161 q 219 -145 195 -161 q 256 -92 243 -130 l 483 604 q 537 687 500 659 q 629 714 573 714 l 699 714 l 699 583 l 656 583 q 620 569 635 583 q 596 529 605 556 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 z "},"z":{"ha":687,"x_min":88,"x_max":612,"o":"m 594 587 l 256 128 l 612 128 l 612 0 l 88 0 l 88 119 l 435 576 l 98 576 l 98 704 l 594 704 l 594 587 z "},"\u017a":{"ha":687,"x_min":88,"x_max":612,"o":"m 594 587 l 256 128 l 612 128 l 612 0 l 88 0 l 88 119 l 435 576 l 98 576 l 98 704 l 594 704 l 594 587 m 276 909 l 470 1150 l 570 1067 l 363 840 l 276 909 z "},"\u017e":{"ha":687,"x_min":88,"x_max":612,"o":"m 594 587 l 256 128 l 612 128 l 612 0 l 88 0 l 88 119 l 435 576 l 98 576 l 98 704 l 594 704 l 594 587 m 138 1046 l 216 1117 l 351 988 l 487 1117 l 564 1046 l 351 840 l 138 1046 z "},"\u017c":{"ha":687,"x_min":88,"x_max":612,"o":"m 594 587 l 256 128 l 612 128 l 612 0 l 88 0 l 88 119 l 435 576 l 98 576 l 98 704 l 594 704 l 594 587 m 282 987 l 420 987 l 420 848 l 282 848 l 282 987 z "},"\xaa":{"ha":478,"x_min":68,"x_max":417,"o":"m 315 832 q 297 879 315 862 q 246 895 278 895 q 202 888 218 895 q 165 862 186 882 l 87 917 q 154 974 116 956 q 248 991 192 991 q 373 952 328 991 q 417 839 417 914 l 417 564 l 315 564 l 315 832 m 214 559 q 106 593 144 559 q 68 689 68 627 q 106 782 68 749 q 212 815 144 815 l 327 815 l 331 730 l 223 730 q 186 718 199 730 q 173 684 173 706 q 190 653 173 665 q 236 642 206 642 q 295 657 274 642 q 315 699 315 671 l 331 614 q 285 573 315 588 q 214 559 254 559 z "},"\xba":{"ha":475,"x_min":68,"x_max":414,"o":"m 241 559 q 113 605 158 559 q 68 735 68 652 l 68 814 q 113 945 68 899 q 241 991 158 991 q 369 944 323 991 q 414 814 414 898 l 414 735 q 369 605 414 652 q 241 559 323 559 m 241 667 q 285 686 269 667 q 300 739 300 705 l 300 813 q 285 865 300 846 q 241 883 269 883 q 196 864 212 883 q 181 812 181 846 l 181 739 q 196 685 181 704 q 241 667 212 667 z "},"\u0410":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 z "},"\u0411":{"ha":885,"x_min":122,"x_max":800,"o":"m 193 132 l 509 132 q 590 151 556 132 q 641 206 623 170 q 659 294 659 243 l 659 294 q 641 383 659 347 q 590 439 623 420 q 509 458 556 458 l 193 458 l 193 590 l 504 590 q 664 555 597 590 q 765 454 730 521 q 800 294 800 388 l 800 294 q 765 135 800 201 q 664 35 730 69 q 504 0 597 0 l 193 0 l 193 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 986 l 728 986 l 728 854 l 189 854 l 189 986 z "},"\u0412":{"ha":897,"x_min":122,"x_max":812,"o":"m 203 128 l 471 128 q 624 168 576 128 q 672 281 672 208 l 672 283 q 655 369 672 333 q 600 424 637 405 q 505 444 563 444 l 203 444 l 203 568 l 505 568 q 620 604 581 568 q 659 711 659 640 l 659 711 q 616 821 659 785 q 486 858 572 858 l 203 858 l 203 986 l 511 986 q 671 954 606 986 q 767 861 735 921 q 799 719 799 802 l 799 719 q 779 624 799 668 q 719 548 760 579 q 619 505 679 516 q 722 463 679 496 q 789 379 766 429 q 812 271 812 329 l 812 269 q 777 127 812 189 q 675 33 741 66 q 522 0 610 0 l 203 0 l 203 128 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0413":{"ha":688,"x_min":122,"x_max":675,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 z "},"\u0403":{"ha":688,"x_min":122,"x_max":675,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 m 347 1134 l 534 1300 l 623 1207 l 423 1054 l 347 1134 z "},"\u0490":{"ha":688,"x_min":122,"x_max":675,"o":"m 536 1171 l 675 1171 l 675 910 l 536 910 l 536 1171 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 z "},"\u0414":{"ha":1012,"x_min":41,"x_max":958,"o":"m 41 132 l 47 132 q 180 201 133 132 q 227 395 227 270 l 227 986 l 366 986 l 366 383 q 330 198 366 275 q 225 81 294 121 q 61 41 157 41 l 41 41 l 41 132 m 41 132 l 179 132 l 179 -204 l 41 -204 l 41 132 m 41 132 l 896 132 l 896 0 l 41 0 l 41 132 m 819 132 l 958 132 l 958 -204 l 819 -204 l 819 132 m 687 986 l 825 986 l 825 0 l 687 0 l 687 986 m 313 986 l 760 986 l 760 854 l 313 854 l 313 986 z "},"\u0415":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 z "},"\u0400":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 241 1200 l 324 1293 l 511 1127 l 435 1047 l 241 1200 z "},"\u0401":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 521 1205 l 659 1205 l 659 1067 l 521 1067 l 521 1205 m 243 1205 l 381 1205 l 381 1067 l 243 1067 l 243 1205 z "},"\u0416":{"ha":1331,"x_min":14,"x_max":1317,"o":"m 829 541 l 1102 986 l 1276 986 l 899 420 l 829 541 m 829 434 l 950 505 l 1317 0 l 1125 0 l 829 434 m 380 505 l 502 434 l 205 0 l 14 0 l 380 505 m 55 986 l 229 986 l 501 541 l 431 420 l 55 986 m 380 555 l 951 555 l 951 424 l 380 424 l 380 555 m 596 986 l 734 986 l 734 0 l 596 0 l 596 986 z "},"\u0417":{"ha":819,"x_min":75,"x_max":734,"o":"m 411 -10 q 245 21 317 -10 q 130 111 174 52 q 75 252 86 170 l 75 252 l 216 252 l 216 252 q 281 157 229 191 q 418 123 334 123 q 545 164 500 123 q 589 283 589 206 l 589 283 q 550 404 589 361 q 438 447 510 447 l 294 447 l 294 578 l 438 578 q 538 616 503 578 q 573 722 573 653 l 573 728 q 533 829 573 795 q 417 863 492 863 q 298 831 347 863 q 231 741 250 799 l 231 741 l 91 741 l 91 741 q 150 879 107 821 q 259 966 193 937 q 410 996 326 996 q 577 967 509 996 q 682 881 646 938 q 718 740 718 823 l 718 734 q 684 599 718 656 q 585 515 649 542 q 695 435 656 498 q 734 276 734 373 l 734 275 q 696 121 734 185 q 586 23 659 57 q 411 -10 513 -10 z "},"\u0418":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 z "},"\u0419":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 z "},"\u040d":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 m 273 1200 l 356 1293 l 543 1127 l 467 1047 l 273 1200 z "},"\u048a":{"ha":994,"x_min":122,"x_max":980,"o":"m 827 45 l 841 0 l 806 0 l 806 132 l 980 132 l 926 -204 l 787 -204 l 827 45 m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 m 711 1263 q 652 1111 711 1164 q 486 1057 593 1057 l 480 1057 q 313 1111 372 1057 q 254 1263 254 1164 l 366 1262 q 396 1183 366 1211 q 480 1155 426 1155 l 486 1155 q 570 1183 540 1155 q 600 1262 600 1211 l 711 1263 z "},"\u041a":{"ha":891,"x_min":122,"x_max":878,"o":"m 376 541 l 663 986 l 836 986 l 446 420 l 376 541 m 376 434 l 497 505 l 878 0 l 686 0 l 376 434 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 555 l 498 555 l 498 424 l 189 424 l 189 555 z "},"\u040c":{"ha":891,"x_min":122,"x_max":878,"o":"m 376 541 l 663 986 l 836 986 l 446 420 l 376 541 m 376 434 l 497 505 l 878 0 l 686 0 l 376 434 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 555 l 498 555 l 498 424 l 189 424 l 189 555 m 361 1134 l 549 1300 l 638 1207 l 438 1054 l 361 1134 z "},"\u041b":{"ha":996,"x_min":81,"x_max":874,"o":"m 81 132 l 81 132 q 178 159 141 132 q 233 244 215 186 q 250 395 250 302 l 250 986 l 389 986 l 389 404 q 358 173 389 261 q 263 42 328 84 q 95 0 199 0 l 81 0 l 81 132 m 736 986 l 874 986 l 874 0 l 736 0 l 736 986 m 336 986 l 809 986 l 809 854 l 336 854 l 336 986 z "},"\u041c":{"ha":1082,"x_min":122,"x_max":960,"o":"m 831 986 l 960 986 l 960 0 l 825 0 l 825 739 l 832 695 l 589 137 l 493 137 l 250 682 l 257 739 l 257 0 l 122 0 l 122 986 l 252 986 l 541 335 l 831 986 z "},"\u041d":{"ha":943,"x_min":122,"x_max":821,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u041e":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u041f":{"ha":943,"x_min":122,"x_max":821,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 986 l 755 986 l 755 854 l 208 854 l 208 986 z "},"\u0420":{"ha":865,"x_min":122,"x_max":800,"o":"m 193 514 l 509 514 q 587 535 553 514 q 640 595 621 556 q 659 684 659 633 l 659 684 q 640 773 659 734 q 587 833 621 812 q 509 854 553 854 l 193 854 l 193 986 l 504 986 q 659 948 592 986 q 763 842 726 911 q 800 684 800 774 l 800 684 q 763 525 800 593 q 659 420 726 457 q 504 382 592 382 l 193 382 l 193 514 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0421":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u0422":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u0423":{"ha":848,"x_min":41,"x_max":827,"o":"m 41 986 l 198 986 l 488 280 l 398 170 l 41 986 m 539 204 q 479 85 513 132 q 400 14 446 38 q 292 -10 354 -10 l 178 -10 l 178 126 l 292 126 q 348 141 323 126 q 390 185 372 156 q 425 258 409 214 l 677 986 l 827 986 l 539 204 z "},"\u040e":{"ha":848,"x_min":41,"x_max":827,"o":"m 41 986 l 198 986 l 488 280 l 398 170 l 41 986 m 539 204 q 479 85 513 132 q 400 14 446 38 q 292 -10 354 -10 l 178 -10 l 178 126 l 292 126 q 348 141 323 126 q 390 185 372 156 q 425 258 409 214 l 677 986 l 827 986 l 539 204 z "},"\u0424":{"ha":1100,"x_min":61,"x_max":1039,"o":"m 550 105 q 285 150 395 105 q 118 283 176 195 q 61 496 61 371 l 61 524 q 118 737 61 649 q 285 870 176 825 q 550 915 395 915 q 815 870 705 915 q 982 737 924 825 q 1039 524 1039 649 l 1039 496 q 982 283 1039 371 q 815 150 924 195 q 550 105 705 105 m 481 1020 l 619 1020 l 619 0 l 481 0 l 481 1020 m 550 228 q 814 297 721 228 q 907 496 907 366 l 907 524 q 814 723 907 654 q 550 792 721 792 q 286 723 379 792 q 193 524 193 654 l 193 496 q 286 297 193 366 q 550 228 379 228 z "},"\u0425":{"ha":788,"x_min":14,"x_max":774,"o":"m 363 433 l 342 467 l 22 986 l 177 986 l 415 585 l 437 548 l 774 0 l 619 0 l 363 433 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 z "},"\u0427":{"ha":869,"x_min":95,"x_max":747,"o":"m 609 986 l 747 986 l 747 0 l 609 0 l 609 986 m 393 309 q 232 345 299 309 q 130 452 165 382 q 95 621 95 522 l 95 986 l 233 986 l 233 616 q 279 490 233 534 q 407 445 324 445 q 556 493 503 445 q 609 630 609 542 l 609 708 l 652 708 l 652 635 q 622 458 652 532 q 533 347 591 385 q 393 309 475 309 z "},"\u0426":{"ha":1008,"x_min":122,"x_max":954,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 208 132 l 864 132 l 864 0 l 208 0 l 208 132 m 815 132 l 954 132 l 954 -204 l 815 -204 l 815 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0428":{"ha":1286,"x_min":122,"x_max":1164,"o":"m 1025 986 l 1164 986 l 1164 0 l 1025 0 l 1025 986 m 202 132 l 1093 132 l 1093 0 l 202 0 l 202 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 574 986 l 712 986 l 712 0 l 574 0 l 574 986 z "},"\u0429":{"ha":1350,"x_min":122,"x_max":1295,"o":"m 202 132 l 1093 132 l 1093 0 l 202 0 l 202 132 m 1025 986 l 1164 986 l 1164 0 l 1025 0 l 1025 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 574 986 l 712 986 l 712 0 l 574 0 l 574 986 m 1157 132 l 1295 132 l 1295 -204 l 1157 -204 l 1157 132 z "},"\u040f":{"ha":943,"x_min":122,"x_max":821,"o":"m 821 986 l 821 0 l 682 0 l 682 986 l 821 986 m 260 986 l 260 0 l 122 0 l 122 986 l 260 986 m 749 132 l 749 0 l 202 0 l 202 132 l 749 132 m 541 132 l 541 -204 l 402 -204 l 402 132 l 541 132 z "},"\u042c":{"ha":882,"x_min":122,"x_max":797,"o":"m 193 132 l 505 132 q 586 151 553 132 q 637 206 620 170 q 655 294 655 243 l 655 294 q 637 383 655 347 q 586 439 620 420 q 505 458 553 458 l 193 458 l 193 590 l 500 590 q 661 555 594 590 q 762 454 727 521 q 797 294 797 388 l 797 294 q 762 135 797 201 q 661 35 727 69 q 500 0 594 0 l 193 0 l 193 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u042a":{"ha":979,"x_min":7,"x_max":894,"o":"m 7 986 l 342 986 l 342 854 l 7 854 l 7 986 m 304 132 l 602 132 q 683 151 650 132 q 734 206 717 170 q 752 294 752 243 l 752 294 q 734 383 752 347 q 683 439 717 420 q 602 458 650 458 l 304 458 l 304 590 l 597 590 q 758 555 691 590 q 859 454 824 521 q 894 294 894 388 l 894 294 q 859 135 894 201 q 758 35 824 69 q 597 0 691 0 l 304 0 l 304 132 m 233 986 l 371 986 l 371 0 l 233 0 l 233 986 z "},"\u042b":{"ha":1160,"x_min":122,"x_max":1038,"o":"m 193 132 l 478 132 q 559 151 526 132 q 610 206 593 170 q 628 294 628 243 l 628 294 q 610 383 628 347 q 559 439 593 420 q 478 458 526 458 l 193 458 l 193 590 l 473 590 q 633 555 567 590 q 735 454 700 521 q 770 294 770 388 l 770 294 q 735 135 770 201 q 633 35 700 69 q 473 0 567 0 l 193 0 l 193 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 1038 0 l 900 0 l 900 986 l 1038 986 l 1038 0 z "},"\u0409":{"ha":1414,"x_min":81,"x_max":1329,"o":"m 753 132 l 1038 132 q 1119 151 1085 132 q 1170 206 1152 170 q 1187 294 1187 243 l 1187 294 q 1170 383 1187 347 q 1119 439 1152 420 q 1038 458 1085 458 l 753 458 l 753 590 l 1033 590 q 1193 555 1126 590 q 1294 454 1259 521 q 1329 294 1329 388 l 1329 294 q 1294 135 1329 201 q 1193 35 1259 69 q 1033 0 1126 0 l 753 0 l 753 132 m 81 132 l 81 132 q 178 159 141 132 q 233 244 215 186 q 250 395 250 302 l 250 986 l 389 986 l 389 404 q 358 173 389 261 q 263 42 328 84 q 95 0 199 0 l 81 0 l 81 132 m 736 986 l 874 986 l 874 0 l 736 0 l 736 986 m 336 986 l 809 986 l 809 854 l 336 854 l 336 986 z "},"\u040a":{"ha":1414,"x_min":122,"x_max":1329,"o":"m 753 132 l 1038 132 q 1119 151 1085 132 q 1170 206 1152 170 q 1187 294 1187 243 l 1187 294 q 1170 383 1187 347 q 1119 439 1152 420 q 1038 458 1085 458 l 753 458 l 753 590 l 1033 590 q 1193 555 1126 590 q 1294 454 1259 521 q 1329 294 1329 388 l 1329 294 q 1294 135 1329 201 q 1193 35 1259 69 q 1033 0 1126 0 l 753 0 l 753 132 m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u0405":{"ha":855,"x_min":61,"x_max":781,"o":"m 418 -10 q 283 3 347 -10 q 164 44 220 17 q 61 112 109 71 l 61 112 l 147 218 l 147 218 q 271 144 203 169 q 418 120 339 120 q 585 160 526 120 q 644 272 644 199 l 644 273 q 617 354 644 324 q 548 399 590 385 q 438 426 505 414 q 434 427 436 427 q 429 427 431 427 l 419 429 q 258 468 320 446 q 152 546 196 489 q 108 707 108 602 l 108 707 q 149 864 108 799 q 269 962 190 928 q 458 996 347 996 q 562 985 511 996 q 663 950 613 973 q 761 893 713 928 l 761 893 l 682 783 l 682 783 q 570 845 626 825 q 458 866 514 866 q 301 826 357 866 q 245 711 245 785 l 245 711 q 274 631 245 660 q 346 588 302 602 q 465 559 389 574 q 470 558 468 558 q 475 557 473 557 q 483 555 479 556 q 490 554 487 555 q 640 511 580 536 q 740 430 700 486 q 781 277 781 374 l 781 275 q 738 121 781 185 q 614 23 695 57 q 418 -10 533 -10 z "},"\u0404":{"ha":859,"x_min":102,"x_max":785,"o":"m 189 555 l 640 555 l 640 424 l 189 424 l 189 555 m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u042d":{"ha":859,"x_min":75,"x_max":758,"o":"m 414 -10 q 259 26 330 -10 q 140 129 188 62 q 75 283 92 195 l 75 283 l 216 283 l 216 283 q 259 197 229 233 q 330 143 290 161 q 414 125 370 125 q 520 154 475 125 q 591 235 566 182 q 616 357 616 288 l 616 628 q 591 750 616 698 q 520 832 566 803 q 414 861 475 861 q 330 842 371 861 q 259 786 290 822 q 216 703 229 749 l 216 703 l 75 703 l 75 703 q 139 857 92 791 q 258 960 187 924 q 414 996 330 996 q 594 950 517 996 q 715 821 672 905 q 758 628 758 738 l 758 357 q 715 164 758 248 q 594 35 672 81 q 414 -10 517 -10 m 219 555 l 670 555 l 670 424 l 219 424 l 219 555 z "},"\u0406":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"\u0407":{"ha":382,"x_min":-17,"x_max":399,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 261 1205 l 399 1205 l 399 1067 l 261 1067 l 261 1205 m -17 1205 l 121 1205 l 121 1067 l -17 1067 l -17 1205 z "},"\u0408":{"ha":702,"x_min":20,"x_max":580,"o":"m 272 -10 q 127 22 193 -10 q 20 111 62 54 l 134 193 q 189 141 153 159 q 272 123 224 123 q 397 173 353 123 q 441 314 441 223 l 441 986 l 580 986 l 580 313 q 544 138 580 211 q 439 28 508 66 q 272 -10 370 -10 z "},"\u040b":{"ha":1059,"x_min":-14,"x_max":958,"o":"m 819 379 q 772 528 819 479 q 632 578 726 578 q 460 532 517 578 q 403 393 403 486 l 359 388 q 434 633 359 551 q 659 714 509 714 q 883 629 809 714 q 958 374 958 545 l 958 0 l 819 0 l 819 379 m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u042e":{"ha":1265,"x_min":122,"x_max":1164,"o":"m 176 555 l 559 555 l 559 424 l 176 424 l 176 555 m 260 1 l 122 1 l 122 987 l 260 987 l 260 1 m 817 -10 q 635 35 714 -10 q 514 162 557 80 q 471 353 471 245 l 471 633 q 514 824 471 741 q 635 951 557 906 q 817 996 714 996 q 999 951 920 996 q 1121 824 1078 906 q 1164 633 1164 741 l 1164 353 q 1121 162 1164 245 q 999 35 1078 80 q 817 -10 920 -10 m 817 126 q 925 154 878 126 q 997 232 971 181 q 1022 349 1022 282 l 1022 637 q 997 754 1022 704 q 925 832 971 805 q 817 860 878 860 q 710 832 756 860 q 638 754 663 805 q 612 637 612 704 l 612 349 q 638 232 612 282 q 710 154 663 181 q 817 126 756 126 z "},"\u042f":{"ha":865,"x_min":64,"x_max":743,"o":"m 358 397 q 209 433 273 397 q 108 537 144 470 q 72 692 72 604 l 72 692 q 107 847 72 780 q 208 950 143 913 q 358 987 273 987 l 682 987 l 682 855 l 353 855 q 282 835 313 855 q 236 778 252 814 q 219 692 219 741 l 219 692 q 236 606 219 643 q 283 549 252 569 q 353 528 313 528 l 682 528 l 682 397 l 358 397 m 330 458 l 468 427 l 229 0 l 64 0 l 330 458 m 604 987 l 743 987 l 743 0 l 604 0 l 604 987 z "},"\u0402":{"ha":1008,"x_min":-14,"x_max":947,"o":"m 639 603 q 806 567 736 603 q 911 464 875 532 q 947 300 947 395 l 947 300 q 911 138 947 205 q 809 35 876 71 q 646 0 741 0 l 583 0 l 583 132 l 633 132 q 763 175 717 132 q 808 298 808 219 l 808 298 q 761 426 808 380 q 625 471 713 471 q 461 417 519 471 q 403 267 403 364 l 403 189 l 359 230 l 359 303 q 392 465 359 398 q 488 568 425 532 q 639 603 551 603 m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u0460":{"ha":1449,"x_min":102,"x_max":1347,"o":"m 441 -10 q 263 35 340 -10 q 144 162 186 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 l 448 996 l 448 860 l 448 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 531 l 795 531 l 795 353 q 780 248 795 298 q 735 157 764 198 q 617 34 693 77 q 441 -10 541 -10 m 1007 -10 q 826 37 904 -10 q 707 168 749 84 q 667 255 681 208 q 654 353 654 302 l 654 531 l 795 531 l 795 349 q 821 232 795 282 q 893 154 846 181 q 1000 126 939 126 q 1108 154 1061 126 q 1180 232 1154 181 q 1205 349 1205 282 l 1205 637 q 1180 754 1205 704 q 1108 832 1154 805 q 1000 860 1061 860 l 1000 860 l 1000 996 l 1000 996 q 1182 951 1103 996 q 1304 824 1261 906 q 1347 633 1347 741 l 1347 353 q 1305 162 1347 245 q 1186 35 1263 80 q 1007 -10 1109 -10 z "},"\u0462":{"ha":922,"x_min":7,"x_max":838,"o":"m 7 871 l 566 871 l 566 739 l 7 739 l 7 871 m 234 132 l 546 132 q 627 151 593 132 q 678 206 661 170 q 696 294 696 243 l 696 294 q 678 383 696 347 q 627 439 661 420 q 546 458 593 458 l 234 458 l 234 590 l 541 590 q 701 555 635 590 q 803 454 768 521 q 838 294 838 388 l 838 294 q 803 135 838 201 q 701 35 768 69 q 541 0 635 0 l 234 0 l 234 132 m 163 986 l 301 986 l 301 0 l 163 0 l 163 986 z "},"\u0464":{"ha":1147,"x_min":122,"x_max":1072,"o":"m 162 555 l 477 555 l 477 424 l 162 424 l 162 555 m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 477 555 l 928 555 l 928 424 l 477 424 l 477 555 m 732 -10 q 552 35 630 -10 q 432 164 475 81 q 389 357 389 248 l 389 628 q 432 821 389 738 q 552 950 475 905 q 732 996 630 996 q 888 960 817 996 q 1007 857 960 924 q 1072 703 1055 791 l 1072 703 l 930 703 l 930 703 q 887 786 918 749 q 817 842 857 822 q 732 861 776 861 q 627 832 672 861 q 556 750 581 803 q 531 628 531 698 l 531 357 q 556 235 531 288 q 627 154 581 182 q 732 125 672 125 q 817 143 777 125 q 887 197 857 161 q 930 283 918 233 l 930 283 l 1072 283 l 1072 283 q 1007 129 1055 195 q 888 26 959 62 q 732 -10 817 -10 z "},"\u0466":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 380 362 l 519 362 l 519 0 l 380 0 l 380 362 m 256 460 l 646 460 l 646 329 l 256 329 l 256 460 z "},"\u0468":{"ha":1200,"x_min":122,"x_max":1173,"o":"m 169 461 l 573 461 l 573 330 l 169 330 l 169 461 m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 692 986 l 810 986 l 1173 0 l 1024 0 l 751 795 l 477 0 l 328 0 l 692 986 m 682 362 l 820 362 l 820 0 l 682 0 l 682 362 m 557 460 l 947 460 l 947 329 l 557 329 l 557 460 z "},"\u046a":{"ha":1020,"x_min":14,"x_max":1006,"o":"m 150 986 l 870 986 l 870 854 l 150 854 l 150 986 m 400 432 l 28 986 l 208 986 l 526 505 l 400 432 m 812 986 l 992 986 l 634 454 l 496 505 l 812 986 m 102 304 q 169 444 127 389 q 261 524 210 498 q 374 549 313 549 l 394 427 q 340 412 366 427 q 295 366 315 397 q 261 286 274 334 l 185 0 l 14 0 l 102 304 m 441 498 l 579 498 l 579 0 l 441 0 l 441 498 m 367 549 l 454 549 l 511 461 l 576 549 l 646 549 l 646 427 l 374 427 l 367 549 m 759 286 q 725 366 746 334 q 680 412 705 397 q 626 427 654 427 l 646 549 q 759 524 707 549 q 851 444 810 498 q 918 304 892 389 l 1006 0 l 835 0 l 759 286 z "},"\u046c":{"ha":1348,"x_min":122,"x_max":1335,"o":"m 218 549 l 782 549 l 782 427 l 218 427 l 218 549 m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 478 986 l 1198 986 l 1198 854 l 478 854 l 478 986 m 728 432 l 356 986 l 536 986 l 854 505 l 728 432 m 1140 986 l 1320 986 l 962 454 l 825 505 l 1140 986 m 431 304 q 497 444 456 389 q 590 524 538 498 q 702 549 642 549 l 722 427 q 669 412 694 427 q 623 366 644 397 q 589 286 602 334 l 513 0 l 342 0 l 431 304 m 769 498 l 907 498 l 907 0 l 769 0 l 769 498 m 695 549 l 783 549 l 839 461 l 904 549 l 975 549 l 975 427 l 702 427 l 695 549 m 1087 286 q 1054 366 1074 334 q 1008 412 1033 397 q 954 427 983 427 l 975 549 q 1087 524 1035 549 q 1180 444 1139 498 q 1246 304 1221 389 l 1335 0 l 1163 0 l 1087 286 z "},"\u046e":{"ha":819,"x_min":75,"x_max":720,"o":"m 297 -286 q 130 -236 186 -286 q 75 -85 75 -186 q 130 70 75 18 q 297 121 186 121 l 385 121 q 528 162 480 121 q 575 283 575 202 l 575 283 q 537 406 575 366 q 424 447 500 447 l 347 447 l 347 578 l 424 578 q 525 614 491 578 q 559 721 559 650 l 559 721 q 520 828 559 792 q 403 863 481 863 q 282 833 329 863 q 217 741 236 802 l 217 740 l 77 740 l 77 741 q 182 932 102 869 q 396 996 262 996 q 567 967 498 996 q 670 880 635 938 q 704 734 704 821 l 704 734 q 689 637 704 680 q 645 564 674 595 q 571 515 615 534 q 683 437 646 496 q 720 276 720 378 l 720 275 q 683 116 720 180 q 571 21 646 53 q 385 -10 496 -10 l 296 -10 q 234 -29 255 -10 q 213 -85 213 -48 q 234 -137 213 -119 q 296 -154 255 -154 l 566 -154 l 566 -286 l 297 -286 m 201 1218 l 282 1299 l 414 1198 l 547 1299 l 627 1218 l 414 1053 l 201 1218 z "},"\u0470":{"ha":991,"x_min":109,"x_max":883,"o":"m 495 227 q 286 274 373 227 q 154 408 199 320 q 109 621 109 496 l 109 986 l 247 986 l 247 616 q 276 480 247 536 q 361 393 305 423 q 495 363 416 363 q 630 393 574 363 q 715 480 686 423 q 745 616 745 536 l 745 986 l 883 986 l 883 621 q 837 408 883 496 q 705 274 791 320 q 495 227 618 227 m 427 986 l 565 986 l 565 0 l 427 0 l 427 986 z "},"\u0472":{"ha":897,"x_min":102,"x_max":795,"o":"m 203 555 l 694 555 l 694 424 l 203 424 l 203 555 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u0474":{"ha":830,"x_min":20,"x_max":857,"o":"m 20 986 l 171 986 l 408 213 l 588 804 q 628 906 607 867 q 683 968 650 946 q 766 991 716 991 l 857 991 l 857 859 l 780 859 q 753 847 762 859 q 736 806 745 834 l 473 0 l 342 0 l 20 986 z "},"\u0476":{"ha":830,"x_min":20,"x_max":857,"o":"m 123 1200 l 220 1300 l 387 1134 l 296 1047 l 123 1200 m 415 1200 l 511 1300 l 678 1134 l 588 1047 l 415 1200 m 20 986 l 171 986 l 408 213 l 588 804 q 628 906 607 867 q 683 968 650 946 q 766 991 716 991 l 857 991 l 857 859 l 780 859 q 753 847 762 859 q 736 806 745 834 l 473 0 l 342 0 l 20 986 z "},"\u0478":{"ha":1520,"x_min":102,"x_max":1506,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u0492":{"ha":817,"x_min":102,"x_max":804,"o":"m 102 555 l 606 555 l 606 424 l 102 424 l 102 555 m 251 986 l 389 986 l 389 0 l 251 0 l 251 986 m 319 986 l 804 986 l 804 854 l 319 854 l 319 986 z "},"\u0494":{"ha":913,"x_min":122,"x_max":852,"o":"m 468 -52 l 481 -52 q 654 14 595 -52 q 713 206 713 81 l 713 206 q 658 402 713 333 q 500 471 602 471 q 323 417 386 471 q 260 267 260 364 l 260 189 l 217 230 l 217 303 q 252 465 217 398 q 354 568 287 532 q 514 603 420 603 q 697 556 621 603 q 812 421 772 510 q 852 208 852 333 l 852 208 q 810 -8 852 79 q 687 -140 769 -96 q 481 -184 604 -184 l 468 -184 l 468 -52 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 z "},"\u0496":{"ha":1385,"x_min":14,"x_max":1354,"o":"m 829 541 l 1102 986 l 1276 986 l 899 420 l 829 541 m 829 434 l 950 505 l 1317 0 l 1125 0 l 829 434 m 380 505 l 502 434 l 205 0 l 14 0 l 380 505 m 55 986 l 229 986 l 501 541 l 431 420 l 55 986 m 380 555 l 951 555 l 951 424 l 380 424 l 380 555 m 596 986 l 734 986 l 734 0 l 596 0 l 596 986 m 1354 132 l 1354 -204 l 1216 -204 l 1216 132 l 1354 132 m 1284 91 l 1284 0 l 1246 0 l 1246 91 l 1284 91 z "},"\u0498":{"ha":819,"x_min":75,"x_max":734,"o":"m 491 98 l 491 -204 l 353 -204 l 353 98 l 491 98 m 411 -10 q 245 21 317 -10 q 130 111 174 52 q 75 252 86 170 l 75 252 l 216 252 l 216 252 q 281 157 229 191 q 418 123 334 123 q 545 164 500 123 q 589 283 589 206 l 589 283 q 550 404 589 361 q 438 447 510 447 l 294 447 l 294 578 l 438 578 q 538 616 503 578 q 573 722 573 653 l 573 728 q 533 829 573 795 q 417 863 492 863 q 298 831 347 863 q 231 741 250 799 l 231 741 l 91 741 l 91 741 q 199 929 115 863 q 410 996 282 996 q 577 967 509 996 q 682 881 646 938 q 718 740 718 823 l 718 734 q 684 599 718 656 q 585 515 649 542 q 695 435 656 498 q 734 276 734 373 l 734 275 q 696 121 734 185 q 586 23 659 57 q 411 -10 513 -10 z "},"\u049a":{"ha":932,"x_min":122,"x_max":916,"o":"m 376 541 l 663 986 l 836 986 l 446 420 l 376 541 m 376 434 l 497 505 l 878 0 l 686 0 l 376 434 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 555 l 498 555 l 498 424 l 189 424 l 189 555 m 916 132 l 916 -204 l 778 -204 l 778 132 l 916 132 m 846 91 l 846 0 l 808 0 l 808 91 l 846 91 z "},"\u049c":{"ha":891,"x_min":122,"x_max":878,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 437 541 l 663 986 l 836 986 l 507 420 l 437 541 m 441 434 l 558 505 l 878 0 l 686 0 l 441 434 m 189 555 l 559 555 l 559 424 l 189 424 l 189 555 m 317 725 l 414 725 l 414 254 l 317 254 l 317 725 z "},"\u049e":{"ha":939,"x_min":20,"x_max":925,"o":"m 20 871 l 457 871 l 457 753 l 20 753 l 20 871 m 424 541 l 710 986 l 884 986 l 494 420 l 424 541 m 423 434 l 545 505 l 925 0 l 733 0 l 423 434 m 170 986 l 308 986 l 308 0 l 170 0 l 170 986 m 237 555 l 545 555 l 545 424 l 237 424 l 237 555 z "},"\u04a0":{"ha":1041,"x_min":-20,"x_max":1027,"o":"m -20 854 l -20 986 l 342 986 l 342 854 l -20 854 m 526 541 l 812 986 l 986 986 l 596 420 l 526 541 m 526 434 l 647 505 l 1027 0 l 836 0 l 526 434 m 272 986 l 410 986 l 410 0 l 272 0 l 272 986 m 339 555 l 648 555 l 648 424 l 339 424 l 339 555 z "},"\u04a2":{"ha":983,"x_min":122,"x_max":953,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 m 953 132 l 953 -204 l 814 -204 l 814 132 l 953 132 m 883 91 l 883 0 l 844 0 l 844 91 l 883 91 z "},"\u04a4":{"ha":1168,"x_min":122,"x_max":1154,"o":"m 751 986 l 1154 986 l 1154 854 l 751 854 l 751 986 m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u04a6":{"ha":1466,"x_min":122,"x_max":1405,"o":"m 1028 -52 l 1041 -52 q 1210 14 1152 -52 q 1267 206 1267 81 l 1267 206 q 1212 402 1267 333 q 1057 471 1157 471 q 882 417 944 471 q 821 267 821 364 l 821 189 l 777 230 l 777 303 q 812 465 777 398 q 912 568 846 532 q 1070 603 978 603 q 1251 556 1176 603 q 1366 421 1326 510 q 1405 208 1405 333 l 1405 208 q 1365 -8 1405 79 q 1243 -140 1324 -96 q 1041 -184 1162 -184 l 1028 -184 l 1028 -52 m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 986 l 755 986 l 755 854 l 208 854 l 208 986 z "},"\u0524":{"ha":1007,"x_min":122,"x_max":953,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 986 l 755 986 l 755 854 l 208 854 l 208 986 m 953 132 l 953 -204 l 814 -204 l 814 132 l 953 132 m 883 91 l 883 0 l 844 0 l 844 91 l 883 91 z "},"\u04a8":{"ha":1004,"x_min":102,"x_max":916,"o":"m 833 -10 q 581 31 681 -10 q 430 154 480 72 q 380 361 380 237 l 380 759 q 439 937 380 878 q 620 996 499 996 q 799 937 739 996 q 859 759 859 878 l 859 361 q 814 166 859 245 q 683 47 770 88 q 462 0 595 5 l 462 132 q 656 189 592 132 q 720 361 720 245 l 720 759 q 695 838 720 812 q 619 865 670 865 q 543 838 568 865 q 518 759 518 812 l 518 361 q 553 228 518 281 q 657 148 587 174 q 832 121 727 121 l 916 121 l 916 -10 l 833 -10 m 462 0 q 267 41 348 0 q 144 162 186 83 q 102 353 102 241 l 102 714 q 171 923 102 849 q 367 996 240 996 l 367 860 q 276 823 308 860 q 243 719 243 787 l 243 349 q 301 189 243 245 q 462 132 358 132 l 462 0 z "},"\u04aa":{"ha":859,"x_min":102,"x_max":785,"o":"m 513 91 l 513 -204 l 374 -204 l 374 91 l 513 91 m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u04ac":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 m 536 132 l 536 -204 l 397 -204 l 397 132 l 536 132 m 466 91 l 466 0 l 427 0 l 427 91 l 466 91 z "},"\u04ae":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 z "},"\u04b0":{"ha":699,"x_min":-20,"x_max":719,"o":"m 117 399 l 581 399 l 581 274 l 117 274 l 117 399 m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 z "},"\u04b2":{"ha":829,"x_min":14,"x_max":830,"o":"m 363 433 l 342 467 l 22 986 l 177 986 l 415 585 l 437 548 l 774 0 l 619 0 l 363 433 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 m 830 132 l 830 -204 l 692 -204 l 692 132 l 830 132 m 760 91 l 760 0 l 722 0 l 722 91 l 760 91 z "},"\u04b4":{"ha":1076,"x_min":-14,"x_max":1021,"o":"m 751 986 l 889 986 l 889 0 l 751 0 l 751 986 m 351 132 l 824 132 l 824 0 l 351 0 l 351 132 m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m 883 132 l 1021 132 l 1021 -204 l 883 -204 l 883 132 m -14 986 l 621 986 l 621 854 l -14 854 l -14 986 z "},"\u04b6":{"ha":933,"x_min":95,"x_max":879,"o":"m 609 986 l 747 986 l 747 0 l 609 0 l 609 986 m 393 309 q 232 345 299 309 q 130 452 165 382 q 95 621 95 522 l 95 986 l 233 986 l 233 616 q 279 490 233 534 q 407 445 324 445 q 556 493 503 445 q 609 630 609 542 l 609 708 l 652 708 l 652 635 q 622 458 652 532 q 533 347 591 385 q 393 309 475 309 m 879 132 l 879 -204 l 741 -204 l 741 132 l 879 132 m 809 91 l 809 0 l 770 0 l 770 91 l 809 91 z "},"\u04b8":{"ha":869,"x_min":95,"x_max":747,"o":"m 364 637 l 462 637 l 462 166 l 364 166 l 364 637 m 609 986 l 747 986 l 747 0 l 609 0 l 609 986 m 393 309 q 232 345 299 309 q 130 452 165 382 q 95 621 95 522 l 95 986 l 233 986 l 233 616 q 279 490 233 534 q 407 445 324 445 q 556 493 503 445 q 609 630 609 542 l 609 708 l 652 708 l 652 635 q 622 458 652 532 q 533 347 591 385 q 393 309 475 309 z "},"\u04ba":{"ha":917,"x_min":122,"x_max":815,"o":"m 677 379 q 630 528 677 479 q 490 578 583 578 q 317 532 374 578 q 260 393 260 486 l 217 388 q 292 633 217 551 q 517 714 367 714 q 741 629 667 714 q 815 374 815 545 l 815 0 l 677 0 l 677 379 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u04bc":{"ha":1036,"x_min":41,"x_max":954,"o":"m 635 -10 q 452 30 528 -10 q 336 144 376 69 q 296 326 296 220 l 296 660 q 334 842 296 766 q 446 957 372 917 q 622 996 519 996 q 798 957 725 996 q 910 842 871 917 q 948 660 948 766 l 948 420 l 430 420 l 430 552 l 806 552 l 806 658 q 758 807 806 754 q 622 860 710 860 q 486 807 534 860 q 437 658 437 754 l 437 321 q 489 177 437 229 q 635 126 541 126 q 762 154 704 126 q 857 233 819 182 l 857 233 l 954 142 l 954 142 q 809 30 892 70 q 635 -10 726 -10 m 207 420 q 84 462 127 420 q 41 578 41 503 l 41 669 l 176 669 l 176 592 q 190 563 176 573 q 229 552 203 552 l 367 552 l 367 420 l 207 420 z "},"\u04be":{"ha":1036,"x_min":41,"x_max":954,"o":"m 694 91 l 694 -204 l 556 -204 l 556 91 l 694 91 m 635 -10 q 452 30 528 -10 q 336 144 376 69 q 296 326 296 220 l 296 660 q 334 842 296 766 q 446 957 372 917 q 622 996 519 996 q 798 957 725 996 q 910 842 871 917 q 948 660 948 766 l 948 420 l 430 420 l 430 552 l 806 552 l 806 658 q 758 807 806 754 q 622 860 710 860 q 486 807 534 860 q 437 658 437 754 l 437 321 q 489 177 437 229 q 635 126 541 126 q 762 154 704 126 q 857 233 819 182 l 857 233 l 954 142 l 954 142 q 809 30 892 70 q 635 -10 726 -10 m 207 420 q 84 462 127 420 q 41 578 41 503 l 41 669 l 176 669 l 176 592 q 190 563 176 573 q 229 552 203 552 l 367 552 l 367 420 l 207 420 z "},"\u04c0":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"\u04c1":{"ha":1331,"x_min":14,"x_max":1317,"o":"m 829 541 l 1102 986 l 1276 986 l 899 420 l 829 541 m 829 434 l 950 505 l 1317 0 l 1125 0 l 829 434 m 380 505 l 502 434 l 205 0 l 14 0 l 380 505 m 55 986 l 229 986 l 501 541 l 431 420 l 55 986 m 380 555 l 951 555 l 951 424 l 380 424 l 380 555 m 596 986 l 734 986 l 734 0 l 596 0 l 596 986 z "},"\u04c3":{"ha":901,"x_min":122,"x_max":840,"o":"m 480 -154 l 489 -154 q 649 -82 597 -154 q 701 142 701 -10 l 701 142 q 675 299 701 236 q 596 393 649 361 q 464 424 543 424 l 444 424 l 396 555 l 471 555 q 670 510 587 555 q 796 372 752 464 q 840 143 840 279 l 840 143 q 802 -102 840 -7 q 688 -241 765 -196 q 489 -286 610 -286 l 480 -286 l 480 -154 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 555 l 484 555 l 463 424 l 189 424 l 189 555 m 356 541 l 622 986 l 795 986 l 439 437 l 356 541 z "},"\u04c5":{"ha":1017,"x_min":81,"x_max":1004,"o":"m 851 45 l 865 0 l 830 0 l 830 132 l 1004 132 l 949 -204 l 811 -204 l 851 45 m 81 132 l 81 132 q 178 159 141 132 q 233 244 215 186 q 250 395 250 302 l 250 986 l 389 986 l 389 404 q 358 173 389 261 q 263 42 328 84 q 95 0 199 0 l 81 0 l 81 132 m 736 986 l 874 986 l 874 0 l 736 0 l 736 986 m 336 986 l 809 986 l 809 854 l 336 854 l 336 986 z "},"\u04c7":{"ha":943,"x_min":122,"x_max":821,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 565 -155 l 642 -155 q 672 -141 661 -155 q 682 -101 682 -127 l 682 155 l 821 155 l 821 -100 q 778 -237 821 -189 q 656 -286 734 -286 l 565 -286 l 565 -155 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 m 682 986 l 821 986 l 821 58 l 682 58 l 682 986 z "},"\u04c9":{"ha":964,"x_min":122,"x_max":950,"o":"m 798 45 l 811 0 l 777 0 l 777 132 l 950 132 l 896 -204 l 758 -204 l 798 45 m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u04cb":{"ha":869,"x_min":95,"x_max":747,"o":"m 476 132 l 614 132 l 614 -204 l 476 -204 l 476 132 m 609 986 l 747 986 l 747 0 l 609 0 l 609 986 m 393 309 q 232 345 299 309 q 130 452 165 382 q 95 621 95 522 l 95 986 l 233 986 l 233 616 q 279 490 233 534 q 407 445 324 445 q 556 493 503 445 q 609 630 609 542 l 609 708 l 652 708 l 652 635 q 622 458 652 532 q 533 347 591 385 q 393 309 475 309 z "},"\u04cd":{"ha":1103,"x_min":122,"x_max":1090,"o":"m 937 45 l 951 0 l 916 0 l 916 132 l 1090 132 l 1036 -204 l 897 -204 l 937 45 m 831 986 l 960 986 l 960 0 l 825 0 l 825 739 l 832 695 l 589 137 l 493 137 l 250 682 l 257 739 l 257 0 l 122 0 l 122 986 l 252 986 l 541 335 l 831 986 z "},"\u04d0":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 z "},"\u04d2":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 519 1205 l 658 1205 l 658 1067 l 519 1067 l 519 1205 m 241 1205 l 380 1205 l 380 1067 l 241 1067 l 241 1205 z "},"\u04d4":{"ha":1356,"x_min":0,"x_max":1282,"o":"m 547 986 l 696 986 l 154 0 l 0 0 l 547 986 m 241 347 l 719 347 l 719 215 l 241 215 l 241 347 m 648 986 l 787 986 l 787 0 l 648 0 l 648 986 m 715 132 l 1282 132 l 1282 0 l 715 0 l 715 132 m 715 555 l 1207 555 l 1207 424 l 715 424 l 715 555 m 715 986 l 1282 986 l 1282 854 l 715 854 l 715 986 z "},"\u04d6":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 z "},"\u04d8":{"ha":869,"x_min":109,"x_max":767,"o":"m 441 -10 q 264 30 338 -10 q 153 144 191 69 q 115 326 115 220 l 115 538 l 667 538 l 667 407 l 256 407 l 256 328 q 304 179 256 232 q 441 126 353 126 q 577 179 529 126 q 625 328 625 232 l 625 665 q 573 809 625 758 q 427 860 522 860 q 301 830 359 860 q 206 746 243 800 l 206 746 l 109 844 l 109 844 q 254 956 170 916 q 427 996 337 996 q 611 957 534 996 q 727 842 687 917 q 767 660 767 766 l 767 326 q 729 144 767 220 q 617 30 690 69 q 441 -10 544 -10 z "},"\u04da":{"ha":869,"x_min":109,"x_max":767,"o":"m 441 -10 q 264 30 338 -10 q 153 144 191 69 q 115 326 115 220 l 115 538 l 667 538 l 667 407 l 256 407 l 256 328 q 304 179 256 232 q 441 126 353 126 q 577 179 529 126 q 625 328 625 232 l 625 665 q 573 809 625 758 q 427 860 522 860 q 301 830 359 860 q 206 746 243 800 l 206 746 l 109 844 l 109 844 q 254 956 170 916 q 427 996 337 996 q 611 957 534 996 q 727 842 687 917 q 767 660 767 766 l 767 326 q 729 144 767 220 q 617 30 690 69 q 441 -10 544 -10 m 522 1205 l 660 1205 l 660 1067 l 522 1067 l 522 1205 m 243 1205 l 382 1205 l 382 1067 l 243 1067 l 243 1205 z "},"\u04dc":{"ha":1331,"x_min":14,"x_max":1317,"o":"m 829 541 l 1102 986 l 1276 986 l 899 420 l 829 541 m 829 434 l 950 505 l 1317 0 l 1125 0 l 829 434 m 380 505 l 502 434 l 205 0 l 14 0 l 380 505 m 55 986 l 229 986 l 501 541 l 431 420 l 55 986 m 380 555 l 951 555 l 951 424 l 380 424 l 380 555 m 596 986 l 734 986 l 734 0 l 596 0 l 596 986 m 735 1205 l 873 1205 l 873 1067 l 735 1067 l 735 1205 m 457 1205 l 595 1205 l 595 1067 l 457 1067 l 457 1205 z "},"\u04de":{"ha":819,"x_min":75,"x_max":734,"o":"m 411 -10 q 245 21 317 -10 q 130 111 174 52 q 75 252 86 170 l 75 252 l 216 252 l 216 252 q 281 157 229 191 q 418 123 334 123 q 545 164 500 123 q 589 283 589 206 l 589 283 q 550 404 589 361 q 438 447 510 447 l 294 447 l 294 578 l 438 578 q 538 616 503 578 q 573 722 573 653 l 573 728 q 533 829 573 795 q 417 863 492 863 q 298 831 347 863 q 231 741 250 799 l 231 741 l 91 741 l 91 741 q 150 879 107 821 q 259 966 193 937 q 410 996 326 996 q 577 967 509 996 q 682 881 646 938 q 718 740 718 823 l 718 734 q 684 599 718 656 q 585 515 649 542 q 695 435 656 498 q 734 276 734 373 l 734 275 q 696 121 734 185 q 586 23 659 57 q 411 -10 513 -10 m 492 1205 l 630 1205 l 630 1067 l 492 1067 l 492 1205 m 214 1205 l 352 1205 l 352 1067 l 214 1067 l 214 1205 z "},"\u04e0":{"ha":819,"x_min":75,"x_max":734,"o":"m 411 -10 q 240 19 311 -10 q 129 106 170 48 q 75 252 87 164 l 75 253 l 216 253 l 216 252 q 279 155 229 187 q 418 123 330 123 q 547 163 504 123 q 589 286 589 204 l 589 287 q 543 417 589 374 q 404 460 497 460 l 290 460 l 290 564 l 404 592 q 588 558 515 592 q 698 458 661 525 q 734 290 734 391 l 734 289 q 699 122 734 189 q 591 23 663 56 q 411 -10 519 -10 m 537 854 l 137 854 l 137 986 l 704 986 l 704 867 l 441 538 l 290 564 l 537 854 z "},"\u04e2":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 m 730 1202 l 730 1067 l 235 1067 l 235 1202 l 730 1202 z "},"\u04e4":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 m 553 1205 l 691 1205 l 691 1067 l 553 1067 l 553 1205 m 275 1205 l 413 1205 l 413 1067 l 275 1067 l 275 1205 z "},"\u04e6":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 518 1205 l 656 1205 l 656 1067 l 518 1067 l 518 1205 m 240 1205 l 378 1205 l 378 1067 l 240 1067 l 240 1205 z "},"\u04e8":{"ha":897,"x_min":102,"x_max":795,"o":"m 203 555 l 694 555 l 694 424 l 203 424 l 203 555 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u04ea":{"ha":897,"x_min":102,"x_max":795,"o":"m 203 555 l 694 555 l 694 424 l 203 424 l 203 555 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 518 1205 l 656 1205 l 656 1067 l 518 1067 l 518 1205 m 240 1205 l 378 1205 l 378 1067 l 240 1067 l 240 1205 z "},"\u04ec":{"ha":859,"x_min":75,"x_max":758,"o":"m 414 -10 q 259 26 330 -10 q 140 129 188 62 q 75 283 92 195 l 75 283 l 216 283 l 216 283 q 259 197 229 233 q 330 143 290 161 q 414 125 370 125 q 520 154 475 125 q 591 235 566 182 q 616 357 616 288 l 616 628 q 591 750 616 698 q 520 832 566 803 q 414 861 475 861 q 330 842 371 861 q 259 786 290 822 q 216 703 229 749 l 216 703 l 75 703 l 75 703 q 139 857 92 791 q 258 960 187 924 q 414 996 330 996 q 594 950 517 996 q 715 821 672 905 q 758 628 758 738 l 758 357 q 715 164 758 248 q 594 35 672 81 q 414 -10 517 -10 m 219 555 l 670 555 l 670 424 l 219 424 l 219 555 m 483 1205 l 621 1205 l 621 1067 l 483 1067 l 483 1205 m 205 1205 l 343 1205 l 343 1067 l 205 1067 l 205 1205 z "},"\u04ee":{"ha":848,"x_min":41,"x_max":827,"o":"m 41 986 l 198 986 l 488 280 l 398 170 l 41 986 m 539 204 q 479 85 513 132 q 400 14 446 38 q 292 -10 354 -10 l 178 -10 l 178 126 l 292 126 q 348 141 323 126 q 390 185 372 156 q 425 258 409 214 l 677 986 l 827 986 l 539 204 m 685 1202 l 685 1067 l 190 1067 l 190 1202 l 685 1202 z "},"\u04f0":{"ha":848,"x_min":41,"x_max":827,"o":"m 41 986 l 198 986 l 488 280 l 398 170 l 41 986 m 539 204 q 479 85 513 132 q 400 14 446 38 q 292 -10 354 -10 l 178 -10 l 178 126 l 292 126 q 348 141 323 126 q 390 185 372 156 q 425 258 409 214 l 677 986 l 827 986 l 539 204 m 507 1205 l 646 1205 l 646 1067 l 507 1067 l 507 1205 m 229 1205 l 368 1205 l 368 1067 l 229 1067 l 229 1205 z "},"\u04f2":{"ha":848,"x_min":41,"x_max":827,"o":"m 41 986 l 198 986 l 488 280 l 398 170 l 41 986 m 539 204 q 479 85 513 132 q 400 14 446 38 q 292 -10 354 -10 l 178 -10 l 178 126 l 292 126 q 348 141 323 126 q 390 185 372 156 q 425 258 409 214 l 677 986 l 827 986 l 539 204 m 489 1127 l 642 1300 l 739 1207 l 572 1047 l 489 1127 m 218 1127 l 371 1300 l 467 1207 l 301 1047 l 218 1127 z "},"\u04f4":{"ha":869,"x_min":95,"x_max":747,"o":"m 609 986 l 747 986 l 747 0 l 609 0 l 609 986 m 393 309 q 232 345 299 309 q 130 452 165 382 q 95 621 95 522 l 95 986 l 233 986 l 233 616 q 279 490 233 534 q 407 445 324 445 q 556 493 503 445 q 609 630 609 542 l 609 708 l 652 708 l 652 635 q 622 458 652 532 q 533 347 591 385 q 393 309 475 309 m 491 1205 l 629 1205 l 629 1067 l 491 1067 l 491 1205 m 213 1205 l 351 1205 l 351 1067 l 213 1067 l 213 1205 z "},"\u04f6":{"ha":688,"x_min":122,"x_max":675,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 m 392 132 l 392 -204 l 254 -204 l 254 132 l 392 132 m 322 91 l 322 0 l 283 0 l 283 91 l 322 91 z "},"\u04f8":{"ha":1160,"x_min":122,"x_max":1038,"o":"m 193 132 l 478 132 q 559 151 526 132 q 610 206 593 170 q 628 294 628 243 l 628 294 q 610 383 628 347 q 559 439 593 420 q 478 458 526 458 l 193 458 l 193 590 l 473 590 q 633 555 567 590 q 735 454 700 521 q 770 294 770 388 l 770 294 q 735 135 770 201 q 633 35 700 69 q 473 0 567 0 l 193 0 l 193 132 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 1038 0 l 900 0 l 900 986 l 1038 986 l 1038 0 m 651 1205 l 789 1205 l 789 1067 l 651 1067 l 651 1205 m 373 1205 l 511 1205 l 511 1067 l 373 1067 l 373 1205 z "},"\u04fa":{"ha":817,"x_min":102,"x_max":804,"o":"m 251 -62 l 328 -62 q 358 -48 347 -62 q 368 -9 368 -35 l 368 91 l 507 91 l 507 -7 q 464 -145 507 -96 q 342 -194 420 -194 l 251 -194 l 251 -62 m 102 555 l 606 555 l 606 424 l 102 424 l 102 555 m 251 986 l 389 986 l 389 0 l 251 0 l 251 986 m 319 986 l 804 986 l 804 854 l 319 854 l 319 986 z "},"\u04fc":{"ha":800,"x_min":14,"x_max":760,"o":"m 553 -155 q 596 -148 581 -155 q 620 -128 612 -142 q 627 -90 627 -114 q 611 -18 627 -60 q 563 86 595 25 q 475 243 531 147 l 363 433 l 344 465 l 22 986 l 177 986 l 415 585 l 437 548 l 579 323 q 683 148 644 220 q 740 17 721 75 q 758 -94 758 -41 q 738 -207 758 -165 q 674 -267 718 -248 q 553 -286 629 -286 l 553 -155 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 z "},"\u04fe":{"ha":788,"x_min":14,"x_max":774,"o":"m 87 559 l 701 559 l 701 441 l 87 441 l 87 559 m 363 433 l 342 467 l 22 986 l 177 986 l 415 585 l 437 548 l 774 0 l 619 0 l 363 433 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 z "},"\u0480":{"ha":900,"x_min":102,"x_max":825,"o":"m 499 200 q 284 245 373 200 q 148 375 195 290 q 102 581 102 460 l 102 594 q 147 812 102 722 q 278 949 192 902 q 486 996 364 996 q 645 962 575 996 q 762 862 715 928 q 825 703 808 796 l 825 703 l 684 703 l 684 703 q 642 789 670 753 q 575 843 614 824 q 486 861 535 861 q 307 791 370 861 q 243 594 243 722 l 243 581 q 310 399 243 464 q 499 335 377 335 l 499 200 m 429 335 l 567 335 l 567 0 l 429 0 l 429 335 z "},"\u048c":{"ha":922,"x_min":41,"x_max":838,"o":"m 41 871 l 511 871 l 511 746 l 41 746 l 41 871 m 234 132 l 546 132 q 627 151 593 132 q 678 206 661 170 q 696 294 696 243 l 696 294 q 678 383 696 347 q 627 439 661 420 q 546 458 593 458 l 234 458 l 234 590 l 541 590 q 701 555 635 590 q 803 454 768 521 q 838 294 838 388 l 838 294 q 803 135 838 201 q 701 35 768 69 q 541 0 635 0 l 234 0 l 234 132 m 163 986 l 301 986 l 301 0 l 163 0 l 163 986 z "},"\u048e":{"ha":865,"x_min":122,"x_max":800,"o":"m 402 614 l 498 680 l 760 292 l 663 227 l 402 614 m 193 514 l 509 514 q 587 535 553 514 q 640 595 621 556 q 659 684 659 633 l 659 684 q 640 773 659 734 q 587 833 621 812 q 509 854 553 854 l 193 854 l 193 986 l 504 986 q 659 948 592 986 q 763 842 726 911 q 800 684 800 774 l 800 684 q 763 525 800 593 q 659 420 726 457 q 504 382 592 382 l 193 382 l 193 514 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0430":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 z "},"\u0431":{"ha":777,"x_min":109,"x_max":689,"o":"m 399 -10 q 242 26 307 -10 q 143 131 177 62 q 109 296 109 199 l 109 384 l 206 527 q 278 646 222 606 q 426 687 333 687 q 568 651 509 687 q 658 548 627 616 q 689 384 689 479 l 689 294 q 655 130 689 198 q 555 26 621 62 q 399 -10 490 -10 m 398 121 q 511 166 471 121 q 551 294 551 212 l 551 384 q 511 511 551 466 q 398 555 471 555 q 287 511 326 555 q 247 384 247 466 l 247 294 q 287 166 247 212 q 398 121 326 121 m 109 636 q 142 795 109 732 q 243 890 176 859 q 411 923 310 922 q 475 931 450 924 q 514 952 501 938 q 527 986 527 966 l 655 986 q 629 885 655 926 q 552 825 604 845 q 422 805 500 805 q 321 788 361 805 q 260 736 281 770 q 240 650 240 702 l 240 376 l 109 376 l 109 636 z "},"\u0432":{"ha":751,"x_min":109,"x_max":676,"o":"m 190 125 l 450 125 q 514 148 492 125 q 536 213 536 171 l 536 215 q 514 283 536 259 q 450 308 492 308 l 190 308 l 190 433 l 450 433 q 505 450 486 433 q 524 500 524 468 l 524 500 q 505 558 524 538 q 452 579 486 579 l 190 579 l 190 704 l 456 704 q 609 658 555 704 q 663 529 663 612 l 663 529 q 623 423 663 465 q 511 370 583 381 q 633 306 589 355 q 676 182 676 256 l 676 180 q 618 47 676 94 q 454 0 560 0 l 190 0 l 190 125 m 109 704 l 246 704 l 246 0 l 109 0 l 109 704 z "},"\u0433":{"ha":593,"x_min":109,"x_max":559,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 704 l 559 704 l 559 572 l 176 572 l 176 704 z "},"\u0453":{"ha":593,"x_min":109,"x_max":559,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 704 l 559 704 l 559 572 l 176 572 l 176 704 m 266 909 l 460 1150 l 559 1067 l 353 840 l 266 909 z "},"\u0491":{"ha":593,"x_min":109,"x_max":559,"o":"m 421 826 l 559 826 l 559 604 l 421 604 l 421 826 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 704 l 559 704 l 559 572 l 176 572 l 176 704 z "},"\u0434":{"ha":875,"x_min":61,"x_max":821,"o":"m 86 125 l 102 125 q 166 148 144 125 q 196 218 188 171 q 203 348 203 265 l 203 704 l 342 704 l 342 302 q 292 117 342 180 q 150 54 242 54 l 134 54 l 86 125 m 61 125 l 199 125 l 199 -177 l 61 -177 l 61 125 m 61 125 l 739 125 l 739 0 l 61 0 l 61 125 m 682 125 l 821 125 l 821 -177 l 682 -177 l 682 125 m 557 704 l 695 704 l 695 0 l 557 0 l 557 704 m 290 704 l 603 704 l 603 579 l 290 579 l 290 704 z "},"\u0435":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 z "},"\u0450":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 153 1067 l 253 1150 l 447 909 l 360 840 l 153 1067 z "},"\u0451":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 450 986 l 588 986 l 588 848 l 450 848 l 450 986 m 165 986 l 303 986 l 303 848 l 165 848 l 165 986 z "},"\u0436":{"ha":993,"x_min":0,"x_max":993,"o":"m 627 304 l 728 375 l 993 0 l 814 0 l 627 304 m 265 375 l 366 304 l 178 0 l 0 0 l 265 375 m 41 704 l 201 704 l 372 411 l 316 290 l 41 704 m 427 704 l 566 704 l 566 0 l 427 0 l 427 704 m 264 422 l 728 422 l 728 297 l 264 297 l 264 422 m 621 411 l 791 704 l 951 704 l 677 290 l 621 411 z "},"\u0437":{"ha":661,"x_min":61,"x_max":589,"o":"m 329 -10 q 199 14 255 -10 q 109 86 143 39 q 65 199 75 133 l 65 199 l 199 199 l 199 199 q 240 138 207 159 q 327 116 274 116 q 418 142 386 116 q 451 215 451 168 l 451 216 q 428 273 451 252 q 361 293 404 293 l 250 293 l 250 411 l 361 411 q 410 432 393 411 q 428 491 428 453 l 428 492 q 399 563 428 538 q 319 588 371 588 q 239 566 271 588 q 195 505 206 545 l 195 505 l 61 505 l 61 505 q 150 660 81 605 q 326 714 219 714 q 503 665 440 714 q 566 525 566 615 l 566 524 q 538 425 566 467 q 460 363 511 382 q 556 314 522 354 q 589 208 589 273 l 589 208 q 521 47 589 104 q 329 -10 453 -10 z "},"\u0438":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 z "},"\u0439":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 z "},"\u045d":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 m 175 1067 l 275 1150 l 469 909 l 382 840 l 175 1067 z "},"\u048b":{"ha":823,"x_min":109,"x_max":810,"o":"m 810 132 l 755 -177 l 617 -177 l 649 3 l 671 132 l 810 132 m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 m 392 838 q 240 898 291 838 q 190 1080 190 959 l 190 1080 l 301 1080 l 301 1080 q 324 979 301 1013 q 392 945 347 945 l 404 945 q 472 979 450 945 q 495 1080 495 1013 l 495 1080 l 606 1080 l 606 1080 q 556 898 606 959 q 404 838 505 838 l 392 838 z "},"\u043a":{"ha":715,"x_min":109,"x_max":715,"o":"m 315 404 l 507 704 l 673 704 l 378 283 l 315 404 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 321 297 l 429 368 l 715 0 l 530 0 l 321 297 m 176 418 l 430 418 l 430 287 l 176 287 l 176 418 z "},"\u045c":{"ha":715,"x_min":109,"x_max":715,"o":"m 315 404 l 507 704 l 673 704 l 378 283 l 315 404 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 321 297 l 429 368 l 715 0 l 530 0 l 321 297 m 176 418 l 430 418 l 430 287 l 176 287 l 176 418 m 282 909 l 476 1150 l 576 1067 l 369 840 l 282 909 z "},"\u043b":{"ha":781,"x_min":61,"x_max":672,"o":"m 61 125 q 145 175 115 125 q 176 315 176 224 l 176 704 l 314 704 l 314 296 q 286 132 314 200 q 204 29 258 64 q 75 -6 151 -6 l 61 -6 l 61 125 m 534 704 l 672 704 l 672 0 l 534 0 l 534 704 m 262 704 l 607 704 l 607 572 l 262 572 l 262 704 z "},"\u043c":{"ha":879,"x_min":109,"x_max":770,"o":"m 648 704 l 770 704 l 770 0 l 646 0 l 646 497 l 652 454 l 481 137 l 398 137 l 227 454 l 233 497 l 233 0 l 109 0 l 109 704 l 231 704 l 439 315 l 648 704 z "},"\u043d":{"ha":800,"x_min":109,"x_max":692,"o":"m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 627 408 l 627 283 l 195 283 l 195 408 z "},"\u043e":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u043f":{"ha":800,"x_min":109,"x_max":692,"o":"m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 704 l 627 704 l 627 572 l 195 572 l 195 704 z "},"\u0440":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 704 l 247 704 l 247 -286 l 109 -286 l 109 704 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"\u0441":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 z "},"\u0442":{"ha":696,"x_min":75,"x_max":621,"o":"m 279 630 l 417 630 l 417 0 l 279 0 l 279 630 m 75 704 l 621 704 l 621 579 l 75 579 l 75 704 z "},"\u0443":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 z "},"\u045e":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 z "},"\u0444":{"ha":995,"x_min":88,"x_max":907,"o":"m 701 0 q 570 70 616 0 q 523 266 523 139 l 523 441 q 570 635 523 566 q 701 704 616 704 q 853 635 800 704 q 907 441 907 567 l 907 264 q 853 69 907 138 q 701 0 800 0 m 294 0 q 142 69 195 0 q 88 264 88 138 l 88 441 q 142 635 88 567 q 294 704 195 704 q 425 635 378 704 q 472 441 472 566 l 472 266 q 425 70 472 139 q 294 0 378 0 m 321 132 q 400 166 372 132 q 429 264 429 201 l 429 441 q 400 538 429 504 q 321 572 372 572 q 251 538 276 572 q 227 441 227 504 l 227 264 q 251 166 227 201 q 321 132 276 132 m 428 908 l 566 908 l 566 -204 l 428 -204 l 428 908 m 673 132 q 744 166 719 132 q 768 264 768 201 l 768 441 q 744 538 768 504 q 673 572 719 572 q 594 538 623 572 q 566 441 566 504 l 566 264 q 594 166 566 201 q 673 132 623 132 z "},"\u0445":{"ha":718,"x_min":41,"x_max":674,"o":"m 311 320 l 52 704 l 205 704 l 408 389 l 674 0 l 521 0 l 311 320 m 307 389 l 373 261 l 194 0 l 41 0 l 307 389 m 355 454 l 509 704 l 663 704 l 414 324 l 355 454 z "},"\u0447":{"ha":781,"x_min":102,"x_max":673,"o":"m 534 704 l 673 704 l 673 0 l 534 0 l 534 704 m 359 220 q 220 253 278 220 q 132 349 162 286 q 102 499 102 411 l 102 704 l 240 704 l 240 494 q 273 393 240 429 q 366 357 306 357 q 490 396 446 357 q 534 508 534 435 l 534 579 l 578 579 l 578 513 q 521 297 578 373 q 359 220 464 220 z "},"\u0446":{"ha":852,"x_min":109,"x_max":798,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 195 125 l 606 125 l 606 0 l 195 0 l 195 125 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 659 125 l 798 125 l 798 -177 l 659 -177 l 659 125 z "},"\u0448":{"ha":1069,"x_min":109,"x_max":960,"o":"m 195 132 l 895 132 l 895 0 l 195 0 l 195 132 m 822 704 l 960 704 l 960 0 l 822 0 l 822 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 465 704 l 604 704 l 604 0 l 465 0 l 465 704 z "},"\u0449":{"ha":1141,"x_min":109,"x_max":1086,"o":"m 195 125 l 895 125 l 895 0 l 195 0 l 195 125 m 465 704 l 604 704 l 604 0 l 465 0 l 465 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 948 125 l 1086 125 l 1086 -177 l 948 -177 l 948 125 m 822 704 l 960 704 l 960 0 l 822 0 l 822 704 z "},"\u045f":{"ha":780,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 327 132 l 465 132 l 465 -177 l 327 -177 l 327 132 m 195 132 l 606 132 l 606 0 l 195 0 l 195 132 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\u044c":{"ha":735,"x_min":109,"x_max":664,"o":"m 176 132 l 424 132 q 491 158 466 132 q 517 228 517 184 l 517 228 q 505 279 517 257 q 473 313 494 300 q 424 325 452 325 l 176 325 l 176 456 l 418 456 q 547 428 491 456 q 633 348 602 399 q 664 228 664 296 l 664 228 q 633 109 664 160 q 547 28 603 57 q 418 0 492 0 l 176 0 l 176 132 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\u044a":{"ha":851,"x_min":54,"x_max":780,"o":"m 54 704 l 268 704 l 268 572 l 54 572 l 54 704 m 305 132 l 540 132 q 607 158 582 132 q 633 228 633 184 l 633 228 q 621 279 633 257 q 589 313 610 300 q 540 325 568 325 l 305 325 l 305 456 l 534 456 q 663 428 607 456 q 749 348 718 399 q 780 228 780 296 l 780 228 q 749 109 780 160 q 663 28 719 57 q 534 0 608 0 l 305 0 l 305 132 m 238 704 l 376 704 l 376 0 l 238 0 l 238 704 z "},"\u044b":{"ha":972,"x_min":109,"x_max":871,"o":"m 732 704 l 871 704 l 871 0 l 732 0 l 732 704 m 176 132 l 390 132 q 457 158 432 132 q 483 228 483 184 l 483 228 q 471 279 483 257 q 439 313 460 300 q 390 325 418 325 l 176 325 l 176 456 l 385 456 q 513 428 457 456 q 599 348 568 399 q 630 228 630 296 l 630 228 q 600 109 630 160 q 513 28 569 57 q 385 0 458 0 l 176 0 l 176 132 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\u0459":{"ha":1120,"x_min":61,"x_max":1048,"o":"m 594 132 l 808 132 q 876 158 850 132 q 901 228 901 184 l 901 228 q 890 279 901 257 q 857 313 878 300 q 808 325 836 325 l 594 325 l 594 456 l 803 456 q 931 428 876 456 q 1018 348 987 399 q 1048 228 1048 296 l 1048 228 q 1018 109 1048 160 q 932 28 987 57 q 803 0 876 0 l 594 0 l 594 132 m 61 125 q 145 175 115 125 q 176 315 176 224 l 176 704 l 314 704 l 314 296 q 286 132 314 200 q 204 29 258 64 q 75 -6 151 -6 l 61 -6 l 61 125 m 534 704 l 672 704 l 672 0 l 534 0 l 534 704 m 262 704 l 607 704 l 607 572 l 262 572 l 262 704 z "},"\u045a":{"ha":1147,"x_min":109,"x_max":1076,"o":"m 594 132 l 836 132 q 903 158 878 132 q 928 228 928 184 l 928 228 q 917 279 928 257 q 884 313 905 300 q 836 325 863 325 l 594 325 l 594 456 l 830 456 q 958 428 903 456 q 1045 348 1014 399 q 1076 228 1076 296 l 1076 228 q 1045 109 1076 160 q 959 28 1015 57 q 830 0 903 0 l 594 0 l 594 132 m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 627 408 l 627 283 l 195 283 l 195 408 z "},"\u0455":{"ha":720,"x_min":51,"x_max":652,"o":"m 357 -10 q 240 2 295 -10 q 138 39 186 14 q 51 100 91 63 l 51 100 l 133 201 l 133 201 q 246 136 190 157 q 357 114 302 114 q 480 139 439 114 q 522 216 522 165 q 499 267 522 250 q 444 289 477 283 q 350 300 410 295 q 338 300 345 300 q 327 301 332 300 q 321 301 324 301 q 316 302 319 302 q 200 322 248 307 q 121 376 153 336 q 90 491 90 416 q 120 615 90 566 q 211 689 151 665 q 362 714 271 714 q 467 704 417 714 q 562 674 517 694 q 650 623 608 654 l 650 623 l 566 522 l 566 522 q 462 573 513 556 q 362 590 411 590 q 256 566 292 590 q 221 494 221 542 q 241 451 221 465 q 292 432 261 437 q 378 424 322 427 q 387 423 382 423 q 396 422 391 423 q 400 422 398 422 q 404 422 402 422 q 530 402 478 417 q 617 343 582 387 q 652 216 652 299 q 620 90 652 140 q 522 15 587 40 q 357 -10 456 -10 z "},"\u0454":{"ha":692,"x_min":88,"x_max":648,"o":"m 189 411 l 532 411 l 532 293 l 189 293 l 189 411 m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 z "},"\u044d":{"ha":692,"x_min":44,"x_max":604,"o":"m 160 293 l 160 411 l 503 411 l 503 293 l 160 293 m 299 -10 q 196 3 245 -10 q 109 40 148 16 q 44 100 71 65 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 109 663 70 637 q 196 701 147 688 q 299 714 244 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 z "},"\u0456":{"ha":349,"x_min":109,"x_max":247,"o":"m 109 986 l 247 986 l 247 848 l 109 848 l 109 986 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 z "},"\u0457":{"ha":349,"x_min":-34,"x_max":389,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 251 986 l 389 986 l 389 848 l 251 848 l 251 986 m -34 986 l 104 986 l 104 848 l -34 848 l -34 986 z "},"\u0458":{"ha":372,"x_min":14,"x_max":271,"o":"m 14 -155 l 91 -155 q 120 -141 110 -155 q 131 -101 131 -127 l 131 704 l 269 704 l 269 -100 q 226 -237 269 -189 q 104 -286 183 -286 l 14 -286 l 14 -155 m 130 986 l 271 986 l 271 848 l 130 848 l 130 986 z "},"\u045b":{"ha":789,"x_min":-14,"x_max":688,"o":"m -14 844 l 545 844 l 545 726 l -14 726 l -14 844 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 549 345 q 511 460 549 420 q 402 501 472 501 q 297 466 334 501 q 260 366 260 431 l 246 502 q 331 598 279 564 q 448 633 384 633 q 625 558 562 633 q 688 346 688 483 l 688 0 l 549 0 l 549 345 z "},"\u044e":{"ha":1078,"x_min":109,"x_max":990,"o":"m 189 411 l 491 411 l 491 293 l 189 293 l 189 411 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 700 -10 q 543 26 608 -10 q 444 131 478 62 q 410 296 410 199 l 410 411 q 444 575 410 507 q 543 679 478 643 q 700 714 608 714 q 857 679 791 714 q 956 575 922 643 q 990 411 990 507 l 990 294 q 956 130 990 198 q 857 26 922 62 q 700 -10 791 -10 m 700 121 q 812 167 772 121 q 852 294 852 212 l 852 411 q 812 538 852 493 q 700 583 772 583 q 588 538 627 583 q 548 411 548 493 l 548 294 q 588 167 548 212 q 700 121 627 121 z "},"\u044f":{"ha":746,"x_min":61,"x_max":637,"o":"m 321 248 q 193 276 248 248 q 106 356 137 304 q 75 476 75 408 l 75 476 q 106 595 75 544 q 192 675 136 647 q 321 704 248 704 l 570 704 l 570 572 l 315 572 q 248 546 273 572 q 222 476 222 519 l 222 476 q 234 425 222 447 q 267 391 245 404 q 315 379 288 379 l 570 379 l 570 248 l 321 248 m 499 0 l 499 704 l 637 704 l 637 0 l 499 0 m 61 0 l 259 309 l 397 278 l 225 0 l 61 0 z "},"\u0452":{"ha":789,"x_min":-14,"x_max":688,"o":"m 432 -155 l 509 -155 q 539 -141 528 -155 q 549 -101 549 -127 l 549 347 q 511 463 549 422 q 402 503 472 503 q 297 468 334 503 q 260 368 260 433 l 246 504 q 331 601 279 566 q 448 635 384 635 q 625 560 562 635 q 688 348 688 485 l 688 -100 q 645 -237 688 -189 q 523 -286 602 -286 l 432 -286 l 432 -155 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m -14 844 l 545 844 l 545 726 l -14 726 l -14 844 z "},"\u0461":{"ha":1027,"x_min":27,"x_max":972,"o":"m 414 704 l 558 704 l 710 181 q 777 328 749 245 q 819 502 804 411 q 835 682 833 592 l 835 704 l 972 704 q 941 453 972 589 q 857 197 910 318 q 742 0 804 75 l 637 0 l 414 704 m 27 704 l 172 704 l 351 174 l 516 481 l 568 361 l 376 0 l 271 0 l 27 704 z "},"\u0463":{"ha":752,"x_min":-14,"x_max":681,"o":"m -14 772 l 505 772 l 505 654 l -14 654 l -14 772 m 186 132 l 441 132 q 508 158 483 132 q 534 228 534 184 l 534 228 q 522 279 534 257 q 490 313 511 300 q 441 325 469 325 l 186 325 l 186 456 l 435 456 q 564 428 508 456 q 650 348 619 399 q 681 228 681 296 l 681 228 q 650 109 681 160 q 564 28 620 57 q 435 0 509 0 l 186 0 l 186 132 m 119 909 l 257 909 l 257 0 l 119 0 l 119 909 z "},"\u0465":{"ha":1013,"x_min":109,"x_max":969,"o":"m 189 411 l 532 411 l 532 293 l 189 293 l 189 411 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 511 411 l 853 411 l 853 293 l 511 293 l 511 411 m 714 -10 q 550 26 618 -10 q 446 130 481 62 q 410 296 410 199 l 410 412 q 446 575 410 507 q 550 679 481 643 q 714 714 618 714 q 863 685 797 714 q 969 602 930 655 l 969 602 l 869 512 l 869 512 q 800 564 840 546 q 716 583 760 583 q 592 538 636 583 q 548 412 548 493 l 548 296 q 592 167 548 212 q 716 121 635 121 q 800 141 760 121 q 869 197 840 161 l 869 197 l 969 100 l 969 100 q 863 19 930 47 q 714 -10 796 -10 z "},"\u0467":{"ha":736,"x_min":27,"x_max":709,"o":"m 309 708 l 427 708 l 709 0 l 567 0 l 368 538 l 170 0 l 27 0 l 309 708 m 306 239 l 431 239 l 431 0 l 306 0 l 306 239 m 181 273 l 564 273 l 564 161 l 181 161 l 181 273 z "},"\u0469":{"ha":1044,"x_min":109,"x_max":1017,"o":"m 201 273 l 585 273 l 585 161 l 201 161 l 201 273 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 617 708 l 735 708 l 1017 0 l 875 0 l 676 538 l 477 0 l 335 0 l 617 708 m 614 239 l 739 239 l 739 0 l 614 0 l 614 239 m 489 273 l 872 273 l 872 161 l 489 161 l 489 273 z "},"\u046b":{"ha":817,"x_min":0,"x_max":817,"o":"m 370 301 l 649 704 l 809 704 l 508 298 l 370 301 m 55 182 q 154 349 89 294 q 319 405 219 405 l 306 281 q 236 252 264 281 q 193 164 208 222 l 151 0 l 0 0 l 55 182 m 339 301 l 477 301 l 477 0 l 339 0 l 339 301 m 306 405 l 326 405 l 411 313 l 477 405 l 497 405 l 517 281 l 292 281 l 306 405 m 7 704 l 168 704 l 443 308 l 296 321 l 7 704 m 623 164 q 578 252 608 222 q 504 281 547 281 l 490 405 q 660 349 591 405 q 762 182 728 294 l 817 0 l 665 0 l 623 164 m 130 704 l 694 704 l 694 572 l 130 572 l 130 704 z "},"\u046d":{"ha":1131,"x_min":109,"x_max":1131,"o":"m 204 405 l 578 405 l 578 281 l 204 281 l 204 405 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 684 301 l 964 704 l 1124 704 l 823 298 l 684 301 m 370 182 q 469 349 404 294 q 634 405 534 405 l 621 281 q 551 252 578 281 q 508 164 523 222 l 466 0 l 315 0 l 370 182 m 654 301 l 792 301 l 792 0 l 654 0 l 654 301 m 621 405 l 641 405 l 726 313 l 791 405 l 812 405 l 832 281 l 607 281 l 621 405 m 322 704 l 482 704 l 758 308 l 610 321 l 322 704 m 938 164 q 892 252 923 222 q 819 281 862 281 l 805 405 q 974 349 906 405 q 1076 182 1042 294 l 1131 0 l 980 0 l 938 164 m 444 704 l 1008 704 l 1008 572 l 444 572 l 444 704 z "},"\u046f":{"ha":629,"x_min":61,"x_max":557,"o":"m 283 -286 q 117 -236 172 -286 q 61 -85 61 -186 q 117 71 61 18 q 283 123 172 123 l 309 123 q 385 147 358 123 q 412 215 412 171 l 412 216 q 390 281 412 258 q 329 304 368 304 l 273 304 l 273 446 l 329 446 q 378 464 360 446 q 396 511 396 481 l 396 511 q 373 563 396 545 q 308 581 350 581 q 240 562 268 581 q 203 506 213 542 l 203 505 l 63 505 l 63 506 q 109 618 75 572 q 192 690 142 665 q 308 714 243 714 q 480 666 419 714 q 541 530 541 618 l 541 530 q 528 465 541 496 q 491 409 515 433 q 435 377 467 386 q 500 347 472 374 q 543 281 528 321 q 557 201 557 241 l 557 201 q 491 45 557 100 q 302 -10 424 -10 l 283 -10 q 220 -29 241 -10 q 199 -85 199 -48 q 220 -137 199 -119 q 283 -154 241 -154 l 498 -154 l 498 -286 l 283 -286 m 86 1039 l 170 1117 l 306 988 l 441 1117 l 526 1039 l 306 833 l 86 1039 z "},"\u0471":{"ha":985,"x_min":109,"x_max":883,"o":"m 495 -10 q 286 36 373 -10 q 154 171 199 83 q 109 384 109 259 l 109 704 l 247 704 l 247 379 q 276 235 247 295 q 361 144 305 175 q 495 113 416 113 q 630 144 574 113 q 715 235 686 175 q 745 379 745 295 l 745 704 l 883 704 l 883 384 q 837 171 883 259 q 705 36 791 83 q 495 -10 618 -10 m 427 908 l 565 908 l 565 -204 l 427 -204 l 427 908 z "},"\u0473":{"ha":757,"x_min":88,"x_max":669,"o":"m 149 408 l 640 408 l 640 296 l 149 296 l 149 408 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u0475":{"ha":706,"x_min":41,"x_max":665,"o":"m 41 704 l 185 704 l 351 201 l 437 528 q 478 631 454 589 q 534 693 503 673 q 602 714 566 714 l 665 714 l 665 583 l 635 583 q 599 569 614 583 q 575 529 584 555 l 403 0 l 298 0 l 41 704 z "},"\u0477":{"ha":706,"x_min":39,"x_max":665,"o":"m 39 1061 l 152 1150 l 326 909 l 225 833 l 39 1061 m 317 1061 l 430 1150 l 604 909 l 503 833 l 317 1061 m 41 704 l 185 704 l 351 201 l 437 528 q 478 631 454 589 q 534 693 503 673 q 602 714 566 714 l 665 714 l 665 583 l 635 583 q 599 569 614 583 q 575 529 584 555 l 403 0 l 298 0 l 41 704 z "},"\u0479":{"ha":1387,"x_min":88,"x_max":1373,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 1373 704 l 1074 -165 q 1031 -241 1057 -213 q 966 -281 1004 -269 q 871 -294 927 -294 l 843 -294 l 843 -161 l 871 -161 q 932 -145 909 -161 q 972 -92 955 -130 l 1232 704 l 1373 704 m 750 704 l 891 704 l 1107 92 l 1031 -58 l 750 704 z "},"\u0493":{"ha":654,"x_min":41,"x_max":621,"o":"m 41 369 l 491 369 l 491 251 l 41 251 l 41 369 m 170 704 l 308 704 l 308 0 l 170 0 l 170 704 m 237 704 l 621 704 l 621 572 l 237 572 l 237 704 z "},"\u0495":{"ha":770,"x_min":109,"x_max":709,"o":"m 439 434 q 585 391 524 434 q 677 268 646 349 q 709 73 709 186 l 709 66 q 673 -133 709 -55 q 564 -249 637 -211 q 379 -286 490 -286 l 371 -286 l 371 -155 l 379 -155 q 524 -100 476 -155 q 571 71 571 -45 l 571 71 q 526 241 571 180 q 398 302 480 302 q 287 263 326 302 q 247 153 247 224 l 247 102 l 203 115 l 203 189 q 265 370 203 305 q 439 434 327 434 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 704 l 559 704 l 559 572 l 176 572 l 176 704 z "},"\u0497":{"ha":1047,"x_min":0,"x_max":1042,"o":"m 627 304 l 728 375 l 993 0 l 814 0 l 627 304 m 265 375 l 366 304 l 178 0 l 0 0 l 265 375 m 41 704 l 201 704 l 372 411 l 316 290 l 41 704 m 427 704 l 566 704 l 566 0 l 427 0 l 427 704 m 264 422 l 728 422 l 728 297 l 264 297 l 264 422 m 621 411 l 791 704 l 951 704 l 677 290 l 621 411 m 1042 125 l 1042 -177 l 904 -177 l 904 125 l 1042 125 z "},"\u0499":{"ha":636,"x_min":61,"x_max":589,"o":"m 386 91 l 386 -177 l 248 -177 l 248 91 l 386 91 m 329 -10 q 149 44 218 -10 q 65 199 79 99 l 65 199 l 199 199 l 199 199 q 240 138 207 159 q 327 116 274 116 q 418 142 386 116 q 451 215 451 168 l 451 216 q 428 273 451 252 q 361 293 404 293 l 250 293 l 250 411 l 361 411 q 410 432 393 411 q 428 491 428 453 l 428 492 q 399 563 428 538 q 319 588 371 588 q 239 566 271 588 q 195 505 206 545 l 195 505 l 61 505 l 61 505 q 150 660 81 605 q 326 714 219 714 q 503 665 440 714 q 566 525 566 615 l 566 524 q 538 425 566 467 q 460 363 511 382 q 556 314 522 354 q 589 208 589 273 l 589 208 q 521 47 589 104 q 329 -10 453 -10 z "},"\u049b":{"ha":783,"x_min":109,"x_max":757,"o":"m 315 404 l 507 704 l 673 704 l 378 283 l 315 404 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 321 297 l 429 368 l 715 0 l 530 0 l 321 297 m 176 418 l 430 418 l 430 287 l 176 287 l 176 418 m 757 125 l 757 -177 l 618 -177 l 618 125 l 757 125 z "},"\u049d":{"ha":715,"x_min":109,"x_max":715,"o":"m 355 304 l 470 375 l 715 0 l 530 0 l 355 304 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 278 586 l 369 586 l 369 115 l 278 115 l 278 586 m 176 418 l 464 418 l 464 287 l 176 287 l 176 418 m 356 411 l 507 704 l 673 704 l 453 290 l 356 411 z "},"\u049f":{"ha":742,"x_min":-14,"x_max":742,"o":"m 136 986 l 274 986 l 274 610 l 136 610 l 136 986 m -14 898 l 423 898 l 423 780 l -14 780 l -14 898 m 342 404 l 534 704 l 701 704 l 406 283 l 342 404 m 136 704 l 274 704 l 274 0 l 136 0 l 136 704 m 349 297 l 456 368 l 742 0 l 557 0 l 349 297 m 203 418 l 457 418 l 457 287 l 203 287 l 203 418 z "},"\u04a1":{"ha":884,"x_min":54,"x_max":884,"o":"m 54 704 l 309 704 l 309 572 l 54 572 l 54 704 m 485 404 l 676 704 l 843 704 l 548 283 l 485 404 m 278 704 l 416 704 l 416 0 l 278 0 l 278 704 m 491 297 l 599 368 l 884 0 l 699 0 l 491 297 m 345 418 l 600 418 l 600 287 l 345 287 l 345 418 z "},"\u04a3":{"ha":800,"x_min":109,"x_max":817,"o":"m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 627 408 l 627 283 l 195 283 l 195 408 m 817 125 l 817 -177 l 679 -177 l 679 125 l 817 125 z "},"\u04a5":{"ha":998,"x_min":109,"x_max":964,"o":"m 621 704 l 964 704 l 964 572 l 621 572 l 621 704 m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 627 408 l 627 283 l 195 283 l 195 408 z "},"\u04a7":{"ha":1208,"x_min":109,"x_max":1147,"o":"m 816 -155 l 824 -155 q 964 -100 918 -155 q 1009 71 1009 -45 l 1009 71 q 965 241 1009 180 q 840 302 920 302 q 730 263 769 302 q 692 153 692 224 l 692 102 l 648 115 l 648 189 q 709 370 648 305 q 880 434 770 434 q 1025 391 965 434 q 1116 268 1085 349 q 1147 73 1147 186 l 1147 66 q 1112 -133 1147 -55 q 1005 -249 1076 -211 q 824 -286 933 -286 l 816 -286 l 816 -155 m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 704 l 627 704 l 627 572 l 195 572 l 195 704 z "},"\u0525":{"ha":800,"x_min":109,"x_max":817,"o":"m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 704 l 627 704 l 627 572 l 195 572 l 195 704 m 817 125 l 817 -177 l 679 -177 l 679 125 l 817 125 z "},"\u04a9":{"ha":964,"x_min":102,"x_max":882,"o":"m 833 -10 q 588 38 692 -10 q 429 179 484 87 q 373 401 373 272 l 373 477 q 401 605 373 551 q 483 686 430 658 q 609 714 536 714 q 739 686 684 714 q 823 605 793 658 q 852 477 852 551 l 852 401 q 799 191 852 279 q 645 54 746 103 q 401 0 543 5 l 401 132 q 570 163 500 132 q 677 256 640 195 q 713 401 713 317 l 713 477 q 685 555 713 527 q 608 583 657 583 q 537 555 563 583 q 511 477 511 527 l 511 401 q 547 250 511 313 q 652 154 583 187 q 819 121 722 121 l 882 121 l 882 -10 l 833 -10 m 401 0 q 239 32 307 0 q 137 125 172 64 q 102 272 102 186 l 102 452 q 134 594 102 535 q 227 683 165 652 q 374 714 288 714 l 374 578 q 278 546 312 578 q 243 457 243 515 l 243 267 q 285 167 243 203 q 401 132 326 132 l 401 0 z "},"\u04ab":{"ha":692,"x_min":88,"x_max":648,"o":"m 465 91 l 465 -177 l 326 -177 l 326 91 l 465 91 m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 542 685 475 714 q 648 602 608 655 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 542 19 608 47 q 393 -10 475 -10 z "},"\u04ad":{"ha":696,"x_min":75,"x_max":621,"o":"m 279 630 l 417 630 l 417 0 l 279 0 l 279 630 m 75 704 l 621 704 l 621 579 l 75 579 l 75 704 m 543 125 l 543 -177 l 404 -177 l 404 125 l 543 125 z "},"\u04af":{"ha":694,"x_min":34,"x_max":667,"o":"m 281 133 l 420 133 l 420 -286 l 281 -286 l 281 133 m 523 704 l 667 704 l 403 0 l 298 0 l 34 704 l 178 704 l 351 201 l 523 704 z "},"\u04b1":{"ha":694,"x_min":34,"x_max":667,"o":"m 117 0 l 581 0 l 581 -125 l 117 -125 l 117 0 m 281 133 l 420 133 l 420 -286 l 281 -286 l 281 133 m 523 704 l 667 704 l 403 0 l 298 0 l 34 704 l 178 704 l 351 201 l 523 704 z "},"\u04b3":{"ha":718,"x_min":41,"x_max":709,"o":"m 311 320 l 52 704 l 205 704 l 408 389 l 674 0 l 521 0 l 311 320 m 307 389 l 373 261 l 194 0 l 41 0 l 307 389 m 355 454 l 509 704 l 663 704 l 414 324 l 355 454 m 709 125 l 709 -177 l 571 -177 l 571 125 l 709 125 z "},"\u04b5":{"ha":924,"x_min":75,"x_max":870,"o":"m 606 704 l 745 704 l 745 0 l 606 0 l 606 704 m 243 125 l 680 125 l 680 0 l 243 0 l 243 125 m 219 630 l 357 630 l 357 0 l 219 0 l 219 630 m 732 125 l 870 125 l 870 -177 l 732 -177 l 732 125 m 75 704 l 505 704 l 505 579 l 75 579 l 75 704 z "},"\u04b7":{"ha":781,"x_min":102,"x_max":798,"o":"m 534 704 l 673 704 l 673 0 l 534 0 l 534 704 m 359 220 q 220 253 278 220 q 132 349 162 286 q 102 499 102 411 l 102 704 l 240 704 l 240 494 q 273 393 240 429 q 366 357 306 357 q 490 396 446 357 q 534 508 534 435 l 534 579 l 578 579 l 578 513 q 521 297 578 373 q 359 220 464 220 m 798 125 l 798 -177 l 660 -177 l 660 125 l 798 125 z "},"\u04b9":{"ha":781,"x_min":102,"x_max":673,"o":"m 332 545 l 423 545 l 423 75 l 332 75 l 332 545 m 534 704 l 673 704 l 673 0 l 534 0 l 534 704 m 359 220 q 220 253 278 220 q 132 349 162 286 q 102 499 102 411 l 102 704 l 240 704 l 240 494 q 273 393 240 429 q 366 357 306 357 q 490 396 446 357 q 534 508 534 435 l 534 579 l 578 579 l 578 513 q 521 297 578 373 q 359 220 464 220 z "},"\u04bb":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 448 247 512 l 233 583 q 318 680 265 646 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 0 l 536 0 l 536 427 z "},"\u04bd":{"ha":884,"x_min":34,"x_max":803,"o":"m 200 297 q 75 333 117 297 q 34 441 34 369 l 34 492 l 161 492 l 161 455 q 173 419 161 431 q 209 408 185 408 l 387 408 l 387 297 l 200 297 m 536 -10 q 370 26 439 -10 q 264 134 300 63 q 228 305 228 205 l 228 385 q 263 563 228 489 q 364 675 298 637 q 524 714 431 714 q 675 670 612 714 q 770 543 737 626 q 803 342 803 459 l 803 296 l 328 296 l 328 408 l 671 408 l 671 408 q 627 542 665 494 q 524 589 589 589 q 402 538 446 589 q 359 392 359 486 l 359 302 q 406 168 359 215 q 536 121 452 121 q 620 138 578 121 q 694 186 661 155 l 694 186 l 785 95 l 785 95 q 667 17 732 45 q 536 -10 602 -10 z "},"\u04bf":{"ha":884,"x_min":34,"x_max":803,"o":"m 591 91 l 591 -177 l 452 -177 l 452 91 l 591 91 m 200 297 q 75 333 117 297 q 34 441 34 369 l 34 492 l 161 492 l 161 455 q 173 419 161 431 q 209 408 185 408 l 387 408 l 387 297 l 200 297 m 536 -10 q 370 26 439 -10 q 264 134 300 63 q 228 305 228 205 l 228 385 q 263 563 228 489 q 364 675 298 637 q 524 714 431 714 q 675 670 612 714 q 770 543 737 626 q 803 342 803 459 l 803 296 l 328 296 l 328 408 l 671 408 l 671 408 q 627 542 665 494 q 524 589 589 589 q 402 538 446 589 q 359 392 359 486 l 359 302 q 406 168 359 215 q 536 121 452 121 q 620 138 578 121 q 694 186 661 155 l 694 186 l 785 95 l 785 95 q 667 17 732 45 q 536 -10 602 -10 z "},"\u04cf":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"\u04c2":{"ha":993,"x_min":0,"x_max":993,"o":"m 627 304 l 728 375 l 993 0 l 814 0 l 627 304 m 265 375 l 366 304 l 178 0 l 0 0 l 265 375 m 41 704 l 201 704 l 372 411 l 316 290 l 41 704 m 427 704 l 566 704 l 566 0 l 427 0 l 427 704 m 264 422 l 728 422 l 728 297 l 264 297 l 264 422 m 621 411 l 791 704 l 951 704 l 677 290 l 621 411 z "},"\u04c4":{"ha":781,"x_min":109,"x_max":720,"o":"m 399 -156 l 410 -156 q 539 -102 496 -156 q 582 62 582 -47 l 582 62 q 534 233 582 173 q 399 294 486 294 l 352 294 l 367 425 l 399 425 q 572 382 500 425 q 682 259 644 340 q 720 64 720 178 l 720 57 q 686 -136 720 -60 q 582 -249 651 -212 q 410 -286 513 -286 l 399 -286 l 399 -156 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 425 l 382 425 l 403 294 l 176 294 l 176 425 m 295 411 l 507 704 l 673 704 l 370 306 l 295 411 z "},"\u04c6":{"ha":808,"x_min":61,"x_max":794,"o":"m 794 132 l 740 -177 l 602 -177 l 633 3 l 656 132 l 794 132 m 61 125 q 145 175 115 125 q 176 315 176 224 l 176 704 l 314 704 l 314 296 q 286 132 314 200 q 204 29 258 64 q 75 -6 151 -6 l 61 -6 l 61 125 m 534 704 l 672 704 l 672 0 l 534 0 l 534 704 m 262 704 l 607 704 l 607 572 l 262 572 l 262 704 z "},"\u04c8":{"ha":800,"x_min":109,"x_max":692,"o":"m 436 -155 l 513 -155 q 543 -141 532 -155 q 553 -101 553 -127 l 553 704 l 692 704 l 692 -100 q 649 -237 692 -189 q 527 -286 606 -286 l 436 -286 l 436 -155 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 412 l 627 412 l 627 280 l 195 280 l 195 412 z "},"\u04ca":{"ha":827,"x_min":109,"x_max":814,"o":"m 814 132 l 760 -177 l 621 -177 l 653 3 l 675 132 l 814 132 m 553 704 l 692 704 l 692 0 l 553 0 l 553 704 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 627 408 l 627 283 l 195 283 l 195 408 z "},"\u04cc":{"ha":781,"x_min":102,"x_max":673,"o":"m 409 125 l 547 125 l 547 -177 l 409 -177 l 409 125 m 534 704 l 673 704 l 673 0 l 534 0 l 534 704 m 359 220 q 220 253 278 220 q 132 349 162 286 q 102 499 102 411 l 102 704 l 240 704 l 240 494 q 273 393 240 429 q 366 357 306 357 q 490 396 446 357 q 534 508 534 435 l 534 579 l 578 579 l 578 513 q 521 297 578 373 q 359 220 464 220 z "},"\u04ce":{"ha":906,"x_min":109,"x_max":892,"o":"m 892 132 l 838 -177 l 700 -177 l 732 3 l 754 132 l 892 132 m 648 704 l 770 704 l 770 0 l 646 0 l 646 497 l 652 454 l 481 137 l 398 137 l 227 454 l 233 497 l 233 0 l 109 0 l 109 704 l 231 704 l 439 315 l 648 704 z "},"\u04d1":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 z "},"\u04d3":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 439 986 l 578 986 l 578 848 l 439 848 l 439 986 m 155 986 l 293 986 l 293 848 l 155 848 l 155 986 z "},"\u04d5":{"ha":1158,"x_min":75,"x_max":1077,"o":"m 513 446 q 474 554 513 515 q 364 592 435 592 q 283 579 323 592 q 212 543 243 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 525 654 467 714 q 583 486 583 595 l 583 329 l 513 329 l 513 446 m 313 -10 q 134 44 193 -10 q 75 208 75 98 q 134 362 75 311 q 312 413 193 413 l 559 413 l 569 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 235 133 205 157 q 328 109 266 109 q 430 138 389 109 q 490 213 471 167 q 509 311 509 259 l 581 311 l 581 143 q 474 27 541 65 q 313 -10 408 -10 m 810 -10 q 673 25 730 -10 q 586 126 616 60 q 556 288 556 193 l 556 415 q 585 576 556 509 q 668 679 613 644 q 798 714 722 714 q 949 670 886 714 q 1044 541 1011 625 q 1077 339 1077 457 l 1077 305 l 595 305 l 595 413 l 945 413 l 945 413 q 901 545 939 498 q 798 592 863 592 q 672 539 717 592 q 627 389 627 486 l 627 299 q 675 158 627 208 q 810 109 723 109 q 898 126 854 109 q 976 176 941 144 l 976 176 l 1059 95 l 1059 95 q 941 17 1006 45 q 810 -10 876 -10 z "},"\u04d7":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 z "},"\u04d9":{"ha":745,"x_min":81,"x_max":656,"o":"m 360 -10 q 210 33 272 -10 q 114 158 147 76 q 81 355 81 240 l 81 401 l 556 401 l 556 290 l 213 290 l 213 290 q 257 161 219 207 q 360 115 296 115 q 482 164 439 115 q 525 305 525 214 l 525 395 q 479 534 525 485 q 348 583 433 583 q 264 566 306 583 q 191 518 223 549 l 191 518 l 100 609 l 100 609 q 217 687 152 659 q 348 714 282 714 q 515 676 446 714 q 620 567 584 639 q 656 392 656 494 l 656 313 q 622 138 656 210 q 520 28 587 66 q 360 -10 454 -10 z "},"\u04db":{"ha":745,"x_min":81,"x_max":656,"o":"m 360 -10 q 210 33 272 -10 q 114 158 147 76 q 81 355 81 240 l 81 401 l 556 401 l 556 290 l 213 290 l 213 290 q 257 161 219 207 q 360 115 296 115 q 482 164 439 115 q 525 305 525 214 l 525 395 q 479 534 525 485 q 348 583 433 583 q 264 566 306 583 q 191 518 223 549 l 191 518 l 100 609 l 100 609 q 217 687 152 659 q 348 714 282 714 q 515 676 446 714 q 620 567 584 639 q 656 392 656 494 l 656 313 q 622 138 656 210 q 520 28 587 66 q 360 -10 454 -10 m 449 986 l 587 986 l 587 848 l 449 848 l 449 986 m 164 986 l 302 986 l 302 848 l 164 848 l 164 986 z "},"\u04dd":{"ha":993,"x_min":0,"x_max":993,"o":"m 627 304 l 728 375 l 993 0 l 814 0 l 627 304 m 265 375 l 366 304 l 178 0 l 0 0 l 265 375 m 41 704 l 201 704 l 372 411 l 316 290 l 41 704 m 427 704 l 566 704 l 566 0 l 427 0 l 427 704 m 264 422 l 728 422 l 728 297 l 264 297 l 264 422 m 621 411 l 791 704 l 951 704 l 677 290 l 621 411 m 570 986 l 708 986 l 708 848 l 570 848 l 570 986 m 285 986 l 423 986 l 423 848 l 285 848 l 285 986 z "},"\u04df":{"ha":661,"x_min":61,"x_max":589,"o":"m 329 -10 q 199 14 255 -10 q 109 86 143 39 q 65 199 75 133 l 65 199 l 199 199 l 199 199 q 240 138 207 159 q 327 116 274 116 q 418 142 386 116 q 451 215 451 168 l 451 216 q 428 273 451 252 q 361 293 404 293 l 250 293 l 250 411 l 361 411 q 410 432 393 411 q 428 491 428 453 l 428 492 q 399 563 428 538 q 319 588 371 588 q 239 566 271 588 q 195 505 206 545 l 195 505 l 61 505 l 61 505 q 150 660 81 605 q 326 714 219 714 q 503 665 440 714 q 566 525 566 615 l 566 524 q 538 425 566 467 q 460 363 511 382 q 556 314 522 354 q 589 208 589 273 l 589 208 q 521 47 589 104 q 329 -10 453 -10 m 401 986 l 539 986 l 539 848 l 401 848 l 401 986 m 116 986 l 254 986 l 254 848 l 116 848 l 116 986 z "},"\u04e1":{"ha":616,"x_min":7,"x_max":545,"o":"m 272 -204 q 138 -175 193 -204 q 50 -88 82 -146 q 7 58 17 -30 l 7 59 l 148 59 l 148 58 q 189 -39 157 -7 q 279 -71 222 -71 q 369 -36 339 -71 q 399 72 399 0 l 399 73 q 365 188 399 151 q 255 226 330 226 l 158 226 l 158 303 l 255 351 q 416 320 352 351 q 513 229 481 290 q 545 75 545 168 l 545 75 q 477 -135 545 -65 q 272 -204 409 -204 m 340 572 l 42 572 l 42 704 l 514 704 l 514 585 l 312 303 l 158 303 l 340 572 z "},"\u04e3":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 m 646 985 l 646 848 l 151 848 l 151 985 l 646 985 z "},"\u04e5":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 m 471 986 l 610 986 l 610 848 l 471 848 l 471 986 m 186 986 l 325 986 l 325 848 l 186 848 l 186 986 z "},"\u04e7":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 452 986 l 591 986 l 591 848 l 452 848 l 452 986 m 168 986 l 306 986 l 306 848 l 168 848 l 168 986 z "},"\u04e9":{"ha":757,"x_min":88,"x_max":669,"o":"m 149 408 l 640 408 l 640 296 l 149 296 l 149 408 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u04eb":{"ha":757,"x_min":88,"x_max":669,"o":"m 149 408 l 640 408 l 640 296 l 149 296 l 149 408 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 452 986 l 590 986 l 590 848 l 452 848 l 452 986 m 167 986 l 305 986 l 305 848 l 167 848 l 167 986 z "},"\u04ed":{"ha":692,"x_min":44,"x_max":604,"o":"m 160 293 l 160 411 l 503 411 l 503 293 l 160 293 m 299 -10 q 196 3 245 -10 q 109 40 148 16 q 44 100 71 65 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 109 663 70 637 q 196 701 147 688 q 299 714 244 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 m 414 986 l 553 986 l 553 848 l 414 848 l 414 986 m 130 986 l 268 986 l 268 848 l 130 848 l 130 986 z "},"\u04ef":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 600 985 l 600 848 l 105 848 l 105 985 l 600 985 z "},"\u04f1":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 426 986 l 564 986 l 564 848 l 426 848 l 426 986 m 141 986 l 279 986 l 279 848 l 141 848 l 141 986 z "},"\u04f3":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 404 896 l 530 1137 l 647 1064 l 508 836 l 404 896 m 133 896 l 259 1137 l 376 1064 l 237 836 l 133 896 z "},"\u04f5":{"ha":781,"x_min":102,"x_max":673,"o":"m 534 704 l 673 704 l 673 0 l 534 0 l 534 704 m 359 220 q 220 253 278 220 q 132 349 162 286 q 102 499 102 411 l 102 704 l 240 704 l 240 494 q 273 393 240 429 q 366 357 306 357 q 490 396 446 357 q 534 508 534 435 l 534 579 l 578 579 l 578 513 q 521 297 578 373 q 359 220 464 220 m 460 986 l 599 986 l 599 848 l 460 848 l 460 986 m 176 986 l 314 986 l 314 848 l 176 848 l 176 986 z "},"\u04f7":{"ha":593,"x_min":109,"x_max":559,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 176 704 l 559 704 l 559 572 l 176 572 l 176 704 m 372 125 l 372 -177 l 234 -177 l 234 125 l 372 125 z "},"\u04f9":{"ha":972,"x_min":109,"x_max":871,"o":"m 732 704 l 871 704 l 871 0 l 732 0 l 732 704 m 176 132 l 390 132 q 457 158 432 132 q 483 228 483 184 l 483 228 q 471 279 483 257 q 439 313 460 300 q 390 325 418 325 l 176 325 l 176 456 l 385 456 q 513 428 457 456 q 599 348 568 399 q 630 228 630 296 l 630 228 q 600 109 630 160 q 513 28 569 57 q 385 0 458 0 l 176 0 l 176 132 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 563 986 l 701 986 l 701 848 l 563 848 l 563 986 m 278 986 l 416 986 l 416 848 l 278 848 l 278 986 z "},"\u04fb":{"ha":654,"x_min":41,"x_max":621,"o":"m 163 -62 l 240 -62 q 275 -48 263 -62 q 288 -9 288 -35 l 288 91 l 426 91 l 426 -7 q 381 -145 426 -96 q 254 -194 336 -194 l 163 -194 l 163 -62 m 41 369 l 491 369 l 491 251 l 41 251 l 41 369 m 170 704 l 308 704 l 308 0 l 170 0 l 170 704 m 237 704 l 621 704 l 621 572 l 237 572 l 237 704 z "},"\u04fd":{"ha":710,"x_min":41,"x_max":666,"o":"m 459 -155 l 469 -155 q 519 -139 503 -155 q 534 -87 534 -123 q 520 -26 534 -62 q 475 60 507 9 l 311 320 l 52 704 l 205 704 l 408 389 l 593 109 q 649 0 631 50 q 666 -100 666 -50 q 619 -242 666 -198 q 469 -286 572 -286 l 459 -286 l 459 -155 m 307 389 l 373 261 l 194 0 l 41 0 l 307 389 m 355 454 l 509 704 l 663 704 l 414 324 l 355 454 z "},"\u04ff":{"ha":718,"x_min":41,"x_max":674,"o":"m 83 397 l 632 397 l 632 307 l 83 307 l 83 397 m 311 320 l 52 704 l 205 704 l 408 389 l 674 0 l 521 0 l 311 320 m 307 389 l 373 261 l 194 0 l 41 0 l 307 389 m 355 454 l 509 704 l 663 704 l 414 324 l 355 454 z "},"\u0481":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 162 227 210 q 393 115 314 115 l 393 -10 m 340 115 l 479 115 l 479 -184 l 340 -184 l 340 115 z "},"\u048d":{"ha":749,"x_min":-14,"x_max":678,"o":"m -14 704 l 423 704 l 423 583 l -14 583 l -14 704 m 123 986 l 261 986 l 261 610 l 123 610 l 123 986 m 190 132 l 438 132 q 506 158 480 132 q 531 228 531 184 l 531 228 q 519 279 531 257 q 487 313 508 300 q 438 325 466 325 l 190 325 l 190 456 l 433 456 q 561 428 505 456 q 647 348 616 399 q 678 228 678 296 l 678 228 q 648 109 678 160 q 562 28 617 57 q 433 0 506 0 l 190 0 l 190 132 m 123 704 l 261 704 l 261 0 l 123 0 l 123 704 z "},"\u048f":{"ha":755,"x_min":109,"x_max":667,"o":"m 307 241 l 404 307 l 648 -90 l 551 -156 l 307 241 m 109 704 l 247 704 l 247 -286 l 109 -286 l 109 704 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"\u03ee":{"ha":690,"x_min":-41,"x_max":649,"o":"m 649 846 l 649 714 l 148 714 q 108 704 122 714 q 94 674 94 693 l 94 597 l -41 597 l -41 688 q 2 804 -41 763 q 125 846 45 846 l 649 846 m 376 0 l 237 0 l 237 986 l 376 986 l 376 0 z "},"\u03e4":{"ha":854,"x_min":64,"x_max":732,"o":"m 359 308 q 200 348 266 308 q 99 465 134 389 q 64 649 64 542 l 64 656 q 139 909 64 827 q 368 991 214 991 l 403 991 l 403 859 l 368 859 q 243 808 283 859 q 203 650 203 758 l 203 650 q 251 495 203 551 q 386 440 298 440 q 539 490 485 440 q 593 630 593 539 l 593 681 l 637 667 l 637 594 q 604 439 637 504 q 509 341 571 375 q 359 308 446 308 m 593 986 l 732 986 l 732 0 l 593 0 l 593 986 z "},"\u03ea":{"ha":922,"x_min":27,"x_max":895,"o":"m 562 878 q 612 948 591 924 q 655 981 633 972 q 709 991 677 991 l 800 991 l 800 859 l 723 859 q 703 854 710 859 q 686 833 695 849 l 172 0 l 27 0 l 562 878 m 138 132 l 793 132 l 793 0 l 138 0 l 138 132 m 250 833 q 234 854 241 848 q 213 859 227 859 l 136 859 l 136 991 l 227 991 q 281 981 259 991 q 325 948 304 972 q 374 877 346 924 l 895 0 l 750 0 l 250 833 z "},"\u03e8":{"ha":842,"x_min":75,"x_max":814,"o":"m 457 -10 q 238 21 322 -10 q 114 118 154 52 q 75 289 75 183 l 75 290 q 110 446 75 382 q 219 550 145 509 q 414 611 294 590 q 429 614 422 612 q 444 618 437 616 q 508 647 483 628 q 544 691 532 665 q 556 751 556 718 l 556 752 q 525 839 556 812 q 425 866 494 866 q 326 848 372 866 q 227 790 279 830 l 227 790 l 149 900 l 149 900 q 282 974 217 951 q 425 996 348 996 q 578 971 519 996 q 665 893 637 946 q 693 755 693 840 l 693 754 q 667 620 693 675 q 585 530 641 564 q 439 481 529 495 q 266 416 319 463 q 212 286 212 370 l 212 286 q 237 191 212 227 q 316 137 262 155 q 457 120 370 120 q 604 143 540 120 q 728 218 668 166 l 728 218 l 814 112 l 814 112 q 710 42 764 69 q 594 3 656 16 q 457 -10 532 -10 z "},"\u03e6":{"ha":871,"x_min":109,"x_max":783,"o":"m 314 -92 l 516 -92 q 597 -75 570 -92 q 635 -29 625 -59 q 644 50 644 1 l 644 277 q 623 362 644 327 q 561 415 602 397 q 463 433 521 433 l 233 433 l 233 565 l 509 565 q 657 531 595 565 q 750 433 718 498 q 783 278 783 369 l 783 52 q 724 -154 783 -85 q 530 -223 665 -223 l 314 -223 l 314 -92 m 109 986 l 247 986 l 247 0 l 109 0 l 109 986 m 329 -223 q 273 -239 292 -224 q 254 -286 254 -255 l 122 -286 q 170 -140 122 -189 q 314 -92 218 -92 l 329 -223 z "},"\u03e2":{"ha":1356,"x_min":122,"x_max":1234,"o":"m 921 -10 q 767 27 831 -10 q 670 137 703 65 q 636 309 636 208 l 636 986 l 747 986 l 747 304 q 793 173 747 220 q 921 126 838 126 q 1050 173 1004 126 q 1096 304 1096 220 l 1096 986 l 1234 986 l 1234 309 l 1171 188 q 1080 40 1143 91 q 921 -10 1017 -10 m 434 -10 q 266 27 336 -10 q 159 137 195 65 q 122 309 122 208 l 122 986 l 260 986 l 260 304 q 306 173 260 220 q 434 126 351 126 q 563 173 517 126 q 609 304 609 220 l 609 986 l 720 986 l 720 309 q 687 137 720 208 q 589 27 653 65 q 434 -10 524 -10 m 361 -92 l 968 -92 q 1049 -75 1021 -92 q 1086 -29 1077 -59 q 1096 50 1096 1 l 1096 387 l 1234 387 l 1234 52 q 1176 -154 1234 -85 q 981 -223 1117 -223 l 372 -223 l 361 -92 m 383 -223 q 327 -239 345 -224 q 308 -286 308 -255 l 170 -286 q 217 -140 170 -189 q 361 -92 265 -92 l 383 -223 z "},"\u03ec":{"ha":947,"x_min":102,"x_max":845,"o":"m 473 -10 q 273 31 356 -10 q 145 149 189 71 q 102 337 102 227 l 102 425 l 227 595 q 279 690 241 652 q 377 749 317 729 q 521 768 438 768 q 696 728 623 768 q 807 610 768 688 q 845 425 845 533 l 845 335 q 801 149 845 226 q 674 31 758 71 q 473 -10 591 -10 m 473 121 q 599 146 547 121 q 679 220 652 172 q 707 335 707 268 l 707 425 q 645 581 707 526 q 473 637 584 637 q 301 581 361 637 q 240 425 240 526 l 240 335 q 301 177 240 233 q 473 121 362 121 m 102 659 q 411 986 102 986 l 570 986 q 655 1002 627 986 q 683 1049 683 1019 l 811 1049 q 581 868 811 868 l 422 868 q 233 672 233 868 l 233 416 l 102 416 l 102 659 z "},"\u037f":{"ha":702,"x_min":20,"x_max":580,"o":"m 272 -10 q 127 22 193 -10 q 20 111 62 54 l 134 193 q 189 141 153 159 q 272 123 224 123 q 397 173 353 123 q 441 314 441 223 l 441 986 l 580 986 l 580 313 q 544 138 580 211 q 439 28 508 66 q 272 -10 370 -10 z "},"\u0391":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 z "},"\u0392":{"ha":897,"x_min":122,"x_max":812,"o":"m 203 128 l 471 128 q 624 168 576 128 q 672 281 672 208 l 672 283 q 655 369 672 333 q 600 424 637 405 q 505 444 563 444 l 203 444 l 203 568 l 505 568 q 620 604 581 568 q 659 711 659 640 l 659 711 q 616 821 659 785 q 486 858 572 858 l 203 858 l 203 986 l 511 986 q 671 954 606 986 q 767 861 735 921 q 799 719 799 802 l 799 719 q 779 624 799 668 q 719 548 760 579 q 619 505 679 516 q 722 463 679 496 q 789 379 766 429 q 812 271 812 329 l 812 269 q 777 127 812 189 q 675 33 741 66 q 522 0 610 0 l 203 0 l 203 128 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u0393":{"ha":688,"x_min":122,"x_max":675,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 986 l 675 986 l 675 854 l 190 854 l 190 986 z "},"\u0394":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 127 132 l 761 132 l 761 0 l 127 0 l 127 132 z "},"\u0395":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 z "},"\u0396":{"ha":755,"x_min":81,"x_max":694,"o":"m 681 867 l 252 132 l 694 132 l 694 0 l 81 0 l 81 119 l 514 854 l 94 854 l 94 986 l 681 986 l 681 867 z "},"\u0397":{"ha":943,"x_min":122,"x_max":821,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 755 551 l 755 420 l 208 420 l 208 551 z "},"\u0398":{"ha":897,"x_min":102,"x_max":795,"o":"m 325 555 l 572 555 l 572 424 l 325 424 l 325 555 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u0399":{"ha":382,"x_min":122,"x_max":260,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 z "},"\u039a":{"ha":891,"x_min":122,"x_max":878,"o":"m 231 433 l 666 986 l 836 986 l 210 225 l 231 433 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 395 526 l 504 627 l 878 0 l 708 0 l 395 526 z "},"\u039b":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 z "},"\u039c":{"ha":1082,"x_min":122,"x_max":960,"o":"m 831 986 l 960 986 l 960 0 l 825 0 l 825 739 l 832 695 l 589 137 l 493 137 l 250 682 l 257 739 l 257 0 l 122 0 l 122 986 l 252 986 l 541 335 l 831 986 z "},"\u039d":{"ha":972,"x_min":122,"x_max":850,"o":"m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 z "},"\u039e":{"ha":929,"x_min":115,"x_max":814,"o":"m 115 132 l 814 132 l 814 0 l 115 0 l 115 132 m 176 555 l 753 555 l 753 424 l 176 424 l 176 555 m 115 986 l 814 986 l 814 854 l 115 854 l 115 986 z "},"\u039f":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u03a0":{"ha":943,"x_min":122,"x_max":821,"o":"m 682 986 l 821 986 l 821 0 l 682 0 l 682 986 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 986 l 755 986 l 755 854 l 208 854 l 208 986 z "},"\u03a1":{"ha":865,"x_min":122,"x_max":800,"o":"m 193 514 l 509 514 q 587 535 553 514 q 640 595 621 556 q 659 684 659 633 l 659 684 q 640 773 659 734 q 587 833 621 812 q 509 854 553 854 l 193 854 l 193 986 l 504 986 q 659 948 592 986 q 763 842 726 911 q 800 684 800 774 l 800 684 q 763 525 800 593 q 659 420 726 457 q 504 382 592 382 l 193 382 l 193 514 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u03a3":{"ha":635,"x_min":41,"x_max":594,"o":"m 594 854 l 214 854 l 476 493 l 214 132 l 594 132 l 594 0 l 41 0 l 41 119 l 311 493 l 41 867 l 41 986 l 594 986 l 594 854 z "},"\u03a4":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u03a5":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 z "},"\u03a6":{"ha":1100,"x_min":61,"x_max":1039,"o":"m 550 105 q 285 150 395 105 q 118 283 176 195 q 61 496 61 371 l 61 524 q 118 737 61 649 q 285 870 176 825 q 550 915 395 915 q 815 870 705 915 q 982 737 924 825 q 1039 524 1039 649 l 1039 496 q 982 283 1039 371 q 815 150 924 195 q 550 105 705 105 m 481 1020 l 619 1020 l 619 0 l 481 0 l 481 1020 m 550 228 q 814 297 721 228 q 907 496 907 366 l 907 524 q 814 723 907 654 q 550 792 721 792 q 286 723 379 792 q 193 524 193 654 l 193 496 q 286 297 193 366 q 550 228 379 228 z "},"\u03a7":{"ha":788,"x_min":14,"x_max":774,"o":"m 363 433 l 342 467 l 22 986 l 177 986 l 415 585 l 437 548 l 774 0 l 619 0 l 363 433 m 357 564 l 604 986 l 760 986 l 433 452 l 169 0 l 14 0 l 357 564 z "},"\u03a8":{"ha":991,"x_min":109,"x_max":883,"o":"m 495 227 q 286 274 373 227 q 154 408 199 320 q 109 621 109 496 l 109 986 l 247 986 l 247 616 q 276 480 247 536 q 361 393 305 423 q 495 363 416 363 q 630 393 574 363 q 715 480 686 423 q 745 616 745 536 l 745 986 l 883 986 l 883 621 q 837 408 883 496 q 705 274 791 320 q 495 227 618 227 m 427 986 l 565 986 l 565 0 l 427 0 l 427 986 z "},"\u03a9":{"ha":897,"x_min":102,"x_max":795,"o":"m 401 64 q 243 100 311 64 q 139 202 176 136 q 102 353 102 267 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 758 202 795 267 q 653 100 721 136 q 496 64 585 64 l 496 132 q 578 159 543 132 q 633 235 614 186 q 653 349 653 283 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 263 235 243 283 q 318 159 283 186 q 401 132 354 132 l 401 64 m 102 132 l 401 132 l 401 0 l 102 0 l 102 132 m 496 132 l 795 132 l 795 0 l 496 0 l 496 132 z "},"\u0386":{"ha":952,"x_min":27,"x_max":925,"o":"m 444 986 l 562 986 l 925 0 l 776 0 l 503 795 l 229 0 l 80 0 l 444 986 m 248 348 l 766 348 l 766 216 l 248 216 l 248 348 z "},"\u0388":{"ha":971,"x_min":-27,"x_max":897,"o":"m 263 986 l 401 986 l 401 0 l 263 0 l 263 986 m 330 132 l 897 132 l 897 0 l 330 0 l 330 132 m 330 555 l 822 555 l 822 424 l 330 424 l 330 555 m 330 986 l 897 986 l 897 854 l 330 854 l 330 986 z "},"\u0389":{"ha":1090,"x_min":-27,"x_max":968,"o":"m 830 986 l 968 986 l 968 0 l 830 0 l 830 986 m 270 986 l 408 986 l 408 0 l 270 0 l 270 986 m 356 551 l 903 551 l 903 420 l 356 420 l 356 551 z "},"\u038a":{"ha":517,"x_min":-27,"x_max":395,"o":"m 395 0 l 256 0 l 256 986 l 395 986 l 395 0 z "},"\u038c":{"ha":1029,"x_min":-20,"x_max":928,"o":"m 581 -10 q 399 35 478 -10 q 278 162 321 80 q 235 353 235 245 l 235 633 q 278 824 235 741 q 399 951 321 906 q 581 996 478 996 q 763 951 684 996 q 885 824 842 906 q 928 633 928 741 l 928 353 q 885 162 928 245 q 763 35 842 80 q 581 -10 684 -10 m 581 126 q 689 154 642 126 q 761 232 735 181 q 786 349 786 282 l 786 637 q 761 754 786 704 q 689 832 735 805 q 581 860 642 860 q 474 832 520 860 q 402 754 427 805 q 376 637 376 704 l 376 349 q 402 232 376 282 q 474 154 427 181 q 581 126 520 126 z "},"\u038e":{"ha":1002,"x_min":27,"x_max":1023,"o":"m 722 401 l 722 0 l 584 0 l 584 401 l 283 986 l 437 986 l 653 541 l 869 986 l 1023 986 l 722 401 z "},"\u038f":{"ha":1078,"x_min":27,"x_max":977,"o":"m 583 64 q 425 100 493 64 q 320 202 357 136 q 283 353 283 267 l 283 633 q 327 824 283 741 q 448 951 370 906 q 630 996 527 996 q 812 951 733 996 q 933 824 890 906 q 977 633 977 741 l 977 353 q 940 202 977 267 q 835 100 903 136 q 677 64 767 64 l 677 132 q 760 159 724 132 q 815 235 795 186 q 835 349 835 283 l 835 637 q 809 754 835 704 q 738 832 784 805 q 630 860 691 860 q 523 832 569 860 q 451 754 476 805 q 425 637 425 704 l 425 349 q 445 235 425 283 q 500 159 465 186 q 583 132 536 132 l 583 64 m 283 132 l 583 132 l 583 0 l 283 0 l 283 132 m 677 132 l 977 132 l 977 0 l 677 0 l 677 132 z "},"\u03aa":{"ha":382,"x_min":-17,"x_max":399,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 261 1205 l 399 1205 l 399 1067 l 261 1067 l 261 1205 m -17 1205 l 121 1205 l 121 1067 l -17 1067 l -17 1205 z "},"\u03ab":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 419 1205 l 557 1205 l 557 1067 l 419 1067 l 419 1205 m 141 1205 l 279 1205 l 279 1067 l 141 1067 l 141 1205 z "},"\u0370":{"ha":784,"x_min":122,"x_max":682,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 208 551 l 682 551 l 682 420 l 208 420 l 208 551 z "},"\u0372":{"ha":777,"x_min":41,"x_max":736,"o":"m 41 986 l 179 986 l 179 650 l 41 650 l 41 986 m 598 986 l 736 986 l 736 650 l 598 650 l 598 986 m 319 905 l 458 905 l 458 0 l 319 0 l 319 905 m 41 986 l 736 986 l 736 854 l 41 854 l 41 986 z "},"\u0376":{"ha":972,"x_min":122,"x_max":850,"o":"m 713 1 l 713 776 l 730 758 l 235 1 l 122 1 l 122 986 l 259 986 l 259 199 l 243 217 l 739 986 l 850 986 l 850 1 l 713 1 z "},"\u03d8":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 199 q 267 244 345 199 q 145 371 188 289 q 102 562 102 454 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 562 q 752 371 795 454 q 630 244 709 289 q 448 199 551 199 m 448 335 q 556 362 509 335 q 628 440 602 390 q 653 557 653 491 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 557 q 269 440 243 491 q 341 362 294 390 q 448 335 387 335 m 379 335 l 517 335 l 517 0 l 379 0 l 379 335 z "},"\u03da":{"ha":811,"x_min":102,"x_max":784,"o":"m 621 -55 q 610 -21 621 -33 q 576 -10 599 -10 l 473 -10 q 267 40 349 -10 q 143 190 184 90 q 102 438 102 290 q 150 713 102 603 q 294 882 198 823 q 536 952 391 941 q 621 980 593 956 q 649 1049 649 1004 l 784 1049 q 727 897 784 951 q 555 834 670 844 q 380 779 450 825 q 275 648 310 733 q 240 438 240 564 q 267 258 240 330 q 348 151 294 186 q 483 115 401 115 l 612 115 q 723 76 686 115 q 760 -39 760 38 l 760 -177 l 621 -177 l 621 -55 z "},"\u03dc":{"ha":777,"x_min":122,"x_max":743,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 190 547 l 668 547 l 668 415 l 190 415 l 190 547 m 190 986 l 743 986 l 743 854 l 190 854 l 190 986 z "},"\u03de":{"ha":888,"x_min":27,"x_max":861,"o":"m 334 986 l 483 986 l 176 427 l 27 427 l 334 986 m 712 558 l 861 558 l 570 0 l 420 0 l 712 558 m 161 558 l 728 558 l 728 427 l 161 427 l 161 558 z "},"\u03e0":{"ha":776,"x_min":41,"x_max":674,"o":"m 399 0 q 532 500 532 220 q 464 771 532 681 q 256 861 395 861 q 61 827 172 861 l 41 962 q 256 996 162 996 q 570 872 466 996 q 674 500 674 749 q 548 0 674 223 l 399 0 m 135 379 l 572 533 l 616 412 l 179 258 l 135 379 m 60 600 l 504 758 l 547 637 l 104 479 l 60 600 z "},"\u03cf":{"ha":891,"x_min":122,"x_max":878,"o":"m 726 -286 l 556 -286 l 708 0 l 878 0 l 726 -286 m 231 433 l 666 986 l 836 986 l 210 225 l 231 433 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 395 526 l 504 627 l 878 0 l 708 0 l 395 526 z "},"\u03d2":{"ha":728,"x_min":-14,"x_max":742,"o":"m 293 705 l 429 705 l 429 0 l 293 0 l 293 705 m 355 664 q 398 833 355 759 q 529 949 442 907 q 742 991 616 991 l 742 855 q 569 809 640 855 q 464 680 499 762 q 429 488 429 597 l 355 664 m 293 488 q 258 680 293 597 q 155 809 224 762 q -14 855 86 855 l -14 991 q 196 949 110 991 q 324 833 281 907 q 367 664 367 759 l 293 488 z "},"\u03d3":{"ha":991,"x_min":-20,"x_max":1013,"o":"m 564 705 l 700 705 l 700 0 l 564 0 l 564 705 m 626 664 q 670 833 626 759 q 800 949 713 907 q 1013 991 887 991 l 1013 855 q 841 809 911 855 q 735 680 770 762 q 700 488 700 597 l 626 664 m 564 488 q 530 680 564 597 q 426 809 495 762 q 258 855 357 855 l 258 991 q 467 949 381 991 q 595 833 553 907 q 638 664 638 759 l 564 488 z "},"\u03d4":{"ha":728,"x_min":-14,"x_max":742,"o":"m 293 705 l 429 705 l 429 0 l 293 0 l 293 705 m 355 664 q 398 833 355 759 q 529 949 442 907 q 742 991 616 991 l 742 855 q 569 809 640 855 q 464 680 499 762 q 429 488 429 597 l 355 664 m 293 488 q 258 680 293 597 q 155 809 224 762 q -14 855 86 855 l -14 991 q 196 949 110 991 q 324 833 281 907 q 367 664 367 759 l 293 488 m 431 1205 l 569 1205 l 569 1067 l 431 1067 l 431 1205 m 153 1205 l 291 1205 l 291 1067 l 153 1067 l 153 1205 z "},"\u03f4":{"ha":897,"x_min":102,"x_max":795,"o":"m 203 555 l 694 555 l 694 424 l 203 424 l 203 555 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u03f7":{"ha":865,"x_min":122,"x_max":800,"o":"m 193 338 l 509 338 q 587 359 553 338 q 640 418 621 380 q 659 507 659 457 l 659 507 q 640 597 659 558 q 587 657 621 635 q 509 678 553 678 l 193 678 l 193 810 l 504 810 q 659 772 592 810 q 763 666 726 734 q 800 507 800 597 l 800 507 q 763 349 800 417 q 659 243 726 281 q 504 206 592 206 l 193 206 l 193 338 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "},"\u03f9":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u03fa":{"ha":1082,"x_min":122,"x_max":960,"o":"m 831 986 l 960 986 l 960 0 l 825 0 l 825 739 l 832 695 l 589 137 l 493 137 l 250 682 l 257 739 l 257 0 l 122 0 l 122 986 l 252 986 l 541 335 l 831 986 z "},"\u03fd":{"ha":859,"x_min":75,"x_max":758,"o":"m 414 -10 q 259 26 330 -10 q 140 129 188 62 q 75 283 92 195 l 75 283 l 216 283 l 216 283 q 259 197 229 233 q 330 143 290 161 q 414 125 370 125 q 520 154 475 125 q 591 235 566 182 q 616 357 616 288 l 616 628 q 591 750 616 698 q 520 832 566 803 q 414 861 475 861 q 330 842 371 861 q 259 786 290 822 q 216 703 229 749 l 216 703 l 75 703 l 75 703 q 139 857 92 791 q 258 960 187 924 q 414 996 330 996 q 594 950 517 996 q 715 821 672 905 q 758 628 758 738 l 758 357 q 715 164 758 248 q 594 35 672 81 q 414 -10 517 -10 z "},"\u03fe":{"ha":859,"x_min":102,"x_max":785,"o":"m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 m 398 562 l 543 562 l 543 417 l 398 417 l 398 562 z "},"\u03ff":{"ha":859,"x_min":75,"x_max":758,"o":"m 414 -10 q 259 26 330 -10 q 140 129 188 62 q 75 283 92 195 l 75 283 l 216 283 l 216 283 q 259 197 229 233 q 330 143 290 161 q 414 125 370 125 q 520 154 475 125 q 591 235 566 182 q 616 357 616 288 l 616 628 q 591 750 616 698 q 520 832 566 803 q 414 861 475 861 q 330 842 371 861 q 259 786 290 822 q 216 703 229 749 l 216 703 l 75 703 l 75 703 q 139 857 92 791 q 258 960 187 924 q 414 996 330 996 q 594 950 517 996 q 715 821 672 905 q 758 628 758 738 l 758 357 q 715 164 758 248 q 594 35 672 81 q 414 -10 517 -10 m 323 562 l 468 562 l 468 417 l 323 417 l 323 562 z "},"\u03ef":{"ha":642,"x_min":47,"x_max":594,"o":"m 111 -155 l 205 -155 q 240 -141 228 -155 q 252 -101 252 -127 l 252 909 l 390 909 l 390 -100 q 349 -239 390 -192 q 218 -286 307 -286 l 111 -286 l 111 -155 m 47 704 l 594 704 l 594 579 l 47 579 l 47 704 z "},"\u03e5":{"ha":864,"x_min":88,"x_max":762,"o":"m 624 704 l 762 704 l 762 -286 l 624 -286 l 624 704 m 420 583 l 398 583 q 269 527 311 583 q 227 353 227 471 l 227 353 q 276 183 227 243 q 416 122 326 122 q 570 172 515 122 q 624 312 624 221 l 624 363 l 667 349 l 667 276 q 634 121 667 186 q 539 23 602 57 q 389 -10 477 -10 q 226 33 294 -10 q 123 156 159 75 q 88 351 88 237 l 88 358 q 165 627 88 541 q 398 714 241 714 l 420 714 l 420 583 z "},"\u03eb":{"ha":763,"x_min":54,"x_max":705,"o":"m 210 556 q 191 576 201 569 q 172 583 182 583 l 115 583 l 115 714 l 193 714 q 233 707 214 714 q 266 688 251 701 q 292 656 280 675 l 705 0 l 567 0 l 210 556 m 193 132 l 567 132 l 567 0 l 193 0 l 193 132 m 467 656 q 494 688 479 675 q 527 707 509 701 q 567 714 545 714 l 644 714 l 644 583 l 587 583 q 568 576 578 583 q 550 556 559 569 l 193 0 l 54 0 l 467 656 z "},"\u03b1":{"ha":793,"x_min":88,"x_max":745,"o":"m 331 -10 q 200 26 254 -10 q 117 131 145 62 q 88 296 88 199 l 88 411 q 117 575 88 507 q 200 679 145 643 q 331 714 254 714 q 477 652 425 714 q 529 479 529 591 l 529 227 q 477 52 529 114 q 331 -10 425 -10 m 351 121 q 460 167 422 121 q 499 294 499 212 l 499 411 q 460 538 499 493 q 351 583 422 583 q 259 538 292 583 q 227 411 227 493 l 227 294 q 259 166 227 212 q 351 121 292 121 m 664 -3 q 542 45 585 -3 q 499 183 499 94 l 499 704 l 637 704 l 637 182 q 649 142 637 156 q 680 128 660 128 l 745 128 l 745 -3 l 664 -3 z "},"\u03b2":{"ha":755,"x_min":109,"x_max":684,"o":"m 435 -10 q 321 12 369 -10 q 244 81 273 33 q 208 205 215 128 l 247 245 q 267 180 247 208 q 323 137 288 152 q 401 123 358 123 q 503 159 467 123 q 539 262 539 196 l 539 292 q 505 407 539 366 q 408 447 471 447 l 345 447 l 345 578 l 408 578 q 493 613 463 578 q 523 711 523 648 l 523 741 q 489 831 523 800 q 394 863 456 863 q 286 821 324 863 q 247 700 247 778 l 247 700 l 109 700 l 109 700 q 142 860 109 793 q 240 961 176 926 q 394 996 304 996 q 542 966 480 996 q 636 878 604 936 q 668 740 668 821 l 668 724 q 628 595 668 650 q 515 515 588 540 q 640 435 595 497 q 684 278 684 374 l 684 262 q 619 61 684 132 q 435 -10 554 -10 m 109 700 l 247 700 l 247 -286 l 109 -286 l 109 700 z "},"\u03b3":{"ha":720,"x_min":34,"x_max":692,"o":"m 307 8 q 304 37 307 23 q 298 65 302 52 q 296 70 297 68 q 294 75 296 73 l 124 529 q 99 569 114 556 q 64 583 84 583 l 34 583 l 34 714 l 98 714 q 188 668 149 714 q 262 528 227 623 l 429 66 l 445 91 l 445 -286 l 307 -286 l 307 8 m 330 48 l 548 704 l 692 704 l 431 -26 l 330 48 z "},"\u03b4":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 118 550 88 490 q 207 646 149 610 q 348 689 265 682 l 362 671 l 142 857 l 142 915 l 317 873 l 494 730 q 593 636 554 683 q 650 544 631 590 q 669 452 669 498 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 438 q 491 565 530 520 q 378 610 451 610 q 266 565 306 610 q 227 438 227 520 l 227 294 q 266 167 227 212 q 378 121 306 121 m 142 986 l 628 986 l 628 861 l 142 861 l 142 986 z "},"\u03b5":{"ha":653,"x_min":81,"x_max":609,"o":"m 357 -10 q 153 45 225 -10 q 81 201 81 100 l 81 201 q 96 272 81 237 q 138 330 111 306 q 203 360 166 354 q 126 427 154 380 q 98 531 98 474 l 98 532 q 165 667 98 619 q 358 714 233 714 q 510 686 448 714 q 609 600 573 657 l 609 600 l 509 518 l 509 518 q 440 571 477 553 q 358 588 402 588 q 268 568 300 588 q 236 512 236 549 l 236 511 q 255 448 236 471 q 310 426 275 426 l 427 426 l 427 291 l 310 291 q 243 271 267 291 q 220 216 220 252 l 220 215 q 256 142 220 168 q 357 116 292 116 q 436 136 394 116 q 515 194 477 156 l 515 194 l 609 101 l 609 101 q 503 18 566 45 q 357 -10 440 -10 z "},"\u03b6":{"ha":705,"x_min":88,"x_max":685,"o":"m 547 -55 q 536 -21 547 -31 q 501 -10 525 -10 l 399 -10 q 221 23 290 -9 q 120 122 153 55 q 88 296 88 189 q 110 427 88 364 q 176 551 132 489 q 292 685 221 614 q 355 747 324 717 q 413 802 387 777 q 455 839 433 821 q 497 873 477 857 l 644 915 l 644 843 q 585 797 634 837 q 461 686 536 756 l 425 651 q 317 530 359 587 q 254 416 275 474 q 233 296 233 359 q 275 158 233 201 q 408 115 316 115 l 537 115 q 650 78 615 115 q 685 -39 685 42 l 685 -177 l 547 -177 l 547 -55 m 125 847 l 125 986 l 644 986 l 644 847 l 125 847 z "},"\u03b7":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 -184 l 536 -184 l 536 427 z "},"\u03b8":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 693 q 122 857 88 789 q 222 961 157 925 q 378 996 287 996 q 535 961 470 996 q 634 857 600 925 q 669 693 669 789 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 693 q 491 820 530 775 q 378 865 451 865 q 266 820 306 865 q 227 693 227 775 l 227 294 q 266 167 227 212 q 378 121 306 121 m 176 555 l 572 555 l 572 424 l 176 424 l 176 555 z "},"\u03b9":{"ha":403,"x_min":109,"x_max":355,"o":"m 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 704 l 247 704 l 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 z "},"\u03ba":{"ha":734,"x_min":109,"x_max":728,"o":"m 188 266 l 511 638 q 580 695 544 676 q 656 714 616 714 l 692 714 l 692 569 l 669 569 q 621 557 644 569 q 574 522 597 545 l 240 164 l 188 266 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 332 406 l 420 498 l 728 0 l 577 0 l 332 406 z "},"\u03bb":{"ha":730,"x_min":27,"x_max":703,"o":"m 155 0 l 27 0 l 353 758 l 412 593 l 155 0 m 235 806 q 210 845 225 831 q 175 859 195 859 l 125 859 l 125 991 l 226 991 q 294 964 264 991 q 344 886 325 937 l 606 178 q 631 139 616 153 q 666 125 646 125 l 703 125 l 703 -7 l 615 -7 q 550 14 578 -7 q 505 78 521 35 l 235 806 z "},"\u03bc":{"ha":827,"x_min":109,"x_max":779,"o":"m 109 704 l 247 704 l 247 92 l 239 92 l 247 -190 l 109 -190 l 109 704 m 387 -10 q 301 7 335 -10 q 250 59 267 24 q 231 146 233 94 l 247 260 q 282 156 247 191 q 387 121 317 121 q 497 156 460 121 q 533 260 533 191 l 556 146 q 507 29 549 68 q 387 -10 465 -10 m 697 -3 q 575 45 618 -3 q 532 183 532 94 l 532 704 l 671 704 l 671 182 q 682 142 671 156 q 713 128 693 128 l 779 128 l 779 -3 l 697 -3 z "},"\u03bd":{"ha":706,"x_min":41,"x_max":665,"o":"m 303 0 l 131 529 q 107 569 122 555 q 71 583 92 583 l 41 583 l 41 714 l 104 714 q 172 693 140 714 q 228 631 203 673 q 269 528 252 589 l 355 201 l 521 704 l 665 704 l 408 0 l 303 0 z "},"\u03be":{"ha":743,"x_min":95,"x_max":682,"o":"m 544 -55 q 533 -21 544 -33 q 498 -10 522 -10 l 437 -10 q 184 58 268 -10 q 100 262 100 125 l 100 278 q 145 437 100 378 q 283 515 191 496 q 168 589 206 540 q 130 710 130 637 l 130 713 q 206 846 130 803 q 437 890 282 890 l 437 855 q 310 820 353 855 q 268 714 268 785 l 268 711 q 308 611 268 644 q 430 578 349 578 l 608 578 l 608 447 l 430 447 q 286 403 334 447 q 238 272 238 359 l 238 262 q 288 152 238 189 q 437 115 337 115 l 562 115 q 652 86 622 115 q 682 2 682 58 l 682 -177 l 544 -177 l 544 -55 m 95 986 l 662 986 l 662 854 l 95 854 l 95 986 z "},"\u03bf":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u03c0":{"ha":940,"x_min":75,"x_max":859,"o":"m 755 -7 q 630 40 670 -7 q 591 180 591 87 l 591 631 l 729 631 l 729 178 q 739 139 729 153 q 769 125 749 125 l 836 125 l 836 -7 l 755 -7 m 204 630 l 342 630 l 342 0 l 204 0 l 204 630 m 75 704 l 859 704 l 859 572 l 75 572 l 75 704 z "},"\u03c1":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 427 q 141 582 109 517 q 237 681 174 647 q 388 714 300 714 q 539 681 476 714 q 634 582 602 647 q 667 427 667 517 l 667 274 q 639 121 667 184 q 557 23 611 57 q 427 -10 503 -10 q 304 28 357 -10 q 227 138 252 67 l 247 258 q 283 152 247 189 q 385 115 319 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 492 547 529 505 q 388 589 455 589 q 284 547 321 589 q 247 427 247 505 l 247 -286 l 109 -286 l 109 427 z "},"\u03c2":{"ha":692,"x_min":88,"x_max":648,"o":"m 438 -54 q 428 -21 438 -33 q 393 -10 418 -10 l 393 -10 q 228 26 296 -10 q 124 131 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 542 685 475 714 q 648 602 608 655 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 271 162 227 210 q 395 115 315 115 l 435 115 q 539 79 503 115 q 576 -24 576 42 l 576 -177 l 438 -177 l 438 -54 z "},"\u03c3":{"ha":825,"x_min":88,"x_max":784,"o":"m 372 -10 q 218 26 282 -10 q 121 131 155 62 q 88 296 88 199 l 88 411 q 121 569 88 503 q 218 669 155 635 q 372 704 282 704 l 492 610 q 581 569 544 596 q 636 502 617 541 q 655 411 655 462 l 655 294 q 622 130 655 198 q 525 26 589 62 q 372 -10 461 -10 m 372 121 q 479 166 441 121 q 517 294 517 212 l 517 411 q 479 535 517 491 q 372 579 441 579 q 264 535 302 579 q 227 411 227 491 l 227 294 q 264 166 227 212 q 372 121 302 121 m 372 704 l 784 704 l 784 572 l 439 572 l 372 704 z "},"\u03c4":{"ha":716,"x_min":75,"x_max":621,"o":"m 440 -7 q 315 40 355 -7 q 275 180 275 87 l 275 631 l 414 631 l 414 178 q 424 139 414 153 q 454 125 434 125 l 527 125 l 527 -7 l 440 -7 m 75 704 l 621 704 l 621 572 l 75 572 l 75 704 z "},"\u03c5":{"ha":779,"x_min":41,"x_max":677,"o":"m 399 -10 q 249 23 311 -10 q 154 121 186 57 q 121 276 121 186 l 121 528 q 110 568 121 554 q 79 582 99 582 l 41 582 l 41 713 l 95 713 q 217 665 174 713 q 260 527 260 616 l 260 276 q 296 162 260 202 q 399 121 333 121 q 503 162 466 121 q 539 276 539 202 l 539 704 l 677 704 l 677 276 q 645 121 677 186 q 550 23 612 57 q 399 -10 488 -10 z "},"\u03c6":{"ha":926,"x_min":78,"x_max":848,"o":"m 463 -10 q 249 30 334 -10 q 121 150 163 70 q 78 351 78 230 l 78 357 q 121 555 78 476 q 249 674 163 635 q 463 714 334 714 q 677 674 592 714 q 806 555 763 635 q 848 357 848 476 l 848 349 q 806 149 848 229 q 677 30 763 69 q 463 -10 592 -10 m 394 908 l 532 908 l 532 -204 l 394 -204 l 394 908 m 463 91 q 656 150 592 91 q 720 328 720 210 l 720 377 q 656 554 720 496 q 463 613 592 613 q 320 587 377 613 q 235 508 263 561 q 206 377 206 456 l 206 328 q 270 150 206 210 q 463 91 334 91 z "},"\u03c7":{"ha":702,"x_min":20,"x_max":668,"o":"m 597 -296 q 538 -283 566 -296 q 489 -241 511 -269 q 447 -171 467 -214 l 130 529 q 104 569 118 556 q 70 583 90 583 l 20 583 l 20 714 l 90 714 q 149 701 122 714 q 199 659 176 687 q 241 589 221 631 l 557 -111 q 576 -141 566 -130 q 602 -159 586 -153 q 645 -165 618 -165 l 668 -165 l 668 -296 l 597 -296 m 293 248 l 366 129 l 178 -286 l 27 -286 l 293 248 m 338 289 l 507 704 l 658 704 l 412 170 l 338 289 z "},"\u03c8":{"ha":985,"x_min":109,"x_max":883,"o":"m 495 -10 q 286 36 373 -10 q 154 171 199 83 q 109 384 109 259 l 109 704 l 247 704 l 247 379 q 276 235 247 295 q 361 144 305 175 q 495 113 416 113 q 630 144 574 113 q 715 235 686 175 q 745 379 745 295 l 745 704 l 883 704 l 883 384 q 837 171 883 259 q 705 36 791 83 q 495 -10 618 -10 m 427 908 l 565 908 l 565 -204 l 427 -204 l 427 908 z "},"\u03c9":{"ha":1009,"x_min":88,"x_max":921,"o":"m 692 -10 q 533 55 589 -10 q 476 240 476 121 l 476 410 l 574 410 l 574 240 q 601 153 574 184 q 678 121 629 121 q 755 153 728 121 q 783 240 783 184 l 783 445 q 748 547 783 511 q 651 583 713 583 l 651 714 q 797 683 736 714 q 889 590 858 651 q 921 445 921 530 l 921 242 q 861 56 921 122 q 692 -10 801 -10 m 317 -10 q 148 56 208 -10 q 88 242 88 122 l 88 445 q 120 590 88 530 q 212 683 151 651 q 358 714 273 714 l 358 583 q 261 547 296 583 q 227 445 227 511 l 227 240 q 254 153 227 184 q 331 121 281 121 q 408 153 380 121 q 435 240 435 184 l 435 410 l 533 410 l 533 240 q 476 55 533 121 q 317 -10 420 -10 z "},"\u03af":{"ha":403,"x_min":109,"x_max":355,"o":"m 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 704 l 247 704 l 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 z "},"\u03ca":{"ha":403,"x_min":-37,"x_max":386,"o":"m 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 704 l 247 704 l 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 m 248 986 l 386 986 l 386 848 l 248 848 l 248 986 m -37 986 l 101 986 l 101 848 l -37 848 l -37 986 z "},"\u0390":{"ha":403,"x_min":-85,"x_max":440,"o":"m 273 -3 q 152 45 195 -3 q 109 183 109 94 l 109 704 l 247 704 l 247 182 q 258 142 247 156 q 290 128 269 128 l 355 128 l 355 -3 l 273 -3 m 302 987 l 440 987 l 440 848 l 302 848 l 302 987 m -85 987 l 54 987 l 54 848 l -85 848 l -85 987 m 92 864 l 192 1157 l 314 1113 l 197 828 l 92 864 z "},"\u03cd":{"ha":779,"x_min":41,"x_max":677,"o":"m 399 -10 q 249 23 311 -10 q 154 121 186 57 q 121 276 121 186 l 121 528 q 110 568 121 554 q 79 582 99 582 l 41 582 l 41 713 l 95 713 q 217 665 174 713 q 260 527 260 616 l 260 276 q 296 162 260 202 q 399 121 333 121 q 503 162 466 121 q 539 276 539 202 l 539 704 l 677 704 l 677 276 q 645 121 677 186 q 550 23 612 57 q 399 -10 488 -10 z "},"\u03cb":{"ha":779,"x_min":41,"x_max":677,"o":"m 399 -10 q 249 23 311 -10 q 154 121 186 57 q 121 276 121 186 l 121 528 q 110 568 121 554 q 79 582 99 582 l 41 582 l 41 713 l 95 713 q 217 665 174 713 q 260 527 260 616 l 260 276 q 296 162 260 202 q 399 121 333 121 q 503 162 466 121 q 539 276 539 202 l 539 704 l 677 704 l 677 276 q 645 121 677 186 q 550 23 612 57 q 399 -10 488 -10 m 456 986 l 595 986 l 595 848 l 456 848 l 456 986 m 172 986 l 310 986 l 310 848 l 172 848 l 172 986 z "},"\u03b0":{"ha":779,"x_min":41,"x_max":677,"o":"m 399 -10 q 249 23 311 -10 q 154 121 186 57 q 121 276 121 186 l 121 528 q 110 568 121 554 q 79 582 99 582 l 41 582 l 41 713 l 95 713 q 217 665 174 713 q 260 527 260 616 l 260 276 q 296 162 260 202 q 399 121 333 121 q 503 162 466 121 q 539 276 539 202 l 539 704 l 677 704 l 677 276 q 645 121 677 186 q 550 23 612 57 q 399 -10 488 -10 m 511 987 l 649 987 l 649 848 l 511 848 l 511 987 m 124 987 l 262 987 l 262 848 l 124 848 l 124 987 m 300 864 l 401 1157 l 523 1113 l 406 828 l 300 864 z "},"\u03cc":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u03ce":{"ha":1009,"x_min":88,"x_max":921,"o":"m 692 -10 q 533 55 589 -10 q 476 240 476 121 l 476 410 l 574 410 l 574 240 q 601 153 574 184 q 678 121 629 121 q 755 153 728 121 q 783 240 783 184 l 783 445 q 748 547 783 511 q 651 583 713 583 l 651 714 q 797 683 736 714 q 889 590 858 651 q 921 445 921 530 l 921 242 q 861 56 921 122 q 692 -10 801 -10 m 317 -10 q 148 56 208 -10 q 88 242 88 122 l 88 445 q 120 590 88 530 q 212 683 151 651 q 358 714 273 714 l 358 583 q 261 547 296 583 q 227 445 227 511 l 227 240 q 254 153 227 184 q 331 121 281 121 q 408 153 380 121 q 435 240 435 184 l 435 410 l 533 410 l 533 240 q 476 55 533 121 q 317 -10 420 -10 z "},"\u03ac":{"ha":793,"x_min":88,"x_max":745,"o":"m 331 -10 q 200 26 254 -10 q 117 131 145 62 q 88 296 88 199 l 88 411 q 117 575 88 507 q 200 679 145 643 q 331 714 254 714 q 477 652 425 714 q 529 479 529 591 l 529 227 q 477 52 529 114 q 331 -10 425 -10 m 351 121 q 460 167 422 121 q 499 294 499 212 l 499 411 q 460 538 499 493 q 351 583 422 583 q 259 538 292 583 q 227 411 227 493 l 227 294 q 259 166 227 212 q 351 121 292 121 m 664 -3 q 542 45 585 -3 q 499 183 499 94 l 499 704 l 637 704 l 637 182 q 649 142 637 156 q 680 128 660 128 l 745 128 l 745 -3 l 664 -3 z "},"\u03ad":{"ha":653,"x_min":81,"x_max":609,"o":"m 357 -10 q 153 45 225 -10 q 81 201 81 100 l 81 201 q 96 272 81 237 q 138 330 111 306 q 203 360 166 354 q 126 427 154 380 q 98 531 98 474 l 98 532 q 165 667 98 619 q 358 714 233 714 q 510 686 448 714 q 609 600 573 657 l 609 600 l 509 518 l 509 518 q 440 571 477 553 q 358 588 402 588 q 268 568 300 588 q 236 512 236 549 l 236 511 q 255 448 236 471 q 310 426 275 426 l 427 426 l 427 291 l 310 291 q 243 271 267 291 q 220 216 220 252 l 220 215 q 256 142 220 168 q 357 116 292 116 q 436 136 394 116 q 515 194 477 156 l 515 194 l 609 101 l 609 101 q 503 18 566 45 q 357 -10 440 -10 z "},"\u03ae":{"ha":776,"x_min":109,"x_max":674,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 536 427 q 497 542 536 501 q 389 583 458 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 611 639 549 714 q 674 427 674 564 l 674 -184 l 536 -184 l 536 427 z "},"\u0371":{"ha":513,"x_min":109,"x_max":452,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 195 408 l 452 408 l 452 283 l 195 283 l 195 408 z "},"\u0373":{"ha":669,"x_min":27,"x_max":642,"o":"m 27 986 l 165 986 l 165 690 l 27 690 l 27 986 m 503 986 l 642 986 l 642 690 l 503 690 l 503 986 m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m 27 986 l 642 986 l 642 861 l 27 861 l 27 986 z "},"\u0377":{"ha":796,"x_min":109,"x_max":688,"o":"m 551 1 l 551 500 l 567 483 l 229 1 l 109 1 l 109 704 l 245 704 l 245 193 l 229 210 l 569 704 l 688 704 l 688 1 l 551 1 z "},"\u037b":{"ha":692,"x_min":44,"x_max":604,"o":"m 299 -10 q 150 19 217 -10 q 44 100 83 47 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 150 685 83 655 q 299 714 216 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 z "},"\u037c":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 m 334 418 l 479 418 l 479 273 l 334 273 l 334 418 z "},"\u037d":{"ha":692,"x_min":44,"x_max":604,"o":"m 299 -10 q 150 19 217 -10 q 44 100 83 47 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 150 685 83 655 q 299 714 216 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 m 220 418 l 365 418 l 365 273 l 220 273 l 220 418 z "},"\u03d9":{"ha":757,"x_min":88,"x_max":669,"o":"m 309 115 l 448 115 l 448 -184 l 309 -184 l 309 115 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u03db":{"ha":720,"x_min":88,"x_max":675,"o":"m 513 -55 q 502 -21 513 -33 q 467 -10 490 -10 l 426 -10 q 238 29 313 -10 q 125 145 163 68 q 88 336 88 222 q 131 518 88 444 q 259 635 174 593 q 475 690 345 677 q 524 714 507 693 q 541 767 541 734 l 675 767 q 618 627 675 678 q 446 566 560 576 q 279 499 334 556 q 223 336 223 441 q 276 170 223 225 q 435 115 329 115 l 503 115 q 586 98 553 115 q 635 47 618 81 q 651 -39 651 13 l 651 -177 l 513 -177 l 513 -55 z "},"\u03dd":{"ha":682,"x_min":122,"x_max":648,"o":"m 122 704 l 260 704 l 260 -286 l 122 -286 l 122 704 m 190 260 l 573 262 l 573 130 l 190 129 l 190 260 m 190 704 l 648 704 l 648 572 l 190 572 l 190 704 z "},"\u03df":{"ha":821,"x_min":47,"x_max":780,"o":"m 515 -286 l 356 -286 l 621 272 l 780 272 l 515 -286 m 207 140 l 47 140 l 327 704 l 486 704 l 207 140 m 161 272 l 708 272 l 708 140 l 161 140 l 161 272 z "},"\u03e1":{"ha":796,"x_min":41,"x_max":694,"o":"m 439 -286 q 523 -7 494 -164 q 553 290 553 151 q 479 719 553 576 q 256 861 405 861 q 68 827 161 861 l 41 962 q 256 996 162 996 q 585 820 476 996 q 694 290 694 644 q 667 -6 694 152 q 589 -286 640 -163 l 439 -286 m 149 250 l 586 404 l 629 283 l 193 130 l 149 250 m 60 552 l 504 711 l 547 590 l 104 431 l 60 552 z "},"\u03d7":{"ha":924,"x_min":109,"x_max":917,"o":"m 641 -103 l 718 -103 q 763 -84 747 -103 q 779 -29 779 -64 l 779 129 l 917 129 l 917 -28 q 868 -180 917 -126 q 732 -235 820 -235 l 641 -235 l 641 -103 m 770 -3 q 648 52 691 -3 q 604 204 604 106 q 613 325 604 262 q 648 459 621 387 l 311 1 l 189 1 q 224 256 212 141 q 237 481 237 372 q 218 551 237 526 q 167 576 200 576 l 109 576 l 109 707 l 183 707 q 323 653 273 707 q 374 500 374 600 q 364 373 374 441 q 338 234 355 306 q 336 222 337 228 q 333 210 334 216 l 699 704 l 818 704 q 761 435 781 566 q 741 203 741 304 q 753 148 741 168 q 786 129 765 129 l 842 129 l 842 -3 l 770 -3 z "},"\u03d0":{"ha":770,"x_min":102,"x_max":682,"o":"m 392 -10 q 235 26 300 -10 q 136 131 170 62 q 102 296 102 199 l 102 693 q 135 857 102 789 q 232 961 168 925 q 385 996 296 996 q 531 965 471 996 q 624 872 592 933 q 655 727 655 812 l 655 712 q 634 609 655 658 q 574 531 614 561 q 479 500 534 500 l 534 441 l 302 441 l 302 573 l 392 573 q 484 611 452 573 q 517 719 517 649 l 517 727 q 482 829 517 793 q 385 865 448 865 q 278 820 316 865 q 240 693 240 775 l 240 294 q 280 167 240 212 q 392 121 319 121 q 504 161 465 121 q 544 274 544 201 l 544 289 q 504 401 544 361 q 392 441 465 441 l 392 532 q 549 504 484 532 q 648 420 614 475 q 682 289 682 366 l 682 274 q 648 121 682 184 q 549 23 614 57 q 392 -10 484 -10 z "},"\u03d1":{"ha":830,"x_min":41,"x_max":796,"o":"m 415 -10 q 266 23 328 -10 q 171 121 203 57 q 138 274 138 184 l 277 274 q 313 161 277 201 q 415 121 349 121 q 517 166 481 121 q 553 294 553 212 l 553 693 q 519 820 553 775 q 422 865 484 865 q 345 838 372 865 q 317 761 317 810 l 317 753 q 345 680 317 706 q 422 654 372 654 l 796 654 l 796 523 l 403 523 q 238 581 296 523 q 179 746 179 640 l 179 761 q 242 935 179 873 q 422 996 306 996 q 568 961 507 996 q 660 857 629 925 q 692 693 692 789 l 692 296 q 659 131 692 199 q 565 26 627 62 q 415 -10 503 -10 m 138 330 q 127 386 138 362 q 93 421 115 409 q 41 433 71 433 l 41 565 q 168 537 115 565 q 249 456 221 509 q 277 330 277 404 l 277 274 l 138 274 l 138 330 z "},"\u03d5":{"ha":926,"x_min":78,"x_max":848,"o":"m 394 465 q 453 652 394 590 q 630 714 511 714 q 794 650 739 714 q 848 458 848 587 l 848 349 q 806 149 848 229 q 677 30 763 69 q 463 -10 592 -10 q 249 30 334 -10 q 121 150 163 70 q 78 351 78 230 l 78 357 q 120 554 78 475 q 245 673 161 633 l 312 581 q 233 495 259 551 q 206 357 206 439 l 206 349 q 270 155 206 220 q 463 91 334 91 q 656 155 592 91 q 720 349 720 220 l 720 465 q 697 556 720 526 q 628 587 674 587 q 556 558 580 587 q 532 472 532 530 l 532 -204 l 394 -204 l 394 465 z "},"\u03d6":{"ha":1213,"x_min":75,"x_max":1138,"o":"m 807 -10 q 638 61 698 -10 q 578 260 578 132 l 578 410 l 675 410 l 675 260 q 706 158 675 195 q 793 121 737 121 q 881 158 850 121 q 911 260 911 195 l 911 363 q 877 518 911 463 q 780 572 842 572 l 861 616 q 1001 535 951 616 q 1050 309 1050 455 l 1050 262 q 986 61 1050 133 q 807 -10 923 -10 m 406 -10 q 226 61 290 -10 q 163 262 163 133 l 163 309 q 186 475 163 406 q 253 580 209 544 q 358 616 296 616 l 433 572 q 336 518 370 572 q 301 363 301 463 l 301 260 q 332 158 301 195 q 419 121 363 121 q 506 158 475 121 q 537 260 537 195 l 537 410 l 635 410 l 635 260 q 575 61 635 132 q 406 -10 515 -10 m 75 704 l 1138 704 l 1138 572 l 75 572 l 75 704 z "},"\u03f0":{"ha":849,"x_min":61,"x_max":795,"o":"m 722 -3 q 600 52 644 -3 q 557 204 557 106 q 565 325 557 262 q 601 459 574 387 l 264 1 l 142 1 q 177 256 164 141 q 189 481 189 372 q 171 551 189 526 q 119 576 153 576 l 61 576 l 61 707 l 136 707 q 276 653 226 707 q 326 500 326 600 q 317 373 326 441 q 291 234 307 306 q 288 222 290 228 q 286 210 287 216 l 652 704 l 770 704 q 714 435 734 566 q 694 203 694 304 q 706 148 694 168 q 739 129 718 129 l 795 129 l 795 -3 l 722 -3 z "},"\u03f1":{"ha":755,"x_min":109,"x_max":667,"o":"m 427 -10 q 304 27 357 -10 q 227 131 252 64 l 247 258 q 283 152 247 189 q 385 115 319 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 492 542 529 501 q 388 583 455 583 q 284 542 321 583 q 247 427 247 501 l 247 88 l 109 88 l 109 427 q 141 582 109 517 q 237 681 174 647 q 388 714 300 714 q 539 681 476 714 q 634 582 602 647 q 667 427 667 517 l 667 274 q 639 121 667 184 q 557 23 611 57 q 427 -10 503 -10 m 361 -223 q 167 -158 226 -223 q 109 38 109 -92 l 109 346 l 247 346 l 247 37 q 256 -35 247 -8 q 294 -77 266 -62 q 375 -92 321 -92 l 446 -92 l 446 -223 l 361 -223 m 509 -286 q 434 -223 509 -224 l 446 -92 q 597 -140 547 -92 q 648 -286 648 -189 l 509 -286 z "},"\u03f2":{"ha":692,"x_min":88,"x_max":648,"o":"m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 z "},"\u03f3":{"ha":372,"x_min":14,"x_max":271,"o":"m 14 -155 l 91 -155 q 120 -141 110 -155 q 131 -101 131 -127 l 131 704 l 269 704 l 269 -100 q 226 -237 269 -189 q 104 -286 183 -286 l 14 -286 l 14 -155 m 130 986 l 271 986 l 271 848 l 130 848 l 130 986 z "},"\u03f5":{"ha":692,"x_min":88,"x_max":648,"o":"m 189 411 l 532 411 l 532 293 l 189 293 l 189 411 m 393 -10 q 228 26 296 -10 q 124 130 160 62 q 88 296 88 199 l 88 412 q 124 575 88 507 q 228 679 160 643 q 393 714 296 714 q 496 701 448 714 q 583 663 545 688 q 648 602 622 637 l 648 602 l 548 512 l 548 512 q 478 564 518 546 q 395 583 438 583 q 271 538 315 583 q 227 412 227 493 l 227 296 q 270 167 227 212 q 395 121 314 121 q 479 141 439 121 q 548 197 519 161 l 548 197 l 648 100 l 648 100 q 583 40 621 65 q 495 3 544 16 q 393 -10 447 -10 z "},"\u03f8":{"ha":755,"x_min":109,"x_max":667,"o":"m 109 986 l 247 986 l 247 -286 l 109 -286 l 109 986 m 424 -10 q 309 21 358 -10 q 237 111 260 53 l 247 258 q 263 180 247 212 q 310 132 279 149 q 385 115 341 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 491 547 529 504 q 385 589 454 589 q 310 573 341 589 q 263 525 279 557 q 247 450 247 494 l 233 585 q 316 681 264 647 q 431 714 368 714 q 558 681 505 714 q 640 583 612 647 q 667 427 667 518 l 667 274 q 639 121 667 184 q 555 23 610 57 q 424 -10 500 -10 z "},"\u03fb":{"ha":879,"x_min":109,"x_max":770,"o":"m 233 87 l 233 -184 l 109 -184 l 109 87 l 233 87 m 648 704 l 770 704 l 770 0 l 646 0 l 646 497 l 652 454 l 481 137 l 398 137 l 227 454 l 233 497 l 233 0 l 109 0 l 109 704 l 231 704 l 439 315 l 648 704 z "},"\u03fc":{"ha":755,"x_min":34,"x_max":667,"o":"m 488 -66 l 488 -197 l 34 -197 l 34 -66 l 488 -66 m 109 427 q 141 582 109 517 q 237 681 174 647 q 388 714 300 714 q 539 681 476 714 q 634 582 602 647 q 667 427 667 517 l 667 274 q 639 121 667 184 q 557 23 611 57 q 427 -10 503 -10 q 304 28 357 -10 q 227 138 252 67 l 247 258 q 283 152 247 189 q 385 115 319 115 q 491 156 454 115 q 529 274 529 198 l 529 427 q 492 547 529 505 q 388 589 455 589 q 284 547 321 589 q 247 427 247 505 l 247 -286 l 109 -286 l 109 427 z "},"\u03e9":{"ha":693,"x_min":71,"x_max":673,"o":"m 353 -10 q 196 15 258 -10 q 102 90 134 40 q 71 216 71 140 q 97 329 71 283 q 176 402 123 375 q 309 441 229 430 q 318 442 314 441 q 328 443 323 442 q 399 457 371 448 q 441 483 427 467 q 455 521 455 498 q 432 573 455 555 q 361 590 408 590 q 284 575 323 590 q 205 529 245 559 l 205 529 l 121 630 l 121 630 q 239 693 179 672 q 361 714 298 714 q 487 692 437 714 q 562 627 536 671 q 587 518 587 584 q 566 419 587 459 q 505 355 546 379 q 402 322 465 332 q 399 322 401 322 q 397 321 398 321 q 390 320 393 321 q 383 319 387 320 q 281 296 321 310 q 222 263 241 283 q 202 216 202 243 q 240 139 202 165 q 353 114 277 114 q 471 136 412 114 q 591 201 530 157 l 591 201 l 673 100 l 673 100 q 581 39 631 63 q 475 2 532 14 q 353 -10 418 -10 z "},"\u03e7":{"ha":793,"x_min":68,"x_max":732,"o":"m 699 296 q 663 141 699 208 q 561 37 627 74 q 408 0 495 0 l 408 132 q 488 152 454 132 q 541 209 522 172 q 560 294 560 245 l 560 302 q 534 449 560 386 q 459 548 507 513 q 347 583 411 583 q 261 558 294 583 q 229 494 229 534 l 229 486 q 261 423 229 446 q 347 399 294 399 q 473 437 419 399 q 557 544 528 475 q 587 704 587 613 l 732 704 q 682 475 732 574 q 541 322 632 376 q 328 268 449 268 q 204 294 258 268 q 120 368 150 320 q 91 479 91 416 l 91 494 q 123 609 91 559 q 213 687 155 659 q 347 714 271 714 q 532 663 452 714 q 655 518 611 612 q 699 302 699 425 l 699 296 m 271 0 q 215 -16 234 0 q 196 -63 196 -32 l 68 -63 q 116 83 68 35 q 260 132 163 132 l 408 132 l 408 0 l 271 0 z "},"\u03e3":{"ha":1105,"x_min":109,"x_max":1004,"o":"m 321 -92 l 737 -92 q 819 -77 791 -92 q 856 -35 846 -62 q 865 37 865 -8 l 865 346 l 1004 346 l 1004 38 q 945 -158 1004 -92 q 751 -223 886 -223 l 331 -223 l 321 -92 m 129 -286 q 177 -140 129 -189 q 321 -92 224 -92 l 342 -223 q 286 -239 305 -224 q 267 -286 267 -255 l 129 -286 m 366 -10 q 176 59 243 -10 q 109 255 109 129 l 109 704 l 247 704 l 247 250 q 278 159 247 191 q 366 126 309 126 q 455 159 424 126 q 487 250 487 191 l 487 704 l 598 704 l 598 255 q 571 112 598 172 q 492 21 544 52 q 366 -10 439 -10 m 731 -10 q 614 21 663 -10 q 539 112 565 52 q 514 255 514 172 l 514 704 l 625 704 l 625 250 q 656 159 625 191 q 745 126 688 126 q 834 159 802 126 q 865 250 865 191 l 865 704 l 1004 704 l 1004 255 l 954 215 q 906 91 937 141 q 832 16 876 41 q 731 -10 788 -10 z "},"\u03ed":{"ha":777,"x_min":109,"x_max":689,"o":"m 399 -10 q 242 26 307 -10 q 143 131 177 62 q 109 296 109 199 l 109 384 l 206 527 q 278 646 222 606 q 426 687 333 687 q 568 651 509 687 q 658 548 627 616 q 689 384 689 479 l 689 294 q 655 130 689 198 q 555 26 621 62 q 399 -10 490 -10 m 398 121 q 511 166 471 121 q 551 294 551 212 l 551 384 q 511 511 551 466 q 398 555 471 555 q 287 511 326 555 q 247 384 247 466 l 247 294 q 287 166 247 212 q 398 121 326 121 m 109 636 q 142 795 109 732 q 243 890 176 859 q 411 923 310 922 q 475 931 450 924 q 514 952 501 938 q 527 986 527 966 l 655 986 q 629 885 655 926 q 552 825 604 845 q 422 805 500 805 q 321 788 361 805 q 260 736 281 770 q 240 650 240 702 l 240 376 l 109 376 l 109 636 z "},"\u037a":{"ha":239,"x_min":41,"x_max":273,"o":"m 165 -115 q 177 -154 165 -140 q 208 -168 188 -168 l 273 -168 l 273 -286 l 178 -286 q 77 -244 113 -286 q 41 -127 41 -203 l 41 -54 l 165 -54 l 165 -115 z "},"\u2133":{"ha":1120,"x_min":109,"x_max":1039,"o":"m 899 986 l 1039 986 l 951 0 l 812 0 l 890 779 l 901 736 l 593 137 l 490 137 l 291 722 l 301 779 l 248 0 l 109 0 l 180 986 l 320 986 l 552 321 l 899 986 z "},"\u2070":{"ha":457,"x_min":68,"x_max":396,"o":"m 232 559 q 111 605 153 559 q 68 732 68 650 l 68 817 q 111 945 68 899 q 232 991 153 991 q 353 945 311 991 q 396 816 396 899 l 396 732 q 353 604 396 650 q 232 559 310 559 m 232 667 q 269 682 256 667 q 283 726 283 697 l 283 825 q 269 867 283 852 q 232 882 256 882 q 194 867 208 882 q 181 825 181 852 l 181 726 q 194 682 181 696 q 232 667 208 667 z "},"\xb9":{"ha":337,"x_min":68,"x_max":276,"o":"m 276 564 l 163 564 l 163 861 l 68 804 l 68 928 l 171 986 l 276 986 l 276 564 z "},"\xb2":{"ha":434,"x_min":68,"x_max":373,"o":"m 82 659 l 174 739 q 180 744 177 741 q 186 749 182 747 q 232 794 217 777 q 253 826 248 812 q 259 860 259 841 l 259 860 q 250 886 259 878 q 224 895 241 895 q 194 883 205 895 q 179 848 182 871 l 179 848 l 68 848 l 68 848 q 112 955 73 918 q 220 991 152 991 q 335 958 296 991 q 373 861 373 926 l 373 861 q 353 795 373 826 q 283 715 334 765 l 231 665 l 373 665 l 373 564 l 82 564 l 82 659 z "},"\xb3":{"ha":467,"x_min":68,"x_max":406,"o":"m 237 559 q 143 575 181 559 q 87 623 106 591 q 68 702 68 654 l 68 702 l 176 702 l 176 702 q 191 663 176 676 q 236 650 206 650 q 274 661 261 650 q 288 694 288 672 l 288 693 q 271 728 288 717 q 220 739 254 739 l 201 739 l 201 818 l 220 818 q 266 830 251 818 q 281 865 281 842 l 281 863 q 270 890 281 881 q 237 899 259 899 q 198 887 211 899 q 184 851 184 875 l 184 851 l 75 851 l 75 851 q 93 928 75 897 q 147 975 111 960 q 237 991 183 991 q 358 962 318 991 q 399 875 399 933 l 399 873 q 377 814 399 838 q 313 779 356 791 q 382 748 359 772 q 406 682 406 724 l 406 682 q 363 589 406 620 q 237 559 321 559 z "},"\u2074":{"ha":453,"x_min":68,"x_max":392,"o":"m 68 710 l 181 986 l 293 986 l 184 710 l 392 710 l 392 619 l 68 619 l 68 710 m 263 787 l 358 787 l 358 564 l 263 564 l 263 787 z "},"\xbd":{"ha":942,"x_min":68,"x_max":874,"o":"m 651 986 l 772 986 l 237 0 l 115 0 l 651 986 m 276 564 l 163 564 l 163 861 l 68 804 l 68 928 l 171 986 l 276 986 l 276 564 m 583 96 l 675 175 q 681 180 678 178 q 687 186 684 183 q 733 231 718 213 q 754 263 749 248 q 760 296 760 277 l 760 296 q 751 323 760 314 q 726 332 743 332 q 695 319 707 332 q 680 284 684 307 l 680 284 l 569 284 l 569 284 q 613 391 574 355 q 721 427 653 427 q 836 395 798 427 q 874 298 874 362 l 874 297 q 854 232 874 262 q 784 152 835 201 l 732 101 l 874 101 l 874 0 l 583 0 l 583 96 z "},"\xbc":{"ha":950,"x_min":68,"x_max":882,"o":"m 651 986 l 772 986 l 237 0 l 115 0 l 651 986 m 558 146 l 671 422 l 783 422 l 675 146 l 882 146 l 882 56 l 558 56 l 558 146 m 753 223 l 848 223 l 848 0 l 753 0 l 753 223 m 276 564 l 163 564 l 163 861 l 68 804 l 68 928 l 171 986 l 276 986 l 276 564 z "},"\xbe":{"ha":977,"x_min":68,"x_max":909,"o":"m 720 986 l 841 986 l 305 0 l 184 0 l 720 986 m 585 146 l 699 422 l 810 422 l 702 146 l 909 146 l 909 56 l 585 56 l 585 146 m 781 223 l 876 223 l 876 0 l 781 0 l 781 223 m 237 559 q 110 594 153 559 q 68 702 68 630 l 68 702 l 176 702 l 176 702 q 191 663 176 676 q 236 650 206 650 q 274 661 261 650 q 288 694 288 672 l 288 693 q 271 728 288 717 q 220 739 254 739 l 201 739 l 201 818 l 220 818 q 266 830 251 818 q 281 865 281 842 l 281 863 q 270 890 281 881 q 237 899 259 899 q 198 887 211 899 q 184 851 184 875 l 184 851 l 75 851 l 75 851 q 116 956 75 921 q 237 991 157 991 q 358 962 318 991 q 399 875 399 933 l 399 873 q 377 814 399 838 q 313 779 356 791 q 382 748 359 772 q 406 682 406 724 l 406 682 q 363 589 406 620 q 237 559 321 559 z "},"*":{"ha":597,"x_min":35,"x_max":562,"o":"m 255 771 l 342 835 l 495 625 l 408 561 l 255 771 m 102 625 l 255 835 l 342 771 l 190 561 l 102 625 m 35 832 l 68 935 l 315 854 l 282 751 l 35 832 m 245 1063 l 353 1063 l 353 803 l 245 803 l 245 1063 m 282 854 l 529 935 l 562 832 l 315 751 l 282 854 z "},"\\\\":{"ha":526,"x_min":-58,"x_max":532,"o":"m 75 1103 l 532 -187 l 400 -187 l -58 1103 l 75 1103 z "},"\xb7":{"ha":294,"x_min":75,"x_max":220,"o":"m 75 427 l 220 427 l 220 281 l 75 281 l 75 427 z "},"\u2022":{"ha":385,"x_min":75,"x_max":310,"o":"m 75 480 l 310 480 l 310 245 l 75 245 l 75 480 z "},":":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 145 l 230 145 l 230 0 l 85 0 l 85 145 m 85 711 l 230 711 l 230 566 l 85 566 l 85 711 z "},",":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 145 l 230 145 l 230 -75 l 85 -225 l 85 145 z "},"\u2026":{"ha":810,"x_min":85,"x_max":725,"o":"m 85 145 l 230 145 l 230 0 l 85 0 l 85 145 m 337 145 l 482 145 l 482 0 l 337 0 l 337 145 m 580 145 l 725 145 l 725 0 l 580 0 l 580 145 z "},"!":{"ha":376,"x_min":115,"x_max":260,"o":"m 119 986 l 257 986 l 257 253 l 119 253 l 119 986 m 115 145 l 260 145 l 260 0 l 115 0 l 115 145 z "},"\xa1":{"ha":376,"x_min":115,"x_max":260,"o":"m 119 451 l 257 451 l 257 -282 l 119 -282 l 119 451 m 260 704 l 260 559 l 115 559 l 115 704 l 260 704 z "},"#":{"ha":867,"x_min":61,"x_max":819,"o":"m 606 986 l 717 986 l 549 0 l 438 0 l 606 986 m 319 986 l 429 986 l 261 0 l 151 0 l 319 986 m 819 747 l 819 632 l 101 632 l 101 747 l 819 747 m 779 354 l 779 239 l 61 239 l 61 354 l 779 354 z "},".":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 145 l 230 145 l 230 0 l 85 0 l 85 145 z "},"?":{"ha":600,"x_min":27,"x_max":538,"o":"m 203 253 q 220 381 203 325 q 259 476 236 437 q 319 565 282 515 q 362 626 347 602 q 388 680 378 650 q 398 743 398 709 l 398 744 q 368 836 398 803 q 283 868 338 868 q 198 828 229 868 q 168 713 168 787 l 168 713 l 27 713 l 27 713 q 61 866 30 803 q 149 963 92 930 q 282 996 205 996 q 420 966 363 996 q 508 880 478 937 q 538 743 538 823 l 538 743 q 526 656 538 694 q 495 589 513 617 q 446 519 477 560 q 391 443 412 476 q 356 362 370 409 q 342 253 342 315 l 203 253 m 200 145 l 345 145 l 345 0 l 200 0 l 200 145 z "},"\xbf":{"ha":572,"x_min":61,"x_max":572,"o":"m 317 -286 q 179 -256 237 -286 q 91 -170 121 -227 q 61 -33 61 -113 l 61 -33 q 74 54 61 16 q 104 121 86 93 q 153 191 122 150 q 208 268 187 234 q 243 348 229 301 q 258 457 258 395 l 396 457 q 380 329 396 385 q 340 234 363 273 q 280 145 317 195 q 237 84 253 108 q 212 30 222 60 q 201 -33 201 1 l 201 -34 q 232 -125 201 -93 q 316 -158 262 -158 q 401 -118 371 -158 q 432 -3 431 -77 l 432 -3 l 572 -3 l 572 -3 q 538 -156 570 -93 q 451 -253 507 -220 q 317 -286 395 -286 m 399 565 l 254 565 l 254 710 l 399 710 l 399 565 z "},"\\"":{"ha":526,"x_min":88,"x_max":437,"o":"m 88 986 l 227 986 l 227 640 l 88 640 l 88 986 m 299 986 l 437 986 l 437 640 l 299 640 l 299 986 z "},"\'":{"ha":247,"x_min":54,"x_max":193,"o":"m 54 986 l 193 986 l 193 640 l 54 640 l 54 986 z "},";":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 145 l 230 145 l 230 -75 l 85 -225 l 85 145 m 85 711 l 230 711 l 230 566 l 85 566 l 85 711 z "},"/":{"ha":526,"x_min":-7,"x_max":583,"o":"m 125 -187 l -7 -187 l 451 1103 l 583 1103 l 125 -187 z "},"_":{"ha":605,"x_min":20,"x_max":585,"o":"m 585 0 l 585 -132 l 20 -132 l 20 0 l 585 0 z "},"{":{"ha":500,"x_min":95,"x_max":473,"o":"m 95 505 q 180 532 150 505 q 210 609 210 559 l 210 886 q 279 1078 210 1010 q 473 1145 348 1145 l 473 1014 q 381 985 414 1014 q 349 902 349 956 l 349 608 q 282 435 349 496 q 95 374 216 374 l 95 505 m 473 -267 q 279 -199 348 -267 q 210 -8 210 -132 l 210 270 q 180 347 210 319 q 95 374 150 374 l 95 505 q 282 442 216 505 q 349 262 349 378 l 349 -22 q 381 -105 349 -76 q 473 -135 414 -135 l 473 -267 z "},"}":{"ha":500,"x_min":27,"x_max":406,"o":"m 406 374 q 218 435 285 374 q 152 608 152 496 l 152 902 q 119 985 152 956 q 27 1014 87 1014 l 27 1145 q 221 1078 153 1145 q 290 886 290 1010 l 290 609 q 320 532 290 559 q 406 505 351 505 l 406 374 m 27 -135 q 119 -105 87 -135 q 152 -22 152 -76 l 152 262 q 218 442 152 378 q 406 505 284 505 l 406 374 q 320 347 351 374 q 290 270 290 319 l 290 -8 q 221 -199 290 -132 q 27 -267 153 -267 l 27 -135 z "},"[":{"ha":408,"x_min":129,"x_max":388,"o":"m 129 1103 l 260 1103 l 260 -221 l 129 -221 l 129 1103 m 197 -96 l 388 -96 l 388 -221 l 197 -221 l 197 -96 m 197 1103 l 388 1103 l 388 978 l 197 978 l 197 1103 z "},"]":{"ha":408,"x_min":20,"x_max":279,"o":"m 148 1103 l 279 1103 l 279 -221 l 148 -221 l 148 1103 m 20 -96 l 212 -96 l 212 -221 l 20 -221 l 20 -96 m 20 1103 l 212 1103 l 212 978 l 20 978 l 20 1103 z "},"(":{"ha":471,"x_min":122,"x_max":458,"o":"m 363 -212 q 182 81 242 -81 q 122 439 122 243 q 182 798 122 635 q 363 1091 242 960 l 458 1005 q 304 750 355 891 q 254 439 254 609 q 304 129 254 270 q 458 -127 355 -12 l 363 -212 z "},")":{"ha":471,"x_min":14,"x_max":349,"o":"m 14 -127 q 167 129 116 -12 q 218 439 218 270 q 167 750 218 609 q 14 1005 116 891 l 109 1091 q 289 798 229 960 q 349 439 349 635 q 289 81 349 243 q 109 -212 229 -81 l 14 -127 z "},"\u2014":{"ha":1189,"x_min":109,"x_max":1087,"o":"m 1087 419 l 1087 288 l 109 288 l 109 419 l 1087 419 z "},"\u2013":{"ha":774,"x_min":109,"x_max":673,"o":"m 673 419 l 673 288 l 109 288 l 109 419 l 673 419 z "},"\u2015":{"ha":1189,"x_min":109,"x_max":1087,"o":"m 1087 419 l 1087 288 l 109 288 l 109 419 l 1087 419 z "},"-":{"ha":666,"x_min":109,"x_max":564,"o":"m 564 419 l 564 288 l 109 288 l 109 419 l 564 419 z "},"\xad":{"ha":666,"x_min":109,"x_max":564,"o":"m 564 419 l 564 288 l 109 288 l 109 419 l 564 419 z "},"\xab":{"ha":698,"x_min":27,"x_max":677,"o":"m 518 595 l 677 595 l 461 353 l 302 353 l 518 595 m 27 353 l 186 353 l 403 111 l 243 111 l 27 353 m 243 595 l 403 595 l 186 353 l 27 353 l 243 595 m 302 353 l 461 353 l 677 111 l 518 111 l 302 353 z "},"\xbb":{"ha":698,"x_min":20,"x_max":671,"o":"m 295 595 l 454 595 l 671 353 l 511 353 l 295 595 m 237 353 l 396 353 l 180 111 l 20 111 l 237 353 m 20 595 l 180 595 l 396 353 l 237 353 l 20 595 m 511 353 l 671 353 l 454 111 l 295 111 l 511 353 z "},"\u2039":{"ha":430,"x_min":27,"x_max":410,"o":"m 243 595 l 410 595 l 193 353 l 27 353 l 243 595 m 27 353 l 193 353 l 410 111 l 243 111 l 27 353 z "},"\u203a":{"ha":430,"x_min":20,"x_max":403,"o":"m 20 595 l 186 595 l 403 353 l 237 353 l 20 595 m 237 353 l 403 353 l 186 111 l 20 111 l 237 353 z "},"\u201e":{"ha":444,"x_min":54,"x_max":389,"o":"m 244 145 l 389 145 l 389 -75 l 244 -225 l 244 145 m 54 145 l 199 145 l 199 -75 l 54 -225 l 54 145 z "},"\u201c":{"ha":444,"x_min":54,"x_max":389,"o":"m 244 822 l 389 972 l 389 602 l 244 602 l 244 822 m 54 822 l 199 972 l 199 602 l 54 602 l 54 822 z "},"\u201d":{"ha":444,"x_min":54,"x_max":389,"o":"m 244 986 l 389 986 l 389 766 l 244 616 l 244 986 m 54 986 l 199 986 l 199 766 l 54 616 l 54 986 z "},"\u2018":{"ha":247,"x_min":51,"x_max":196,"o":"m 51 822 l 196 972 l 196 602 l 51 602 l 51 822 z "},"\u2019":{"ha":247,"x_min":51,"x_max":196,"o":"m 51 986 l 196 986 l 196 766 l 51 616 l 51 986 z "},"\u201a":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 138 l 230 138 l 230 -81 l 85 -232 l 85 138 z "},"\u0387":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 711 l 230 711 l 230 566 l 85 566 l 85 711 z "},"\u037e":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 145 l 230 145 l 230 -75 l 85 -225 l 85 145 m 85 711 l 230 711 l 230 566 l 85 566 l 85 711 z "},"\xa0":{"ha":373,"x_min":0,"x_max":0,"o":""},"\u20b3":{"ha":1008,"x_min":68,"x_max":940,"o":"m 445 986 l 563 986 l 926 0 l 777 0 l 504 795 l 231 0 l 81 0 l 445 986 m 940 528 l 940 430 l 68 430 l 68 528 l 940 528 m 940 338 l 940 240 l 68 240 l 68 338 l 940 338 z "},"\u20b5":{"ha":859,"x_min":102,"x_max":785,"o":"m 369 1106 l 507 1106 l 507 -120 l 369 -120 l 369 1106 m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\xa2":{"ha":665,"x_min":88,"x_max":621,"o":"m 379 -10 q 222 26 288 -10 q 122 130 157 62 q 88 296 88 199 l 88 412 q 122 575 88 507 q 222 679 157 643 q 379 714 288 714 q 476 701 431 714 q 559 663 522 688 q 621 602 596 637 l 621 602 l 521 512 l 521 512 q 457 564 494 546 q 381 583 420 583 q 267 538 307 583 q 227 412 227 493 l 227 296 q 267 162 227 210 q 381 115 307 115 q 458 134 421 115 q 521 190 494 154 l 521 190 l 621 100 l 621 100 q 559 40 595 65 q 476 3 522 16 q 379 -10 431 -10 m 300 824 l 440 824 l 440 -120 l 300 -120 l 300 824 z "},"\u20a1":{"ha":859,"x_min":102,"x_max":785,"o":"m 420 1106 l 517 1106 l 307 -120 l 210 -120 l 420 1106 m 576 1106 l 673 1106 l 463 -120 l 366 -120 l 576 1106 m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\u20a2":{"ha":859,"x_min":102,"x_max":785,"o":"m 374 575 l 513 575 l 513 41 l 374 41 l 374 575 m 701 422 q 651 446 677 437 q 597 454 625 454 q 534 419 555 454 q 513 317 513 385 l 498 452 q 559 552 523 519 q 642 585 595 585 q 722 575 686 585 q 784 544 757 565 l 701 422 m 445 -10 q 265 35 342 -10 q 144 164 187 81 q 102 357 102 248 l 102 628 q 144 821 102 738 q 265 950 187 905 q 445 996 342 996 q 601 960 530 996 q 720 857 672 924 q 785 703 768 791 l 785 703 l 643 703 l 643 703 q 600 786 630 749 q 529 842 570 822 q 445 861 488 861 q 339 832 385 861 q 269 750 294 803 q 243 628 243 698 l 243 357 q 269 235 243 288 q 339 154 294 182 q 445 125 385 125 q 529 143 489 125 q 600 197 570 161 q 643 283 630 233 l 643 283 l 785 283 l 785 283 q 720 129 768 195 q 600 26 671 62 q 445 -10 529 -10 z "},"\xa4":{"ha":799,"x_min":68,"x_max":731,"o":"m 399 197 q 251 229 313 195 q 156 326 189 262 q 123 479 123 389 q 156 631 123 568 q 250 728 189 694 q 399 761 312 761 q 549 728 487 761 q 643 631 611 695 q 675 477 675 568 q 604 271 675 344 q 399 197 533 199 m 399 316 q 509 358 470 316 q 548 477 548 401 q 509 599 548 556 q 399 642 470 642 q 290 599 328 642 q 251 477 251 556 q 290 358 251 401 q 399 316 328 316 m 68 248 l 193 374 l 294 269 l 171 145 l 68 248 m 68 705 l 171 808 l 300 680 l 188 585 l 68 705 m 490 283 l 599 380 l 731 248 l 628 145 l 490 283 m 505 685 l 628 808 l 731 705 l 595 570 l 505 685 z "},"$":{"ha":801,"x_min":61,"x_max":726,"o":"m 391 -10 q 267 6 326 -10 q 157 53 208 22 q 61 132 106 85 l 61 132 l 154 245 l 154 245 q 262 156 203 186 q 391 127 321 127 q 535 164 488 127 q 583 279 583 202 l 583 279 q 559 357 583 328 q 500 399 536 385 q 406 425 463 414 q 402 425 404 425 q 399 426 401 425 q 392 427 395 427 q 385 429 388 428 q 237 467 294 446 q 141 543 181 488 q 101 700 101 598 l 101 701 q 137 865 101 800 q 244 963 173 930 q 424 996 316 996 q 518 986 471 996 q 610 957 564 977 q 700 907 655 937 l 700 907 l 616 792 l 616 792 q 518 843 566 826 q 424 859 471 859 q 290 822 334 859 q 245 711 245 785 l 245 711 q 271 631 245 660 q 335 589 296 602 q 442 560 374 575 q 448 559 445 559 q 454 557 450 558 q 460 556 457 557 q 467 555 463 555 q 601 512 547 537 q 690 430 654 486 q 726 277 726 374 l 726 275 q 689 116 726 180 q 577 21 652 53 q 391 -10 503 -10 m 335 1106 l 473 1106 l 473 -120 l 335 -120 l 335 1106 z "},"\u20ab":{"ha":769,"x_min":88,"x_max":749,"o":"m 88 -66 l 715 -66 l 715 -197 l 88 -197 l 88 -66 m 294 913 l 749 913 l 749 781 l 294 781 l 294 913 m 529 986 l 667 986 l 667 0 l 529 0 l 529 986 m 352 -12 q 220 21 275 -12 q 137 119 165 55 q 109 274 109 184 l 109 429 q 136 585 109 520 q 217 683 164 649 q 345 716 271 716 q 459 684 408 716 q 543 592 511 651 l 529 448 q 513 525 529 493 q 466 573 496 557 q 391 590 435 590 q 284 547 322 590 q 247 427 247 505 l 247 274 q 284 156 247 197 q 391 114 322 114 q 466 131 435 114 q 513 181 496 149 q 529 259 529 214 l 538 111 q 470 23 517 58 q 352 -12 422 -12 z "},"\u20af":{"ha":1613,"x_min":34,"x_max":1538,"o":"m 43 132 l 490 132 q 664 188 600 132 q 734 348 728 245 l 755 638 l 755 640 q 755 650 755 645 q 755 660 755 655 q 700 804 755 753 q 541 854 644 854 l 94 854 l 103 986 l 546 986 q 737 949 659 986 q 857 841 816 911 q 897 669 897 770 q 896 633 897 657 l 876 353 q 819 162 869 241 q 682 41 769 83 q 476 0 595 0 l 34 0 l 43 132 m 233 986 l 372 986 l 302 0 l 164 0 l 233 986 m 978 427 q 1021 582 984 517 q 1122 681 1058 647 q 1274 714 1187 714 q 1470 648 1401 714 q 1538 458 1538 581 q 1537 427 1538 448 l 1526 274 q 1450 64 1516 138 q 1273 -10 1384 -10 q 1148 28 1200 -10 q 1076 138 1097 67 l 1105 258 q 1104 248 1104 254 l 1104 240 q 1139 147 1104 180 q 1240 115 1175 115 q 1343 156 1305 115 q 1388 274 1382 198 l 1398 427 q 1399 447 1399 433 q 1364 552 1399 515 q 1265 589 1329 589 q 1161 547 1200 589 q 1116 427 1122 505 l 1066 -286 l 928 -286 l 978 427 z "},"\u20ac":{"ha":875,"x_min":75,"x_max":800,"o":"m 75 452 l 543 452 l 543 357 l 75 357 l 75 452 m 75 627 l 543 627 l 543 532 l 75 532 l 75 627 m 479 -10 q 314 35 385 -10 q 203 164 242 81 q 163 357 163 248 l 163 628 q 203 821 163 738 q 314 950 242 905 q 479 996 385 996 q 627 963 559 996 q 739 870 694 930 q 800 730 785 810 l 800 730 l 654 730 l 654 730 q 613 801 640 770 q 552 848 587 831 q 479 865 517 865 q 386 835 427 865 q 324 752 346 806 q 302 628 302 699 l 302 357 q 324 233 302 287 q 386 151 346 180 q 479 121 427 121 q 551 136 517 121 q 613 179 586 151 q 654 242 640 206 l 654 242 l 800 242 l 800 242 q 739 110 784 167 q 626 21 693 52 q 479 -10 559 -10 z "},"\u20a0":{"ha":1081,"x_min":68,"x_max":1027,"o":"m 372 272 q 208 308 276 272 q 104 412 140 344 q 68 578 68 481 l 68 694 q 104 857 68 789 q 208 961 140 925 q 372 996 276 996 q 476 983 427 996 q 563 945 524 970 q 627 884 602 920 l 627 884 l 528 794 l 528 794 q 458 846 498 828 q 374 865 418 865 q 250 820 294 865 q 206 694 206 775 l 206 578 q 250 449 206 494 q 374 404 294 404 q 461 412 420 404 q 532 435 502 420 l 532 300 q 457 279 497 286 q 372 272 416 272 m 583 132 l 1027 132 l 1027 0 l 583 0 l 583 132 m 515 715 l 654 715 l 654 0 l 515 0 l 515 715 m 583 420 l 952 420 l 952 288 l 583 288 l 583 420 m 583 715 l 1027 715 l 1027 583 l 583 583 l 583 715 z "},"\u0192":{"ha":440,"x_min":54,"x_max":406,"o":"m 54 -155 l 89 -155 q 118 -141 108 -155 q 129 -101 129 -127 l 129 68 l 267 68 l 267 -100 q 224 -237 267 -189 q 102 -286 181 -286 l 54 -286 l 54 -155 m 129 800 q 172 940 129 893 q 304 986 215 986 l 406 986 l 406 854 l 307 854 q 277 840 288 854 q 267 801 267 825 l 267 0 l 129 0 l 129 800 m 54 704 l 406 704 l 406 586 l 54 586 l 54 704 z "},"\u20a3":{"ha":812,"x_min":41,"x_max":778,"o":"m 41 267 l 495 267 l 495 135 l 41 135 l 41 267 m 157 986 l 296 986 l 296 0 l 157 0 l 157 986 m 225 547 l 703 547 l 703 415 l 225 415 l 225 547 m 225 986 l 778 986 l 778 854 l 225 854 l 225 986 z "},"\u20b0":{"ha":878,"x_min":-41,"x_max":817,"o":"m 338 -286 l 338 -157 l 518 -157 q 641 -129 600 -157 q 682 -43 682 -100 l 682 -33 q 653 76 682 20 q 582 182 624 132 q 467 309 540 232 q 345 446 391 390 q 267 565 298 502 q 235 692 235 629 l 235 692 q 306 921 235 845 q 520 996 377 996 q 733 921 663 996 q 804 692 804 845 l 804 692 q 753 512 804 615 q 603 278 703 408 q 350 -10 502 148 l 197 155 l 95 0 l -41 0 l 190 351 l 357 177 q 529 383 460 289 q 632 554 597 477 q 666 692 666 631 l 666 692 q 630 822 666 779 q 520 865 593 865 q 409 822 446 865 q 372 692 372 779 l 372 692 q 399 589 372 640 q 465 492 425 538 q 572 378 505 447 q 701 240 652 297 q 783 111 749 182 q 817 -37 817 40 l 817 -43 q 743 -225 817 -165 q 519 -286 669 -286 l 338 -286 z "},"\u20b2":{"ha":898,"x_min":102,"x_max":796,"o":"m 369 1106 l 507 1106 l 507 -120 l 369 -120 l 369 1106 m 796 531 l 796 359 q 753 165 796 249 q 632 36 711 81 q 451 -10 554 -10 q 268 33 347 -10 q 145 155 189 76 q 102 337 102 233 l 102 628 q 144 821 102 738 q 266 950 187 905 q 447 996 344 996 q 603 960 532 996 q 723 857 675 924 q 788 703 771 791 l 788 703 l 638 703 l 638 703 q 597 788 626 753 q 528 843 568 824 q 447 861 489 861 q 340 832 386 861 q 269 750 294 803 q 243 628 243 698 l 243 337 q 269 225 243 273 q 342 151 295 178 q 451 125 389 125 q 558 152 512 125 q 629 232 604 180 q 654 356 654 284 l 654 399 l 454 399 l 454 531 l 796 531 z "},"\u20b4":{"ha":855,"x_min":61,"x_max":781,"o":"m 423 -10 q 228 22 309 -10 q 104 115 146 54 q 61 262 61 176 l 61 263 q 80 348 61 310 q 134 416 98 386 l 352 416 q 238 368 277 399 q 198 273 198 336 l 198 272 q 257 160 198 199 q 423 120 316 120 q 570 144 503 120 q 694 218 638 169 l 694 218 l 781 112 l 781 112 q 677 44 732 71 q 558 3 622 17 q 423 -10 494 -10 m 61 468 l 734 468 l 734 363 l 61 363 l 61 468 m 61 627 l 734 627 l 734 523 l 61 523 l 61 627 m 457 576 q 465 578 461 577 q 473 581 469 580 q 539 607 512 591 q 581 648 566 623 q 597 711 597 673 l 597 711 q 541 826 597 785 q 384 866 485 866 q 272 845 328 866 q 159 783 216 825 l 159 783 l 81 893 l 81 893 q 179 950 129 928 q 280 985 229 973 q 384 996 331 996 q 573 962 494 996 q 693 864 652 928 q 734 707 734 799 l 734 707 q 708 576 734 630 l 457 576 z "},"\u20ad":{"ha":945,"x_min":41,"x_max":932,"o":"m 932 541 l 932 444 l 570 444 l 532 541 l 932 541 m 41 444 l 41 541 l 225 541 l 225 444 l 41 444 m 271 433 l 707 986 l 877 986 l 251 225 l 271 433 m 163 986 l 301 986 l 301 0 l 163 0 l 163 986 m 435 526 l 545 627 l 918 0 l 749 0 l 435 526 z "},"\u20be":{"ha":995,"x_min":109,"x_max":907,"o":"m 479 61 q 278 101 361 61 q 152 216 195 140 q 109 398 109 292 l 109 564 q 156 798 109 701 q 294 945 203 895 q 513 996 385 996 q 726 948 637 996 q 860 808 814 900 q 907 587 907 717 l 907 564 l 765 564 l 765 587 q 735 735 765 674 q 649 829 705 797 q 513 861 592 861 q 371 826 430 861 q 281 725 312 791 q 250 564 250 658 l 250 398 q 277 254 250 314 q 355 163 304 194 q 479 132 407 132 l 479 61 m 109 132 l 886 132 l 886 0 l 109 0 l 109 132 m 339 1103 l 464 1103 l 464 563 l 339 563 l 339 1103 m 551 1103 l 676 1103 l 676 563 l 551 563 l 551 1103 z "},"\u20a4":{"ha":822,"x_min":61,"x_max":768,"o":"m 66 132 q 141 161 116 132 q 167 250 167 191 l 167 705 q 202 862 167 797 q 305 962 237 928 q 467 996 372 996 q 630 962 562 996 q 732 862 697 928 q 768 703 768 796 l 768 694 l 629 694 l 629 703 q 587 822 629 780 q 467 865 544 865 q 348 823 390 865 q 305 705 305 781 l 305 250 q 245 127 305 168 q 66 87 185 87 l 66 132 m 768 0 l 61 0 l 61 132 l 768 132 l 768 0 m 600 402 l 600 298 l 76 298 l 76 402 l 600 402 m 600 562 l 600 457 l 76 457 l 76 562 l 600 562 z "},"\u20ba":{"ha":869,"x_min":81,"x_max":812,"o":"m 203 132 l 491 132 q 628 166 583 132 q 673 269 673 200 l 673 386 l 812 386 l 812 269 q 733 67 812 134 q 495 0 654 0 l 203 0 l 203 132 m 183 986 l 321 986 l 321 0 l 183 0 l 183 986 m 81 411 l 586 621 l 586 496 l 81 286 l 81 411 m 81 621 l 586 831 l 586 706 l 81 496 l 81 621 z "},"\u20b6":{"ha":799,"x_min":68,"x_max":718,"o":"m 637 -3 q 512 44 552 -3 q 473 183 473 91 l 473 986 l 611 986 l 611 182 q 621 142 611 156 q 651 128 631 128 l 718 128 l 718 -3 l 637 -3 m 154 986 l 292 986 l 292 0 l 154 0 l 154 986 m 68 704 l 718 704 l 718 579 l 68 579 l 68 704 z "},"\u20bc":{"ha":1032,"x_min":88,"x_max":944,"o":"m 88 0 l 88 336 q 141 571 88 470 q 292 728 195 672 q 516 783 389 783 q 741 728 644 783 q 891 571 838 672 q 944 336 944 470 l 944 0 l 802 0 l 802 341 q 767 502 802 433 q 666 609 731 571 q 516 647 602 647 q 366 609 431 647 q 266 502 301 571 q 230 341 230 433 l 230 0 l 88 0 m 581 986 l 581 0 l 442 0 l 442 986 l 581 986 z "},"\u20a5":{"ha":1190,"x_min":109,"x_max":1088,"o":"m 471 -187 l 339 -187 l 858 899 l 990 899 l 471 -187 m 949 427 q 911 542 949 501 q 802 583 872 583 q 703 543 738 583 q 667 432 667 504 l 640 568 q 727 676 673 637 q 848 714 782 714 q 978 681 924 714 q 1060 583 1031 647 q 1088 427 1088 518 l 1088 0 l 949 0 l 949 427 m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 529 427 q 492 542 529 501 q 389 583 456 583 q 284 547 321 583 q 247 446 247 511 l 233 581 q 318 680 265 645 q 434 714 370 714 q 560 681 508 714 q 640 583 612 647 q 667 427 667 518 l 667 0 l 529 0 l 529 427 z "},"\u20a6":{"ha":1036,"x_min":58,"x_max":979,"o":"m 154 986 l 279 986 l 762 224 l 745 206 l 745 986 l 882 986 l 882 1 l 755 1 l 275 751 l 291 769 l 291 1 l 154 1 l 154 986 m 58 534 l 979 534 l 979 450 l 58 450 l 58 534 z "},"\u20bb":{"ha":997,"x_min":14,"x_max":977,"o":"m 444 -3 q 315 48 358 -3 q 273 203 273 100 l 273 806 l 412 806 l 412 216 q 430 150 412 172 q 485 127 448 127 l 755 127 l 755 -3 l 444 -3 m 119 385 l 421 385 q 451 399 441 385 q 462 439 462 412 l 462 486 l 573 486 l 573 439 q 581 398 573 412 q 607 385 589 385 q 641 439 641 385 l 641 486 l 752 486 l 752 439 q 765 399 752 414 q 797 385 777 385 l 797 281 q 737 293 761 281 q 698 331 713 306 q 663 294 686 307 q 607 281 639 281 q 551 292 569 281 q 519 331 532 304 q 485 293 508 306 q 428 281 462 281 l 119 281 l 119 385 m 227 579 q 70 635 125 579 q 14 792 14 691 l 14 806 q 66 946 14 897 q 216 996 119 996 q 361 946 309 996 q 412 806 412 897 l 412 785 l 273 785 l 273 806 q 258 860 273 841 q 215 878 243 878 q 170 859 186 878 q 153 806 153 840 l 153 790 q 176 727 153 749 q 242 704 199 704 l 734 704 l 734 579 l 227 579 m 796 385 q 842 406 827 385 q 857 467 857 426 l 857 472 q 827 552 857 526 q 734 579 796 579 l 734 704 q 916 649 856 704 q 977 485 977 595 l 977 480 q 932 330 977 380 q 796 281 887 281 l 796 385 z "},"\u20a7":{"ha":880,"x_min":81,"x_max":843,"o":"m 273 514 l 480 514 q 559 535 525 514 q 611 595 593 556 q 630 684 630 633 l 630 684 q 611 773 630 734 q 559 833 593 812 q 480 854 525 854 l 273 854 l 273 986 l 475 986 q 631 948 564 986 q 735 842 698 911 q 772 684 772 774 l 772 684 q 735 525 772 593 q 631 420 698 457 q 475 382 564 382 l 273 382 l 273 514 m 202 986 l 340 986 l 340 0 l 202 0 l 202 986 m 81 747 l 843 747 l 843 622 l 81 622 l 81 747 z "},"\u20b1":{"ha":880,"x_min":81,"x_max":843,"o":"m 273 514 l 480 514 q 559 535 525 514 q 611 595 593 556 q 630 684 630 633 l 630 684 q 611 773 630 734 q 559 833 593 812 q 480 854 525 854 l 273 854 l 273 986 l 475 986 q 631 948 564 986 q 735 842 698 911 q 772 684 772 774 l 772 684 q 735 525 772 593 q 631 420 698 457 q 475 382 564 382 l 273 382 l 273 514 m 202 986 l 340 986 l 340 0 l 202 0 l 202 986 m 81 665 l 843 665 l 843 554 l 81 554 l 81 665 m 81 814 l 843 814 l 843 703 l 81 703 l 81 814 z "},"\u20bd":{"ha":928,"x_min":81,"x_max":877,"o":"m 81 514 l 536 514 l 536 382 l 81 382 l 81 514 m 81 280 l 536 280 l 536 149 l 81 149 l 81 280 m 270 514 l 585 514 q 664 535 630 514 q 716 595 698 556 q 735 684 735 633 l 735 684 q 716 773 735 734 q 664 833 698 812 q 585 854 630 854 l 270 854 l 270 986 l 581 986 q 736 948 669 986 q 840 842 803 911 q 877 684 877 774 l 877 684 q 840 525 877 593 q 736 420 803 457 q 581 382 669 382 l 270 382 l 270 514 m 199 986 l 337 986 l 337 0 l 199 0 l 199 986 z "},"\u20a8":{"ha":1605,"x_min":122,"x_max":1537,"o":"m 182 549 l 519 549 q 589 568 558 549 q 636 622 619 587 q 652 702 652 656 l 652 702 q 636 782 652 747 q 589 836 619 817 q 519 855 559 855 l 182 855 l 182 987 l 513 987 q 664 951 599 987 q 764 851 728 916 q 800 702 800 787 l 800 702 q 764 552 800 617 q 663 452 728 488 q 513 417 598 417 l 182 417 l 182 549 m 122 987 l 260 987 l 260 0 l 122 0 l 122 987 m 451 448 l 589 479 l 841 0 l 677 0 l 451 448 m 1242 -10 q 1125 2 1180 -10 q 1023 39 1071 14 q 936 100 976 63 l 936 100 l 1018 201 l 1018 201 q 1131 136 1075 157 q 1242 114 1187 114 q 1365 139 1324 114 q 1407 216 1407 165 q 1384 267 1407 250 q 1329 289 1362 283 q 1235 300 1295 295 q 1223 300 1230 300 q 1212 301 1217 300 q 1206 301 1209 301 q 1201 302 1204 302 q 1085 322 1133 307 q 1006 376 1038 336 q 975 491 975 416 q 1005 615 975 566 q 1096 689 1036 665 q 1247 714 1156 714 q 1352 704 1302 714 q 1447 674 1402 694 q 1535 623 1493 654 l 1535 623 l 1451 522 l 1451 522 q 1347 573 1398 556 q 1247 590 1296 590 q 1141 566 1177 590 q 1106 494 1106 542 q 1126 451 1106 465 q 1177 432 1146 437 q 1263 424 1207 427 q 1272 423 1267 423 q 1281 422 1276 423 q 1285 422 1283 422 q 1289 422 1287 422 q 1415 402 1363 417 q 1502 343 1467 387 q 1537 216 1537 299 q 1505 90 1537 140 q 1407 15 1472 40 q 1242 -10 1341 -10 z "},"\u20b9":{"ha":859,"x_min":109,"x_max":770,"o":"m 109 501 l 323 501 q 410 524 372 501 q 469 587 448 546 q 490 682 490 628 l 490 682 q 470 776 490 735 q 411 840 449 817 q 323 862 373 862 l 109 862 l 109 960 l 358 960 q 501 923 439 960 q 597 818 563 886 q 631 661 631 750 l 631 661 q 591 512 631 576 q 478 412 551 447 q 311 376 406 376 l 109 376 l 109 501 m 316 407 l 454 438 l 706 0 l 542 0 l 316 407 m 109 746 l 770 746 l 770 623 l 109 623 l 109 746 m 109 986 l 770 986 l 770 861 l 109 861 l 109 986 z "},"\u20aa":{"ha":978,"x_min":109,"x_max":869,"o":"m 109 795 l 402 795 q 546 764 486 795 q 637 671 606 732 q 669 526 669 611 l 669 249 l 537 249 l 537 528 q 502 621 537 588 q 403 654 467 654 l 240 654 l 240 0 l 109 0 l 109 795 m 583 0 q 438 32 498 0 q 347 124 378 64 q 316 269 316 184 l 316 547 l 448 547 l 448 267 q 483 175 448 208 q 582 142 518 142 l 738 142 l 738 795 l 869 795 l 869 0 l 583 0 z "},"\u20b7":{"ha":842,"x_min":34,"x_max":767,"o":"m 630 273 q 603 354 630 324 q 534 399 576 385 q 425 426 492 414 l 416 427 q 411 428 413 428 q 406 429 408 429 q 244 468 307 446 q 138 546 182 489 q 94 707 94 602 l 94 707 q 135 864 94 799 q 255 962 176 928 q 444 996 334 996 q 548 985 497 996 q 649 950 600 973 q 747 893 699 928 l 747 893 l 669 783 l 669 783 q 556 845 612 825 q 444 866 500 866 q 287 826 343 866 q 231 711 231 785 l 231 711 q 260 631 231 660 q 332 588 289 602 q 452 559 375 574 q 457 558 454 558 q 462 557 459 557 q 469 555 465 556 q 476 554 473 555 q 626 511 566 536 q 727 430 686 486 q 767 277 767 374 l 767 262 l 630 262 l 630 273 m 335 -10 q 113 38 191 -10 q 34 173 34 85 q 59 250 34 222 q 132 277 85 277 q 198 253 174 277 q 222 187 222 229 l 222 -79 l 162 -79 l 162 187 q 153 219 162 208 q 128 230 144 230 q 101 221 110 230 q 93 193 93 212 q 156 110 93 139 q 334 80 219 80 q 557 126 484 80 q 630 272 630 173 l 767 272 q 718 114 767 176 q 572 20 668 51 q 335 -10 475 -10 m 487 155 q 474 198 487 184 q 435 212 461 212 q 397 199 410 212 q 385 157 385 185 l 371 194 q 410 256 387 235 q 465 277 434 277 q 531 247 509 277 q 553 155 553 216 l 553 -79 l 487 -79 l 487 155 m 325 155 q 312 198 325 184 q 272 212 298 212 q 235 200 247 212 q 222 163 222 188 l 217 210 q 254 260 232 243 q 305 277 276 277 q 365 247 345 277 q 385 155 385 216 l 385 -79 l 325 -79 l 325 155 z "},"\xa3":{"ha":822,"x_min":61,"x_max":768,"o":"m 66 132 q 141 161 116 132 q 167 250 167 191 l 167 705 q 202 862 167 797 q 305 962 237 928 q 467 996 372 996 q 630 962 562 996 q 732 862 697 928 q 768 703 768 796 l 768 694 l 629 694 l 629 703 q 587 822 629 780 q 467 865 544 865 q 348 823 390 865 q 305 705 305 781 l 305 250 q 245 127 305 168 q 66 87 185 87 l 66 132 m 768 0 l 61 0 l 61 132 l 768 132 l 768 0 m 600 477 l 600 372 l 76 372 l 76 477 l 600 477 z "},"\u20b8":{"ha":669,"x_min":-14,"x_max":682,"o":"m 265 709 l 404 709 l 404 0 l 265 0 l 265 709 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 m -14 789 l 682 789 l 682 658 l -14 658 l -14 789 z "},"\u20ae":{"ha":669,"x_min":-14,"x_max":682,"o":"m 81 486 l 586 696 l 586 570 l 81 360 l 81 486 m 81 275 l 586 486 l 586 360 l 81 150 l 81 275 m 265 905 l 404 905 l 404 0 l 265 0 l 265 905 m -14 986 l 682 986 l 682 854 l -14 854 l -14 986 z "},"\u20a9":{"ha":1203,"x_min":14,"x_max":1190,"o":"m 14 534 l 1190 534 l 1190 450 l 14 450 l 14 534 m 554 986 l 649 986 l 851 213 l 1025 986 l 1169 986 l 928 0 l 787 0 l 606 689 l 416 0 l 275 0 l 34 986 l 178 986 l 352 213 l 554 986 z "},"\xa5":{"ha":699,"x_min":-20,"x_max":719,"o":"m 117 345 l 581 345 l 581 263 l 117 263 l 117 345 m 117 182 l 581 182 l 581 100 l 117 100 l 117 182 m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 z "},"+":{"ha":734,"x_min":95,"x_max":646,"o":"m 646 520 l 646 389 l 95 389 l 95 520 l 646 520 m 439 179 l 301 179 l 301 730 l 439 730 l 439 179 z "},"\xd7":{"ha":699,"x_min":95,"x_max":611,"o":"m 96 281 l 515 717 l 611 625 l 192 185 l 96 281 m 95 625 l 184 714 l 611 281 l 522 192 l 95 625 z "},"\xf7":{"ha":670,"x_min":95,"x_max":582,"o":"m 275 724 l 413 724 l 413 586 l 275 586 l 275 724 m 95 519 l 582 519 l 582 388 l 95 388 l 95 519 m 275 321 l 413 321 l 413 183 l 275 183 l 275 321 z "},"=":{"ha":637,"x_min":95,"x_max":549,"o":"m 95 628 l 549 628 l 549 496 l 95 496 l 95 628 m 95 407 l 549 407 l 549 275 l 95 275 l 95 407 z "},">":{"ha":596,"x_min":95,"x_max":549,"o":"m 95 729 l 549 452 l 302 452 l 95 571 l 95 729 m 302 452 l 549 452 l 95 174 l 95 333 l 302 452 z "},"<":{"ha":589,"x_min":47,"x_max":501,"o":"m 294 452 l 47 452 l 501 729 l 501 571 l 294 452 m 501 174 l 47 452 l 294 452 l 501 333 l 501 174 z "},"\xb1":{"ha":734,"x_min":95,"x_max":646,"o":"m 646 554 l 646 436 l 95 436 l 95 554 l 646 554 m 436 233 l 304 233 l 304 730 l 436 730 l 436 233 m 646 297 l 646 179 l 95 179 l 95 297 l 646 297 z "},"~":{"ha":713,"x_min":95,"x_max":625,"o":"m 488 353 q 422 363 452 353 q 361 392 392 374 l 339 405 q 297 428 314 420 q 263 436 280 436 q 228 417 239 436 q 216 362 216 399 l 216 355 l 95 355 l 95 372 q 130 518 95 469 q 233 567 164 567 q 306 554 274 567 q 375 518 337 541 q 377 517 376 517 q 380 515 378 516 q 381 515 380 515 q 382 514 381 515 q 425 491 409 498 q 457 484 440 484 q 493 503 481 484 q 505 563 505 523 l 505 570 l 625 570 l 625 553 q 591 403 625 453 q 488 353 557 353 z "},"\xac":{"ha":726,"x_min":95,"x_max":637,"o":"m 95 583 l 637 583 l 637 452 l 95 452 l 95 583 m 499 537 l 637 537 l 637 275 l 499 275 l 499 537 z "},"\xb5":{"ha":827,"x_min":109,"x_max":779,"o":"m 109 704 l 247 704 l 247 92 l 239 92 l 247 -190 l 109 -190 l 109 704 m 387 -10 q 301 7 335 -10 q 250 59 267 24 q 231 146 233 94 l 247 260 q 282 156 247 191 q 387 121 317 121 q 497 156 460 121 q 533 260 533 191 l 556 146 q 507 29 549 68 q 387 -10 465 -10 m 697 -3 q 575 45 618 -3 q 532 183 532 94 l 532 704 l 671 704 l 671 182 q 682 142 671 156 q 713 128 693 128 l 779 128 l 779 -3 l 697 -3 z "},"%":{"ha":954,"x_min":68,"x_max":886,"o":"m 680 986 l 802 986 l 266 0 l 144 0 l 680 986 m 722 -10 q 601 36 644 -10 q 558 163 558 81 l 558 248 q 601 376 558 330 q 722 422 644 422 q 844 376 801 422 q 886 247 886 330 l 886 163 q 843 35 886 81 q 722 -10 800 -10 m 722 98 q 760 113 746 98 q 773 157 773 128 l 773 256 q 760 298 773 283 q 722 313 746 313 q 685 298 698 313 q 671 256 671 283 l 671 157 q 685 113 671 127 q 722 98 698 98 m 232 564 q 111 609 153 564 q 68 737 68 655 l 68 822 q 111 950 68 904 q 232 996 153 996 q 353 950 311 996 q 396 821 396 904 l 396 737 q 353 609 396 654 q 232 564 310 564 m 232 671 q 269 687 256 671 q 283 730 283 702 l 283 830 q 269 872 283 857 q 232 887 256 887 q 194 872 208 887 q 181 829 181 857 l 181 730 q 194 686 181 701 q 232 671 208 671 z "},"\u2030":{"ha":1328,"x_min":68,"x_max":1260,"o":"m 1096 -6 q 975 40 1017 -6 q 932 168 932 85 l 932 252 q 975 380 932 334 q 1096 426 1017 426 q 1217 380 1175 426 q 1260 251 1260 334 l 1260 168 q 1217 39 1260 85 q 1096 -6 1174 -6 m 1096 102 q 1133 117 1120 102 q 1147 161 1147 132 l 1147 260 q 1133 302 1147 288 q 1096 317 1120 317 q 1058 302 1072 317 q 1045 260 1045 288 l 1045 161 q 1058 117 1045 132 q 1096 102 1072 102 m 680 986 l 802 986 l 266 0 l 144 0 l 680 986 m 722 -10 q 601 36 644 -10 q 558 163 558 81 l 558 248 q 601 376 558 330 q 722 422 644 422 q 844 376 801 422 q 886 247 886 330 l 886 163 q 843 35 886 81 q 722 -10 800 -10 m 722 98 q 760 113 746 98 q 773 157 773 128 l 773 256 q 760 298 773 283 q 722 313 746 313 q 685 298 698 313 q 671 256 671 283 l 671 157 q 685 113 671 127 q 722 98 698 98 m 232 564 q 111 609 153 564 q 68 737 68 655 l 68 822 q 111 950 68 904 q 232 996 153 996 q 353 950 311 996 q 396 821 396 904 l 396 737 q 353 609 396 654 q 232 564 310 564 m 232 671 q 269 687 256 671 q 283 730 283 702 l 283 830 q 269 872 283 857 q 232 887 256 887 q 194 872 208 887 q 181 829 181 857 l 181 730 q 194 686 181 701 q 232 671 208 671 z "},"@":{"ha":1236,"x_min":102,"x_max":1135,"o":"m 586 -10 q 407 66 467 -10 q 348 294 348 142 l 348 410 q 415 638 348 563 q 618 714 483 714 q 821 638 754 714 q 888 410 888 563 l 888 191 l 789 151 q 725 30 776 71 q 586 -10 675 -10 m 617 115 q 722 158 688 115 q 757 288 757 201 l 757 418 q 722 547 757 504 q 617 589 688 589 q 479 417 479 589 l 479 288 q 514 158 479 201 q 617 115 548 115 m 621 -259 q 332 -203 447 -259 q 159 -35 216 -147 q 102 245 102 77 q 102 338 102 292 q 102 430 102 384 q 161 734 104 613 q 334 916 219 856 q 621 977 448 977 q 904 916 790 977 q 1077 733 1019 855 q 1135 430 1135 612 l 1135 218 q 1086 45 1135 101 q 944 -10 1037 -10 q 797 43 846 -10 q 747 203 747 96 l 888 207 q 903 132 888 157 q 949 108 918 108 q 995 131 981 108 q 1010 205 1010 154 l 1010 430 q 966 668 1010 572 q 835 811 922 763 q 621 859 748 859 q 403 811 490 859 q 272 669 316 764 q 227 430 229 574 q 227 338 227 385 q 227 245 227 292 q 270 32 227 117 q 401 -95 313 -53 q 621 -138 488 -138 l 823 -138 l 823 -259 l 621 -259 z "},"&":{"ha":905,"x_min":88,"x_max":885,"o":"m 334 392 q 253 495 286 441 q 202 606 220 549 q 184 723 184 663 q 254 923 184 852 q 449 994 323 994 q 643 926 574 994 q 712 733 712 858 l 712 720 l 574 720 l 574 733 q 541 826 574 793 q 449 859 509 859 q 356 824 389 859 q 323 723 323 788 q 336 642 323 684 q 374 558 349 600 q 434 479 399 517 l 885 0 l 709 0 l 334 392 m 399 433 q 269 391 315 433 q 222 273 222 349 q 272 156 222 197 q 410 114 321 114 q 556 159 495 114 q 648 291 616 205 q 680 500 680 378 l 811 500 q 761 224 811 338 q 613 50 710 110 q 380 -10 516 -10 q 222 23 288 -10 q 122 120 157 56 q 88 273 88 183 q 155 466 88 393 q 342 550 221 538 l 399 433 z "},"\xb6":{"ha":958,"x_min":54,"x_max":917,"o":"m 358 318 q 199 361 269 318 q 92 480 130 404 q 54 652 54 556 q 92 824 54 748 q 198 943 130 900 q 358 986 267 986 l 538 986 l 538 318 l 358 318 m 433 986 l 571 986 l 571 -160 l 433 -160 l 433 986 m 682 986 l 821 986 l 821 -160 l 682 -160 l 682 986 m 479 986 l 917 986 l 917 854 l 479 854 l 479 986 z "},"\xa7":{"ha":800,"x_min":68,"x_max":732,"o":"m 442 288 q 554 321 515 291 q 594 403 594 351 q 573 465 594 442 q 516 499 551 488 q 427 518 481 510 q 416 520 422 519 q 405 522 410 521 q 258 553 315 534 q 162 624 202 572 q 122 773 122 675 q 155 894 122 844 q 251 970 188 944 q 404 996 315 996 q 503 985 453 996 q 598 954 552 975 q 682 905 644 934 l 590 800 q 496 848 545 831 q 406 865 448 865 q 298 841 336 865 q 260 776 260 818 q 285 709 260 733 q 347 674 310 685 q 450 652 384 663 q 469 649 459 650 q 488 645 478 647 q 613 609 561 631 q 699 536 665 586 q 732 403 732 487 q 711 302 732 346 q 648 228 690 258 q 547 183 607 198 l 442 288 m 376 -140 q 267 -129 320 -140 q 166 -96 213 -117 q 83 -43 119 -74 l 167 63 q 276 11 219 29 q 383 -8 332 -8 q 504 17 461 -8 q 547 86 547 41 q 523 143 547 122 q 462 173 498 163 q 360 193 426 182 l 322 199 q 310 201 316 200 q 298 203 304 203 q 180 239 229 217 q 99 305 130 260 q 68 422 68 349 q 95 536 68 489 q 176 611 123 584 q 305 644 229 637 l 391 524 q 379 526 385 525 q 368 527 374 526 q 360 528 364 528 q 352 528 356 528 q 243 502 281 528 q 206 425 206 477 q 225 371 206 392 q 275 339 243 350 q 353 320 306 328 l 361 319 q 379 316 370 317 q 397 313 388 315 q 545 283 488 300 q 644 219 603 265 q 685 86 685 172 q 649 -36 685 15 q 543 -113 612 -87 q 376 -140 474 -140 z "},"\xa9":{"ha":970,"x_min":75,"x_max":895,"o":"m 485 230 q 263 279 355 230 q 123 423 171 329 q 75 649 75 517 l 75 649 q 123 875 75 781 q 263 1018 171 969 q 485 1067 355 1067 q 707 1018 615 1067 q 847 875 799 969 q 895 649 895 781 l 895 649 q 847 423 895 517 q 707 279 799 329 q 485 230 614 230 m 500 428 q 348 484 401 428 q 294 641 294 540 l 294 665 q 348 821 294 766 q 500 876 401 876 q 589 859 549 876 q 658 807 629 841 l 658 807 l 595 723 l 595 723 q 549 754 571 744 q 500 764 526 764 q 434 738 457 764 q 410 665 410 712 l 410 641 q 434 563 410 591 q 500 536 457 536 q 550 548 528 536 q 601 586 573 559 l 601 586 l 665 503 l 665 503 q 592 447 633 466 q 500 428 551 428 m 485 341 q 646 378 578 341 q 748 484 713 414 q 784 649 784 553 l 784 649 q 749 819 784 748 q 646 926 713 889 q 485 963 579 963 q 323 926 391 963 q 221 819 256 889 q 186 649 186 748 l 186 649 q 221 483 186 552 q 323 377 256 414 q 485 341 391 341 z "},"\xae":{"ha":970,"x_min":75,"x_max":895,"o":"m 485 230 q 263 279 355 230 q 123 423 171 329 q 75 649 75 517 l 75 649 q 123 875 75 781 q 263 1018 171 969 q 485 1067 355 1067 q 707 1018 615 1067 q 847 875 799 969 q 895 649 895 781 l 895 649 q 847 423 895 517 q 707 279 799 329 q 485 230 614 230 m 322 862 l 425 862 l 425 439 l 322 439 l 322 862 m 484 605 l 570 650 l 677 440 l 564 440 l 484 605 m 485 341 q 646 378 578 341 q 748 484 713 414 q 784 649 784 553 l 784 649 q 749 819 784 748 q 646 926 713 889 q 485 963 579 963 q 323 926 391 963 q 221 819 256 889 q 186 649 186 748 l 186 649 q 221 483 186 552 q 323 377 256 414 q 485 341 391 341 m 386 658 l 514 658 q 551 672 537 658 q 564 714 564 687 q 551 756 564 742 q 514 770 537 770 l 386 770 l 386 862 l 511 862 q 627 822 587 862 q 667 714 667 781 q 626 607 667 648 q 511 566 585 566 l 386 566 l 386 658 z "},"\u2122":{"ha":920,"x_min":-7,"x_max":846,"o":"m 123 985 l 231 985 l 231 640 l 123 640 l 123 985 m -7 1063 l 361 1063 l 361 956 l -7 956 l -7 1063 m 744 1063 l 846 1063 l 846 640 l 744 640 l 744 894 l 768 925 l 644 692 l 616 692 l 492 925 l 515 894 l 515 640 l 413 640 l 413 1063 l 515 1063 l 629 856 l 744 1063 z "},"\xb0":{"ha":506,"x_min":54,"x_max":452,"o":"m 253 592 q 106 645 158 592 q 54 794 54 699 q 106 943 54 890 q 253 996 158 996 q 400 943 349 996 q 452 793 452 890 q 399 645 452 698 q 253 592 347 592 m 252 700 q 315 725 293 700 q 337 795 337 749 q 315 864 337 840 q 252 888 292 888 q 191 864 212 888 q 169 794 169 840 q 191 724 169 749 q 252 700 212 700 z "},"|":{"ha":382,"x_min":122,"x_max":260,"o":"m 122 1103 l 260 1103 l 260 -117 l 122 -117 l 122 1103 z "},"\xa6":{"ha":382,"x_min":122,"x_max":260,"o":"m 122 1103 l 260 1103 l 260 621 l 122 621 l 122 1103 m 122 351 l 260 351 l 260 -117 l 122 -117 l 122 351 z "},"\u2020":{"ha":511,"x_min":68,"x_max":444,"o":"m 321 351 l 190 351 l 190 986 l 321 986 l 321 351 m 444 826 l 444 701 l 68 701 l 68 826 l 444 826 z "},"\u2021":{"ha":511,"x_min":68,"x_max":444,"o":"m 444 600 l 444 477 l 68 477 l 68 600 l 444 600 m 321 351 l 191 351 l 191 986 l 321 986 l 321 351 m 444 860 l 444 737 l 68 737 l 68 860 l 444 860 z "},"\u2116":{"ha":1379,"x_min":122,"x_max":1318,"o":"m 972 486 l 1318 486 l 1318 348 l 972 348 l 972 486 m 122 986 l 248 986 l 730 224 l 713 206 l 713 986 l 850 986 l 850 1 l 724 1 l 243 751 l 259 769 l 259 1 l 122 1 l 122 986 m 1145 559 q 1018 605 1063 559 q 972 735 972 652 l 972 814 q 1018 945 972 899 q 1145 991 1063 991 q 1273 944 1228 991 q 1318 814 1318 898 l 1318 735 q 1273 605 1318 652 q 1145 559 1228 559 m 1145 667 q 1190 686 1174 667 q 1205 739 1205 705 l 1205 813 q 1190 865 1205 846 q 1145 883 1174 883 q 1101 864 1116 883 q 1086 812 1086 846 l 1086 739 q 1101 685 1086 704 q 1145 667 1116 667 z "},"^":{"ha":699,"x_min":81,"x_max":624,"o":"m 353 850 l 353 1057 l 624 678 l 465 678 l 353 850 m 81 678 l 353 1057 l 353 850 l 240 678 l 81 678 z "},"\u03f6":{"ha":692,"x_min":44,"x_max":604,"o":"m 160 293 l 160 411 l 503 411 l 503 293 l 160 293 m 299 -10 q 196 3 245 -10 q 109 40 148 16 q 44 100 71 65 l 44 100 l 144 190 l 144 190 q 213 134 173 154 q 297 115 253 115 q 421 162 377 115 q 465 296 465 209 l 465 412 q 421 538 465 493 q 297 583 377 583 q 214 564 254 583 q 144 512 174 546 l 144 512 l 44 602 l 44 602 q 109 663 70 637 q 196 701 147 688 q 299 714 244 714 q 464 679 395 714 q 568 575 532 643 q 604 412 604 507 l 604 296 q 568 130 604 199 q 464 26 532 62 q 299 -10 395 -10 z "},"\u0374":{"ha":247,"x_min":51,"x_max":196,"o":"m 51 822 l 196 972 l 196 602 l 51 602 l 51 822 z "},"\u0375":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 -5 l 230 145 l 230 -225 l 85 -225 l 85 -5 z "},"\u0482":{"ha":868,"x_min":54,"x_max":814,"o":"m 649 991 l 757 928 l 216 -10 l 108 52 l 649 991 m 814 573 l 751 465 l 251 753 l 313 862 l 814 573 m 617 233 l 555 124 l 54 413 l 117 522 l 617 233 z "},"\u0308":{"ha":0,"x_min":-454,"x_max":-31,"o":"m -169 986 l -31 986 l -31 848 l -169 848 l -169 986 m -454 986 l -315 986 l -315 848 l -454 848 l -454 986 z "},"\u0307":{"ha":0,"x_min":-145,"x_max":-7,"o":"m -145 987 l -7 987 l -7 848 l -145 848 l -145 987 z "},"\u0300":{"ha":0,"x_min":-307,"x_max":-14,"o":"m -307 1067 l -208 1150 l -14 909 l -100 840 l -307 1067 z "},"\u0301":{"ha":0,"x_min":-305,"x_max":-12,"o":"m -305 909 l -111 1150 l -12 1067 l -218 840 l -305 909 z "},"\u030b":{"ha":0,"x_min":-521,"x_max":-7,"o":"m -250 896 l -123 1137 l -7 1064 l -146 836 l -250 896 m -521 896 l -395 1137 l -278 1064 l -417 836 l -521 896 z "},"\u0302":{"ha":0,"x_min":-433,"x_max":-7,"o":"m -7 911 l -84 840 l -220 968 l -355 840 l -433 911 l -220 1117 l -7 911 z "},"\u030c":{"ha":0,"x_min":-453,"x_max":-27,"o":"m -453 1046 l -376 1117 l -240 988 l -104 1117 l -27 1046 l -240 840 l -453 1046 z "},"\u0306":{"ha":0,"x_min":-457,"x_max":-41,"o":"m -255 838 q -407 898 -356 838 q -457 1080 -457 959 l -457 1080 l -346 1080 l -346 1080 q -323 979 -346 1013 q -255 945 -300 945 l -243 945 q -175 979 -197 945 q -152 1080 -152 1013 l -152 1080 l -41 1080 l -41 1080 q -91 898 -41 959 q -243 838 -142 838 l -255 838 z "},"\u030a":{"ha":0,"x_min":-366,"x_max":-34,"o":"m -200 842 q -323 882 -280 842 q -366 998 -366 923 q -323 1119 -366 1077 q -200 1162 -280 1162 q -77 1119 -121 1162 q -34 998 -34 1076 q -77 882 -34 923 q -200 842 -121 842 m -200 930 q -149 949 -167 930 q -130 1001 -130 968 q -149 1055 -130 1036 q -200 1074 -167 1074 q -252 1055 -233 1074 q -270 1001 -270 1036 q -252 949 -270 968 q -200 930 -233 930 z "},"\u0303":{"ha":0,"x_min":-484,"x_max":-14,"o":"m -151 846 q -194 854 -172 846 q -236 877 -215 863 l -243 882 q -251 887 -247 884 q -258 892 -255 890 q -300 920 -285 911 q -330 929 -316 929 q -365 918 -353 929 q -377 882 -377 906 l -377 848 l -484 848 l -484 878 q -450 1004 -484 962 q -346 1046 -415 1046 q -297 1036 -320 1046 q -248 1008 -273 1026 l -243 1004 l -235 998 q -197 972 -212 981 q -168 963 -182 963 q -133 976 -144 963 q -121 1015 -121 989 l -121 1042 l -14 1042 l -14 1019 q -48 889 -14 932 q -151 846 -82 846 z "},"\u0304":{"ha":0,"x_min":-529,"x_max":-34,"o":"m -34 985 l -34 848 l -529 848 l -529 985 l -34 985 z "},"\u0309":{"ha":0,"x_min":-307,"x_max":-34,"o":"m -195 1121 q -74 1092 -114 1121 q -34 1002 -34 1062 q -180 897 -34 897 l -239 949 q -153 985 -153 949 q -214 1023 -153 1023 q -292 1014 -252 1023 l -307 1109 q -195 1121 -262 1121 m -250 949 l -137 943 l -137 834 l -250 834 l -250 949 z "},"\u031b":{"ha":0,"x_min":-331,"x_max":0,"o":"m -331 606 l -331 704 l -222 704 q -158 729 -181 704 q -135 798 -135 753 l -135 848 l 0 848 l 0 785 q -52 653 0 700 q -200 606 -104 606 l -331 606 z "},"\u0323":{"ha":0,"x_min":-172,"x_max":-34,"o":"m -172 -149 l -34 -149 l -34 -288 l -172 -288 l -172 -149 z "},"\u0326":{"ha":0,"x_min":-145,"x_max":-7,"o":"m -145 -100 l -7 -100 l -7 -239 l -145 -376 l -145 -100 z "},"\u0327":{"ha":0,"x_min":-300,"x_max":-14,"o":"m -189 -286 q -300 -274 -256 -286 l -272 -179 q -208 -189 -239 -189 q -152 -180 -170 -189 q -134 -154 -134 -172 q -158 -129 -134 -137 q -233 -121 -182 -121 l -174 -42 q -54 -72 -94 -42 q -14 -163 -14 -102 q -58 -256 -14 -225 q -189 -286 -101 -286 m -243 62 l -131 62 l -131 -121 l -243 -121 l -243 62 z "},"\u0328":{"ha":0,"x_min":-215,"x_max":-7,"o":"m -38 -285 q -173 -253 -131 -285 q -215 -151 -215 -222 q -170 -48 -215 -94 q -41 32 -124 -1 l -7 0 q -77 -60 -55 -30 q -99 -125 -99 -90 q -84 -161 -99 -150 q -38 -172 -70 -172 l -7 -172 l -7 -285 l -38 -285 z "},"\u0335":{"ha":0,"x_min":-488,"x_max":-34,"o":"m -34 559 l -34 427 l -488 427 l -488 559 l -34 559 z "},"\u02bc":{"ha":247,"x_min":51,"x_max":196,"o":"m 51 986 l 196 986 l 196 766 l 51 616 l 51 986 z "},"\u02bb":{"ha":247,"x_min":51,"x_max":196,"o":"m 51 822 l 196 972 l 196 602 l 51 602 l 51 822 z "},"\u02c9":{"ha":604,"x_min":54,"x_max":549,"o":"z "},"\xb4":{"ha":409,"x_min":58,"x_max":351,"o":"m 58 909 l 252 1150 l 351 1067 l 144 840 l 58 909 z "},"\u02d8":{"ha":525,"x_min":54,"x_max":471,"o":"m 256 838 q 105 898 155 838 q 54 1080 54 959 l 54 1080 l 165 1080 l 165 1080 q 188 979 165 1013 q 256 945 211 945 l 269 945 q 337 979 314 945 q 359 1080 359 1013 l 359 1080 l 471 1080 l 471 1080 q 420 898 471 959 q 269 838 370 838 l 256 838 z "},"\u02c7":{"ha":548,"x_min":61,"x_max":487,"o":"m 61 1046 l 138 1117 l 274 988 l 410 1117 l 487 1046 l 274 840 l 61 1046 z "},"\xb8":{"ha":395,"x_min":54,"x_max":340,"o":"m 166 -286 q 54 -274 98 -286 l 83 -179 q 147 -189 115 -189 q 203 -180 184 -189 q 221 -154 221 -172 q 197 -129 221 -137 q 122 -121 172 -121 l 181 -42 q 301 -72 261 -42 q 340 -163 340 -102 q 297 -256 340 -225 q 166 -286 254 -286 m 111 62 l 224 62 l 224 -121 l 111 -121 l 111 62 z "},"\u02c6":{"ha":548,"x_min":61,"x_max":487,"o":"m 487 911 l 410 840 l 274 968 l 138 840 l 61 911 l 274 1117 l 487 911 z "},"\xa8":{"ha":538,"x_min":58,"x_max":481,"o":"m 342 986 l 481 986 l 481 848 l 342 848 l 342 986 m 58 986 l 196 986 l 196 848 l 58 848 l 58 986 z "},"\u02d9":{"ha":342,"x_min":102,"x_max":240,"o":"m 102 987 l 240 987 l 240 848 l 102 848 l 102 987 z "},"`":{"ha":409,"x_min":58,"x_max":351,"o":"m 58 1067 l 157 1150 l 351 909 l 264 840 l 58 1067 z "},"\u02dd":{"ha":562,"x_min":24,"x_max":538,"o":"m 296 896 l 422 1137 l 538 1064 l 399 836 l 296 896 m 24 896 l 151 1137 l 267 1064 l 128 836 l 24 896 z "},"\xaf":{"ha":604,"x_min":54,"x_max":549,"o":"m 549 985 l 549 848 l 54 848 l 54 985 l 549 985 z "},"\u02db":{"ha":235,"x_min":14,"x_max":222,"o":"m 191 -285 q 56 -253 98 -285 q 14 -151 14 -222 q 59 -48 14 -94 q 188 32 104 -1 l 222 0 q 152 -60 174 -30 q 130 -125 130 -90 q 144 -161 130 -150 q 191 -172 159 -172 l 222 -172 l 222 -285 l 191 -285 z "},"\u02dc":{"ha":579,"x_min":54,"x_max":525,"o":"m 387 846 q 345 854 366 846 q 302 877 323 863 l 295 882 q 288 887 292 884 q 280 892 283 890 q 238 920 254 911 q 209 929 222 929 q 173 918 185 929 q 161 882 161 906 l 161 848 l 54 848 l 54 878 q 89 1004 54 962 q 193 1046 123 1046 q 242 1036 218 1046 q 290 1008 265 1026 l 296 1004 l 303 998 q 342 972 327 981 q 370 963 357 963 q 406 976 394 963 q 418 1015 418 989 l 418 1042 l 525 1042 l 525 1019 q 491 889 525 932 q 387 846 456 846 z "},"\u0345":{"ha":0,"x_min":-271,"x_max":-39,"o":"m -146 -115 q -135 -154 -146 -140 q -104 -168 -124 -168 l -39 -168 l -39 -286 l -134 -286 q -235 -244 -199 -286 q -271 -127 -271 -203 l -271 -54 l -146 -54 l -146 -115 z "},"\u0384":{"ha":338,"x_min":58,"x_max":279,"o":"m 680 1073 l 945 1233 l 1010 1121 l 738 977 l 680 1073 z "},"\u0385":{"ha":640,"x_min":58,"x_max":583,"o":"m 444 987 l 583 987 l 583 848 l 444 848 l 444 987 m 58 987 l 196 987 l 196 848 l 58 848 l 58 987 m 234 864 l 334 1157 l 456 1113 l 340 828 l 234 864 z "},"\u0483":{"ha":0,"x_min":-550,"x_max":-35,"o":"m -550 1000 l -35 1000 l -35 868 l -550 868 l -550 1000 m -550 954 l -412 954 l -412 787 l -550 787 l -550 954 m -173 1082 l -35 1082 l -35 914 l -173 914 l -173 1082 z "},"\u0484":{"ha":0,"x_min":-484,"x_max":-14,"o":"m -127 879 q -138 909 -127 899 q -168 919 -148 919 q -210 912 -190 919 q -261 891 -229 905 q -265 890 -263 890 q -269 888 -267 889 q -273 885 -271 886 q -278 884 -275 884 q -365 853 -321 865 q -469 842 -409 842 l -484 842 l -484 963 l -472 963 q -392 971 -428 963 q -323 994 -357 979 q -318 996 -320 995 q -313 998 -315 998 q -307 1001 -310 1000 q -301 1004 -304 1002 q -224 1033 -256 1023 q -152 1043 -193 1043 q -48 1001 -83 1043 q -14 875 -14 959 l -14 844 l -127 844 l -127 879 z "},"\u0485":{"ha":0,"x_min":-551,"x_max":-35,"o":"m -551 1000 l -35 1000 l -35 868 l -551 868 l -551 1000 m -551 954 l -412 954 l -412 787 l -551 787 l -551 954 m -551 1082 l -412 1082 l -412 914 l -551 914 l -551 1082 z "},"\u0486":{"ha":0,"x_min":-550,"x_max":-34,"o":"m -550 1000 l -34 1000 l -34 868 l -550 868 l -550 1000 m -172 954 l -34 954 l -34 787 l -172 787 l -172 954 m -172 1082 l -34 1082 l -34 914 l -172 914 l -172 1082 z "},"\u0487":{"ha":0,"x_min":-484,"x_max":-14,"o":"m -29 842 q -128 852 -85 842 q -210 879 -171 862 q -219 884 -214 882 q -229 888 -224 886 q -232 889 -230 888 q -235 891 -234 890 q -287 912 -266 905 q -330 919 -307 919 q -360 909 -350 919 q -370 879 -370 899 l -370 844 l -484 844 l -484 875 q -450 1001 -484 959 q -346 1043 -415 1043 q -273 1033 -305 1043 q -197 1004 -241 1023 q -191 1001 -194 1002 q -185 998 -188 1000 q -110 972 -147 981 q -26 963 -73 963 l -14 963 l -14 842 l -29 842 z "},"\u0488":{"ha":0,"x_min":-1468,"x_max":-34,"o":"m -681 939 q -697 1011 -681 987 q -745 1036 -713 1036 l -757 1036 q -805 1011 -789 1036 q -821 939 -821 987 l -821 939 l -925 939 l -925 939 q -883 1082 -925 1035 q -757 1130 -841 1130 l -745 1130 q -618 1082 -661 1130 q -576 939 -576 1035 l -576 939 l -681 939 l -681 939 m -1108 761 q -1124 833 -1108 809 q -1172 857 -1140 857 l -1184 857 q -1232 833 -1216 857 q -1248 761 -1248 809 l -1248 760 l -1352 760 l -1352 761 q -1310 904 -1352 857 q -1184 951 -1268 951 l -1172 951 q -1046 904 -1088 951 q -1004 761 -1004 857 l -1004 760 l -1108 760 l -1108 761 m -1223 435 q -1239 507 -1223 483 q -1287 531 -1255 531 l -1299 531 q -1347 507 -1331 531 q -1363 435 -1363 483 l -1363 434 l -1468 434 l -1468 435 q -1426 578 -1468 530 q -1299 625 -1383 625 l -1287 625 q -1161 578 -1203 625 q -1119 435 -1119 530 l -1119 434 l -1223 434 l -1223 435 m -1108 109 q -1124 181 -1108 157 q -1172 205 -1140 205 l -1184 205 q -1232 181 -1216 205 q -1248 109 -1248 157 l -1248 109 l -1352 109 l -1352 109 q -1310 252 -1352 205 q -1184 300 -1268 300 l -1172 300 q -1046 252 -1088 300 q -1004 109 -1004 205 l -1004 109 l -1108 109 l -1108 109 m -254 760 q -270 832 -254 808 q -317 857 -286 857 l -330 857 q -377 832 -361 857 q -393 760 -393 808 l -393 760 l -498 760 l -498 760 q -456 903 -498 856 q -330 951 -414 951 l -317 951 q -191 903 -233 951 q -149 760 -149 856 l -149 760 l -254 760 l -254 760 m -138 435 q -154 507 -138 483 q -202 531 -170 531 l -214 531 q -262 507 -246 531 q -278 435 -278 483 l -278 434 l -382 434 l -382 435 q -340 578 -382 530 q -214 625 -298 625 l -202 625 q -76 578 -118 625 q -34 435 -34 530 l -34 434 l -138 434 l -138 435 m -254 109 q -270 181 -254 157 q -317 205 -286 205 l -330 205 q -377 181 -361 205 q -393 109 -393 157 l -393 109 l -498 109 l -498 109 q -456 252 -498 205 q -330 300 -414 300 l -317 300 q -191 252 -233 300 q -149 109 -149 205 l -149 109 l -254 109 l -254 109 m -681 -132 q -697 -59 -681 -83 q -745 -35 -713 -35 l -757 -35 q -805 -59 -789 -35 q -821 -132 -821 -83 l -821 -132 l -925 -132 l -925 -132 q -883 12 -925 -36 q -757 59 -841 59 l -745 59 q -618 12 -661 59 q -576 -132 -576 -36 l -576 -132 l -681 -132 l -681 -132 z "},"\u0489":{"ha":0,"x_min":-1397,"x_max":-98,"o":"m -505 793 l -399 882 l -205 864 l -416 687 l -505 793 m -1289 134 l -1078 311 l -989 205 l -1096 117 l -1289 134 m -817 125 l -678 125 l -678 -14 l -817 -151 l -817 125 m -1397 568 l -1122 568 l -1122 430 l -1260 430 l -1397 568 m -505 205 l -416 311 l -310 222 l -294 28 l -505 205 m -1185 776 l -1200 970 l -989 793 l -1078 687 l -1185 776 m -817 1012 l -678 1149 l -678 873 l -817 873 l -817 1012 m -373 568 l -235 568 l -98 430 l -373 430 l -373 568 z "},"\u047a":{"ha":897,"x_min":102,"x_max":795,"o":"m 386 1076 l 511 1076 l 511 701 l 386 701 l 386 1076 m 386 285 l 511 285 l 511 -90 l 386 -90 l 386 285 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u047b":{"ha":757,"x_min":88,"x_max":669,"o":"m 323 793 l 434 793 l 434 460 l 323 460 l 323 793 m 323 244 l 434 244 l 434 -90 l 323 -90 l 323 244 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 z "},"\u047c":{"ha":1449,"x_min":102,"x_max":1347,"o":"m 441 -10 q 263 35 340 -10 q 144 162 186 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 l 448 996 l 448 860 l 448 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 531 l 795 531 l 795 353 q 780 248 795 298 q 735 157 764 198 q 617 34 693 77 q 441 -10 541 -10 m 1007 -10 q 826 37 904 -10 q 707 168 749 84 q 667 255 681 208 q 654 353 654 302 l 654 531 l 795 531 l 795 349 q 821 232 795 282 q 893 154 846 181 q 1000 126 939 126 q 1108 154 1061 126 q 1180 232 1154 181 q 1205 349 1205 282 l 1205 637 q 1180 754 1205 704 q 1108 832 1154 805 q 1000 860 1061 860 l 1000 860 l 1000 996 l 1000 996 q 1182 951 1103 996 q 1304 824 1261 906 q 1347 633 1347 741 l 1347 353 q 1305 162 1347 245 q 1186 35 1263 80 q 1007 -10 1109 -10 m 467 1282 l 982 1282 l 982 1150 l 467 1150 l 467 1282 m 467 1236 l 605 1236 l 605 1069 l 467 1069 l 467 1236 m 844 1364 l 982 1364 l 982 1196 l 844 1196 l 844 1364 z "},"\u047d":{"ha":1027,"x_min":27,"x_max":972,"o":"m 414 704 l 558 704 l 710 181 q 777 328 749 245 q 819 502 804 411 q 835 682 833 592 l 835 704 l 972 704 q 941 453 972 589 q 857 197 910 318 q 742 0 804 75 l 637 0 l 414 704 m 27 704 l 172 704 l 351 174 l 516 481 l 568 361 l 376 0 l 271 0 l 27 704 m 256 1000 l 771 1000 l 771 868 l 256 868 l 256 1000 m 256 954 l 394 954 l 394 787 l 256 787 l 256 954 m 633 1082 l 771 1082 l 771 914 l 633 914 l 633 1082 z "},"\u047e":{"ha":1449,"x_min":102,"x_max":1347,"o":"m 983 1212 l 983 1114 l 466 1114 l 466 1212 l 983 1212 m 983 1166 l 983 1036 l 858 1036 l 858 1166 l 983 1166 m 466 1036 l 466 1166 l 591 1166 l 591 1036 l 466 1036 m 780 1166 l 780 1036 l 669 1036 l 669 1166 l 780 1166 m 441 -10 q 263 35 340 -10 q 144 162 186 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 l 448 996 l 448 860 l 448 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 531 l 795 531 l 795 353 q 780 248 795 298 q 735 157 764 198 q 617 34 693 77 q 441 -10 541 -10 m 1007 -10 q 826 37 904 -10 q 707 168 749 84 q 667 255 681 208 q 654 353 654 302 l 654 531 l 795 531 l 795 349 q 821 232 795 282 q 893 154 846 181 q 1000 126 939 126 q 1108 154 1061 126 q 1180 232 1154 181 q 1205 349 1205 282 l 1205 637 q 1180 754 1205 704 q 1108 832 1154 805 q 1000 860 1061 860 l 1000 860 l 1000 996 l 1000 996 q 1182 951 1103 996 q 1304 824 1261 906 q 1347 633 1347 741 l 1347 353 q 1305 162 1347 245 q 1186 35 1263 80 q 1007 -10 1109 -10 z "},"\u047f":{"ha":1027,"x_min":27,"x_max":972,"o":"m 758 1023 l 758 926 l 242 926 l 242 1023 l 758 1023 m 758 978 l 758 848 l 633 848 l 633 978 l 758 978 m 242 848 l 242 978 l 367 978 l 367 848 l 242 848 m 556 978 l 556 848 l 445 848 l 445 978 l 556 978 m 414 704 l 558 704 l 710 181 q 777 328 749 245 q 819 502 804 411 q 835 682 833 592 l 835 704 l 972 704 q 941 453 972 589 q 857 197 910 318 q 742 0 804 75 l 637 0 l 414 704 m 27 704 l 172 704 l 351 174 l 516 481 l 568 361 l 376 0 l 271 0 l 27 704 z "},"\u2236":{"ha":315,"x_min":85,"x_max":230,"o":"m 85 273 l 230 273 l 230 127 l 85 127 l 85 273 m 85 838 l 230 838 l 230 693 l 85 693 l 85 838 z "},"\u1eae":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 m 386 1377 l 573 1544 l 663 1451 l 463 1297 l 386 1377 z "},"\u1eb6":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 380 -149 l 519 -149 l 519 -288 l 380 -288 l 380 -149 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 z "},"\u1eb0":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 m 240 1444 l 323 1537 l 510 1371 l 433 1291 l 240 1444 z "},"\u1eb2":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 m 449 1532 q 570 1505 530 1532 q 610 1421 610 1477 q 573 1350 610 1373 q 464 1326 537 1326 l 405 1377 q 469 1384 448 1377 q 490 1405 490 1392 q 475 1427 490 1419 q 430 1434 460 1434 q 352 1428 391 1434 l 344 1522 q 449 1532 386 1532 m 394 1377 l 507 1377 l 507 1297 l 394 1297 l 394 1377 z "},"\u1eb4":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 678 1263 q 619 1111 678 1164 q 452 1057 560 1057 l 447 1057 q 280 1111 339 1057 q 221 1263 221 1164 l 333 1262 q 363 1183 333 1211 q 447 1155 393 1155 l 452 1155 q 536 1183 507 1155 q 566 1262 566 1211 l 678 1263 m 574 1300 q 534 1303 553 1300 q 498 1313 515 1307 q 465 1326 482 1318 l 463 1327 q 443 1338 452 1333 q 423 1348 433 1343 q 381 1370 398 1363 q 349 1377 365 1377 q 308 1362 321 1377 q 294 1316 294 1347 l 294 1302 l 187 1302 l 187 1319 q 222 1451 187 1407 q 326 1495 256 1495 q 393 1485 364 1495 q 457 1458 421 1476 l 459 1457 q 471 1450 465 1453 q 482 1444 477 1447 q 521 1424 506 1430 q 551 1417 536 1417 q 591 1434 578 1417 q 605 1483 605 1450 l 605 1497 l 712 1497 l 712 1480 q 678 1345 712 1390 q 574 1300 644 1300 z "},"\u1ea4":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 m 533 1322 l 720 1489 l 810 1396 l 610 1242 l 533 1322 z "},"\u1eac":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 380 -149 l 519 -149 l 519 -288 l 380 -288 l 380 -149 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 z "},"\u1ea6":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 m 421 1389 l 504 1482 l 691 1316 l 614 1236 l 421 1389 z "},"\u1ea8":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 m 630 1477 q 751 1450 711 1477 q 791 1367 791 1422 q 754 1295 791 1318 q 645 1271 718 1271 l 586 1322 q 650 1330 629 1322 q 671 1350 671 1337 q 656 1372 671 1364 q 611 1379 642 1379 q 533 1373 572 1379 l 525 1468 q 630 1477 567 1477 m 575 1322 l 688 1322 l 688 1242 l 575 1242 l 575 1322 z "},"\u1eaa":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 661 1127 l 580 1053 l 448 1154 l 315 1053 l 235 1127 l 448 1293 l 661 1127 m 574 1326 q 534 1329 553 1326 q 498 1338 515 1333 q 465 1352 482 1344 l 463 1353 q 443 1363 452 1358 q 423 1374 433 1369 q 381 1396 398 1389 q 349 1403 365 1403 q 308 1388 321 1403 q 294 1342 294 1373 l 294 1328 l 187 1328 l 187 1345 q 222 1477 187 1433 q 326 1520 256 1520 q 393 1511 364 1520 q 457 1484 421 1501 l 459 1482 q 471 1476 465 1479 q 482 1470 477 1473 q 521 1450 506 1456 q 551 1443 536 1443 q 591 1459 578 1443 q 605 1509 605 1476 l 605 1522 l 712 1522 l 712 1506 q 678 1371 712 1416 q 574 1326 644 1326 z "},"\u1ea2":{"ha":899,"x_min":27,"x_max":872,"o":"m 391 986 l 509 986 l 872 0 l 723 0 l 450 795 l 176 0 l 27 0 l 391 986 m 195 348 l 713 348 l 713 216 l 195 216 l 195 348 m 449 1289 q 570 1261 530 1289 q 610 1178 610 1234 q 573 1106 610 1130 q 464 1082 537 1082 l 405 1134 q 469 1141 448 1134 q 490 1162 490 1148 q 475 1183 490 1176 q 430 1191 460 1191 q 352 1185 391 1191 l 344 1279 q 449 1289 386 1289 m 394 1134 l 507 1134 l 507 1053 l 394 1053 l 394 1134 z "},"\u1ebe":{"ha":830,"x_min":122,"x_max":811,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 m 534 1322 l 722 1489 l 811 1396 l 611 1242 l 534 1322 z "},"\u1ec6":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 382 -149 l 520 -149 l 520 -288 l 382 -288 l 382 -149 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 z "},"\u1ec0":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 m 422 1389 l 505 1482 l 692 1316 l 616 1236 l 422 1389 z "},"\u1ec2":{"ha":830,"x_min":122,"x_max":792,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 m 631 1477 q 752 1450 712 1477 q 792 1367 792 1422 q 756 1295 792 1318 q 646 1271 720 1271 l 587 1322 q 651 1330 630 1322 q 673 1350 673 1337 q 658 1372 673 1364 q 612 1379 643 1379 q 534 1373 573 1379 l 526 1468 q 631 1477 568 1477 m 576 1322 l 689 1322 l 689 1242 l 576 1242 l 576 1322 z "},"\u1ec4":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 662 1127 l 581 1053 l 449 1154 l 317 1053 l 236 1127 l 449 1293 l 662 1127 m 576 1326 q 535 1329 554 1326 q 500 1338 516 1333 q 466 1352 484 1344 l 464 1353 q 444 1363 454 1358 q 425 1374 434 1369 q 383 1396 399 1389 q 350 1403 366 1403 q 309 1388 323 1403 q 296 1342 296 1373 l 296 1328 l 189 1328 l 189 1345 q 223 1477 189 1433 q 327 1520 258 1520 q 394 1511 366 1520 q 458 1484 422 1501 l 460 1482 q 472 1476 467 1479 q 484 1470 478 1473 q 522 1450 507 1456 q 552 1443 537 1443 q 593 1459 579 1443 q 606 1509 606 1476 l 606 1522 l 713 1522 l 713 1506 q 679 1371 713 1416 q 576 1326 645 1326 z "},"\u1eba":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 450 1289 q 571 1261 531 1289 q 611 1178 611 1234 q 575 1106 611 1130 q 465 1082 538 1082 l 406 1134 q 470 1141 449 1134 q 492 1162 492 1148 q 477 1183 492 1176 q 431 1191 462 1191 q 353 1185 392 1191 l 345 1279 q 450 1289 387 1289 m 395 1134 l 508 1134 l 508 1053 l 395 1053 l 395 1134 z "},"\u1ebc":{"ha":830,"x_min":122,"x_max":755,"o":"m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 m 189 132 l 755 132 l 755 0 l 189 0 l 189 132 m 189 555 l 681 555 l 681 424 l 189 424 l 189 555 m 189 986 l 755 986 l 755 854 l 189 854 l 189 986 m 576 1057 q 535 1060 554 1057 q 500 1069 516 1063 q 466 1083 484 1075 l 464 1084 q 444 1094 454 1089 q 425 1105 434 1099 q 383 1127 399 1120 q 350 1134 366 1134 q 309 1119 323 1134 q 296 1073 296 1103 l 296 1059 l 189 1059 l 189 1076 q 223 1207 189 1164 q 327 1251 258 1251 q 394 1242 366 1251 q 458 1215 422 1232 l 460 1213 q 472 1207 467 1210 q 484 1200 478 1204 q 522 1180 507 1187 q 552 1174 537 1174 q 593 1190 579 1174 q 606 1240 606 1206 l 606 1253 l 713 1253 l 713 1237 q 679 1102 713 1147 q 576 1057 645 1057 z "},"\u1ec8":{"ha":382,"x_min":85,"x_max":351,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 191 1289 q 311 1261 271 1289 q 351 1178 351 1234 q 315 1106 351 1130 q 205 1082 279 1082 l 146 1134 q 211 1141 189 1134 q 232 1162 232 1148 q 217 1183 232 1176 q 172 1191 202 1191 q 94 1185 132 1191 l 85 1279 q 191 1289 127 1289 m 136 1134 l 248 1134 l 248 1053 l 136 1053 l 136 1134 z "},"\u0128":{"ha":382,"x_min":-71,"x_max":454,"o":"m 260 0 l 122 0 l 122 986 l 260 986 l 260 0 m 316 1057 q 275 1060 294 1057 q 240 1069 256 1063 q 206 1083 224 1075 l 204 1084 q 184 1094 194 1089 q 165 1105 174 1099 q 123 1127 140 1120 q 90 1134 106 1134 q 50 1119 63 1134 q 36 1073 36 1103 l 36 1059 l -71 1059 l -71 1076 q -37 1207 -71 1164 q 67 1251 -2 1251 q 134 1242 106 1251 q 199 1215 163 1232 l 201 1213 q 213 1207 207 1210 q 224 1200 218 1204 q 262 1180 248 1187 q 292 1174 277 1174 q 333 1190 319 1174 q 347 1240 347 1206 l 347 1253 l 454 1253 l 454 1237 q 419 1102 454 1147 q 316 1057 385 1057 z "},"\u1ed0":{"ha":897,"x_min":102,"x_max":808,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 m 532 1322 l 719 1489 l 808 1396 l 608 1242 l 532 1322 z "},"\u1ed8":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 379 -149 l 517 -149 l 517 -288 l 379 -288 l 379 -149 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 z "},"\u1ed2":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 m 420 1389 l 503 1482 l 690 1316 l 613 1236 l 420 1389 z "},"\u1ed4":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 m 629 1477 q 749 1450 709 1477 q 789 1367 789 1422 q 753 1295 789 1318 q 644 1271 717 1271 l 585 1322 q 649 1330 627 1322 q 670 1350 670 1337 q 655 1372 670 1364 q 610 1379 640 1379 q 532 1373 570 1379 l 524 1468 q 629 1477 566 1477 m 574 1322 l 686 1322 l 686 1242 l 574 1242 l 574 1322 z "},"\u1ed6":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 659 1127 l 578 1053 l 446 1154 l 314 1053 l 233 1127 l 446 1293 l 659 1127 m 573 1326 q 532 1329 551 1326 q 497 1338 513 1333 q 463 1352 481 1344 l 461 1353 q 441 1363 451 1358 q 422 1374 431 1369 q 380 1396 397 1389 q 347 1403 363 1403 q 307 1388 320 1403 q 293 1342 293 1373 l 293 1328 l 186 1328 l 186 1345 q 220 1477 186 1433 q 324 1520 255 1520 q 391 1511 363 1520 q 456 1484 420 1501 l 458 1482 q 470 1476 464 1479 q 481 1470 475 1473 q 519 1450 505 1456 q 549 1443 534 1443 q 590 1459 576 1443 q 604 1509 604 1476 l 604 1522 l 711 1522 l 711 1506 q 676 1371 711 1416 q 573 1326 642 1326 z "},"\u1ece":{"ha":897,"x_min":102,"x_max":795,"o":"m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 448 1289 q 568 1261 528 1289 q 608 1178 608 1234 q 572 1106 608 1130 q 463 1082 536 1082 l 404 1134 q 468 1141 446 1134 q 489 1162 489 1148 q 474 1183 489 1176 q 429 1191 459 1191 q 351 1185 389 1191 l 342 1279 q 448 1289 385 1289 m 393 1134 l 505 1134 l 505 1053 l 393 1053 l 393 1134 z "},"\u1eda":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 385 1134 l 572 1300 l 661 1207 l 461 1054 l 385 1134 z "},"\u1ee2":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 379 -149 l 517 -149 l 517 -288 l 379 -288 l 379 -149 z "},"\u1edc":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 239 1200 l 321 1293 l 509 1127 l 432 1047 l 239 1200 z "},"\u1ede":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 448 1289 q 568 1261 528 1289 q 608 1178 608 1234 q 572 1106 608 1130 q 463 1082 536 1082 l 404 1134 q 468 1141 446 1134 q 489 1162 489 1148 q 474 1183 489 1176 q 429 1191 459 1191 q 351 1185 389 1191 l 342 1279 q 448 1289 385 1289 m 393 1134 l 505 1134 l 505 1053 l 393 1053 l 393 1134 z "},"\u1ee0":{"ha":924,"x_min":102,"x_max":941,"o":"m 563 861 l 563 972 l 719 972 q 806 1080 806 972 l 806 1103 l 941 1103 l 941 1067 q 891 912 941 964 q 741 861 842 861 l 563 861 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 m 573 1057 q 532 1060 551 1057 q 497 1069 513 1063 q 463 1083 481 1075 l 461 1084 q 441 1094 451 1089 q 422 1105 431 1099 q 380 1127 397 1120 q 347 1134 363 1134 q 307 1119 320 1134 q 293 1073 293 1103 l 293 1059 l 186 1059 l 186 1076 q 220 1207 186 1164 q 324 1251 255 1251 q 391 1242 363 1251 q 456 1215 420 1232 l 458 1213 q 470 1207 464 1210 q 481 1200 475 1204 q 519 1180 505 1187 q 549 1174 534 1174 q 590 1190 576 1174 q 604 1240 604 1206 l 604 1253 l 711 1253 l 711 1237 q 676 1102 711 1147 q 573 1057 642 1057 z "},"\u1ee6":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 454 1289 q 575 1261 535 1289 q 615 1178 615 1234 q 579 1106 615 1130 q 469 1082 543 1082 l 410 1134 q 474 1141 453 1134 q 496 1162 496 1148 q 481 1183 496 1176 q 435 1191 466 1191 q 357 1185 396 1191 l 349 1279 q 454 1289 391 1289 m 399 1134 l 512 1134 l 512 1053 l 399 1053 l 399 1134 z "},"\u1ee8":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 m 391 1134 l 578 1300 l 668 1207 l 468 1054 l 391 1134 z "},"\u1ef0":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 m 385 -149 l 524 -149 l 524 -288 l 385 -288 l 385 -149 z "},"\u1eea":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 m 245 1200 l 328 1293 l 515 1127 l 439 1047 l 245 1200 z "},"\u1eec":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 m 454 1289 q 575 1261 535 1289 q 615 1178 615 1234 q 579 1106 615 1130 q 469 1082 543 1082 l 410 1134 q 474 1141 453 1134 q 496 1162 496 1148 q 481 1183 496 1176 q 435 1191 466 1191 q 357 1185 396 1191 l 349 1279 q 454 1289 391 1289 m 399 1134 l 512 1134 l 512 1053 l 399 1053 l 399 1134 z "},"\u1eee":{"ha":1006,"x_min":109,"x_max":1000,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 669 888 l 669 986 l 777 986 q 842 1011 819 986 q 865 1080 865 1036 l 865 1130 l 1000 1130 l 1000 1067 q 947 935 1000 982 q 800 888 895 888 l 669 888 m 580 1057 q 539 1060 558 1057 q 504 1069 520 1063 q 470 1083 488 1075 l 468 1084 q 448 1094 458 1089 q 429 1105 438 1099 q 387 1127 404 1120 q 354 1134 370 1134 q 313 1119 327 1134 q 300 1073 300 1103 l 300 1059 l 193 1059 l 193 1076 q 227 1207 193 1164 q 331 1251 262 1251 q 398 1242 370 1251 q 463 1215 427 1232 l 465 1213 q 476 1207 471 1210 q 488 1200 482 1204 q 526 1180 511 1187 q 556 1174 541 1174 q 597 1190 583 1174 q 610 1240 610 1206 l 610 1253 l 718 1253 l 718 1237 q 683 1102 718 1147 q 580 1057 649 1057 z "},"\u0168":{"ha":910,"x_min":109,"x_max":802,"o":"m 454 -10 q 268 33 345 -10 q 149 158 190 76 q 109 357 109 241 l 109 986 l 247 986 l 247 352 q 301 185 247 244 q 454 126 355 126 q 609 185 554 126 q 663 352 663 244 l 663 986 l 802 986 l 802 357 q 761 158 802 241 q 642 33 720 76 q 454 -10 564 -10 m 580 1057 q 539 1060 558 1057 q 504 1069 520 1063 q 470 1083 488 1075 l 468 1084 q 448 1094 458 1089 q 429 1105 438 1099 q 387 1127 404 1120 q 354 1134 370 1134 q 313 1119 327 1134 q 300 1073 300 1103 l 300 1059 l 193 1059 l 193 1076 q 227 1207 193 1164 q 331 1251 262 1251 q 398 1242 370 1251 q 463 1215 427 1232 l 465 1213 q 476 1207 471 1210 q 488 1200 482 1204 q 526 1180 511 1187 q 556 1174 541 1174 q 597 1190 583 1174 q 610 1240 610 1206 l 610 1253 l 718 1253 l 718 1237 q 683 1102 718 1147 q 580 1057 649 1057 z "},"\u1ef4":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 280 -149 l 418 -149 l 418 -288 l 280 -288 l 280 -149 z "},"\u1ef2":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 140 1200 l 222 1293 l 410 1127 l 333 1047 l 140 1200 z "},"\u1ef6":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 349 1289 q 469 1261 429 1289 q 509 1178 509 1234 q 473 1106 509 1130 q 363 1082 437 1082 l 304 1134 q 369 1141 347 1134 q 390 1162 390 1148 q 375 1183 390 1176 q 330 1191 360 1191 q 252 1185 290 1191 l 243 1279 q 349 1289 286 1289 m 294 1134 l 406 1134 l 406 1053 l 294 1053 l 294 1134 z "},"\u1ef8":{"ha":699,"x_min":-20,"x_max":719,"o":"m 418 401 l 418 0 l 280 0 l 280 401 l -20 986 l 134 986 l 349 541 l 565 986 l 719 986 l 418 401 m 474 1057 q 433 1060 452 1057 q 398 1069 414 1063 q 364 1083 382 1075 l 362 1084 q 342 1094 352 1089 q 323 1105 332 1099 q 281 1127 298 1120 q 248 1134 264 1134 q 208 1119 221 1134 q 194 1073 194 1103 l 194 1059 l 87 1059 l 87 1076 q 121 1207 87 1164 q 225 1251 156 1251 q 292 1242 264 1251 q 357 1215 321 1232 l 359 1213 q 371 1207 365 1210 q 382 1200 376 1204 q 420 1180 406 1187 q 450 1174 435 1174 q 491 1190 477 1174 q 505 1240 505 1206 l 505 1253 l 612 1253 l 612 1237 q 577 1102 612 1147 q 474 1057 543 1057 z "},"\u1eaf":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 m 291 1200 l 485 1441 l 585 1358 l 378 1131 l 291 1200 z "},"\u1eb7":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 297 -149 l 435 -149 l 435 -288 l 297 -288 l 297 -149 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 z "},"\u1eb1":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 m 143 1358 l 243 1441 l 437 1200 l 350 1131 l 143 1358 z "},"\u1eb3":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 m 366 1412 q 486 1382 446 1412 q 526 1293 526 1353 q 380 1188 526 1188 l 321 1240 q 407 1276 407 1240 q 347 1314 407 1314 q 269 1305 309 1314 l 254 1400 q 366 1412 298 1412 m 311 1240 l 423 1234 l 423 1125 l 311 1125 l 311 1240 z "},"\u1eb5":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 360 838 q 209 898 259 838 q 158 1080 158 959 l 158 1080 l 269 1080 l 269 1080 q 292 979 269 1013 q 360 945 315 945 l 372 945 q 440 979 418 945 q 463 1080 463 1013 l 463 1080 l 574 1080 l 574 1080 q 524 898 574 959 q 372 838 473 838 l 360 838 m 464 1130 q 421 1138 443 1130 q 379 1161 400 1147 l 372 1166 q 364 1171 368 1168 q 357 1177 360 1174 q 315 1204 330 1196 q 286 1213 299 1213 q 250 1202 262 1213 q 238 1166 238 1190 l 238 1132 l 131 1132 l 131 1162 q 165 1289 131 1246 q 269 1331 200 1331 q 318 1320 295 1331 q 367 1292 342 1310 l 372 1288 l 380 1282 q 418 1256 404 1265 q 447 1247 433 1247 q 483 1260 471 1247 q 494 1299 494 1273 l 494 1326 l 602 1326 l 602 1303 q 567 1173 602 1217 q 464 1130 533 1130 z "},"\u1ea5":{"ha":739,"x_min":75,"x_max":768,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 m 474 1109 l 668 1350 l 768 1267 l 561 1039 l 474 1109 z "},"\u1ead":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 297 -149 l 435 -149 l 435 -288 l 297 -288 l 297 -149 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 z "},"\u1ea7":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 m 326 1267 l 426 1350 l 620 1109 l 533 1039 l 326 1267 z "},"\u1ea9":{"ha":739,"x_min":75,"x_max":709,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 m 549 1320 q 669 1291 629 1320 q 709 1201 709 1261 q 564 1097 709 1097 l 505 1148 q 590 1185 590 1148 q 530 1223 590 1223 q 452 1213 492 1223 l 437 1308 q 549 1320 481 1320 m 494 1148 l 606 1143 l 606 1034 l 494 1034 l 494 1148 z "},"\u1eab":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 579 911 l 502 840 l 366 968 l 231 840 l 153 911 l 366 1117 l 579 911 m 465 1156 q 422 1164 444 1156 q 380 1187 401 1173 l 372 1192 q 365 1197 369 1194 q 357 1202 361 1200 q 315 1230 331 1221 q 286 1239 300 1239 q 251 1227 262 1239 q 239 1192 239 1216 l 239 1158 l 132 1158 l 132 1188 q 166 1314 132 1272 q 270 1356 201 1356 q 319 1346 296 1356 q 368 1318 342 1336 l 373 1314 l 380 1308 q 419 1282 404 1291 q 448 1273 434 1273 q 483 1286 471 1273 q 495 1325 495 1299 l 495 1352 l 602 1352 l 602 1329 q 568 1199 602 1242 q 465 1156 534 1156 z "},"\u1ea3":{"ha":739,"x_min":75,"x_max":637,"o":"m 506 446 q 469 554 506 515 q 364 592 432 592 q 282 579 322 592 q 210 543 241 566 l 109 612 q 215 687 149 661 q 360 714 280 714 q 510 683 448 714 q 605 594 572 652 q 637 452 637 535 l 637 0 l 506 0 l 506 446 m 334 -10 q 139 44 203 -10 q 75 208 75 98 q 134 364 75 312 q 312 416 193 416 l 512 416 l 522 305 l 313 305 q 232 281 258 305 q 205 208 205 257 q 240 128 205 154 q 349 102 276 102 q 467 119 428 102 q 506 172 506 136 l 520 73 q 475 26 502 45 q 413 -1 448 8 q 334 -10 378 -10 m 366 1121 q 486 1092 446 1121 q 526 1002 526 1062 q 380 897 526 897 l 321 949 q 407 985 407 949 q 347 1023 407 1023 q 269 1014 309 1023 l 254 1109 q 366 1121 298 1121 m 311 949 l 423 943 l 423 834 l 311 834 l 311 949 z "},"\u1ebf":{"ha":745,"x_min":88,"x_max":778,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 m 484 1109 l 678 1350 l 778 1267 l 571 1039 l 484 1109 z "},"\u1ec7":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 307 -149 l 446 -149 l 446 -288 l 307 -288 l 307 -149 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 z "},"\u1ec1":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 m 336 1267 l 436 1350 l 630 1109 l 543 1039 l 336 1267 z "},"\u1ec3":{"ha":745,"x_min":88,"x_max":720,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 m 559 1320 q 680 1291 640 1320 q 720 1201 720 1261 q 574 1097 720 1097 l 515 1148 q 600 1185 600 1148 q 540 1223 600 1223 q 462 1213 502 1223 l 447 1308 q 559 1320 491 1320 m 504 1148 l 616 1143 l 616 1034 l 504 1034 l 504 1148 z "},"\u1ec5":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 589 911 l 512 840 l 376 968 l 241 840 l 163 911 l 376 1117 l 589 911 m 475 1156 q 432 1164 454 1156 q 390 1187 411 1173 l 382 1192 q 375 1197 379 1194 q 368 1202 371 1200 q 326 1230 341 1221 q 296 1239 310 1239 q 261 1227 273 1239 q 249 1192 249 1216 l 249 1158 l 142 1158 l 142 1188 q 176 1314 142 1272 q 280 1356 211 1356 q 329 1346 306 1356 q 378 1318 353 1336 l 383 1314 l 391 1308 q 429 1282 414 1291 q 458 1273 444 1273 q 493 1286 481 1273 q 505 1325 505 1299 l 505 1352 l 612 1352 l 612 1329 q 578 1199 612 1242 q 475 1156 544 1156 z "},"\u1ebb":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 376 1121 q 496 1092 456 1121 q 536 1002 536 1062 q 391 897 536 897 l 332 949 q 417 985 417 949 q 357 1023 417 1023 q 279 1014 319 1023 l 264 1109 q 376 1121 308 1121 m 321 949 l 433 943 l 433 834 l 321 834 l 321 949 z "},"\u0283":{"ha":442,"x_min":-8,"x_max":408,"o":"m -8 -155 l 91 -155 q 121 -140 111 -155 q 131 -101 131 -125 l 131 800 q 174 940 131 893 q 307 986 217 986 l 408 986 l 408 854 l 309 854 q 279 840 290 854 q 269 801 269 825 l 269 -100 q 226 -240 269 -193 q 94 -286 183 -286 l -8 -286 l -8 -155 z "},"\u1ebd":{"ha":745,"x_min":88,"x_max":663,"o":"m 397 -10 q 230 26 299 -10 q 124 134 161 63 q 88 305 88 205 l 88 385 q 123 563 88 489 q 224 675 158 637 q 385 714 291 714 q 535 670 473 714 q 630 543 597 626 q 663 342 663 459 l 663 296 l 189 296 l 189 408 l 532 408 l 532 408 q 487 542 526 494 q 385 589 449 589 q 263 538 306 589 q 220 392 220 486 l 220 302 q 266 168 220 215 q 397 121 312 121 q 480 138 439 121 q 554 186 522 155 l 554 186 l 645 95 l 645 95 q 528 17 593 45 q 397 -10 463 -10 m 474 846 q 432 854 453 846 q 389 877 410 863 l 382 882 q 374 887 378 884 q 367 892 370 890 q 325 920 340 911 q 296 929 309 929 q 260 918 272 929 q 248 882 248 906 l 248 848 l 141 848 l 141 878 q 176 1004 141 962 q 279 1046 210 1046 q 329 1036 305 1046 q 377 1008 352 1026 l 382 1004 l 390 998 q 429 972 414 981 q 457 963 444 963 q 493 976 481 963 q 505 1015 505 989 l 505 1042 l 612 1042 l 612 1019 q 577 889 612 932 q 474 846 543 846 z "},"\u0292":{"ha":616,"x_min":7,"x_max":545,"o":"m 272 -204 q 138 -175 193 -204 q 50 -88 82 -146 q 7 58 17 -30 l 7 59 l 148 59 l 148 58 q 189 -39 157 -7 q 279 -71 222 -71 q 369 -36 339 -71 q 399 72 399 0 l 399 73 q 365 188 399 151 q 255 226 330 226 l 158 226 l 158 303 l 255 351 q 416 320 352 351 q 513 229 481 290 q 545 75 545 168 l 545 75 q 477 -135 545 -65 q 272 -204 409 -204 m 340 572 l 42 572 l 42 704 l 514 704 l 514 585 l 312 303 l 158 303 l 340 572 z "},"\u0263":{"ha":694,"x_min":34,"x_max":667,"o":"m 351 -286 q 233 -258 269 -286 q 196 -167 196 -229 q 222 -61 196 -125 q 307 102 249 3 l 394 102 q 479 -61 452 3 q 505 -167 505 -125 q 469 -258 505 -229 q 351 -286 432 -286 m 351 -175 q 376 -166 368 -175 q 384 -136 384 -157 q 376 -97 384 -121 q 351 -32 368 -72 q 317 -136 317 -115 q 325 -166 317 -157 q 351 -175 333 -175 m 523 704 l 667 704 l 403 0 l 298 0 l 34 704 l 178 704 l 351 201 l 523 704 z "},"\u1ec9":{"ha":349,"x_min":65,"x_max":338,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 177 1121 q 298 1092 258 1121 q 338 1002 338 1062 q 192 897 338 897 l 133 949 q 218 985 218 949 q 158 1023 218 1023 q 80 1014 120 1023 l 65 1109 q 177 1121 109 1121 m 122 949 l 235 943 l 235 834 l 122 834 l 122 949 z "},"\u0129":{"ha":349,"x_min":-58,"x_max":413,"o":"m 109 704 l 247 704 l 247 0 l 109 0 l 109 704 m 275 846 q 233 854 254 846 q 191 877 212 863 l 183 882 q 176 887 180 884 q 168 892 172 890 q 126 920 142 911 q 97 929 111 929 q 61 918 73 929 q 50 882 50 906 l 50 848 l -58 848 l -58 878 q -23 1004 -58 962 q 81 1046 12 1046 q 130 1036 106 1046 q 178 1008 153 1026 l 184 1004 l 191 998 q 230 972 215 981 q 258 963 245 963 q 294 976 282 963 q 306 1015 306 989 l 306 1042 l 413 1042 l 413 1019 q 379 889 413 932 q 275 846 345 846 z "},"\u1ed1":{"ha":757,"x_min":88,"x_max":781,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 m 487 1109 l 681 1350 l 781 1267 l 574 1039 l 487 1109 z "},"\u1ed9":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 310 -149 l 448 -149 l 448 -288 l 310 -288 l 310 -149 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 z "},"\u1ed3":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 m 339 1267 l 439 1350 l 633 1109 l 546 1039 l 339 1267 z "},"\u1ed5":{"ha":757,"x_min":88,"x_max":722,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 m 562 1320 q 682 1291 642 1320 q 722 1201 722 1261 q 576 1097 722 1097 l 517 1148 q 603 1185 603 1148 q 543 1223 603 1223 q 465 1213 505 1223 l 450 1308 q 562 1320 494 1320 m 507 1148 l 619 1143 l 619 1034 l 507 1034 l 507 1148 z "},"\u1ed7":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 592 911 l 515 840 l 379 968 l 243 840 l 166 911 l 379 1117 l 592 911 m 477 1156 q 435 1164 456 1156 q 393 1187 414 1173 l 385 1192 q 378 1197 382 1194 q 370 1202 374 1200 q 328 1230 344 1221 q 299 1239 313 1239 q 263 1227 275 1239 q 252 1192 252 1216 l 252 1158 l 144 1158 l 144 1188 q 179 1314 144 1272 q 283 1356 214 1356 q 332 1346 309 1356 q 380 1318 355 1336 l 386 1314 l 393 1308 q 432 1282 417 1291 q 460 1273 447 1273 q 496 1286 484 1273 q 508 1325 508 1299 l 508 1352 l 615 1352 l 615 1329 q 581 1199 615 1242 q 477 1156 547 1156 z "},"\u1ecf":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 378 1121 q 499 1092 459 1121 q 539 1002 539 1062 q 393 897 539 897 l 334 949 q 420 985 420 949 q 359 1023 420 1023 q 281 1014 321 1023 l 267 1109 q 378 1121 311 1121 m 323 949 l 436 943 l 436 834 l 323 834 l 323 949 z "},"\u1edb":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 304 909 l 498 1150 l 597 1067 l 391 840 l 304 909 z "},"\u1ee3":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 310 -149 l 448 -149 l 448 -288 l 310 -288 l 310 -149 z "},"\u1edd":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 156 1067 l 256 1150 l 450 909 l 363 840 l 156 1067 z "},"\u1edf":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 378 1121 q 499 1092 459 1121 q 539 1002 539 1062 q 393 897 539 897 l 334 949 q 420 985 420 949 q 359 1023 420 1023 q 281 1014 321 1023 l 267 1109 q 378 1121 311 1121 m 323 949 l 436 943 l 436 834 l 323 834 l 323 949 z "},"\u1ee1":{"ha":762,"x_min":88,"x_max":769,"o":"m 445 704 l 547 704 q 611 729 588 704 q 634 798 634 753 l 634 848 l 769 848 l 769 785 q 717 653 769 700 q 569 606 665 606 l 445 606 l 445 704 m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 411 q 122 575 88 507 q 222 679 157 643 q 378 714 287 714 q 535 679 470 714 q 634 575 600 643 q 669 411 669 507 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 m 378 121 q 491 167 451 121 q 530 294 530 212 l 530 411 q 491 538 530 493 q 378 583 451 583 q 266 538 306 583 q 227 411 227 493 l 227 294 q 266 167 227 212 q 378 121 306 121 m 477 846 q 434 854 456 846 q 392 877 413 863 l 385 882 q 377 887 381 884 q 370 892 373 890 q 328 920 343 911 q 298 929 312 929 q 263 918 275 929 q 251 882 251 906 l 251 848 l 144 848 l 144 878 q 178 1004 144 962 q 282 1046 213 1046 q 331 1036 308 1046 q 380 1008 355 1026 l 385 1004 l 393 998 q 431 972 416 981 q 460 963 446 963 q 495 976 484 963 q 507 1015 507 989 l 507 1042 l 614 1042 l 614 1019 q 580 889 614 932 q 477 846 546 846 z "},"\u1ee7":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 386 1121 q 507 1092 467 1121 q 547 1002 547 1062 q 401 897 547 897 l 342 949 q 427 985 427 949 q 367 1023 427 1023 q 289 1014 329 1023 l 274 1109 q 386 1121 318 1121 m 331 949 l 444 943 l 444 834 l 331 834 l 331 949 z "},"\u1ee9":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 m 311 909 l 505 1150 l 605 1067 l 398 840 l 311 909 z "},"\u1ef1":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 m 317 -149 l 456 -149 l 456 -288 l 317 -288 l 317 -149 z "},"\u1eeb":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 m 163 1067 l 263 1150 l 457 909 l 370 840 l 163 1067 z "},"\u1eed":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 m 386 1121 q 507 1092 467 1121 q 547 1002 547 1062 q 401 897 547 897 l 342 949 q 427 985 427 949 q 367 1023 427 1023 q 289 1014 329 1023 l 274 1109 q 386 1121 318 1121 m 331 949 l 444 943 l 444 834 l 331 834 l 331 949 z "},"\u1eef":{"ha":861,"x_min":109,"x_max":868,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 537 606 l 537 704 l 646 704 q 710 729 687 704 q 733 798 733 753 l 733 848 l 868 848 l 868 785 q 816 653 868 700 q 668 606 764 606 l 537 606 m 484 846 q 442 854 463 846 q 399 877 420 863 l 392 882 q 385 887 389 884 q 377 892 380 890 q 335 920 351 911 q 306 929 319 929 q 270 918 282 929 q 258 882 258 906 l 258 848 l 151 848 l 151 878 q 186 1004 151 962 q 290 1046 220 1046 q 339 1036 315 1046 q 387 1008 362 1026 l 393 1004 l 400 998 q 439 972 424 981 q 467 963 454 963 q 503 976 491 963 q 515 1015 515 989 l 515 1042 l 622 1042 l 622 1019 q 588 889 622 932 q 484 846 553 846 z "},"\u0169":{"ha":772,"x_min":109,"x_max":671,"o":"m 533 704 l 671 704 l 671 0 l 533 0 l 533 704 m 247 276 q 284 162 247 202 q 391 121 322 121 q 496 157 458 121 q 533 260 533 193 l 543 113 q 472 25 521 60 q 352 -10 423 -10 q 172 65 235 -10 q 109 276 109 140 l 109 704 l 247 704 l 247 276 m 484 846 q 442 854 463 846 q 399 877 420 863 l 392 882 q 385 887 389 884 q 377 892 380 890 q 335 920 351 911 q 306 929 319 929 q 270 918 282 929 q 258 882 258 906 l 258 848 l 151 848 l 151 878 q 186 1004 151 962 q 290 1046 220 1046 q 339 1036 315 1046 q 387 1008 362 1026 l 393 1004 l 400 998 q 439 972 424 981 q 467 963 454 963 q 503 976 491 963 q 515 1015 515 989 l 515 1042 l 622 1042 l 622 1019 q 588 889 622 932 q 484 846 553 846 z "},"\u028b":{"ha":757,"x_min":88,"x_max":669,"o":"m 378 -10 q 222 26 287 -10 q 122 131 157 62 q 88 296 88 199 l 88 704 l 227 704 l 227 294 q 266 167 227 212 q 378 121 306 121 q 491 167 451 121 q 530 294 530 212 l 530 528 q 519 568 530 554 q 488 582 508 582 l 450 582 l 450 713 l 504 713 q 626 665 583 713 q 669 527 669 616 l 669 294 q 634 130 669 198 q 535 26 600 62 q 378 -10 470 -10 z "},"\u1ef5":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 419 -149 l 557 -149 l 557 -288 l 419 -288 l 419 -149 z "},"\u1ef3":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 130 1067 l 229 1150 l 423 909 l 336 840 l 130 1067 z "},"\u1ef9":{"ha":671,"x_min":34,"x_max":657,"o":"m 657 704 l 357 -165 q 315 -241 341 -213 q 250 -281 288 -269 q 155 -294 211 -294 l 127 -294 l 127 -161 l 155 -161 q 216 -145 193 -161 q 256 -92 239 -130 l 516 704 l 657 704 m 34 704 l 175 704 l 391 92 l 315 -58 l 34 704 m 450 846 q 408 854 429 846 q 366 877 387 863 l 358 882 q 351 887 355 884 q 343 892 347 890 q 301 920 317 911 q 272 929 286 929 q 236 918 248 929 q 224 882 224 906 l 224 848 l 117 848 l 117 878 q 152 1004 117 962 q 256 1046 186 1046 q 305 1036 281 1046 q 353 1008 328 1026 l 359 1004 l 366 998 q 405 972 390 981 q 433 963 420 963 q 469 976 457 963 q 481 1015 481 989 l 481 1042 l 588 1042 l 588 1019 q 554 889 588 932 q 450 846 519 846 z "},"\u051a":{"ha":913,"x_min":102,"x_max":886,"o":"m 446 273 l 518 365 l 886 76 l 814 -16 l 446 273 m 448 -10 q 267 35 345 -10 q 145 162 188 80 q 102 353 102 245 l 102 633 q 145 824 102 741 q 267 951 188 906 q 448 996 345 996 q 630 951 551 996 q 752 824 709 906 q 795 633 795 741 l 795 353 q 752 162 795 245 q 630 35 709 80 q 448 -10 551 -10 m 448 126 q 556 154 509 126 q 628 232 602 181 q 653 349 653 282 l 653 637 q 628 754 653 704 q 556 832 602 805 q 448 860 509 860 q 341 832 387 860 q 269 754 294 805 q 243 637 243 704 l 243 349 q 269 232 243 282 q 341 154 294 181 q 448 126 387 126 z "},"\u051c":{"ha":1176,"x_min":20,"x_max":1156,"o":"m 541 986 l 635 986 l 838 213 l 1012 986 l 1156 986 l 915 0 l 774 0 l 592 689 l 402 0 l 261 0 l 20 986 l 164 986 l 338 213 l 541 986 z "},"\u051b":{"ha":749,"x_min":88,"x_max":647,"o":"m 509 704 l 647 704 l 647 -286 l 509 -286 l 509 704 m 332 -12 q 200 21 254 -12 q 117 119 145 55 q 88 274 88 184 l 88 429 q 116 585 88 520 q 197 683 144 649 q 325 716 250 716 q 439 684 387 716 q 523 592 491 651 l 509 448 q 492 525 509 493 q 445 573 476 557 q 370 590 414 590 q 264 547 302 590 q 227 427 227 505 l 227 274 q 264 156 227 197 q 370 114 302 114 q 445 131 414 114 q 492 181 476 149 q 509 259 509 214 l 518 111 q 449 23 497 58 q 332 -12 401 -12 z "},"\u051d":{"ha":1074,"x_min":47,"x_max":1034,"o":"m 47 704 l 192 704 l 317 201 l 492 704 l 589 704 l 764 201 l 889 704 l 1034 704 l 817 0 l 712 0 l 541 486 l 369 0 l 264 0 l 47 704 z "},"\u20bf":{"ha":897,"x_min":122,"x_max":812,"o":"m 254 1106 l 392 1106 l 392 920 l 254 920 l 254 1106 m 471 1106 l 609 1106 l 609 920 l 471 920 l 471 1106 m 254 71 l 392 71 l 392 -120 l 254 -120 l 254 71 m 471 71 l 609 71 l 609 -120 l 471 -120 l 471 71 m 203 128 l 471 128 q 624 168 576 128 q 672 281 672 208 l 672 283 q 655 369 672 333 q 600 424 637 405 q 505 444 563 444 l 203 444 l 203 568 l 505 568 q 620 604 581 568 q 659 711 659 640 l 659 711 q 616 821 659 785 q 486 858 572 858 l 203 858 l 203 986 l 511 986 q 671 954 606 986 q 767 861 735 921 q 799 719 799 802 l 799 719 q 779 624 799 668 q 719 548 760 579 q 619 505 679 516 q 722 463 679 496 q 789 379 766 429 q 812 271 812 329 l 812 269 q 777 127 812 189 q 675 33 741 66 q 522 0 610 0 l 203 0 l 203 128 m 122 986 l 260 986 l 260 0 l 122 0 l 122 986 z "}},"familyName":"Bahnschrift","ascender":1381,"descender":-286,"underlinePosition":-68,"underlineThickness":34,"boundingBox":{"yMin":-376,"xMin":-1468,"yMax":1544,"xMax":1538},"resolution":1000,"original_font_information":{"format":0,"copyright":"\xa9 2018 Microsoft Corporation. All rights reserved.","fontFamily":"Bahnschrift","fontSubfamily":"Regular","uniqueID":"Bahnschrift Regular","fullName":"Bahnschrift","version":"Version 2.06","postScriptName":"Bahnschrift","manufacturer":"Microsoft Corporation","designer":"Aaron Bell","manufacturerURL":"http://www.microsoft.com/typography/fonts/","designerURL":"http://www.sajatypeworks.com","licence":"Microsoft supplied font. You may use this font to create, display, and print content as permitted by the license terms or terms of use, of the Microsoft product, service, or content in which this font was included. You may only (i) embed this font in content as permitted by the embedding restrictions included in this font; and (ii) temporarily download this font to a printer or other output device to help print content. Any other use is prohibited.","licenceURL":"https://docs.microsoft.com/typography/about","preferredFamily":"Bahnschrift","unknown1":"Weight","unknown2":"Width","unknown3":"Light","unknown4":"SemiLight","unknown5":"Regular","unknown6":"SemiBold","unknown7":"Bold","unknown8":"Light SemiCondensed","unknown9":"SemiLight SemiCondensed","unknown10":"SemiCondensed","unknown11":"SemiBold SemiCondensed","unknown12":"Bold SemiCondensed","unknown13":"Light Condensed","unknown14":"SemiLight Condensed","unknown15":"Condensed","unknown16":"SemiBold Condensed","unknown17":"Bold Condensed"},"cssFontWeight":"normal","cssFontStyle":"normal"}');function Yy(e){uh({TextGeometry:ky});var t=(new Wy).parse(Xy);return(0,$h.jsxs)($h.Fragment,{children:[(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[42.87,.03,-3.21],rotation:[-Math.PI/2,0,0],children:"8 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[84.98,.03,-26],rotation:[-Math.PI/2,0,0],children:"3 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[72.39,.03,-48.41],rotation:[-Math.PI/2,0,0],children:"5 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[50.3,.03,-67.22],rotation:[-Math.PI/2,0,0],children:"5 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[40.33,.03,-90.77],rotation:[-Math.PI/2,0,0],children:"5 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[-3.18,.03,-50.21],rotation:[-Math.PI/2,0,0],children:"8 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[18.57,.03,-28.29],rotation:[-Math.PI/2,0,0],children:"4 Km"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[0,.1,0],rotation:[-Math.PI/2,0,0],children:"p1"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[89.75,.1,-.49],rotation:[-Math.PI/2,0,0],children:"p2"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[0,.1,-88.18],rotation:[-Math.PI/2,0,0],children:"p6"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[70.72,.1,-88.18],rotation:[-Math.PI/2,0,0],children:"p5"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[41.51,.1,-50.03],rotation:[-Math.PI/2,0,0],children:"p4"}),(0,$h.jsx)(wy,{scale:[12,12,12],color:"black",position:[89.75,.1,-50.03],rotation:[-Math.PI/2,0,0],children:"p3"}),(0,$h.jsxs)("mesh",{position:[-80,.1,-60],rotation:[-Math.PI/2,0,0],children:[(0,$h.jsx)("textGeometry",{args:["BY :",{font:t,size:5,height:1}]}),(0,$h.jsx)("meshStandardMaterial",{attach:"material",color:"#99c6c2"})]}),(0,$h.jsxs)("mesh",{position:[-80,.1,-50],rotation:[-Math.PI/2,0,0],children:[(0,$h.jsx)("textGeometry",{args:["NAVPREET SINGH",{font:t,size:5,height:1}]}),(0,$h.jsx)("meshStandardMaterial",{attach:"material",color:"#70a7a8"})]})]})}function Hy(){var e=c((0,i.useState)(""),2),t=e[0],n=e[1],l=c((0,i.useState)(""),2),a=l[0],r=l[1],o=null,g=null;return(0,$h.jsxs)($h.Fragment,{children:[(0,$h.jsxs)(jh,{dpr:[1,1.5],shadows:!0,camera:{position:[0,5,15],fov:50},children:[(0,$h.jsx)("color",{attach:"background"}),(0,$h.jsx)("ambientLight",{intensity:0}),(0,$h.jsx)("spotLight",{position:[10,10,10],angle:.5,intensity:1,castShadow:!0,penumbra:1}),(0,$h.jsxs)(cv,{broadphase:"SAP",contactEquationRelaxation:4,friction:.001,allowSleep:!0,children:[(0,$h.jsx)(Ky,{rotation:[-Math.PI/2,0,0],userData:{id:"floor"}}),(0,$h.jsx)(Yy,{}),(0,$h.jsx)(Ny,{}),(0,$h.jsx)(Jf,{position:[0,2,0],rotation:[0,-Math.PI/4,0],angularVelocity:[0,.5,0],wheelRadius:.3})]}),(0,$h.jsx)(i.Suspense,{fallback:null,children:(0,$h.jsx)(Zv,{preset:"warehouse"})}),(0,$h.jsx)(Sv,{})]}),(0,$h.jsxs)("div",{style:{position:"absolute",top:30,left:40},children:[(0,$h.jsx)("pre",{}),(0,$h.jsxs)("div",{className:"Menu",children:[(0,$h.jsx)("h4",{children:"Enter starting point and Destination point"}),(0,$h.jsxs)("form",{children:[(0,$h.jsx)("label",{for:"s",children:"Start:"}),(0,$h.jsx)("br",{}),(0,$h.jsx)("input",{name:"s",type:"text",value:t,onChange:function(e){return n(e.target.value)}}),(0,$h.jsx)("br",{}),(0,$h.jsx)("label",{for:"e",children:"End:"}),(0,$h.jsx)("br",{}),(0,$h.jsx)("input",{name:"e",type:"text",value:a,onChange:function(e){return r(e.target.value)}}),(0,$h.jsx)("br",{}),(0,$h.jsx)("button",{className:"btn success",onClick:function(e){e.preventDefault();var n=Pf(t,a).split(" "),i=["r_1","r_2","r_3","r_4","r_5","r_6","r_7"];if(o!==t||g!==a)for(var l=0;l<i.length;l++)Fy.items[i[l]]="#6b5b95";o=t,g=a;for(var r=1;r<n.length;r++)Fy.items[n[r]]="Red",console.log(n[r])},children:"Find"})]})]})]})]})}function Ky(e){var t,n,i=c(av("Plane",(function(){return o({type:"Static",material:"ground"},e)}),(function(){return[]}),t,n),1)[0];return(0,$h.jsx)("group",{ref:i,children:(0,$h.jsxs)("mesh",{receiveShadow:!0,children:[(0,$h.jsx)("planeGeometry",{args:[1e3,1e3]}),(0,$h.jsx)("meshStandardMaterial",{color:"#FD8042"})]})})}var Fy=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!vb(t))throw new Error("object required");var n=bb.get(t);if(n)return n;var i=yb,l=new Set,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++yb;i!==t&&(i=t,l.forEach((function(n){return n(e,t)})))},r=new Map,o=function(e){var t=r.get(e);return t||(t=function(t,n){var i=v(t);i[1]=[e].concat(v(i[1])),a(i,n)},r.set(e,t)),t},g=function(e){var t=r.get(e);return r.delete(e),t},s=function(e,t){var n=Gb.get(t);if((null==n?void 0:n[0])===i)return n[1];var l=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Ib(l,!0),Gb.set(t,[i,l]),Reflect.ownKeys(e).forEach((function(n){var i=Reflect.get(e,n,t);if(pb.has(i))Ib(i,!1),l[n]=i;else if(i instanceof Promise)if(Ab in i)l[n]=i[Ab];else{var a=i[mb]||i;Object.defineProperty(l,n,{get:function(){if(Ab in i)return i[Ab];throw a}})}else(null==i?void 0:i[Cb])?l[n]=i[db]:l[n]=i})),Object.freeze(l),l},I=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t)),u={get:function(e,t,n){return t===cb?i:t===Cb?l:t===db?s(e,n):t===hb?u:Reflect.get(e,t,n)},deleteProperty:function(e,t){var n=Reflect.get(e,t),i=null==n?void 0:n[Cb];i&&i.delete(g(t));var l=Reflect.deleteProperty(e,t);return l&&a(["delete",[t],n]),l},is:Object.is,canProxy:fb,set:function(t,n,i,l){var r,s=Reflect.has(t,n),I=Reflect.get(t,n,l);if(s&&this.is(I,i))return!0;var u,c=null==I?void 0:I[Cb];return c&&c.delete(g(n)),vb(i)&&(i=sb(i)||i),(null==(r=Object.getOwnPropertyDescriptor(t,n))?void 0:r.set)?u=i:i instanceof Promise?u=i.then((function(e){return u[Ab]=e,a(["resolve",[n],e]),e})).catch((function(e){u[mb]=e,a(["reject",[n],e])})):(null==i?void 0:i[Cb])?(u=i)[Cb].add(o(n)):this.canProxy(i)?(u=e(i))[Cb].add(o(n)):u=i,Reflect.set(t,n,u,l),a(["set",[n],i,I]),!0}},c=new Proxy(I,u);return bb.set(t,c),Reflect.ownKeys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);n.get||n.set?Object.defineProperty(I,e,n):c[e]=t[e]})),c}({current:null,items:{P_base:"#d0e3e0",p_red:"#d0e3e0",r_1:"#6b5b95",r_2:"#6b5b95",r_3:"#6b5b95",r_4:"#6b5b95",r_5:"#6b5b95",r_6:"#6b5b95",r_7:"#6b5b95"}});function Ny(e){var t=Object.assign({},e),n=(0,i.useRef)(),l=Kf("/map.glb"),a=l.nodes,r=l.materials,g=xb(Fy);return(0,$h.jsxs)("group",o(o({ref:n},t),{},{dispose:null,children:[(0,$h.jsx)("mesh",{geometry:a.P1.geometry,material:r.P_base,"material-color":g.items.P_base,position:[0,.1,0],scale:2.59,userData:{id:"p1"}}),(0,$h.jsx)("mesh",{geometry:a.P2.geometry,material:r.P_base,position:[89.75,.1,-.49],scale:2.59}),(0,$h.jsx)("mesh",{geometry:a.P6.geometry,material:r.P_base,position:[0,.1,-88.18],scale:2.59}),(0,$h.jsx)("mesh",{geometry:a.P5.geometry,material:r.P_base,position:[70.72,.1,-88.18],scale:2.59}),(0,$h.jsx)("mesh",{geometry:a.P4.geometry,material:r.P_base,position:[41.51,.1,-50.03],scale:3.65}),(0,$h.jsx)("mesh",{geometry:a.P3.geometry,material:r.P_base,position:[89.75,.1,-50.03],scale:2.59}),(0,$h.jsx)("mesh",{geometry:a.R1.geometry,material:r.r_1,"material-color":g.items.r_1,position:[44.93,.1,.12],scale:[40.31,1.62,.6]}),(0,$h.jsx)("mesh",{geometry:a.R6.geometry,material:r.r_6,"material-color":g.items.r_6,position:[44.93,.1,-87.73],scale:[40.31,1.62,.6]}),(0,$h.jsx)("mesh",{geometry:a.R7.geometry,material:r.r_7,"material-color":g.items.r_7,position:[-.56,.1,-44.1],rotation:[0,Math.PI/2,0],scale:[39.42,1.62,.6]}),(0,$h.jsx)("mesh",{geometry:a.R4.geometry,material:r.r_4,"material-color":g.items.r_4,position:[18.51,.1,-24.53],rotation:[0,.93,0],scale:[25.81,1.62,.6]}),(0,$h.jsx)("mesh",{geometry:a.R2.geometry,material:r.r_2,"material-color":g.items.r_2,position:[88.12,.1,-24.21],rotation:[0,Math.PI/2,0],scale:[19.13,1.62,.6]}),(0,$h.jsx)("mesh",{geometry:a.R3.geometry,material:r.r_3,"material-color":g.items.r_3,position:[43.21,.1,-49.43],scale:[1,1,.6]}),(0,$h.jsx)("mesh",{geometry:a.R5.geometry,material:r.r_5,"material-color":g.items.r_5,position:[42.72,.1,-49.2],scale:[.96,1,.6]})]}))}var zy=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,i=t.getFID,l=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),l(e),a(e),r(e)}))};l.createRoot(document.getElementById("root")).render((0,$h.jsx)(i.StrictMode,{children:(0,$h.jsx)(Hy,{})})),console.log(zy())}()}();
//# sourceMappingURL=main.76c52c59.js.map